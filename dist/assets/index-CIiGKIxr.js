import{r as ks,a as Cs}from"./react-vendor-D3F3s8fL.js";import{r as l,T as we,U as as,H as ms,Q as ze,X as de,a as Be,C as Ve,b as oe,D as Ce,c as be,N as Se,S as Ss,Z as xe,M as Qe,L as Ye,d as Ze,e as xs,f as Xe,B as us,g as ye,E as Je,h as Ps,i as Ue,j as Ie,A as ve,k as He,l as Gs,G as rs,P as es,m as Te,n as ss,o as ts,p as Ms}from"./icons-CVThiD_y.js";import{Q as $e}from"./qrcode-wh-Uk1IB.js";import{i as Es,g as Rs,a as Ts,G as zs,o as $s,s as ls,b as As,c as Ls,d as Us,u as Is,e as Ds,r as D,f as Y,h as ee,j as Pe,k as je}from"./firebase-DUuZ1j83.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const w of o)if(w.type==="childList")for(const y of w.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&m(y)}).observe(document,{childList:!0,subtree:!0});function d(o){const w={};return o.integrity&&(w.integrity=o.integrity),o.referrerPolicy&&(w.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?w.credentials="include":o.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function m(o){if(o.ep)return;o.ep=!0;const w=d(o);fetch(o.href,w)}})();var Ke={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns;function Os(){if(ns)return Me;ns=1;var u=ks(),h=Symbol.for("react.element"),d=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,o=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function y(j,P,G){var k,C={},E=null,N=null;G!==void 0&&(E=""+G),P.key!==void 0&&(E=""+P.key),P.ref!==void 0&&(N=P.ref);for(k in P)m.call(P,k)&&!w.hasOwnProperty(k)&&(C[k]=P[k]);if(j&&j.defaultProps)for(k in P=j.defaultProps,P)C[k]===void 0&&(C[k]=P[k]);return{$$typeof:h,type:j,key:E,ref:N,props:C,_owner:o.current}}return Me.Fragment=d,Me.jsx=y,Me.jsxs=y,Me}var os;function Ws(){return os||(os=1,Ke.exports=Os()),Ke.exports}var e=Ws(),De={},is;function Hs(){if(is)return De;is=1;var u=Cs();return De.createRoot=u.createRoot,De.hydrateRoot=u.hydrateRoot,De}var Fs=Hs();const Bs={apiKey:"AIzaSyBplm3Xt3Mru_Sxi2g3uptgbzXbQ8KZ0Aw",authDomain:"bowling-fun.firebaseapp.com",databaseURL:"https://bowling-fun-default-rtdb.firebaseio.com",projectId:"bowling-fun",storageBucket:"bowling-fun.firebasestorage.app",messagingSenderId:"1041099466681",appId:"1:1041099466681:web:55553970cd19f150dc3868"},hs=Es(Bs),O=Rs(hs),Ne=Ts(hs),_s=new zs,qs=["davesfx@gmail.com","daves.seeker@gmail.com"],Ae=u=>!u||!u.email?!1:qs.includes(u.email.toLowerCase()),gs=l.createContext();function ue(){return l.useContext(gs)}function Qs({children:u}){const[h,d]=l.useState(null),[m,o]=l.useState(!0),[w,y]=l.useState(!1),[j,P]=l.useState(!1),G=async z=>{if(!z)return;const I=D(O,`users/${z.uid}`),S=await Y(I);if(!S.exists())await ee(I,{uid:z.uid,displayName:z.displayName||"Guest User",email:z.email||null,photoURL:z.photoURL||null,isAnonymous:z.isAnonymous,createdAt:Date.now(),subscription:{isActive:!1,plan:null,startDate:null,endDate:null,stripeSubscriptionId:null},credits:0,stats:{makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}});else{const _=S.val()||{},Z={displayName:z.displayName||_.displayName||"Guest User",photoURL:z.photoURL||_.photoURL||null,email:z.email||_.email||null,lastLogin:Date.now()};await ee(I,{..._,...Z})}},k=async()=>{try{const z=await Ds(Ne,_s);return await G(z.user),y(!1),z.user}catch(z){throw console.error("Error signing in with Google:",z),z}},C=async(z,I,S)=>{try{const _=await Us(Ne,z,I);return S&&await Is(_.user,{displayName:S}),await G(_.user),y(!1),_.user}catch(_){throw console.error("Error signing up with email:",_),_}},E=async(z,I)=>{try{const S=await Ls(Ne,z,I);return await G(S.user),y(!1),S.user}catch(S){throw console.error("Error signing in with email:",S),S}},N=async()=>{try{const z=await ls(Ne);return await G(z.user),y(!0),z.user}catch(z){throw console.error("Error signing in anonymously:",z),z}},T=async()=>{try{await As(Ne),y(!1)}catch(z){throw console.error("Error signing out:",z),z}};l.useEffect(()=>$s(Ne,async I=>{if(I)d(I),y(I?.isAnonymous||!1),P(Ae(I)),await G(I),o(!1);else try{const S=await ls(Ne);d(S.user),y(!0),P(!1),await G(S.user)}catch(S){console.error("Error auto-signing in as guest:",S)}finally{o(!1)}}),[]);const f={currentUser:h,isGuest:w,isAdmin:j,signInWithGoogle:k,signUpWithEmail:C,signInWithEmail:E,continueAsGuest:N,signOut:T,loading:m};return e.jsx(gs.Provider,{value:f,children:!m&&u})}function Js(){const{currentUser:u}=ue(),h=async(y,j)=>{if(u)try{const P=D(O,`users/${u.uid}/stats/${y}`),G=await Y(P),C={...G.exists()?G.val():{}};Object.keys(j).forEach(E=>{typeof j[E]=="number"?C[E]=(C[E]||0)+j[E]:C[E]=j[E]}),await ee(P,C)}catch(P){console.error("Error updating stats:",P)}};return{recordMakesOrMissesGame:async y=>{const{isWinner:j,points:P}=y;await h("makesOrMisses",{gamesPlayed:1,totalPoints:P,wins:j?1:0,losses:j?0:1})},recordMatchPlayGame:async y=>{const{outcome:j}=y;await h("matchPlay",{gamesPlayed:1,wins:j==="win"?1:0,losses:j==="loss"?1:0,ties:j==="tie"?1:0})},recordKingOfTheHillGame:async y=>{const{wonHighGame:j,wonHighTotal:P}=y;await h("kingOfTheHill",{gamesPlayed:1,highGameWins:j?1:0,highTotalWins:P?1:0})},recordBracketPlayTournament:async y=>{const{isChampion:j,isRunnerUp:P}=y;await h("bracketPlay",{tournamentsPlayed:1,championships:j?1:0,runnerUps:P?1:0})}}}function Ks(){const{currentUser:u}=ue(),{recordMakesOrMissesGame:h}=Js(),[d,m]=l.useState(""),[o,w]=l.useState(""),[y,j]=l.useState(!1),[P,G]=l.useState(!1),[k,C]=l.useState(!1),[E,N]=l.useState(!1),[T,f]=l.useState([]),[z,I]=l.useState(""),[S,_]=l.useState(0),[Z,M]=l.useState(0),[W,H]=l.useState(null),[U,B]=l.useState(!1),[re,K]=l.useState({}),ce=.25,X=t=>(t*ce).toFixed(2),ie=(t,i)=>`${t}->${i}`,se=()=>`${window.location.origin+window.location.pathname}?join=${d}&game=makes-or-misses`,ae=t=>{let i=0,g=0;return Object.entries(re).forEach(([p,c])=>{if(!c)return;const[A,r]=p.split("->").map(Number);r===t&&(i+=c),A===t&&(g+=c)}),i-g},le=()=>Math.random().toString(36).substring(2,8).toUpperCase(),q=t=>t.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ");l.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("join");i&&w(i.toUpperCase())},[]),l.useEffect(()=>{if(!d)return;const t=D(O,`games/${d}`),i=Pe(t,g=>{const p=g.val();p&&(f(p.players||[]),_(p.currentRound||0),M(p.activePlayerIndex||0),H(p.activePlayerChoice||null),B(p.gameStarted||!1),K(p.ledger||{}))});return()=>i()},[d]);const Q=()=>{const t=le();m(t),j(!0),G(!0);const i=u?.displayName||u?.email?.split("@")[0]||"Player",g=[{id:Date.now(),name:q(i),score:0}],p=D(O,`games/${t}`);ee(p,{players:g,currentRound:0,activePlayerIndex:0,activePlayerChoice:null,gameStarted:!1,ledger:{},createdAt:Date.now()})},ne=async()=>{if(!o.trim())return;const t=o.toUpperCase(),i=D(O,`games/${t}`),g=await Y(i);if(g.exists()){m(t),j(!1),G(!0);const p=g.val(),c=u?.displayName||u?.email?.split("@")[0]||"Player";if(!p.players?.find(r=>r.name.toLowerCase()===c.toLowerCase())&&!p.gameStarted){const r=[...p.players||[],{id:Date.now(),name:q(c),score:0}];await ee(i,{...p,players:r})}}else alert("Game not found! Check the code and try again.")},J=t=>{if(!d)return;const i=D(O,`games/${d}`);ee(i,{players:T,currentRound:S,activePlayerIndex:Z,activePlayerChoice:W,gameStarted:U,ledger:re,...t})},te=()=>{if(z.trim()&&!U){const t=[...T,{id:Date.now(),name:q(z.trim()),score:0}];J({players:t}),I("")}},a=()=>{T.length>=2&&J({gameStarted:!0,currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},R=t=>{J({activePlayerChoice:t})},x=t=>{const i=T[Z],g=T.filter((A,r)=>r!==Z),p=T.map((A,r)=>r===Z?W===t?{...A,score:A.score+(T.length-1)}:A:(W==="make"?"miss":"make")===t?{...A,score:A.score+1}:A),c={...re};W===t?g.forEach(A=>{const r=ie(A.id,i.id);c[r]=(c[r]||0)+1}):g.forEach(A=>{const r=ie(i.id,A.id);c[r]=(c[r]||0)+1}),J({players:p,ledger:c,currentRound:S<50?S+1:S,activePlayerIndex:S<50?(Z+1)%T.length:Z,activePlayerChoice:null})},v=async()=>{if(!u||!n)return;const t=T.find(i=>i.name.toLowerCase()===u.displayName?.toLowerCase()||i.id===u.uid);if(t){const i=Math.max(...T.map(p=>p.score)),g=t.score===i;await h({isWinner:g,points:t.score})}},L=()=>{v(),J({players:T.map(t=>({...t,score:0})),ledger:{},currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},b=()=>{G(!1),m(""),w(""),j(!1)},s=T[Z],n=S>50;return P?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",right:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>N(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(6, 182, 212, 0.2)",border:"1px solid rgb(6, 182, 212)",color:"rgb(34, 211, 238)"},title:"How to play",children:e.jsx(ms,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(we,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:d})]}),e.jsx("button",{onClick:()=>C(!k),className:"btn-primary-cyan p-2",title:"Show QR code to join",children:e.jsx(ze,{size:20})})]})]}),E&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>N(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(34, 211, 238)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>N(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(de,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600",children:e.jsx(we,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸŽ¯ The Game"}),e.jsx("p",{className:"text-sm",children:'One player predicts "Make" or "Miss". Everyone else gets the opposite prediction automatically!'})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸ’° Scoring"}),e.jsx("p",{className:"text-sm",children:"Guess correctly? +1 point! Wrong? -1 point. Play 50 rounds and watch the leaderboard!"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸ“± Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Each round = $0.25 per point"}),e.jsx("li",{children:"Players rotate who chooses"}),e.jsx("li",{children:"Check the debt breakdown at the end!"})]})]})]}),e.jsx("button",{onClick:()=>N(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(6, 182, 212), rgb(59, 130, 246))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),k&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:se(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-slate-400 mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:d})]}),e.jsx("button",{onClick:()=>C(!1),className:"mt-3 text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Hide QR Code"})]})}),U?e.jsxs("div",{className:"space-y-6",children:[n?e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"ðŸŽ‰ Game Over! ðŸŽ‰"}),e.jsx("p",{className:"text-xl mb-6 text-slate-300",children:"50 rounds completed!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Round ",S]}),e.jsxs("p",{className:"text-lg mt-2 text-slate-300",children:[e.jsx("span",{className:"font-bold text-purple-600",children:s?.name}),"'s turn to choose"]})]}),e.jsxs("div",{className:"bg-amber-900/30 border-2 border-amber-500 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-center mb-4 text-white",children:[s?.name,", make your choice:"]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>R("make"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:W==="make"?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(34, 197, 94)",color:W==="make"?"rgb(255, 255, 255)":"rgb(34, 197, 94)"},onMouseEnter:t=>{W!=="make"&&(t.currentTarget.style.backgroundColor="rgba(34, 197, 94, 0.1)")},onMouseLeave:t=>{W!=="make"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(Ve,{className:"inline mr-2",size:24}),"Make"]}),e.jsxs("button",{onClick:()=>R("miss"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:W==="miss"?"rgb(239, 68, 68)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(239, 68, 68)",color:W==="miss"?"rgb(255, 255, 255)":"rgb(239, 68, 68)"},onMouseEnter:t=>{W!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)")},onMouseLeave:t=>{W!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(de,{className:"inline mr-2",size:24}),"Miss"]})]}),W&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mt-4",children:[e.jsxs("p",{className:"text-center text-slate-300 mb-3",children:[e.jsx("span",{className:"font-bold",children:s?.name})," chose:"," ",e.jsx("span",{className:`font-bold ml-2 ${W==="make"?"text-green-600":"text-red-600"}`,children:W==="make"?"MAKES":"MISSES"})]}),e.jsxs("p",{className:"text-center text-sm text-slate-400 mb-4",children:["All other players automatically get:"," ",e.jsx("span",{className:`font-bold ml-2 ${W==="miss"?"text-green-600":"text-red-600"}`,children:W==="miss"?"MAKES":"MISSES"})]}),e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsx("h4",{className:"font-bold text-center mb-3 text-white",children:"What was the result?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>x("make"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(34, 197, 94)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(22, 163, 74)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(34, 197, 94)",children:[e.jsx(Ve,{className:"inline mr-2",size:20}),"Made It!"]}),e.jsxs("button",{onClick:()=>x("miss"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(239, 68, 68)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(220, 38, 38)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(239, 68, 68)",children:[e.jsx(de,{className:"inline mr-2",size:20}),"Missed!"]})]})]})]})]}),e.jsx("div",{className:"player-grid",children:T.map((t,i)=>{const g=i===Z,p=g?W:W==="make"?"miss":W==="miss"?"make":null;return e.jsxs("div",{className:`player-card ${g?"active bg-amber-900/30 border-2 border-amber-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm sm:text-base text-white",children:[t.name," ",g&&"ðŸ‘ˆ"]}),e.jsx("span",{className:"score-badge",children:t.score})]}),p&&e.jsx("div",{className:`text-center py-2 rounded font-semibold text-sm ${p==="make"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:p==="make"?"MAKES":"MISSES"})]},t.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-amber-400",size:24}),"Leaderboard"]}),e.jsx("div",{className:"space-y-2",children:[...T].sort((t,i)=>i.score-t.score).map((t,i)=>{const g=(t.score*ce).toFixed(2),p=X(ae(t.id));return e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[i===0&&"ðŸ¥‡"," ",i===1&&"ðŸ¥ˆ"," ",i===2&&"ðŸ¥‰"," ",t.name]}),e.jsxs("span",{className:"font-bold text-sm",style:{color:"rgb(192, 132, 252)"},children:[t.score," pts ($",g,") Â· Net $",p]})]},t.id)})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4 mt-4",children:[e.jsx("h4",{className:"font-bold text-md mb-2 text-white",children:"ðŸ’µ Owes Breakdown"}),T.length<=1?e.jsx("p",{className:"text-slate-400 text-sm",children:"Add more players to calculate owes."}):(()=>{const t={};T.forEach(g=>t[g.id]=[]),Object.entries(re).forEach(([g,p])=>{if(!p)return;const[c,A]=g.split("->").map(Number),r=T.find(F=>F.id===c),$=T.find(F=>F.id===A);!r||!$||t[A].push({debtorId:c,debtorName:r.name,pts:p,money:X(p)})});const i=T.map(g=>{const p=t[g.id]||[],c=p.reduce((A,r)=>A+Number(r.money),0).toFixed(2);return{cr:g,items:p,total:c}}).filter(g=>g.items.length>0);return i.length===0?e.jsx("p",{className:"text-slate-300 text-sm",children:"No debts yet."}):e.jsx("div",{className:"space-y-4",children:i.map(({cr:g,items:p,total:c})=>e.jsxs("div",{className:"bg-slate-800/50 rounded-md p-3",children:[e.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Payouts to ",e.jsx("span",{className:"font-semibold",children:g.name}),":"]}),e.jsx("ul",{className:"list-disc ml-5 space-y-1",children:p.map(A=>e.jsxs("li",{className:"text-white text-sm",children:[A.debtorName," owes ",g.name," $",A.money," (",A.pts," pts)"]},A.debtorId))}),e.jsxs("p",{className:"text-slate-300 text-sm mt-2",children:[g.name," total to collect: ",e.jsxs("span",{className:"font-semibold",children:["$",c]})]})]},g.id))})})()]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:L,className:"flex-1 btn-primary-cyan",children:"Reset Scores"}),e.jsx("button",{onClick:b,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(103, 232, 249)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:d})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:z,onChange:t=>I(t.target.value),onKeyDown:t=>t.key==="Enter"&&te(),placeholder:"Enter Bowler's Name",className:"game-input"}),e.jsxs("button",{onClick:te,className:"btn-primary-orange flex items-center justify-center gap-2",children:[e.jsx(Be,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),T.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Bowlers (",T.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:T.map(t=>e.jsx("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow text-white",children:t.name},t.id))})]}),e.jsx("button",{onClick:a,disabled:T.length<2,className:"w-full py-4 rounded-lg transition font-bold text-xl disabled:cursor-not-allowed",style:{backgroundColor:T.length<2?"rgb(209, 213, 219)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:T.length<2?.5:1},onMouseEnter:t=>{T.length>=2&&(t.currentTarget.style.backgroundColor="rgb(22, 163, 74)")},onMouseLeave:t=>{T.length>=2&&(t.currentTarget.style.backgroundColor="rgb(34, 197, 94)")},children:T.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(we,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Multiplayer Bowling Predictor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:Q,className:"w-full btn-primary-cyan flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(as,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:o,onChange:t=>w(t.target.value.toUpperCase()),onKeyDown:t=>t.key==="Enter"&&ne(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:ne,className:"w-full btn-primary-cyan text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function Vs(){const{currentUser:u}=ue(),h=u&&Ae(u.email),d=u?.isAnonymous,[m,o]=l.useState(""),[w,y]=l.useState(""),[j,P]=l.useState(!1),[G,k]=l.useState(!1),[C,E]=l.useState(!1),[N,T]=l.useState({name:"",id:null}),[f,z]=l.useState({name:"",id:null}),[I,S]=l.useState(!1),[_,Z]=l.useState(1),[M,W]=l.useState({game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),[H,U]=l.useState({perGame:5,totals:5}),B=()=>`${window.location.origin+window.location.pathname}?join=${m}&game=match-play`,re=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("join");v&&y(v.toUpperCase())},[]),l.useEffect(()=>{if(!m)return;const x=D(O,`matchplay/${m}`),v=Pe(x,L=>{const b=L.val();b&&(T(b.player1||{name:"",id:null}),z(b.player2||{name:"",id:null}),S(b.gameStarted||!1),Z(b.currentGame||1),W(b.scores||{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),U(b.stakes||{perGame:5,totals:5}))});return()=>v()},[m]);const K=()=>{if(d){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const x=re();o(x),P(!0),k(!0);const v=D(O,`matchplay/${x}`);ee(v,{player1:{name:"",id:null,uid:null},player2:{name:"",id:null,uid:null},gameStarted:!1,currentGame:1,scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},stakes:{perGame:5,totals:5},createdAt:Date.now()})},ce=async()=>{if(!w.trim())return;if(d){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const x=w.toUpperCase(),v=D(O,`matchplay/${x}`);(await Y(v)).exists()?(o(x),P(!1),k(!0)):alert("Game not found! Check the code and try again.")},X=async x=>{if(m)try{const v=D(O,`matchplay/${m}`),b=(await Y(v)).val()||{};await ee(v,{...b,...x})}catch(v){console.error("Error updating game:",v)}},ie=(x,v)=>{X(x===1?{player1:{name:v,id:Date.now(),uid:u?.uid}}:{player2:{name:v,id:Date.now(),uid:u?.uid}})},se=()=>{N.name&&f.name&&X({gameStarted:!0})},ae=async(x,v,L)=>{if(!m){console.log("No game code");return}if(!(h||(v===1?N:f).uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:x,playerNum:v,score:L});try{const n=D(O,`matchplay/${m}`),i=(await Y(n)).val();if(console.log("Current data:",i),!i){console.error("No current data found");return}const g=JSON.parse(JSON.stringify(i.scores||{})),p=`game${x}`,c=`player${v}`;g[p]||(g[p]={player1:null,player2:null}),g[p][c]=L===""?null:parseInt(L),console.log("New scores:",g),await ee(n,{...i,scores:g}),console.log("Score updated successfully")}catch(n){console.error("Error updating score:",n),alert("Error updating score: "+n.message)}},le=async(x,v)=>{if(m)try{const L=D(O,`matchplay/${m}`),s=(await Y(L)).val();if(!s)return;const n={...s.stakes};n[x]=parseFloat(v)||0,await ee(L,{...s,stakes:n})}catch(L){console.error("Error updating stakes:",L)}},q=()=>{const x=(M?.game1?.player1||0)+(M?.game2?.player1||0)+(M?.game3?.player1||0),v=(M?.game1?.player2||0)+(M?.game2?.player2||0)+(M?.game3?.player2||0);return{player1:x,player2:v}},Q=()=>{let x=0,v=0;["game1","game2","game3"].forEach(n=>{const t=M?.[n]?.player1,i=M?.[n]?.player2;t!=null&&i!==null&&i!==void 0&&(t>i?x+=H.perGame:i>t&&(v+=H.perGame))});const L=q();L.player1>L.player2?x+=H.totals:L.player2>L.player1&&(v+=H.totals);const b=x-v,s=v-x;return{player1:b,player2:s}},ne=()=>{X({scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},currentGame:1})},J=()=>{k(!1),o(""),y(""),P(!1)},te=q(),a=Q(),R=M?.game1?.player1!==null&&M?.game1?.player1!==void 0&&M?.game1?.player2!==null&&M?.game1?.player2!==void 0&&M?.game2?.player1!==null&&M?.game2?.player1!==void 0&&M?.game2?.player2!==null&&M?.game2?.player2!==void 0&&M?.game3?.player1!==null&&M?.game3?.player1!==void 0&&M?.game3?.player2!==null&&M?.game3?.player2!==void 0;return G?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(oe,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:m})]}),e.jsx("button",{onClick:()=>E(!C),className:"btn-primary-green p-2",title:"Show QR code to join",children:e.jsx(ze,{size:20})})]})]}),C&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Match"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:B(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:m})]}),e.jsx("button",{onClick:()=>E(!1),className:"mt-3 text-green-400 hover:text-green-300 font-semibold text-sm",children:"Hide QR Code"})]})}),I?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-4",children:"Best of 3 Games"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:N.name})}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:f.name})})]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(x=>e.jsxs("div",{className:"game-card",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 text-white",children:["Game ",x]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:N.name}),e.jsx("input",{type:"number",value:M[`game${x}`]?.player1??"",onChange:v=>ae(x,1,v.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:f.name}),e.jsx("input",{type:"number",value:M[`game${x}`]?.player2??"",onChange:v=>ae(x,2,v.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]})]}),M[`game${x}`]?.player1!==null&&M[`game${x}`]?.player1!==void 0&&M[`game${x}`]?.player2!==null&&M[`game${x}`]?.player2!==void 0&&e.jsx("div",{className:"mt-3 text-center",children:M[`game${x}`].player1>M[`game${x}`].player2?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",N.name," wins (+$",H.perGame,")"]}):M[`game${x}`].player2>M[`game${x}`].player1?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",f.name," wins (+$",H.perGame,")"]}):e.jsx("p",{className:"text-primary font-semibold",children:"Tie"})})]},x))}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-green-900/30 rounded-lg p-4 border-2 border-green-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-green-400",size:24}),"Totals"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:N.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:te.player1})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:f.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:te.player2})]})]}),R&&e.jsx("div",{className:"mt-3 text-center",children:te.player1>te.player2?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",N.name," wins totals (+$",H.totals,")"]}):te.player2>te.player1?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",f.name," wins totals (+$",H.totals,")"]}):e.jsx("p",{className:"text-primary font-semibold text-lg",children:"Totals tied"})})]}),R&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Ce,{className:"text-green-400",size:24}),"Final Payout"]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:a.player1>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[N.name," wins $",Math.abs(a.player1).toFixed(2)]}):a.player2>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[f.name," wins $",Math.abs(a.player2).toFixed(2)]}):e.jsx("p",{className:"text-center text-xl font-bold text-primary",children:"Match tied - No payout"})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ne,className:"flex-1 btn-primary-green",children:"Reset Scores"}),e.jsx("button",{onClick:J,className:"flex-1 btn-secondary",children:"Leave Match"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(134, 239, 172)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:m})," with your opponent!"]})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Ce,{className:"text-green-400",size:20}),"Stakes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Per Game"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:H.perGame,onChange:x=>le("perGame",x.target.value),className:"game-input",min:"0",step:"0.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Totals"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:H.totals,onChange:x=>le("totals",x.target.value),className:"game-input",min:"0",step:"0.5"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 1"}),e.jsx("input",{type:"text",value:N.name,onChange:x=>ie(1,x.target.value),placeholder:"Enter Player 1's Name",className:"w-full game-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 2"}),e.jsx("input",{type:"text",value:f.name,onChange:x=>ie(2,x.target.value),placeholder:"Enter Player 2's Name",className:"w-full game-input"})]})]}),e.jsx("button",{onClick:se,disabled:!N.name||!f.name,className:"w-full btn-primary-green text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:!N.name||!f.name?"Enter both player names":"Start Match"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(oe,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Head-to-Head Bowling Match"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:K,className:"w-full btn-primary-green flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(as,{size:24}),"Create New Match"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:w,onChange:x=>y(x.target.value.toUpperCase()),onKeyDown:x=>x.key==="Enter"&&ce(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:ce,className:"w-full btn-primary-green text-lg sm:text-xl",children:"Join Match"})]})]})]})})]})}function Ys(){const{currentUser:u}=ue(),h=u&&Ae(u.email),d=u?.isAnonymous,[m,o]=l.useState(""),[w,y]=l.useState(""),[j,P]=l.useState(!1),[G,k]=l.useState(!1),[C,E]=l.useState(!1),[N,T]=l.useState([]),[f,z]=l.useState(""),[I,S]=l.useState(!1),[_,Z]=l.useState(1),[M,W]=l.useState({game1:{},game2:{},game3:{}}),[H]=l.useState(5),[U]=l.useState(1),[B]=l.useState(2),re=()=>`${window.location.origin+window.location.pathname}?join=${m}&game=king-of-the-hill`,K=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("join");s&&y(s.toUpperCase())},[]),l.useEffect(()=>{if(!m)return;const b=D(O,`kingofthehill/${m}`),s=Pe(b,n=>{const t=n.val();t&&(T(t.players||[]),S(t.gameStarted||!1),Z(t.currentGame||1),W(t.scores||{game1:{},game2:{},game3:{}}))});return()=>s()},[m]);const ce=()=>{if(d){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const b=K();o(b),P(!0),k(!0);const s=D(O,`kingofthehill/${b}`);ee(s,{players:[],gameStarted:!1,currentGame:1,scores:{game1:{},game2:{},game3:{}},createdAt:Date.now()})},X=async()=>{if(!w.trim())return;if(d){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const b=w.toUpperCase(),s=D(O,`kingofthehill/${b}`);(await Y(s)).exists()?(o(b),P(!1),k(!0)):alert("Game not found! Check the code and try again.")},ie=async b=>{if(m)try{const s=D(O,`kingofthehill/${m}`),t=(await Y(s)).val()||{};await ee(s,{...t,...b})}catch(s){console.error("Error updating game:",s)}},se=()=>{if(f.trim()&&!I){const b=[...N,{id:Date.now(),name:f.trim(),uid:u?.uid}];ie({players:b}),z("")}},ae=()=>{N.length>=2&&ie({gameStarted:!0,currentGame:1})},le=async(b,s,n)=>{if(!m){console.log("No game code");return}const t=N.find(g=>g.id===s);if(!(h||t?.uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:b,playerId:s,score:n});try{const g=D(O,`kingofthehill/${m}`),c=(await Y(g)).val();if(console.log("Current data:",c),!c){console.error("No current data found");return}const A=JSON.parse(JSON.stringify(c.scores||{})),r=`game${b}`;A[r]||(A[r]={}),A[r][s]=n===""?null:parseInt(n),console.log("New scores:",A),await ee(g,{...c,scores:A}),console.log("Score updated successfully")}catch(g){console.error("Error updating score:",g),alert("Error updating score: "+g.message)}},q=(b,s)=>M?.[`game${b}`]?.[s]??"",Q=b=>{const s=M?.[`game${b}`]||{},n=Object.entries(s).filter(([g,p])=>p!=null).map(([g,p])=>({playerId:parseInt(g),score:p}));if(n.length===0)return null;const t=Math.max(...n.map(g=>g.score)),i=n.filter(g=>g.score===t);return{score:t,playerIds:i.map(g=>g.playerId)}},ne=()=>{const b={};return N.forEach(s=>{const n=M?.game1?.[s.id]||0,t=M?.game2?.[s.id]||0,i=M?.game3?.[s.id]||0;b[s.id]=n+t+i}),b},J=()=>{const b=ne(),s=Object.entries(b).filter(([i,g])=>g>0).map(([i,g])=>({playerId:parseInt(i),total:g}));if(s.length===0)return null;const n=Math.max(...s.map(i=>i.total)),t=s.filter(i=>i.total===n);return{total:n,playerIds:t.map(i=>i.playerId)}},te=()=>{const b={};N.forEach(g=>{b[g.id]=-H});const s=Q(1);if(s&&s.playerIds.length>0){const g=N.length*U/s.playerIds.length;s.playerIds.forEach(p=>{b[p]+=g})}const n=Q(2);if(n&&n.playerIds.length>0){const g=N.length*U/n.playerIds.length;n.playerIds.forEach(p=>{b[p]+=g})}const t=Q(3);if(t&&t.playerIds.length>0){const g=N.length*U/t.playerIds.length;t.playerIds.forEach(p=>{b[p]+=g})}const i=J();if(i&&i.playerIds.length>0){const g=N.length*B/i.playerIds.length;i.playerIds.forEach(p=>{b[p]+=g})}return b},a=()=>{ie({scores:{game1:{},game2:{},game3:{}},currentGame:1})},R=()=>{k(!1),o(""),y(""),P(!1)},x=ne(),v=te(),L=N.length>0&&N.every(b=>M?.game1?.[b.id]!==null&&M?.game1?.[b.id]!==void 0&&M?.game2?.[b.id]!==null&&M?.game2?.[b.id]!==void 0&&M?.game3?.[b.id]!==null&&M?.game3?.[b.id]!==void 0);return G?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(be,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:m})]}),e.jsx("button",{onClick:()=>E(!C),className:"btn-primary-purple p-2",title:"Show QR code to join",children:e.jsx(ze,{size:20})})]})]}),C&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:re(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:m})]}),e.jsx("button",{onClick:()=>E(!1),className:"mt-3 text-purple-400 hover:text-purple-300 font-semibold text-sm",children:"Hide QR Code"})]})}),I?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-3",children:"3-Game Series"}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High score each game wins $",U," per player"]}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High total wins $",B," per player"]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(b=>{const s=Q(b);return e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-white",children:["Game ",b]}),s&&e.jsxs("span",{className:"text-sm text-purple-400 font-semibold flex items-center gap-1",children:[e.jsx(be,{size:16}),"High: ",s.score]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.map(n=>{const t=s&&s.playerIds.includes(n.id);return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-primary mb-1",children:n.name}),e.jsx("input",{type:"number",value:q(b,n.id),onChange:i=>le(b,n.id,i.target.value),placeholder:"Score",className:`w-full game-input text-center text-lg font-bold ${t?"border-purple-400 bg-purple-900/30 text-purple-300":""}`,min:"0",max:"300"}),t&&e.jsx("p",{className:"text-xs text-purple-400 font-semibold mt-1 text-center",children:"ðŸ‘‘ Winner"})]},n.id)})})]},b)})}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4 border-2 border-purple-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-purple-400",size:24}),"Total Pins"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.map(b=>{const s=J(),n=s&&s.playerIds.includes(b.id);return e.jsxs("div",{className:`bg-slate-800/50 rounded-lg p-3 border ${n?"ring-2 ring-purple-400 border-purple-500":"border-slate-700"}`,children:[e.jsx("p",{className:"text-xs text-primary mb-1",children:b.name}),e.jsxs("p",{className:`text-2xl font-bold ${n?"text-purple-400":"text-white"}`,children:[x[b.id]||0,n&&" ðŸ‘‘"]})]},b.id)})})]}),L&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Ce,{className:"text-green-400",size:24}),"Final Payouts"]}),e.jsx("div",{className:"space-y-2",children:N.sort((b,s)=>v[s.id]-v[b.id]).map((b,s)=>{const n=v[b.id],t=n>0,i=n<0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 flex justify-between items-center border border-slate-700",children:[e.jsxs("span",{className:"font-semibold text-white",children:[s===0&&n>0&&"ðŸ‘‘ ",b.name]}),e.jsxs("span",{className:`font-bold text-lg ${t?"text-green-400":i?"text-red-400":"text-primary"}`,children:[t?"+":"",n>=0?"$"+n.toFixed(2):"-$"+Math.abs(n).toFixed(2)]})]},b.id)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:a,className:"flex-1 btn-primary-purple",children:"Reset Scores"}),e.jsx("button",{onClick:R,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Ce,{className:"text-green-400",size:20}),"Prize Structure"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",H]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 1:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",U," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 2:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",U," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 3:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",U," per player"]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"High Totals:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(192, 132, 252)"},children:["$",B," per player"]})]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(216, 180, 254)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:m})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:b=>z(b.target.value),onKeyDown:b=>b.key==="Enter"&&se(),placeholder:"Enter Player's Name",className:"game-input"}),e.jsxs("button",{onClick:se,className:"btn-primary-purple flex items-center justify-center gap-2",children:[e.jsx(Be,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),N.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",N.length,")"]}),e.jsx("div",{className:"space-y-2",children:N.map(b=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow flex justify-between items-center border border-slate-700",children:[e.jsx("span",{className:"text-white",children:b.name}),e.jsxs("span",{className:"text-sm text-red-400 font-semibold",children:["$",H," in"]})]},b.id))}),e.jsx("div",{className:"mt-3 bg-purple-900/30 border border-purple-700 rounded p-2 text-center",children:e.jsxs("p",{className:"text-sm text-primary",children:["Prize Pool: ",e.jsxs("span",{className:"font-bold text-green-400",children:["$",N.length*H]})]})})]}),e.jsx("button",{onClick:ae,disabled:N.length<2,className:"w-full btn-primary-purple text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:N.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(be,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Battle for the highest scores!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ce,className:"w-full btn-primary-purple flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(be,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:w,onChange:b=>y(b.target.value.toUpperCase()),onKeyDown:b=>b.key==="Enter"&&X(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:X,className:"w-full btn-primary-purple text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function Zs(){const{currentUser:u}=ue();u&&Ae(u.email);const h=u?.isAnonymous,[d,m]=l.useState(""),[o,w]=l.useState(""),[y,j]=l.useState(!1),[P,G]=l.useState(!1),[k,C]=l.useState(!1),[E,N]=l.useState([]),[T,f]=l.useState(""),[z,I]=l.useState(!1),[S,_]=l.useState({quarterfinals:[],semifinals:[],finals:null,champion:null}),[Z,M]=l.useState({}),[W,H]=l.useState(5),[U,B]=l.useState(0),[re,K]=l.useState(0),ce=()=>`${window.location.origin+window.location.pathname}?join=${d}&game=bracket-play`,X=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("join");n&&w(n.toUpperCase())},[]),l.useEffect(()=>{const s=E.length*W;B(Math.floor(s*.6)),K(Math.floor(s*.4))},[E.length,W]),l.useEffect(()=>{if(!d)return;const s=D(O,`bracketplay/${d}`),n=Pe(s,t=>{const i=t.val();i&&(N(i.players||[]),I(i.gameStarted||!1),_(i.matches||{quarterfinals:[],semifinals:[],finals:null,champion:null}),M(i.scores||{}))});return()=>n()},[d]);const ie=()=>{if(h){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const s=X();m(s),j(!0),G(!0);const n=D(O,`bracketplay/${s}`);ee(n,{players:[],gameStarted:!1,matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},createdAt:Date.now()})},se=async()=>{if(!o.trim())return;if(h){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const s=o.toUpperCase(),n=D(O,`bracketplay/${s}`);(await Y(n)).exists()?(m(s),j(!1),G(!0)):alert("Game not found! Check the code and try again.")},ae=async s=>{if(d)try{const n=D(O,`bracketplay/${d}`),i=(await Y(n)).val()||{};await ee(n,{...i,...s})}catch(n){console.error("Error updating game:",n)}},le=async()=>{if(T.trim()&&!z&&E.length<8){const s=[...E,{id:Date.now(),name:T.trim(),uid:u?.uid}];await ae({players:s}),f("")}},q=s=>{const n=[...s];for(let t=n.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[n[t],n[i]]=[n[i],n[t]]}return n},Q=async()=>{if(E.length!==8){console.error("Need exactly 8 players to start tournament");return}try{const s=q(E);if(console.log("Shuffled players:",s),!s.every(t=>t&&t.id&&t.name)){console.error("Invalid player data:",s),alert("Error: Invalid player data. Please refresh and try again.");return}const n=[{id:"qf1",player1:s[0],player2:s[1],winner:null},{id:"qf2",player1:s[2],player2:s[3],winner:null},{id:"qf3",player1:s[4],player2:s[5],winner:null},{id:"qf4",player1:s[6],player2:s[7],winner:null}];console.log("Created quarterfinals:",n),await ae({gameStarted:!0,matches:{quarterfinals:n,semifinals:[],finals:null,champion:null},scores:{}}),console.log("Tournament started successfully")}catch(s){console.error("Error starting tournament:",s),alert("Failed to start tournament. Check console for details.")}},ne=async(s,n,t)=>{const i={...Z},g=`${s}_${n}`;if(t==="")i[g]="";else{const p=parseInt(t,10);if(!isNaN(p)&&p>=0&&p<=300)i[g]=p;else return}M(i);try{await ae({scores:i})}catch(p){console.error("Failed to save score:",p)}},J=(s,n)=>{const t=`${s}_${n}`;return Z[t]??""},te=(s,n,t)=>{const i=J(s,n),g=J(s,t),p=typeof i=="number"?i:parseInt(i,10),c=typeof g=="number"?g:parseInt(g,10),A=!isNaN(p)&&p>=0,r=!isNaN(c)&&c>=0;return console.log(`isMatchComplete(${s}): p1Score=${i}, p2Score=${g}, p1Valid=${A}, p2Valid=${r}, result=${A&&r}`),A&&r},a=async s=>{const n={...S};if(s==="quarterfinals")n.quarterfinals=n.quarterfinals.map(t=>{const i=J(t.id,t.player1.id),g=J(t.id,t.player2.id),p=i>g?t.player1:t.player2;return{...t,winner:p}}),n.semifinals=[{id:"sf1",player1:n.quarterfinals[0].winner,player2:n.quarterfinals[1].winner,winner:null},{id:"sf2",player1:n.quarterfinals[2].winner,player2:n.quarterfinals[3].winner,winner:null}];else if(s==="semifinals")n.semifinals=n.semifinals.map(t=>{const i=J(t.id,t.player1.id),g=J(t.id,t.player2.id),p=i>g?t.player1:t.player2;return{...t,winner:p}}),n.finals={id:"final",player1:n.semifinals[0].winner,player2:n.semifinals[1].winner,winner:null};else if(s==="finals"){const t=n.finals,i=J(t.id,t.player1.id),g=J(t.id,t.player2.id),p=i>g?t.player1:t.player2;n.finals.winner=p,n.champion=p}await ae({matches:n})},R=s=>!s||s.length===0?!1:s.every(n=>n&&n.player1&&n.player2&&te(n.id,n.player1.id,n.player2.id)),x=async()=>{await ae({matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},gameStarted:!1})},v=()=>{G(!1),m(""),w(""),j(!1)},L=(s,n)=>{if(!s||!s.player1||!s.player2)return null;const t=J(s.id,s.player1.id),i=J(s.id,s.player2.id),g=te(s.id,s.player1.id,s.player2.id),p=s.winner!==null;console.log(`${s.id}: p1Score=${t} (${typeof t}), p2Score=${i} (${typeof i}), isComplete=${g}, hasWinner=${p}`);const c=g&&t>i,A=g&&i>t;return e.jsxs("div",{className:"game-card",children:[e.jsx("h4",{className:"font-bold text-sm text-center mb-3 text-orange-400",children:s.id.toUpperCase()}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${p&&s.winner?.id===s.player1.id?"bg-green-900/30 border-2 border-green-500":c&&!p?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player1.name||"Player 1"}),p&&s.winner?.id===s.player1.id&&e.jsx(oe,{className:"text-orange-400",size:16}),!p&&c&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player1_score`,inputMode:"numeric",pattern:"[0-9]*",value:t===""?"":t,onChange:r=>{const $=r.target.value;($===""||/^\d+$/.test($))&&ne(s.id,s.player1.id,$)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),e.jsx("div",{className:"text-center text-xs font-bold text-secondary mb-3",children:"VS"}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${p&&s.winner?.id===s.player2.id?"bg-green-900/30 border-2 border-green-500":A&&!p?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player2.name||"Player 2"}),p&&s.winner?.id===s.player2.id&&e.jsx(oe,{className:"text-orange-400",size:16}),!p&&A&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player2_score`,inputMode:"numeric",pattern:"[0-9]*",value:i===""?"":i,onChange:r=>{const $=r.target.value;($===""||/^\d+$/.test($))&&ne(s.id,s.player2.id,$)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),!p&&!g&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Enter both scores"})}),!p&&g&&e.jsx("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["âœ“ Winner: ",t>i?s.player1.name:s.player2.name]})}),p&&s.winner&&e.jsx("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["ðŸ† ",s.winner.name," advances to next round!"]})})]})},b=S.finals&&S.finals.winner?S.finals.winner.id===S.finals.player1.id?S.finals.player2:S.finals.player1:null;return P?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Se,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:d})]}),e.jsx("button",{onClick:()=>C(!k),className:"btn-primary-orange p-2",title:"Show QR code to join",children:e.jsx(ze,{size:20})})]})]}),k&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Tournament"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:ce(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:d})]}),e.jsx("button",{onClick:()=>C(!1),className:"mt-3 text-orange-400 hover:text-orange-300 font-semibold text-sm",children:"Hide QR Code"})]})}),z?e.jsxs("div",{className:"space-y-6",children:[S.champion&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 rounded-lg p-6 border-2 border-orange-500",children:[e.jsxs("h2",{className:"text-3xl font-bold text-center mb-4 flex items-center justify-center gap-2 text-white",children:[e.jsx(oe,{className:"text-orange-400",size:40}),"Tournament Champion!"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 mb-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-2xl font-bold text-green-400 mb-2",children:["ðŸ¥‡ ",S.champion.name]}),e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:["Prize: $",U]})]}),b&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-lg font-bold text-primary",children:["ðŸ¥ˆ Runner-up: ",b.name]}),e.jsxs("p",{className:"text-center text-md font-bold text-primary",children:["Prize: $",re]})]})]}),S?.quarterfinals&&S.quarterfinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Quarterfinals"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.quarterfinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:L(s)},s.id))}),(!S.semifinals||S.semifinals.length===0)&&R(S.quarterfinals)&&e.jsx("button",{onClick:()=>a("quarterfinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 4 Winners to Semifinals"})]}),S?.semifinals&&S.semifinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Semifinals"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:S.semifinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:L(s)},s.id))}),!S.finals&&R(S.semifinals)&&e.jsx("button",{onClick:()=>a("semifinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 2 Winners to Finals"})]}),S.finals&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white text-center",children:"ðŸ† Championship Finals ðŸ†"}),e.jsx("div",{className:"max-w-md mx-auto",children:L(S.finals)}),!S.finals.winner&&te(S.finals.id,S.finals.player1.id,S.finals.player2.id)&&e.jsx("button",{onClick:()=>a("finals"),className:"w-full mt-6 bg-orange-500 text-white py-4 rounded-lg hover:bg-orange-600 transition font-bold text-xl shadow-lg",children:"ðŸ‘‘ Crown the Champion!"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:x,className:"flex-1 btn-primary-orange",children:"Reset Tournament"}),e.jsx("button",{onClick:v,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Ce,{className:"text-green-400",size:20}),"Prize Structure"]}),E.length===0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Entry Fee:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,5,10].map(s=>e.jsxs("button",{onClick:()=>H(s),className:"px-4 py-2 rounded-lg transition",style:{backgroundColor:W===s?"rgb(139, 92, 246)":"rgb(30, 41, 59)",color:"rgb(255, 255, 255)",border:W===s?"2px solid rgb(167, 139, 250)":"2px solid transparent"},children:["$",s]},s))})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",W]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"2nd Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(203, 213, 225)"},children:["$",re]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"1st Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",U]})]}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"rgb(100, 116, 139)"},children:["Total Prize Pool: $",E.length*W]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-white",children:"Tournament Format"}),e.jsxs("ul",{className:"text-sm space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Quarterfinals (Game 1):"})," 8 players compete â†’ 4 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Semifinals (Game 2):"})," 4 players compete â†’ 2 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Finals (Game 3):"})," 2 players compete â†’ Champion crowned"]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(253, 186, 116)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:d})," with 7 friends!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:T,onChange:s=>f(s.target.value),onKeyDown:s=>s.key==="Enter"&&le(),placeholder:"Enter Player's Name",className:"game-input",disabled:E.length>=8}),e.jsxs("button",{onClick:le,disabled:E.length>=8,className:"btn-primary-orange flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(Be,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),E.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",E.length,"/8)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map((s,n)=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow border border-slate-700 text-white",children:[n+1,". ",s.name]},s.id))})]}),e.jsxs("button",{onClick:Q,disabled:E.length!==8,className:"w-full btn-primary-orange text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Ss,{size:20,className:"sm:w-6 sm:h-6"}),E.length!==8?`Need ${8-E.length} more player${8-E.length!==1?"s":""}`:"Start Tournament (Randomize Bracket)"]})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Se,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"8-Player Single Elimination Tournament"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ie,className:"w-full btn-primary-orange flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(oe,{size:20,className:"sm:w-6 sm:h-6"}),"Create Tournament"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:o,onChange:s=>w(s.target.value.toUpperCase()),onKeyDown:s=>s.key==="Enter"&&se(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:se,className:"w-full btn-primary-orange text-lg sm:text-xl",children:"Join Tournament"})]})]})]})})]})}function Xs(){const{currentUser:u}=ue(),h=u&&Ae(u.email),d=u?.isAnonymous,[m,o]=l.useState(""),[w,y]=l.useState(""),[j,P]=l.useState(!1),[G,k]=l.useState(!1),[C,E]=l.useState(!1),[N,T]=l.useState(!1),[f,z]=l.useState([]),[I,S]=l.useState(""),[_,Z]=l.useState(!1),[M,W]=l.useState(1),[H,U]=l.useState({}),[B,re]=l.useState({}),[K,ce]=l.useState({}),[X,ie]=l.useState([]),[se,ae]=l.useState(!1),[le,q]=l.useState(1),Q=.25,ne=r=>r.toFixed(2),J=()=>`${window.location.origin+window.location.pathname}?join=${m}&game=mystery-frames`,te=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const $=new URLSearchParams(window.location.search).get("join");$&&y($.toUpperCase())},[]),l.useEffect(()=>{if(!m)return;const r=D(O,`mysteryframes/${m}`),$=Pe(r,F=>{const V=F.val();V&&(z(V.players||[]),Z(V.gameStarted||!1),W(V.currentFrame||1),U(V.framePots||{}),re(V.frameWinners||{}),ce(V.frameScores||{}),ie(V.mysteryPots||[]))});return()=>$()},[m]);const a=r=>r.split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" "),R=()=>{if(d){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const r=te();o(r),P(!0),k(!0);const $=u?.displayName||"Player",F=[{id:Date.now(),name:a($),uid:u?.uid,totalWinnings:0}],V=D(O,`mysteryframes/${r}`);ee(V,{players:F,gameStarted:!1,currentFrame:1,framePots:{},frameWinners:{},frameScores:{},mysteryPots:[],createdAt:Date.now()})},x=async()=>{if(!w.trim())return;if(d){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const r=w.toUpperCase(),$=D(O,`mysteryframes/${r}`),F=await Y($);if(F.exists()){o(r),P(!1),k(!0);const V=F.val();if(!V.players?.find(me=>me.uid===u?.uid)&&!V.gameStarted){const me=u?.displayName||"Player",_e=[...V.players||[],{id:Date.now(),name:a(me),uid:u?.uid,totalWinnings:0}];await ee($,{...V,players:_e})}}else alert("Game not found! Check the code and try again.")},v=async r=>{if(m)try{const $=D(O,`mysteryframes/${m}`),V=(await Y($)).val();await ee($,{...V,...r})}catch($){console.error("Error updating game:",$)}},L=()=>{if(I.trim()&&!_){const r=[...f,{id:Date.now(),name:a(I.trim()),uid:null,totalWinnings:0}];v({players:r}),S("")}},b=()=>{if(f.length<2)return;const r=f.length*Q;v({gameStarted:!0,currentFrame:1,framePots:{1:r},frameScores:{1:{}},frameWinners:{1:[]}})},s=(r,$)=>{const F=f.find(me=>me.id===r);if(!(h||F?.uid===u?.uid)){alert("You can only enter your own scores.");return}const pe={...K,[M]:{...K[M],[r]:parseInt($)||0}};v({frameScores:pe})},n=()=>{const r=K[M]||{},$=Object.entries(r);if($.length!==f.length){alert("Please enter scores for all players first!");return}const F=Math.max(...Object.values(r));return $.filter(([pe,me])=>me===F).map(([pe])=>parseInt(pe))},t=()=>{const r=n();if(!r)return;const $=H[M]||0,F=r.length>1;let V=[...f],pe={...B,[M]:r},me={...H};if(!F&&r.length===1){const he=r[0];V=f.map(ke=>ke.id===he?{...ke,totalWinnings:(ke.totalWinnings||0)+$}:ke)}const _e=X.map(he=>{if(he.winner)return he;const ke=K[M]||{},Ge=he.activePlayers.filter(Le=>{const fe=ke[Le];return fe===10||parseInt(fe)===10});if(Ge.length===1){const Le=Ge[0];return V=V.map(fe=>fe.id===Le?{...fe,totalWinnings:(fe.totalWinnings||0)+he.amount}:fe),{...he,activePlayers:Ge,winner:Le}}return Ge.length===0?he:{...he,activePlayers:Ge}}),qe=M+1,ws=F?$+f.length*Q:f.length*Q;me[qe]=ws,v({players:V,currentFrame:qe,frameWinners:pe,framePots:me,frameScores:{...K,[qe]:{}},mysteryPots:_e})},i=r=>{const $={id:Date.now(),startFrame:M,amount:r,activePlayers:f.map(F=>F.id),winner:null};v({mysteryPots:[...X,$]})},g=()=>{k(!1),o(""),y(""),P(!1)};if(!G)return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(xe,{size:28,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsx("p",{className:"text-center mb-8 text-sm sm:text-base",style:{color:"rgb(148, 163, 184)"},children:"Quarters Game with Mystery Frame Bonuses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:R,className:"w-full flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:[e.jsx(xe,{size:20}),"Create New Game"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(148, 163, 184)"},children:"or"}),e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:w,onChange:r=>y(r.target.value.toUpperCase()),placeholder:"Enter Game Code",className:"w-full text-center text-lg font-mono py-3 px-4 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},maxLength:6}),e.jsx("button",{onClick:x,className:"w-full py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Join Game"})]})]})]})})]});const p=H[M]||0,c=K[M]||{},A=f.every(r=>c[r.id]!==void 0);return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"20%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>T(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(251, 191, 36)"},title:"How to play",children:e.jsx(ms,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(xe,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("span",{className:"text-xs sm:text-sm",style:{color:"rgb(148, 163, 184)"},children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2",style:{color:"rgb(255, 255, 255)"},children:m})]}),e.jsx("button",{onClick:()=>E(!C),className:"p-2 rounded-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},title:"Show QR code",children:e.jsx(ze,{size:20})})]})]}),N&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>T(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)"},onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:()=>T(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(de,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(xe,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"ðŸŽ¯ Quarters Game"}),e.jsx("p",{className:"text-sm",children:"Everyone puts in $0.25 per frame. Highest score wins the pot! Ties roll over to next frame."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"âš¡ Mystery Frames"}),e.jsx("p",{className:"text-sm",children:"Start bonus pots ($1-$5 or custom). Strike (X) to stay in! Last striker standing wins the mystery pot."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"ðŸ“± Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Tap 7, 8, 9, or X to enter scores"}),e.jsx("li",{children:"Mystery pots carry over until won"}),e.jsx("li",{children:"Multiple mystery frames can run simultaneously"})]})]})]}),e.jsx("button",{onClick:()=>T(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),C&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("div",{className:"inline-block p-4 rounded-lg",style:{backgroundColor:"rgb(255, 255, 255)"},children:e.jsx($e,{value:J(),size:200})}),e.jsxs("p",{className:"mt-3 text-sm",style:{color:"rgb(148, 163, 184)"},children:["Scan to join game ",e.jsx("span",{className:"font-mono font-bold",style:{color:"rgb(255, 255, 255)"},children:m})]})]}),_?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg p-6 text-center",style:{background:"linear-gradient(to right, rgba(217, 119, 6, 0.2), rgba(180, 83, 9, 0.2))",border:"2px solid rgb(251, 191, 36)"},children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Frame ",M]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[e.jsx(Ce,{size:32,style:{color:"rgb(34, 197, 94)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(34, 197, 94)"},children:["$",ne(p)]})]}),e.jsxs("p",{className:"text-sm mt-2",style:{color:"rgb(148, 163, 184)"},children:["Current Pot (.25 per player",p>f.length*Q?" + rollover":"",")"]})]}),e.jsxs("div",{className:"rounded-lg p-4 sm:p-6",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("h3",{className:"font-bold text-lg mb-4",style:{color:"rgb(255, 255, 255)"},children:"Enter Scores (0-10)"}),e.jsx("div",{className:"space-y-4",children:f.map(r=>e.jsxs("div",{className:"rounded-lg p-3 sm:p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:"rgb(148, 163, 184)"},children:r.name}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>s(r.id,7),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:c[r.id]===7?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(c[r.id]===7?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"7"}),e.jsx("button",{onClick:()=>s(r.id,8),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:c[r.id]===8?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(c[r.id]===8?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"8"}),e.jsx("button",{onClick:()=>s(r.id,9),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:c[r.id]===9?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(c[r.id]===9?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"9"}),e.jsx("button",{onClick:()=>s(r.id,10),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:c[r.id]===10?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(c[r.id]===10?"rgb(34, 197, 94)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"X"})]}),c[r.id]===10&&e.jsx("p",{className:"text-xs mt-2 text-center font-bold",style:{color:"rgb(34, 197, 94)"},children:"âš¡ STRIKE!"})]},r.id))}),e.jsx("button",{onClick:t,disabled:!A,className:"w-full mt-6 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:A?"rgb(34, 197, 94)":"rgb(71, 85, 105)",color:"rgb(255, 255, 255)",opacity:A?1:.5,cursor:A?"pointer":"not-allowed"},children:A?"Next Frame":"Enter All Scores First"})]}),e.jsxs("div",{className:"rounded-lg border-2 p-4",style:{borderColor:"rgb(251, 191, 36)",background:"linear-gradient(to bottom right, rgba(217, 119, 6, 0.1), rgba(180, 83, 9, 0.1))"},children:[e.jsxs("button",{onClick:()=>ae(!se),className:"w-full flex items-center justify-between p-3 rounded-lg transition",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",color:"rgb(255, 255, 255)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{size:24,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold text-lg",children:["Mystery Frame Bonuses (",X.filter(r=>!r.winner&&r.activePlayers.length>0).length," active)"]})]}),e.jsx("span",{children:se?"â–¼":"â–¶"})]}),se&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("h4",{className:"font-bold mb-3",style:{color:"rgb(255, 255, 255)"},children:"Start New Mystery Frame"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[1,2,3,4,5].map(r=>e.jsxs("button",{onClick:()=>i(r),className:"py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:$=>$.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:["$",r]},r))}),e.jsxs("div",{className:"pt-3",style:{borderTop:"1px solid rgb(71, 85, 105)"},children:[e.jsx("p",{className:"text-xs mb-2",style:{color:"rgb(148, 163, 184)"},children:"Custom Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>q(Math.max(.5,le-.5)),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"âˆ’"}),e.jsxs("div",{className:"flex-1 text-center py-2 rounded-lg font-bold text-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:["$",le.toFixed(2)]}),e.jsx("button",{onClick:()=>q(le+.5),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"+"}),e.jsx("button",{onClick:()=>i(le),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Start"})]})]})]}),e.jsx("div",{className:"space-y-3",children:X.length===0?e.jsx("p",{className:"text-center py-4",style:{color:"rgb(148, 163, 184)"},children:"No mystery frames started yet"}):X.map(r=>{const $=r.activePlayers.length>0&&!r.winner,F=r.winner?f.find(V=>V.id===r.winner):null;return e.jsx("div",{className:"rounded-lg p-4 border-2",style:{backgroundColor:"rgba(30, 41, 59, 0.3)",borderColor:r.winner?"rgb(34, 197, 94)":$?"rgb(251, 191, 36)":"rgb(100, 116, 139)"},children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:18,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(255, 255, 255)"},children:["Started Frame ",r.startFrame," Â· $",r.amount]})]}),r.winner?e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(34, 197, 94)"},children:["ðŸ† Winner: ",F?.name]}):r.activePlayers.length===0?e.jsx("p",{className:"text-sm mt-1",style:{color:"rgb(148, 163, 184)"},children:"No winner - all missed"}):e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(251, 191, 36)"},children:[r.activePlayers.length," player(s) still in (must strike to continue)"]})]})})},r.id)})})]})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{background:"linear-gradient(to right, rgba(30, 41, 59, 0.5), rgba(217, 119, 6, 0.2))",border:"1px solid rgb(71, 85, 105)"},children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",style:{color:"rgb(255, 255, 255)"},children:[e.jsx(oe,{style:{color:"rgb(251, 191, 36)"},size:24}),"Total Winnings"]}),e.jsx("div",{className:"space-y-2",children:[...f].sort((r,$)=>($.totalWinnings||0)-(r.totalWinnings||0)).map((r,$)=>e.jsxs("div",{className:"flex justify-between items-center px-4 py-3 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[$===0&&"ðŸ¥‡"," ",$===1&&"ðŸ¥ˆ"," ",$===2&&"ðŸ¥‰"," ",r.name]}),e.jsxs("span",{className:"font-bold text-lg",style:{color:"rgb(34, 197, 94)"},children:["$",ne(r.totalWinnings||0)]})]},r.id))})]}),e.jsx("button",{onClick:g,className:"w-full py-3 rounded-lg font-semibold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"Leave Game"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-center text-lg",style:{color:"rgb(251, 191, 36)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:m})," with friends or show them the QR code!"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg",style:{color:"rgb(255, 255, 255)"},children:["Players (",f.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:I,onChange:r=>S(r.target.value),onKeyPress:r=>r.key==="Enter"&&L(),placeholder:"Enter Player's Name",className:"flex-1 px-4 py-2 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"}}),e.jsxs("button",{onClick:L,className:"px-4 py-2 rounded-lg font-semibold transition flex items-center gap-2",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:[e.jsx(Be,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),f.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(r=>e.jsx("div",{className:"px-4 py-2 rounded-lg font-semibold text-center",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:r.name},r.id))})]}),e.jsx("button",{onClick:b,disabled:f.length<2,className:"w-full py-4 rounded-lg font-bold text-xl transition",style:{backgroundColor:f.length<2?"rgb(71, 85, 105)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:f.length<2?.5:1,cursor:f.length<2?"not-allowed":"pointer"},children:f.length<2?"Need at least 2 players":"Start Game"})]})]})})})]})}function et({isOpen:u,onClose:h,pendingInvite:d=null}){const{signInWithGoogle:m,signUpWithEmail:o,signInWithEmail:w,continueAsGuest:y}=ue(),[j,P]=l.useState(!1),[G,k]=l.useState(null),[C,E]=l.useState("signin"),[N,T]=l.useState(""),[f,z]=l.useState(""),[I,S]=l.useState("");if(!u)return null;const _=()=>{T(""),z(""),S(""),k(null)},Z=async()=>{P(!0),k(null);try{await m(),h(),_()}catch(U){k(U.message)}finally{P(!1)}},M=async U=>{U.preventDefault(),P(!0),k(null);try{await w(N,f),h(),_()}catch(B){k(B.code==="auth/user-not-found"?"No account found with this email":B.code==="auth/wrong-password"?"Incorrect password":B.code==="auth/invalid-email"?"Invalid email address":B.message)}finally{P(!1)}},W=async U=>{U.preventDefault(),P(!0),k(null);try{await o(N,f,I),h(),_()}catch(B){k(B.code==="auth/email-already-in-use"?"Email already in use":B.code==="auth/weak-password"?"Password should be at least 6 characters":B.code==="auth/invalid-email"?"Invalid email address":B.message)}finally{P(!1)}},H=U=>{E(U),k(null)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),e.jsxs("div",{className:"relative rounded-2xl shadow-2xl max-w-md w-full p-8",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)"},children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 w-8 h-8 rounded-lg transition flex items-center justify-center",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:U=>U.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:e.jsx(de,{size:20})}),e.jsxs("div",{className:"text-center mb-8",children:[d&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"rgba(34, 211, 238, 0.1)",border:"1px solid rgb(34, 211, 238)"},children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(34, 211, 238)"},children:"ðŸŽ³ You've been invited to play!"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"rgb(148, 163, 184)"},children:"Sign in to join the game"})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:C==="signup"?"Create Account":"Welcome Back!"}),e.jsx("p",{className:"text-slate-400",children:C==="email"||C==="signup"?"Sign in to track your stats":"Sign in to track your stats and compete"})]}),G&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 text-sm",children:G}),C==="signin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Z,disabled:j,className:"w-full bg-white text-gray-800 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{onClick:()=>H("email"),disabled:j,className:"w-full bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[e.jsx(Qe,{size:20}),"Continue with Email"]}),e.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"Sign in to unlock all games and save your stats permanently"})]}),C==="email"&&e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:N,onChange:U=>T(U.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:f,onChange:U=>z(U.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Signing In...":"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>H("signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Don't have an account? Sign up"})}),e.jsx("button",{type:"button",onClick:()=>H("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]}),C==="signup"&&e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Display Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",value:I,onChange:U=>S(U.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"Your Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:N,onChange:U=>T(U.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:f,onChange:U=>z(U.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>H("email"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Already have an account? Sign in"})}),e.jsx("button",{type:"button",onClick:()=>H("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]})]})]})}function st({isOpen:u,onClose:h}){const{currentUser:d,isGuest:m}=ue(),[o,w]=l.useState(null),[y,j]=l.useState(!0);l.useEffect(()=>{u&&d&&P()},[u,d]);const P=async()=>{if(d){j(!0);try{const G=D(O,`users/${d.uid}/stats`),k=await Y(G);k.exists()?w(k.val()):w({makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}})}catch(G){console.error("Error fetching stats:",G)}finally{j(!1)}}};return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-4xl w-full p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:G=>G.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:G=>G.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(de,{size:20})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d?.photoURL?e.jsx("img",{src:d.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer",onError:G=>{G.target.style.display="none",G.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-2xl font-bold ${d?.photoURL?"hidden":"flex"}`,children:d?.displayName?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:d?.displayName||"Guest User"}),m&&e.jsx("p",{className:"text-amber-400 text-sm mt-1",children:"Guest Account - Sign in to save stats permanently"})]})]}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading your stats..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx(we,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Makes or Misses"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:o?.makesOrMisses?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:o?.makesOrMisses?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:o?.makesOrMisses?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(192, 132, 252)"},children:o?.makesOrMisses?.totalPoints||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Points"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:e.jsx(oe,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Match Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(52, 211, 153)"},children:o?.matchPlay?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Matches Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:o?.matchPlay?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:o?.matchPlay?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:o?.matchPlay?.ties||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ties"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:e.jsx(be,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"King of the Hill"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:o?.kingOfTheHill?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:o?.kingOfTheHill?.highGameWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Game Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 146, 60)"},children:o?.kingOfTheHill?.highTotalWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Total Wins"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:e.jsx(Se,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Bracket Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(167, 139, 250)"},children:o?.bracketPlay?.tournamentsPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:o?.bracketPlay?.championships||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Championships"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(203, 213, 225)"},children:o?.bracketPlay?.runnerUps||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Runner-Ups"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(xs,{size:24,className:"text-cyan-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Overall Performance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:(o?.makesOrMisses?.gamesPlayed||0)+(o?.matchPlay?.gamesPlayed||0)+(o?.kingOfTheHill?.gamesPlayed||0)+(o?.bracketPlay?.tournamentsPlayed||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400",children:(o?.makesOrMisses?.wins||0)+(o?.matchPlay?.wins||0)+(o?.kingOfTheHill?.highGameWins||0)+(o?.bracketPlay?.championships||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Wins"})]})]})]})]})]})]}):null}function tt({isOpen:u,onClose:h}){const{isAdmin:d}=ue(),[m,o]=l.useState(!0),[w,y]=l.useState([]),[j,P]=l.useState({makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]}),[G,k]=l.useState({totalUsers:0,totalGames:0,guestUsers:0,authenticatedUsers:0}),[C,E]=l.useState("overview"),[N,T]=l.useState(null),[f,z]=l.useState(null),[I,S]=l.useState([]),[_,Z]=l.useState([]),[M,W]=l.useState(!1),[H,U]=l.useState(null),[B,re]=l.useState(null);l.useEffect(()=>{u&&d&&K()},[u,d]);const K=async()=>{o(!0);try{const a=D(O,"users"),R=await Y(a),x=R.exists()?R.val():{},v=Object.entries(x).map(([$,F])=>({uid:$,...F}));y(v);const L={makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]},b=D(O,"games"),s=await Y(b);s.exists()&&(L.makesOrMisses=Object.entries(s.val()).map(([$,F])=>({code:$,...F})));const n=D(O,"matchplay"),t=await Y(n);t.exists()&&(L.matchPlay=Object.entries(t.val()).map(([$,F])=>({code:$,...F})));const i=D(O,"kingofthehill"),g=await Y(i);g.exists()&&(L.kingOfTheHill=Object.entries(g.val()).map(([$,F])=>({code:$,...F})));const p=D(O,"bracketplay"),c=await Y(p);c.exists()&&(L.bracketPlay=Object.entries(c.val()).map(([$,F])=>({code:$,...F}))),P(L);const A=v.filter($=>$.isAnonymous).length,r=L.makesOrMisses.length+L.matchPlay.length+L.kingOfTheHill.length+L.bracketPlay.length;k({totalUsers:v.length,totalGames:r,guestUsers:A,authenticatedUsers:v.length-A})}catch(a){console.error("Error fetching admin data:",a)}finally{o(!1)}},ce=async a=>{try{await je(D(O,`users/${a}`)),await K(),z(null)}catch(R){console.error("Error deleting user:",R),alert("Failed to delete user")}},X=async(a,R=null)=>{try{const x=D(O,`users/${a}`),v=await Y(x);if(v.exists()){const L=v.val();R?L.stats[R]={gamesPlayed:0,totalPoints:0,wins:0,losses:0,...R==="matchPlay"&&{ties:0},...R==="kingOfTheHill"&&{highGameWins:0,highTotalWins:0},...R==="bracketPlay"&&{tournamentsPlayed:0,championships:0,runnerUps:0}}:L.stats={makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}},await ee(x,L),await K(),z(null)}}catch(x){console.error("Error resetting stats:",x),alert("Failed to reset stats")}},ie=async(a,R)=>{try{const x={makesOrMisses:`games/${R}`,matchPlay:`matchplay/${R}`,kingOfTheHill:`kingofthehill/${R}`,bracketPlay:`bracketplay/${R}`};await je(D(O,x[a])),await K(),z(null)}catch(x){console.error("Error deleting game:",x),alert("Failed to delete game")}},se=async()=>{try{await Promise.all([je(D(O,"games")),je(D(O,"matchplay")),je(D(O,"kingofthehill")),je(D(O,"bracketplay"))]),await K(),z(null)}catch(a){console.error("Error deleting all games:",a),alert("Failed to delete all games")}},ae=async()=>{try{await Promise.all(I.map(a=>je(D(O,`users/${a}`)))),await K(),S([]),W(!1),z(null)}catch(a){console.error("Error deleting users:",a),alert("Failed to delete selected users")}},le=()=>{S(M?[]:w.map(a=>a.uid)),W(!M)},q=a=>{if(I.includes(a))S(I.filter(R=>R!==a)),W(!1);else{const R=[...I,a];S(R),R.length===w.length&&W(!0)}},Q=(a,R)=>{U({uid:a,currentCredits:R})},ne=(a,R)=>{re({uid:a,currentSubscription:R||{}})},J=async(a,R)=>{try{const x=D(O,`users/${a}`),v=await Y(x);if(v.exists()){const L=v.val();await ee(x,{...L,credits:parseInt(R)||0}),U(null),K()}}catch(x){console.error("Error updating credits:",x),alert("Failed to update credits")}},te=async(a,R,x,v)=>{try{const L=D(O,`users/${a}`),b=await Y(L);if(b.exists()){const s=b.val();await ee(L,{...s,subscription:{isActive:R,plan:x||null,startDate:R?Date.now():null,endDate:R&&v?new Date(v).getTime():null,stripeSubscriptionId:null}}),re(null),K()}}catch(L){console.error("Error updating subscription:",L),alert("Failed to update subscription")}};return u?d?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),f&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:()=>z(null)}),e.jsxs("div",{className:"relative rounded-xl p-6 max-w-md w-full",style:{background:"linear-gradient(to bottom right, rgb(30, 41, 59), rgb(51, 65, 85))",border:"2px solid rgb(220, 38, 38)"},children:[e.jsxs("h3",{className:"text-xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Confirm ",f.type==="user"?"User Deletion":f.type==="bulk-users"?"Bulk User Deletion":f.type==="bulk-games"?"Bulk Game Deletion":f.type==="game"?"Game Deletion":"Stats Reset"]}),e.jsx("p",{className:"mb-6",style:{color:"rgb(203, 213, 225)"},children:f.type==="user"?`Are you sure you want to delete "${f.name}"? This action cannot be undone.`:f.type==="bulk-users"?`Delete ${I.length} selected user(s)? All user data will be permanently removed. This action cannot be undone.`:f.type==="bulk-games"?`Delete ALL active games (${G.totalGames} total)? All game data will be permanently removed. This action cannot be undone.`:f.type==="game"?`Delete game "${f.name}"? All game data will be permanently removed.`:`Reset ${f.gameType==="all"?"all stats":`${f.gameType} stats`} for "${f.name}"?`}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>z(null),className:"flex-1 py-2 rounded-lg transition",style:{backgroundColor:"rgb(51, 65, 85)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(71, 85, 105)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(51, 65, 85)",children:"Cancel"}),e.jsx("button",{onClick:()=>{f.type==="user"?ce(f.id):f.type==="bulk-users"?ae():f.type==="bulk-games"?se():f.type==="game"?ie(f.gameType,f.id):X(f.id,f.gameType==="all"?null:f.gameType)},className:"flex-1 py-2 rounded-lg transition font-semibold",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:f.type==="game"||f.type==="user"||f.type==="bulk-games"||f.type==="bulk-users"?"Delete":"Reset"})]})]})]}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border-b border-slate-700 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:e.jsx(Xe,{size:20,className:"text-white md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-400 text-xs md:text-sm",children:"System Overview & Management"})]})]}),e.jsx("button",{onClick:h,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:a=>a.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:a=>a.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(de,{size:20})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>E("overview"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:C==="overview"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:C==="overview"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:C==="overview"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(us,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"}),e.jsx("span",{className:"sm:hidden",children:"Stats"})]}),e.jsxs("button",{onClick:()=>E("users"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:C==="users"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:C==="users"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:C==="users"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(as,{size:16,className:"inline mr-1 md:mr-2"}),"Users (",G.totalUsers,")"]}),e.jsxs("button",{onClick:()=>E("games"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:C==="games"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:C==="games"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:C==="games"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(xs,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Active "}),"Games (",G.totalGames,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading admin data..."})]}):e.jsxs(e.Fragment,{children:[C==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:G.totalUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:G.authenticatedUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Authenticated"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:G.guestUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Guest Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-purple-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:G.totalGames}),e.jsx("div",{className:"text-sm text-slate-400",children:"Active Games"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Games by Mode"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:32,style:{color:"rgb(34, 211, 238)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:j.makesOrMisses.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Makes or Misses"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{size:32,style:{color:"rgb(52, 211, 153)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:j.matchPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Match Play"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{size:32,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:j.kingOfTheHill.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"King of the Hill"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{size:32,style:{color:"rgb(167, 139, 250)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:j.bracketPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Bracket Play"})]})]})]})]})]}),C==="users"&&e.jsxs("div",{className:"space-y-4",children:[I.length>0&&e.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-700 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("span",{style:{color:"rgb(34, 211, 238)",fontWeight:600},children:[I.length," user(s) selected"]}),e.jsxs("button",{onClick:()=>z({type:"bulk-users"}),className:"px-4 py-2 rounded-lg transition flex items-center gap-2",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:[e.jsx(ye,{size:16}),"Delete Selected"]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900/50 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-12",children:e.jsx("input",{type:"checkbox",checked:M,onChange:le,className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Subscription"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Total Games"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:w.map(a=>{const R=(a.stats?.makesOrMisses?.gamesPlayed||0)+(a.stats?.matchPlay?.gamesPlayed||0)+(a.stats?.kingOfTheHill?.gamesPlayed||0)+(a.stats?.bracketPlay?.tournamentsPlayed||0);return e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:I.includes(a.uid),onChange:()=>q(a.uid),className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.photoURL?e.jsx("img",{src:a.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:x=>{x.target.style.display="none",x.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-sm font-bold ${a.photoURL?"hidden":"flex"}`,children:a.displayName?.[0]||"G"}),e.jsx("span",{className:"text-white font-medium",children:a.displayName||"Guest User"})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:a.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:a.isAnonymous?e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(120, 53, 15, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(180, 83, 9)",color:"rgb(251, 191, 36)"},children:"Guest"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(20, 83, 45, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(21, 128, 61)",color:"rgb(74, 222, 128)"},children:"Authenticated"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>Q(a.uid,a.credits||0),className:"text-yellow-400 hover:text-yellow-300 font-semibold text-sm flex items-center gap-1",title:"Edit Credits",children:[e.jsx("span",{children:a.credits||0}),e.jsx(Je,{size:12})]})}),e.jsx("td",{className:"px-4 py-3",children:a.subscription?.isActive&&a.subscription?.endDate&&Date.now()<a.subscription.endDate?e.jsxs("button",{onClick:()=>ne(a.uid,a.subscription),className:"px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",style:{backgroundColor:"rgba(88, 28, 135, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(147, 51, 234)",color:"rgb(196, 181, 253)"},title:"Edit Subscription",children:["âœ“ Active",e.jsx(Je,{size:12})]}):e.jsxs("button",{onClick:()=>ne(a.uid,a.subscription),className:"text-slate-500 hover:text-slate-400 text-xs font-semibold flex items-center gap-1",title:"Edit Subscription",children:["None",e.jsx(Je,{size:12})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-white font-semibold",children:R}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>z({type:"stats",id:a.uid,name:a.displayName||"User",gameType:"all"}),className:"p-2 bg-amber-900/30 border border-amber-700 rounded hover:bg-amber-900/50 transition",title:"Reset All Stats",children:e.jsx(Ps,{size:14,className:"text-amber-400"})}),e.jsx("button",{onClick:()=>z({type:"user",id:a.uid,name:a.displayName||"User"}),className:"p-2 bg-red-900/30 border border-red-700 rounded hover:bg-red-900/50 transition",title:"Delete User",children:e.jsx(ye,{size:14,className:"text-red-400"})})]})})]},a.uid)})})]})})})]}),C==="games"&&e.jsxs("div",{className:"space-y-6",children:[G.totalGames>0&&e.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"All Active Games"}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Total: ",G.totalGames," games"]})]}),e.jsxs("button",{onClick:()=>z({type:"bulk-games",id:"all",name:"all games"}),className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(ye,{size:18}),"Delete All Games"]})]}),j.makesOrMisses.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(we,{size:20,className:"text-cyan-400"}),"Makes or Misses (",j.makesOrMisses.length,")"]}),e.jsx("div",{className:"grid gap-2",children:j.makesOrMisses.map(a=>{const R=N===`mom-${a.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-800/50",onClick:()=>T(R?null:`mom-${a.code}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[R?e.jsx(Ue,{size:16,className:"text-cyan-400"}):e.jsx(Ie,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-white font-mono font-semibold",children:a.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[a.players?.length||0," players â€¢ Round ",a.currentRound||0]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:a.createdAt?new Date(a.createdAt).toLocaleString():"-"})]}),R&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.players?.map((x,v)=>e.jsxs("div",{className:"flex justify-between bg-slate-900/50 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:x.name}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[x.score||0," pts"]})]},x.id||v))}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Status:"}),e.jsx("span",{className:"ml-2 text-white",children:a.gameStarted?"In Progress":"Waiting"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Active Player:"}),e.jsx("span",{className:"ml-2 text-white",children:a.players?.[a.activePlayerIndex]?.name||"-"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:x=>{x.stopPropagation(),z({type:"game",id:a.code,name:a.code,gameType:"makesOrMisses"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(ye,{size:16}),"Delete Game"]})})]})]},a.code)})})]}),j.matchPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(oe,{size:20,className:"text-emerald-400"}),"Match Play (",j.matchPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:j.matchPlay.map(a=>{const R=N===`matchPlay-${a.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>T(R?null:`matchPlay-${a.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:a.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[a.player1?.name||"Player 1"," vs ",a.player2?.name||"Player 2"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:a.createdAt?new Date(a.createdAt).toLocaleString():"-"}),R?e.jsx(Ue,{size:20}):e.jsx(Ie,{size:20})]})]}),R&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Match Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 1"}),e.jsx("div",{className:"text-white font-semibold",children:a.player1?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[a.player1?.score||0," points"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 2"}),e.jsx("div",{className:"text-white font-semibold",children:a.player2?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[a.player2?.score||0," points"]})]})]}),a.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",a.currentRound," / 10"]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:x=>{x.stopPropagation(),z({type:"game",id:a.code,name:a.code,gameType:"matchPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(ye,{size:16}),"Delete Game"]})})]})]},a.code)})})]}),j.kingOfTheHill.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(be,{size:20,className:"text-amber-400"}),"King of the Hill (",j.kingOfTheHill.length,")"]}),e.jsx("div",{className:"grid gap-2",children:j.kingOfTheHill.map(a=>{const R=N===`kingOfTheHill-${a.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>T(R?null:`kingOfTheHill-${a.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:a.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[a.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:a.createdAt?new Date(a.createdAt).toLocaleString():"-"}),R?e.jsx(Ue,{size:20}):e.jsx(Ie,{size:20})]})]}),R&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:a.players?.map((x,v)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:x.name}),e.jsxs("span",{className:"text-amber-400 font-semibold text-sm",children:[x.score||0," pts"]})]},x.id||v))}),a.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",a.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:x=>{x.stopPropagation(),z({type:"game",id:a.code,name:a.code,gameType:"kingOfTheHill"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(ye,{size:16}),"Delete Game"]})})]})]},a.code)})})]}),j.bracketPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Se,{size:20,className:"text-violet-400"}),"Bracket Play (",j.bracketPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:j.bracketPlay.map(a=>{const R=N===`bracketPlay-${a.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>T(R?null:`bracketPlay-${a.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:a.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[a.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:a.createdAt?new Date(a.createdAt).toLocaleString():"-"}),R?e.jsx(Ue,{size:20}):e.jsx(Ie,{size:20})]})]}),R&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Standings"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:a.players?.map((x,v)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:x.name}),e.jsxs("span",{className:"text-violet-400 font-semibold text-sm",children:[x.wins||0," wins"]})]},x.id||v))}),a.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",a.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:x=>{x.stopPropagation(),z({type:"game",id:a.code,name:a.code,gameType:"bracketPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(ye,{size:16}),"Delete Game"]})})]})]},a.code)})})]}),G.totalGames===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"No active games"})})]})]})})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>U(null)}),e.jsxs("div",{className:"relative bg-slate-800 border border-yellow-600 rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"ðŸ’°"})," Edit User Credits"]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault();const R=a.target.credits.value;J(H.uid,R)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Credits Amount"}),e.jsx("input",{type:"number",name:"credits",defaultValue:H.currentCredits,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-yellow-500 focus:outline-none",min:"0",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>U(null),className:"flex-1 bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition font-semibold",children:"Save Changes"})]})]})]})]}),B&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>re(null)}),e.jsxs("div",{className:"relative bg-slate-800 border border-purple-600 rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-400",children:"ðŸ‘‘"})," Edit User Subscription"]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault();const R=a.target.isActive.checked,x=a.target.plan.value,v=a.target.endDate.value;te(B.uid,R,x,v)},children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",defaultChecked:B.currentSubscription?.isActive||!1,className:"w-4 h-4 rounded border-slate-600 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-300",children:"Active Subscription"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Plan Type"}),e.jsxs("select",{name:"plan",defaultValue:B.currentSubscription?.plan||"monthly",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",defaultValue:B.currentSubscription?.endDate?new Date(B.currentSubscription.endDate).toISOString().split("T")[0]:"",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>re(null),className:"flex-1 bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition font-semibold",children:"Save Changes"})]})]})]})]})]}):e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-red-700 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx(Xe,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:h,className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition",children:"Close"})]})]}):null}const Fe=[{id:"668e3aca-5106-4c24-a9c1-2bd89926ebad",name:"Sunshine Lanes",url:"https://livescore.lanetalk.com/livescoring/668e3aca-5106-4c24-a9c1-2bd89926ebad"},{id:"15903a3d-a2f1-48d8-ab8b-97c9476b688a",name:"Enterprise Lanes",url:"https://livescore.lanetalk.com/livescoring/15903a3d-a2f1-48d8-ab8b-97c9476b688a"},{id:"4fc22569-ae38-44cf-9d2d-78d7034be9b7",name:"G3 Entertainment LLC",url:"https://livescore.lanetalk.com/livescoring/4fc22569-ae38-44cf-9d2d-78d7034be9b7"}],bs=Fe[0],at=u=>{const h=Fe.find(d=>d.id===u)||bs;return{finished:`${h.url}?tab=finished&q=&order=date&sort=asc`,scores:`${h.url}?tab=scores`,live:h.url}};function rt({isOpen:u,onClose:h}){const[d,m]=l.useState(bs.id);if(!u)return null;const o=at(d),w=Fe.find(y=>y.id===d);return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{className:"rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)",boxShadow:"0 25px 50px -12px rgba(251, 191, 36, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex justify-between items-center flex-shrink-0",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{size:28,style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Top Bowlers"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(254, 243, 199)"},children:"Weekly Leaderboard"})]})]}),e.jsxs("button",{onClick:h,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:y=>y.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(ve,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-4 md:p-6 flex-shrink-0",style:{borderBottom:"1px solid rgb(51, 65, 85)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Bowling Center"}),e.jsx("select",{value:d,onChange:y=>m(y.target.value),className:"w-full px-4 py-3 rounded-lg focus:outline-none",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:Fe.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsx("div",{className:"p-6 flex-1",children:e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(51, 65, 85)"},children:[e.jsx(oe,{size:80,className:"mx-auto mb-6",style:{color:"rgb(251, 191, 36)"}}),e.jsxs("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:["View ",w?.name," Leaderboard"]}),e.jsx("p",{className:"mb-8 text-lg",style:{color:"rgb(148, 163, 184)"},children:"Click below to view the weekly top bowlers on Lanetalk Live Scoring"}),e.jsxs("a",{href:o.scores,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-8 py-4 font-bold rounded-lg transition text-lg",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",color:"rgb(255, 255, 255)",boxShadow:"0 10px 15px -3px rgba(217, 119, 6, 0.5)"},onMouseEnter:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(180, 83, 9), rgb(146, 64, 14))",onMouseLeave:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",children:[e.jsx(oe,{size:24}),"View Top Bowlers",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})})]})})}function lt({isOpen:u,onClose:h}){return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},onClick:h}),e.jsxs("div",{className:"relative rounded-2xl max-w-lg w-full",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)",boxShadow:"0 25px 50px -12px rgba(59, 130, 246, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex items-center justify-between",style:{background:"linear-gradient(to right, rgb(37, 99, 235), rgb(139, 92, 246))"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{size:24,className:"md:hidden",style:{color:"rgb(255, 255, 255)"}}),e.jsx(He,{size:28,className:"hidden md:block",style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Import Game Scores"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(219, 234, 254)"},children:"Add completed game results to your stats"})]})]}),e.jsxs("button",{onClick:h,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(ve,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-8 md:p-12 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Gs,{size:80,className:"mx-auto",style:{color:"rgb(251, 191, 36)"}})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:"Coming Soon!"}),e.jsx("p",{className:"text-lg mb-6",style:{color:"rgb(148, 163, 184)"},children:"We're working on an exciting feature that will allow you to automatically import your bowling scores and track your progress over time."}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgb(59, 130, 246)"},children:[e.jsx("p",{className:"text-sm",style:{color:"rgb(147, 197, 253)"},children:e.jsx("strong",{children:"What's Coming:"})}),e.jsxs("ul",{className:"text-sm mt-2 space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsx("li",{children:"âœ“ Automatic score detection from Lanetalk"}),e.jsx("li",{children:"âœ“ Historical game tracking"}),e.jsx("li",{children:"âœ“ Performance analytics and trends"}),e.jsx("li",{children:"âœ“ Personalized statistics dashboard"})]})]})]})]})]}):null}function nt({slot:u="1234567890",format:h="auto",responsive:d=!0}){const m=l.useRef(null);return l.useEffect(()=>{try{window.adsbygoogle&&m.current&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(o){console.error("AdSense error:",o)}},[]),e.jsx("div",{className:"ad-banner-container",style:{textAlign:"center",margin:"20px 0"},children:e.jsx("ins",{ref:m,className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9558998933851822","data-ad-slot":u,"data-ad-format":h,"data-full-width-responsive":d.toString()})})}function ot({isOpen:u,onClose:h,onRewardGranted:d,gameName:m}){const[o,w]=l.useState(!1),[y,j]=l.useState(!1);if(!u)return null;const P=()=>{w(!0),setTimeout(()=>{w(!1),j(!0),setTimeout(()=>{d(),h()},2e3)},3e3)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},onClick:h}),e.jsxs("div",{className:"relative rounded-2xl max-w-md w-full p-8",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(124, 58, 237)"},onClick:G=>G.stopPropagation(),children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(de,{size:20})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom right, rgb(168, 85, 247), rgb(124, 58, 237))"},children:e.jsx(rs,{size:32,style:{color:"rgb(255, 255, 255)"}})})}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",style:{color:"rgb(255, 255, 255)"},children:y?"Unlocked!":"Watch Ad to Play"}),y?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center mb-6",style:{color:"rgb(34, 197, 94)"},children:["âœ… You can now play ",m," for the next 24 hours!"]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-bounce",children:e.jsx(rs,{size:48,style:{color:"rgb(168, 85, 247)"}})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center mb-6",style:{color:"rgb(148, 163, 184)"},children:["Watch a short ad to unlock ",e.jsx("span",{className:"font-bold",style:{color:"rgb(168, 85, 247)"},children:m})," for 24 hours"]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"Play unlimited games for 24 hours"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"Track your stats"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"100% free"})]})]}),e.jsx("button",{onClick:P,disabled:o,className:"w-full py-4 rounded-lg font-bold text-lg transition flex items-center justify-center gap-2",style:{background:o?"rgb(71, 85, 105)":"linear-gradient(to right, rgb(168, 85, 247), rgb(124, 58, 237))",color:"rgb(255, 255, 255)",cursor:o?"not-allowed":"pointer"},children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Loading Ad..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(es,{size:20}),e.jsx("span",{children:"Watch Ad (30s)"})]})}),e.jsxs("p",{className:"text-xs text-center mt-4",style:{color:"rgb(100, 116, 139)"},children:["Or ",e.jsx("button",{onClick:h,className:"underline hover:text-purple-400",children:"sign up"})," for unlimited access"]})]})]})]})}var ps="clover",it=function(h){return h===3?"v3":h},fs="https://js.stripe.com",ct="".concat(fs,"/").concat(ps,"/stripe.js"),dt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,mt=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var xt=function(h){return dt.test(h)||mt.test(h)},ut=function(){for(var h=document.querySelectorAll('script[src^="'.concat(fs,'"]')),d=0;d<h.length;d++){var m=h[d];if(xt(m.src))return m}return null},cs=function(h){var d="",m=document.createElement("script");m.src="".concat(ct).concat(d);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(m),m},ht=function(h,d){!h||!h._registerWrapper||h._registerWrapper({name:"stripe-js",version:"8.0.0",startTime:d})},Ee=null,Oe=null,We=null,gt=function(h){return function(d){h(new Error("Failed to load Stripe.js",{cause:d}))}},bt=function(h,d){return function(){window.Stripe?h(window.Stripe):d(new Error("Stripe.js not available"))}},pt=function(h){return Ee!==null?Ee:(Ee=new Promise(function(d,m){if(typeof window>"u"||typeof document>"u"){d(null);return}if(window.Stripe){d(window.Stripe);return}try{var o=ut();if(!(o&&h)){if(!o)o=cs(h);else if(o&&We!==null&&Oe!==null){var w;o.removeEventListener("load",We),o.removeEventListener("error",Oe),(w=o.parentNode)===null||w===void 0||w.removeChild(o),o=cs(h)}}We=bt(d,m),Oe=gt(m),o.addEventListener("load",We),o.addEventListener("error",Oe)}catch(y){m(y);return}}),Ee.catch(function(d){return Ee=null,Promise.reject(d)}))},ft=function(h,d,m){if(h===null)return null;var o=d[0],w=o.match(/^pk_test/),y=it(h.version),j=ps;w&&y!==j&&console.warn("Stripe.js@".concat(y," was loaded on the page, but @stripe/stripe-js@").concat("8.0.0"," expected Stripe.js@").concat(j,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var P=h.apply(void 0,d);return ht(P,m),P},Re,ys=!1,js=function(){return Re||(Re=pt(null).catch(function(h){return Re=null,Promise.reject(h)}),Re)};Promise.resolve().then(function(){return js()}).catch(function(u){ys||console.warn(u)});var Ns=function(){for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];ys=!0;var o=Date.now();return js().then(function(w){return ft(w,d,o)})};const vs="pk_live_51SDsYbAFCuklL7z9JeRD75CsHePhmbpNOLA5injymkkxpvdOEPfqomnuh59cjSHSmC42jA5hbbyQheqJaDQH00rK00lbf5KUgB",ge={subscription:{monthly:{priceId:"price_1SDtWbAFCuklL7z9RLWbjP6P",amount:2.99,interval:"month",name:"Ad-Free Monthly"},yearly:{priceId:"price_1SDtWbAFCuklL7z9drqnyJfm",amount:19.99,interval:"year",name:"Ad-Free Yearly"}},credits:{small:{priceId:"price_1SDtWcAFCuklL7z9zKEVLQpB",amount:.99,credits:10,name:"Starter Pack"},medium:{priceId:"price_1SDtWcAFCuklL7z9XTpzLgk4",amount:4.99,credits:60,name:"Popular Pack",bonus:10},large:{priceId:"price_1SDtWdAFCuklL7z9B4ogxHgi",amount:9.99,credits:150,name:"Value Pack",bonus:30}}},ds=1,yt=Ns(vs);function jt({isOpen:u,onClose:h,user:d}){const[m,o]=l.useState("monthly"),[w,y]=l.useState(!1);if(!u)return null;const j=async()=>{if(!d||d.isAnonymous){alert("Please sign in to subscribe");return}y(!0);try{const G=await yt,k=ge.subscription[m],C=await fetch("/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:k.priceId,userId:d.uid,email:d.email,mode:"subscription"})});if(!C.ok)throw new Error("Failed to create checkout session");const{sessionId:E}=await C.json(),N=await G.redirectToCheckout({sessionId:E});N.error&&alert(N.error.message)}catch(G){console.error("Subscription error:",G),alert("Failed to start subscription. Please try again.")}finally{y(!1)}},P=["Remove all ads forever","Unlimited access to all games","Priority customer support","Early access to new features","Support indie development"];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-purple-500/30 shadow-2xl shadow-purple-500/20",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"w-6 h-6 text-yellow-300"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Go Ad-Free"})]}),e.jsx("p",{className:"text-purple-100",children:"Unlimited bowling, zero interruptions"})]}),e.jsx("button",{onClick:h,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>o("monthly"),className:`p-6 rounded-xl border-2 transition-all ${m==="monthly"?"border-purple-500 bg-purple-500/10 shadow-lg shadow-purple-500/20":"border-gray-700 hover:border-gray-600"}`,children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Monthly"}),e.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",ge.subscription.monthly.amount]}),e.jsx("div",{className:"text-sm text-gray-400",children:"per month"})]}),e.jsxs("button",{onClick:()=>o("yearly"),className:`p-6 rounded-xl border-2 transition-all relative ${m==="yearly"?"border-purple-500 bg-purple-500/10 shadow-lg shadow-purple-500/20":"border-gray-700 hover:border-gray-600"}`,children:[e.jsx("div",{className:"absolute -top-3 -right-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-bold px-3 py-1 rounded-full",children:"Save 44%"}),e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Yearly"}),e.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:["$",ge.subscription.yearly.amount]}),e.jsx("div",{className:"text-sm text-gray-400",children:"per year"}),e.jsxs("div",{className:"text-xs text-purple-400 mt-2",children:["$",(ge.subscription.yearly.amount/12).toFixed(2),"/month"]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-yellow-400"}),"What you get:"]}),e.jsx("ul",{className:"space-y-3",children:P.map((G,k)=>e.jsxs("li",{className:"flex items-start gap-3 text-gray-300",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:G})]},k))})]}),e.jsx("button",{onClick:j,disabled:w,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:w?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):`Subscribe for $${ge.subscription[m].amount}/${m==="monthly"?"mo":"yr"}`}),e.jsx("p",{className:"text-center text-sm text-gray-400",children:"Cancel anytime. No questions asked."})]})]})})}const Nt=Ns(vs);function vt({isOpen:u,onClose:h,user:d,currentCredits:m}){const[o,w]=l.useState("medium"),[y,j]=l.useState(!1);if(!u)return null;const P=async()=>{if(!d||d.isAnonymous){alert("Please sign in to purchase credits");return}j(!0);try{const k=await Nt,C=ge.credits[o],E=await fetch("/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:C.priceId,userId:d.uid,email:d.email,credits:C.credits,mode:"payment"})});if(!E.ok)throw new Error("Failed to create checkout session");const{sessionId:N}=await E.json(),T=await k.redirectToCheckout({sessionId:N});T.error&&alert(T.error.message)}catch(k){console.error("Purchase error:",k),alert("Failed to purchase credits. Please try again.")}finally{j(!1)}},G=[{id:"small",icon:ss,color:"from-blue-500 to-cyan-500",shadow:"shadow-blue-500/20",hover:"hover:shadow-blue-500/40"},{id:"medium",icon:xe,color:"from-purple-500 to-pink-500",shadow:"shadow-purple-500/20",hover:"hover:shadow-purple-500/40",badge:"Most Popular"},{id:"large",icon:Te,color:"from-yellow-500 to-orange-500",shadow:"shadow-yellow-500/20",hover:"hover:shadow-yellow-500/40",badge:"Best Value"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-cyan-500/30 shadow-2xl shadow-cyan-500/20",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-cyan-600 to-blue-600 p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ss,{className:"w-6 h-6 text-yellow-300"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Buy Credits"})]}),e.jsx("p",{className:"text-cyan-100",children:"Play premium games without watching ads"}),m!==void 0&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full",children:[e.jsx(ts,{className:"w-4 h-4 text-yellow-300"}),e.jsxs("span",{className:"text-white font-semibold",children:["Current Balance: ",m," credits"]})]})]}),e.jsx("button",{onClick:h,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:G.map(k=>{const C=ge.credits[k.id],E=k.icon,N=o===k.id;return e.jsxs("button",{onClick:()=>w(k.id),className:`relative p-6 rounded-xl border-2 transition-all ${N?`border-transparent bg-gradient-to-br ${k.color} shadow-xl ${k.hover}`:"border-gray-700 hover:border-gray-600 bg-gray-800/50"}`,children:[k.badge&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-bold px-3 py-1 rounded-full whitespace-nowrap",children:k.badge}),e.jsx("div",{className:`mb-4 ${N?"text-white":"text-gray-400"}`,children:e.jsx(E,{className:"w-10 h-10 mx-auto"})}),e.jsx("div",{className:`text-xl font-bold mb-2 ${N?"text-white":"text-gray-300"}`,children:C.name}),e.jsx("div",{className:`text-4xl font-bold mb-2 ${N?"text-white":"text-gray-200"}`,children:C.credits}),e.jsx("div",{className:`text-sm mb-3 ${N?"text-white/90":"text-gray-400"}`,children:"credits"}),C.bonus&&e.jsxs("div",{className:`text-sm font-semibold mb-3 ${N?"text-yellow-200":"text-yellow-500"}`,children:["+",C.bonus," Bonus Credits!"]}),e.jsxs("div",{className:`text-2xl font-bold ${N?"text-white":"text-gray-300"}`,children:["$",C.amount]}),e.jsxs("div",{className:`text-xs mt-2 ${N?"text-white/80":"text-gray-500"}`,children:["$",(C.amount/C.credits).toFixed(2)," per credit"]})]},k.id)})}),e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ts,{className:"w-5 h-5 text-cyan-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("p",{className:"font-semibold text-cyan-300 mb-1",children:"How Credits Work:"}),e.jsxs("ul",{className:"space-y-1 text-gray-400",children:[e.jsx("li",{children:"â€¢ Use 1 credit to unlock any premium game"}),e.jsx("li",{children:"â€¢ Credits never expire"}),e.jsx("li",{children:"â€¢ No ads when playing with credits"}),e.jsx("li",{children:"â€¢ Perfect for occasional players"})]})]})]})}),e.jsx("button",{onClick:P,disabled:y,className:`w-full bg-gradient-to-r ${G.find(k=>k.id===o).color} hover:shadow-xl text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg ${G.find(k=>k.id===o).shadow} disabled:opacity-50 disabled:cursor-not-allowed`,children:y?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):`Buy ${ge.credits[o].credits} Credits for $${ge.credits[o].amount}`}),e.jsx("p",{className:"text-center text-sm text-gray-400",children:"Secure payment powered by Stripe"})]})]})})}function wt({isOpen:u,onClose:h,gameName:d,userCredits:m,onUseCredit:o,onBuyCredits:w,onSubscribe:y,onWatchAd:j}){if(!u)return null;const P=m>=ds;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-lg w-full border border-purple-500/30 shadow-2xl shadow-purple-500/20",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-t-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),e.jsxs("div",{className:"relative flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(es,{className:"w-6 h-6 text-yellow-300"}),e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Unlock ",d]})]}),e.jsx("p",{className:"text-purple-100",children:"Choose how you'd like to play"})]}),e.jsx("button",{onClick:h,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-xl p-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{className:"w-6 h-6 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Your Balance"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[m," Credits"]})]})]})}),e.jsx("button",{onClick:o,disabled:!P,className:`w-full p-5 rounded-xl border-2 transition-all ${P?"border-cyan-500 bg-cyan-500/10 hover:bg-cyan-500/20 hover:shadow-lg hover:shadow-cyan-500/30":"border-gray-700 bg-gray-800/50 opacity-50 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-cyan-500 rounded-full p-3",children:e.jsx(ss,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"text-lg font-bold text-white",children:["Use ",ds," Credit"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Play without ads right now"})]}),P&&e.jsx("div",{className:"text-cyan-400 font-bold",children:"â†’"})]})}),e.jsx("button",{onClick:j,className:"w-full p-5 rounded-xl border-2 border-blue-500 bg-blue-500/10 hover:bg-blue-500/20 hover:shadow-lg hover:shadow-blue-500/30 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-500 rounded-full p-3",children:e.jsx(es,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:"Watch Ad"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Free 24-hour access to all games"})]}),e.jsx("div",{className:"text-blue-400 font-bold",children:"â†’"})]})}),e.jsx("button",{onClick:w,className:"w-full p-5 rounded-xl border-2 border-purple-500 bg-purple-500/10 hover:bg-purple-500/20 hover:shadow-lg hover:shadow-purple-500/30 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-purple-500 rounded-full p-3",children:e.jsx(Te,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:"Buy Credits"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Starting at $0.99 for 10 credits"})]}),e.jsx("div",{className:"text-purple-400 font-bold",children:"â†’"})]})}),e.jsxs("button",{onClick:y,className:"w-full p-5 rounded-xl border-2 border-yellow-500 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 hover:from-yellow-500/20 hover:to-orange-500/20 hover:shadow-lg hover:shadow-yellow-500/30 transition-all relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-bold px-2 py-1 rounded-full",children:"Best Value"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full p-3",children:e.jsx(be,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:"Go Ad-Free"}),e.jsx("div",{className:"text-sm text-gray-400",children:"$2.99/month - Unlimited access"})]}),e.jsx("div",{className:"text-yellow-400 font-bold",children:"â†’"})]})]})]})]})})}function kt(u){const[h,d]=l.useState(0),[m,o]=l.useState({isActive:!1,plan:null,startDate:null,endDate:null}),[w,y]=l.useState(!0);l.useEffect(()=>{if(!u){y(!1);return}const C=D(O,`users/${u}`),E=Pe(C,N=>{if(N.exists()){const T=N.val();d(T.credits||0),o(T.subscription||{isActive:!1,plan:null,startDate:null,endDate:null})}y(!1)});return()=>E()},[u]);const j=()=>!m.isActive||!m.endDate?!1:Date.now()<m.endDate,P=()=>!j(),G=async C=>{if(!u||h<C)return!1;try{const E=D(O,`users/${u}`),N=await Y(E);if(N.exists()){const T=N.val(),f=(T.credits||0)-C;return f<0?!1:(await ee(E,{...T,credits:f}),!0)}return!1}catch(E){return console.error("Error spending credits:",E),!1}},k=async C=>{if(!u)return!1;try{const E=D(O,`users/${u}`),N=await Y(E);if(N.exists()){const T=N.val(),f=(T.credits||0)+C;return await ee(E,{...T,credits:f}),!0}return!1}catch(E){return console.error("Error adding credits:",E),!1}};return{credits:h,subscription:m,loading:w,hasActiveSubscription:j(),shouldShowAds:P(),spendCredits:G,addCredits:k}}function Ct(){const[u,h]=l.useState(null),[d,m]=l.useState(null),[o,w]=l.useState(!1),[y,j]=l.useState(!1),[P,G]=l.useState(!1),[k,C]=l.useState(!1),[E,N]=l.useState(!1),[T,f]=l.useState(!1),[z,I]=l.useState(!1),[S,_]=l.useState(!1),[Z,M]=l.useState(""),[W,H]=l.useState(()=>{const c=localStorage.getItem("adUnlockedGames");return c?JSON.parse(c):{}}),[U,B]=l.useState(null),[re,K]=l.useState(!1),[ce,X]=l.useState(!1),[ie,se]=l.useState(!1),[ae,le]=l.useState(null),{currentUser:q,isGuest:Q,isAdmin:ne,signOut:J}=ue(),{credits:te,hasActiveSubscription:a,shouldShowAds:R,spendCredits:x}=kt(q?.uid),v=l.useRef(null);l.useEffect(()=>{const c=new URLSearchParams(window.location.search),A=c.get("join"),r=c.get("game");A&&r&&(B({gameId:r,joinCode:A.toUpperCase()}),!q||Q?w(!0):h(r))},[q,Q]),l.useEffect(()=>{U&&q&&!Q&&(h(U.gameId),window.history.replaceState({},document.title,window.location.pathname))},[q,Q,U]),l.useEffect(()=>{const c=A=>{v.current&&!v.current.contains(A.target)&&j(!1)};return y&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[y]);const L=[{id:"makes-or-misses",name:"Makes or Misses",description:"Predict if you make or miss the next shot",icon:we,gradient:"from-cyan-500 via-blue-500 to-indigo-600",glowColor:"shadow-cyan-500/50",badge:"ðŸŽ¯ Quick Play",available:!0},{id:"match-play",name:"Match Play",description:"Head-to-head 3-game match",icon:oe,gradient:"from-emerald-500 via-teal-500 to-cyan-600",glowColor:"shadow-emerald-500/50",badge:"âš¡ 1v1 Battle",available:!0},{id:"king-of-the-hill",name:"King of the Hill",description:"High game takes it all",icon:be,gradient:"from-amber-500 via-orange-500 to-red-600",glowColor:"shadow-amber-500/50",badge:"ðŸ‘‘ Multiplayer",available:!0},{id:"bracket-play",name:"Bracket Play",description:"8-player single elimination bracket",icon:Se,gradient:"from-violet-500 via-purple-500 to-fuchsia-600",glowColor:"shadow-violet-500/50",badge:"ðŸ† Tournament",available:!0},{id:"mystery-frames",name:"Mystery Frames",description:"Quarters game with strike-based mystery bonuses",icon:xe,gradient:"from-amber-500 via-yellow-500 to-orange-600",glowColor:"shadow-amber-500/50",badge:"âš¡ Quarters + Bonus",available:!0}],b=c=>{const A=L.find(r=>r.id===c);if(A.available){if(c==="makes-or-misses"){h(c);return}if(a){h(c);return}if(Q){const r=W[c];if(r&&Date.now()<r){h(c);return}M(A.name),_(!0);return}le(c),se(!0)}},s=()=>{const c=Date.now()+864e5,A={"match-play":c,"king-of-the-hill":c,"bracket-play":c,"mystery-frames":c};H(A),localStorage.setItem("adUnlockedGames",JSON.stringify(A)),I(!0)},n=async()=>{if(!ae)return;await x(1)?(se(!1),h(ae),le(null)):alert("Unable to unlock game. Please buy more credits.")},t=()=>{se(!1);const c=L.find(A=>A.id===ae);M(c?.name||""),_(!0)},i=()=>{se(!1),X(!0)},g=()=>{se(!1),K(!0)},p=()=>{h(null)};return u==="makes-or-misses"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:p,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-cyan-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(ve,{size:20}),"Back to Games"]}),e.jsx(Ks,{})]}):u==="match-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:p,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-emerald-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(ve,{size:20}),"Back to Games"]}),e.jsx(Vs,{})]}):u==="king-of-the-hill"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:p,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(ve,{size:20}),"Back to Games"]}),e.jsx(Ys,{})]}):u==="bracket-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:p,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-violet-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-violet-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(ve,{size:20}),"Back to Games"]}),e.jsx(Zs,{})]}):u==="mystery-frames"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:p,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-yellow-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(ve,{size:20}),"Back to Games"]}),e.jsx(Xs,{})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-4 right-4 md:top-6 md:right-6 z-50",children:e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("button",{onClick:()=>j(!y),className:"flex items-center gap-2 md:gap-3 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-full px-3 py-2 md:px-4 hover:bg-slate-800 transition",children:[q?.photoURL?e.jsx("img",{src:q.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center ${q?.photoURL?"hidden":"flex"}`,children:e.jsx(Ze,{size:20,className:"text-white"})}),e.jsxs("span",{className:"text-white font-semibold text-sm md:text-base hidden sm:inline",children:[q?.displayName||"Guest",Q&&e.jsx("span",{className:"text-slate-400 text-sm ml-1",children:"(Guest)"})]})]}),y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 sm:w-64 rounded-xl overflow-hidden z-50",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59), rgb(15, 23, 42))",borderColor:"rgba(51, 65, 85, 0.5)",border:"1px solid rgba(51, 65, 85, 0.5)",boxShadow:"0 25px 50px -12px rgba(168, 85, 247, 0.2)",backdropFilter:"blur(8px)"},children:[Q&&e.jsxs("button",{onClick:()=>{w(!0),j(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(34, 211, 238)",backgroundColor:"transparent",borderBottom:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Ze,{size:18}),"Sign In / Register"]}),e.jsxs("button",{onClick:()=>{G(!0),j(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(241, 245, 249)",backgroundColor:"transparent"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[e.jsx(us,{size:18}),"View Stats"]}),ne&&e.jsxs("button",{onClick:()=>{C(!0),j(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(192, 132, 252)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Xe,{size:18}),"Admin Dashboard"]}),!Q&&e.jsxs("button",{onClick:async()=>{await J(),j(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(248, 113, 113)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Ms,{size:18}),"Sign Out"]})]})]})}),e.jsx(et,{isOpen:o,onClose:()=>w(!1),pendingInvite:U}),z&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>I(!1)}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-purple-500 rounded-2xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Register to Play"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["Guest accounts can only access ",e.jsx("span",{className:"text-cyan-400 font-semibold",children:"Makes or Misses"}),". Sign up for a free account to unlock all game modes and track your stats!"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{I(!1),w(!0)},className:"flex-1 bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg hover:shadow-purple-500/50 transition",children:"Sign Up"}),e.jsx("button",{onClick:()=>I(!1),className:"flex-1 bg-slate-800 text-slate-300 font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition border border-slate-700",children:"Cancel"})]})]})]}),e.jsx(st,{isOpen:P,onClose:()=>G(!1)}),e.jsx(tt,{isOpen:k,onClose:()=>C(!1)}),e.jsx(rt,{isOpen:E,onClose:()=>N(!1)}),e.jsx(lt,{isOpen:T,onClose:()=>f(!1)}),e.jsx(ot,{isOpen:S,onClose:()=>_(!1),onRewardGranted:s,gameName:Z}),e.jsx(wt,{isOpen:ie,onClose:()=>{se(!1),le(null)},gameName:L.find(c=>c.id===ae)?.name||"",userCredits:te,onUseCredit:n,onBuyCredits:i,onSubscribe:g,onWatchAd:t}),e.jsx(jt,{isOpen:re,onClose:()=>K(!1),user:q}),e.jsx(vt,{isOpen:ce,onClose:()=>X(!1),user:q,currentCredits:te}),e.jsx("div",{className:"relative z-10 min-h-screen p-4 md:p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full",children:[e.jsxs("div",{className:"text-center mb-12 md:mb-16 space-y-4 pt-16 sm:pt-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 md:gap-3 bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20 rounded-full px-4 md:px-6 py-2 mb-4",children:[e.jsx(Te,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-purple-300 text-xs md:text-sm font-semibold tracking-wide",children:"MULTIPLAYER BOWLING GAMES"})]}),e.jsx("h1",{className:"text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 mb-4 tracking-tight",children:"BOWLING FUN"}),e.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-light",children:"Choose your battleground and dominate the lanes with friends"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[L.map(c=>{const A=c.icon,r=d===c.id,$=Q&&c.id!=="makes-or-misses";return e.jsxs("button",{onClick:()=>b(c.id),onMouseEnter:()=>m(c.id),onMouseLeave:()=>m(null),disabled:!c.available,className:`group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 ${c.available?"hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl":"opacity-40 cursor-not-allowed"} ${$?"opacity-60":""}`,children:[r&&c.available&&e.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${c.gradient} rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:c.badge})}),e.jsxs("div",{className:`relative w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br ${c.gradient} flex items-center justify-center transform ${c.available?"group-hover:scale-110 group-hover:rotate-6":""} transition-all duration-500 shadow-lg ${r?c.glowColor+" shadow-2xl":""}`,children:[e.jsx(A,{size:32,className:"text-white"}),$&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{size:24,className:"text-white"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:c.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:c.description}),c.available?e.jsxs("div",{className:`flex items-center justify-center gap-2 bg-gradient-to-r ${c.gradient} px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300`,children:[e.jsx(xe,{size:16}),e.jsx("span",{children:"PLAY NOW"})]}):e.jsx("div",{className:"inline-flex items-center gap-2 bg-slate-800 text-slate-500 px-4 py-2.5 rounded-lg text-sm font-semibold",children:"ðŸ”’ Coming Soon"})]})]},c.id)}),e.jsxs("button",{onClick:()=>N(!0),onMouseEnter:()=>m("top-bowlers"),onMouseLeave:()=>m(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[d==="top-bowlers"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ† Leaderboard"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-amber-500 via-yellow-500 to-orange-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-amber-500/50 hover:shadow-2xl",children:e.jsx(oe,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Check Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Weekly leaderboard from your bowling center"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(Te,{size:16}),e.jsx("span",{children:"VIEW LEADERS"})]})]})]}),q&&!Q&&e.jsxs("button",{onClick:()=>f(!0),onMouseEnter:()=>m("import-scores"),onMouseLeave:()=>m(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[d==="import-scores"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ“Š Track Stats"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-blue-500/50 hover:shadow-2xl",children:e.jsx(He,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Import Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Add your completed game scores"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(He,{size:16}),e.jsx("span",{children:"ADD SCORES"})]})]})]})]}),R&&e.jsx("div",{className:"mt-12 mb-6",children:e.jsx(nt,{slot:"1234567890",format:"horizontal",responsive:!0})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:"5"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Game Modes"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"âˆž"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Multiplayer Fun"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold",children:"ðŸŽ³"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Real-Time Sync"})]})]})]})})]})}Fs.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Qs,{children:e.jsx(Ct,{})})}));
