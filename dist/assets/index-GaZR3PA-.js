(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Qx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yu={exports:{}},Ti={},vu={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function qx(){if(Yp)return xe;Yp=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function x(C){return C===null||typeof C!="object"?null:(C=_&&C[_]||C["@@iterator"],typeof C=="function"?C:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,O={};function S(C,P,Y){this.props=C,this.context=P,this.refs=O,this.updater=Y||k}S.prototype.isReactComponent={},S.prototype.setState=function(C,P){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,P,"setState")},S.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ee(){}ee.prototype=S.prototype;function U(C,P,Y){this.props=C,this.context=P,this.refs=O,this.updater=Y||k}var X=U.prototype=new ee;X.constructor=U,I(X,S.prototype),X.isPureReactComponent=!0;var q=Array.isArray,D=Object.prototype.hasOwnProperty,Z={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function se(C,P,Y){var ie,N={},A=null,L=null;if(P!=null)for(ie in P.ref!==void 0&&(L=P.ref),P.key!==void 0&&(A=""+P.key),P)D.call(P,ie)&&!G.hasOwnProperty(ie)&&(N[ie]=P[ie]);var T=arguments.length-2;if(T===1)N.children=Y;else if(1<T){for(var F=Array(T),H=0;H<T;H++)F[H]=arguments[H+2];N.children=F}if(C&&C.defaultProps)for(ie in T=C.defaultProps,T)N[ie]===void 0&&(N[ie]=T[ie]);return{$$typeof:r,type:C,key:A,ref:L,props:N,_owner:Z.current}}function ue(C,P){return{$$typeof:r,type:C.type,key:P,ref:C.ref,props:C.props,_owner:C._owner}}function Me(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function Ne(C){var P={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Y){return P[Y]})}var ye=/\/+/g;function Ce(C,P){return typeof C=="object"&&C!==null&&C.key!=null?Ne(""+C.key):P.toString(36)}function Ie(C,P,Y,ie,N){var A=typeof C;(A==="undefined"||A==="boolean")&&(C=null);var L=!1;if(C===null)L=!0;else switch(A){case"string":case"number":L=!0;break;case"object":switch(C.$$typeof){case r:case e:L=!0}}if(L)return L=C,N=N(L),C=ie===""?"."+Ce(L,0):ie,q(N)?(Y="",C!=null&&(Y=C.replace(ye,"$&/")+"/"),Ie(N,P,Y,"",function(H){return H})):N!=null&&(Me(N)&&(N=ue(N,Y+(!N.key||L&&L.key===N.key?"":(""+N.key).replace(ye,"$&/")+"/")+C)),P.push(N)),1;if(L=0,ie=ie===""?".":ie+":",q(C))for(var T=0;T<C.length;T++){A=C[T];var F=ie+Ce(A,T);L+=Ie(A,P,Y,F,N)}else if(F=x(C),typeof F=="function")for(C=F.call(C),T=0;!(A=C.next()).done;)A=A.value,F=ie+Ce(A,T++),L+=Ie(A,P,Y,F,N);else if(A==="object")throw P=String(C),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return L}function ve(C,P,Y){if(C==null)return C;var ie=[],N=0;return Ie(C,ie,"","",function(A){return P.call(Y,A,N++)}),ie}function Se(C){if(C._status===-1){var P=C._result;P=P(),P.then(function(Y){(C._status===0||C._status===-1)&&(C._status=1,C._result=Y)},function(Y){(C._status===0||C._status===-1)&&(C._status=2,C._result=Y)}),C._status===-1&&(C._status=0,C._result=P)}if(C._status===1)return C._result.default;throw C._result}var fe={current:null},V={transition:null},te={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:V,ReactCurrentOwner:Z};function K(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:ve,forEach:function(C,P,Y){ve(C,function(){P.apply(this,arguments)},Y)},count:function(C){var P=0;return ve(C,function(){P++}),P},toArray:function(C){return ve(C,function(P){return P})||[]},only:function(C){if(!Me(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},xe.Component=S,xe.Fragment=n,xe.Profiler=l,xe.PureComponent=U,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,xe.act=K,xe.cloneElement=function(C,P,Y){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ie=I({},C.props),N=C.key,A=C.ref,L=C._owner;if(P!=null){if(P.ref!==void 0&&(A=P.ref,L=Z.current),P.key!==void 0&&(N=""+P.key),C.type&&C.type.defaultProps)var T=C.type.defaultProps;for(F in P)D.call(P,F)&&!G.hasOwnProperty(F)&&(ie[F]=P[F]===void 0&&T!==void 0?T[F]:P[F])}var F=arguments.length-2;if(F===1)ie.children=Y;else if(1<F){T=Array(F);for(var H=0;H<F;H++)T[H]=arguments[H+2];ie.children=T}return{$$typeof:r,type:C.type,key:N,ref:A,props:ie,_owner:L}},xe.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},xe.createElement=se,xe.createFactory=function(C){var P=se.bind(null,C);return P.type=C,P},xe.createRef=function(){return{current:null}},xe.forwardRef=function(C){return{$$typeof:m,render:C}},xe.isValidElement=Me,xe.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:Se}},xe.memo=function(C,P){return{$$typeof:g,type:C,compare:P===void 0?null:P}},xe.startTransition=function(C){var P=V.transition;V.transition={};try{C()}finally{V.transition=P}},xe.unstable_act=K,xe.useCallback=function(C,P){return fe.current.useCallback(C,P)},xe.useContext=function(C){return fe.current.useContext(C)},xe.useDebugValue=function(){},xe.useDeferredValue=function(C){return fe.current.useDeferredValue(C)},xe.useEffect=function(C,P){return fe.current.useEffect(C,P)},xe.useId=function(){return fe.current.useId()},xe.useImperativeHandle=function(C,P,Y){return fe.current.useImperativeHandle(C,P,Y)},xe.useInsertionEffect=function(C,P){return fe.current.useInsertionEffect(C,P)},xe.useLayoutEffect=function(C,P){return fe.current.useLayoutEffect(C,P)},xe.useMemo=function(C,P){return fe.current.useMemo(C,P)},xe.useReducer=function(C,P,Y){return fe.current.useReducer(C,P,Y)},xe.useRef=function(C){return fe.current.useRef(C)},xe.useState=function(C){return fe.current.useState(C)},xe.useSyncExternalStore=function(C,P,Y){return fe.current.useSyncExternalStore(C,P,Y)},xe.useTransition=function(){return fe.current.useTransition()},xe.version="18.3.1",xe}var Jp;function ad(){return Jp||(Jp=1,vu.exports=qx()),vu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function Yx(){if(Xp)return Ti;Xp=1;var r=ad(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,g){var y,_={},x=null,k=null;g!==void 0&&(x=""+g),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(k=p.ref);for(y in p)i.call(p,y)&&!u.hasOwnProperty(y)&&(_[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)_[y]===void 0&&(_[y]=p[y]);return{$$typeof:e,type:m,key:x,ref:k,props:_,_owner:l.current}}return Ti.Fragment=n,Ti.jsx=h,Ti.jsxs=h,Ti}var Zp;function Jx(){return Zp||(Zp=1,yu.exports=Yx()),yu.exports}var a=Jx(),z=ad();const rt=Qx(z);var El={},xu={exports:{}},Rt={},_u={exports:{}},wu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Xx(){return em||(em=1,(function(r){function e(V,te){var K=V.length;V.push(te);e:for(;0<K;){var C=K-1>>>1,P=V[C];if(0<l(P,te))V[C]=te,V[K]=P,K=C;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var te=V[0],K=V.pop();if(K!==te){V[0]=K;e:for(var C=0,P=V.length,Y=P>>>1;C<Y;){var ie=2*(C+1)-1,N=V[ie],A=ie+1,L=V[A];if(0>l(N,K))A<P&&0>l(L,N)?(V[C]=L,V[A]=K,C=A):(V[C]=N,V[ie]=K,C=ie);else if(A<P&&0>l(L,K))V[C]=L,V[A]=K,C=A;else break e}}return te}function l(V,te){var K=V.sortIndex-te.sortIndex;return K!==0?K:V.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],y=1,_=null,x=3,k=!1,I=!1,O=!1,S=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(V){for(var te=n(g);te!==null;){if(te.callback===null)i(g);else if(te.startTime<=V)i(g),te.sortIndex=te.expirationTime,e(p,te);else break;te=n(g)}}function q(V){if(O=!1,X(V),!I)if(n(p)!==null)I=!0,Se(D);else{var te=n(g);te!==null&&fe(q,te.startTime-V)}}function D(V,te){I=!1,O&&(O=!1,ee(se),se=-1),k=!0;var K=x;try{for(X(te),_=n(p);_!==null&&(!(_.expirationTime>te)||V&&!Ne());){var C=_.callback;if(typeof C=="function"){_.callback=null,x=_.priorityLevel;var P=C(_.expirationTime<=te);te=r.unstable_now(),typeof P=="function"?_.callback=P:_===n(p)&&i(p),X(te)}else i(p);_=n(p)}if(_!==null)var Y=!0;else{var ie=n(g);ie!==null&&fe(q,ie.startTime-te),Y=!1}return Y}finally{_=null,x=K,k=!1}}var Z=!1,G=null,se=-1,ue=5,Me=-1;function Ne(){return!(r.unstable_now()-Me<ue)}function ye(){if(G!==null){var V=r.unstable_now();Me=V;var te=!0;try{te=G(!0,V)}finally{te?Ce():(Z=!1,G=null)}}else Z=!1}var Ce;if(typeof U=="function")Ce=function(){U(ye)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,ve=Ie.port2;Ie.port1.onmessage=ye,Ce=function(){ve.postMessage(null)}}else Ce=function(){S(ye,0)};function Se(V){G=V,Z||(Z=!0,Ce())}function fe(V,te){se=S(function(){V(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_continueExecution=function(){I||k||(I=!0,Se(D))},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return n(p)},r.unstable_next=function(V){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var K=x;x=te;try{return V()}finally{x=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=x;x=V;try{return te()}finally{x=K}},r.unstable_scheduleCallback=function(V,te,K){var C=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?C+K:C):K=C,V){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=K+P,V={id:y++,callback:te,priorityLevel:V,startTime:K,expirationTime:P,sortIndex:-1},K>C?(V.sortIndex=K,e(g,V),n(p)===null&&V===n(g)&&(O?(ee(se),se=-1):O=!0,fe(q,K-C))):(V.sortIndex=P,e(p,V),I||k||(I=!0,Se(D))),V},r.unstable_shouldYield=Ne,r.unstable_wrapCallback=function(V){var te=x;return function(){var K=x;x=te;try{return V.apply(this,arguments)}finally{x=K}}}})(wu)),wu}var tm;function Zx(){return tm||(tm=1,_u.exports=Xx()),_u.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function e_(){if(nm)return Rt;nm=1;var r=ad(),e=Zx();function n(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(t,s){h(t,s),h(t+"Capture",s)}function h(t,s){for(l[t]=s,t=0;t<s.length;t++)i.add(s[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},_={};function x(t){return p.call(_,t)?!0:p.call(y,t)?!1:g.test(t)?_[t]=!0:(y[t]=!0,!1)}function k(t,s,o,c){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I(t,s,o,c){if(s===null||typeof s>"u"||k(t,s,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(t,s,o,c,d,f,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=s,this.sanitizeURL=f,this.removeEmptyString=v}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new O(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];S[s]=new O(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new O(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new O(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new O(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new O(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new O(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new O(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new O(t,5,!1,t.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function U(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(ee,U);S[s]=new O(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(ee,U);S[s]=new O(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(ee,U);S[s]=new O(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new O(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new O(t,1,!1,t.toLowerCase(),null,!0,!0)});function X(t,s,o,c){var d=S.hasOwnProperty(s)?S[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(I(s,o,d,c)&&(o=null),c||d===null?x(s)&&(o===null?t.removeAttribute(s):t.setAttribute(s,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(s=d.attributeName,c=d.attributeNamespace,o===null?t.removeAttribute(s):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,c?t.setAttributeNS(c,s,o):t.setAttribute(s,o))))}var q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),Z=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),V=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var K=Object.assign,C;function P(t){if(C===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);C=s&&s[1]||""}return`
`+C+t}var Y=!1;function ie(t,s){if(!t||Y)return"";Y=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(M){var c=M}Reflect.construct(t,[],s)}else{try{s.call()}catch(M){c=M}t.call(s.prototype)}else{try{throw Error()}catch(M){c=M}t()}}catch(M){if(M&&c&&typeof M.stack=="string"){for(var d=M.stack.split(`
`),f=c.stack.split(`
`),v=d.length-1,w=f.length-1;1<=v&&0<=w&&d[v]!==f[w];)w--;for(;1<=v&&0<=w;v--,w--)if(d[v]!==f[w]){if(v!==1||w!==1)do if(v--,w--,0>w||d[v]!==f[w]){var b=`
`+d[v].replace(" at new "," at ");return t.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",t.displayName)),b}while(1<=v&&0<=w);break}}}finally{Y=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?P(t):""}function N(t){switch(t.tag){case 5:return P(t.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return t=ie(t.type,!1),t;case 11:return t=ie(t.type.render,!1),t;case 1:return t=ie(t.type,!0),t;default:return""}}function A(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case Z:return"Portal";case ue:return"Profiler";case se:return"StrictMode";case Ce:return"Suspense";case Ie:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ne:return(t.displayName||"Context")+".Consumer";case Me:return(t._context.displayName||"Context")+".Provider";case ye:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ve:return s=t.displayName||null,s!==null?s:A(t.type)||"Memo";case Se:s=t._payload,t=t._init;try{return A(t(s))}catch{}}return null}function L(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(s);case 8:return s===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function T(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function H(t){var s=F(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),c=""+t[s];if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ce(t){t._valueTracker||(t._valueTracker=H(t))}function Oe(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return t&&(c=F(t)?t.checked?"true":"false":t.value),t=c,t!==o?(s.setValue(t),!0):!1}function ke(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ue(t,s){var o=s.checked;return K({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Wr(t,s){var o=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;o=T(s.value!=null?s.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Vs(t,s){s=s.checked,s!=null&&X(t,"checked",s,!1)}function Ca(t,s){Vs(t,s);var o=T(s.value),c=s.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Sa(t,s.type,o):s.hasOwnProperty("defaultValue")&&Sa(t,s.type,T(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function rh(t,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,o||s===t.value||(t.value=s),t.defaultValue=s}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Sa(t,s,o){(s!=="number"||ke(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Br=Array.isArray;function Ks(t,s,o,c){if(t=t.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=s.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&c&&(t[o].defaultSelected=!0)}else{for(o=""+T(o),s=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function ka(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ih(t,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(n(92));if(Br(o)){if(1<o.length)throw Error(n(93));o=o[0]}s=o}s==null&&(s=""),o=s}t._wrapperState={initialValue:T(o)}}function oh(t,s){var o=T(s.value),c=T(s.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),s.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function lh(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function ah(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?ah(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var go,ch=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,c,d){MSApp.execUnsafeLocalFunction(function(){return t(s,o,c,d)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(go=go||document.createElement("div"),go.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Gr(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xy=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(t){Xy.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Vr[s]=Vr[t]})});function uh(t,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||Vr.hasOwnProperty(t)&&Vr[t]?(""+s).trim():s+"px"}function dh(t,s){t=t.style;for(var o in s)if(s.hasOwnProperty(o)){var c=o.indexOf("--")===0,d=uh(o,s[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,d):t[o]=d}}var Zy=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(t,s){if(s){if(Zy[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function ja(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Ra(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,Qs=null,qs=null;function hh(t){if(t=pi(t)){if(typeof Aa!="function")throw Error(n(280));var s=t.stateNode;s&&(s=Fo(s),Aa(t.stateNode,t.type,s))}}function fh(t){Qs?qs?qs.push(t):qs=[t]:Qs=t}function ph(){if(Qs){var t=Qs,s=qs;if(qs=Qs=null,hh(t),s)for(t=0;t<s.length;t++)hh(s[t])}}function mh(t,s){return t(s)}function gh(){}var Ma=!1;function yh(t,s,o){if(Ma)return t(s,o);Ma=!0;try{return mh(t,s,o)}finally{Ma=!1,(Qs!==null||qs!==null)&&(gh(),ph())}}function Kr(t,s){var o=t.stateNode;if(o===null)return null;var c=Fo(o);if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var Oa=!1;if(m)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Oa=!1}function ev(t,s,o,c,d,f,v,w,b){var M=Array.prototype.slice.call(arguments,3);try{s.apply(o,M)}catch(W){this.onError(W)}}var qr=!1,yo=null,vo=!1,La=null,tv={onError:function(t){qr=!0,yo=t}};function nv(t,s,o,c,d,f,v,w,b){qr=!1,yo=null,ev.apply(tv,arguments)}function sv(t,s,o,c,d,f,v,w,b){if(nv.apply(this,arguments),qr){if(qr){var M=yo;qr=!1,yo=null}else throw Error(n(198));vo||(vo=!0,La=M)}}function ys(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function vh(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function xh(t){if(ys(t)!==t)throw Error(n(188))}function rv(t){var s=t.alternate;if(!s){if(s=ys(t),s===null)throw Error(n(188));return s!==t?null:t}for(var o=t,c=s;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return xh(d),t;if(f===c)return xh(d),s;f=f.sibling}throw Error(n(188))}if(o.return!==c.return)o=d,c=f;else{for(var v=!1,w=d.child;w;){if(w===o){v=!0,o=d,c=f;break}if(w===c){v=!0,c=d,o=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===o){v=!0,o=f,c=d;break}if(w===c){v=!0,c=f,o=d;break}w=w.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:s}function _h(t){return t=rv(t),t!==null?wh(t):null}function wh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=wh(t);if(s!==null)return s;t=t.sibling}return null}var Nh=e.unstable_scheduleCallback,bh=e.unstable_cancelCallback,iv=e.unstable_shouldYield,ov=e.unstable_requestPaint,Xe=e.unstable_now,lv=e.unstable_getCurrentPriorityLevel,Da=e.unstable_ImmediatePriority,Eh=e.unstable_UserBlockingPriority,xo=e.unstable_NormalPriority,av=e.unstable_LowPriority,Ch=e.unstable_IdlePriority,_o=null,an=null;function cv(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(_o,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:hv,uv=Math.log,dv=Math.LN2;function hv(t){return t>>>=0,t===0?32:31-(uv(t)/dv|0)|0}var wo=64,No=4194304;function Yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bo(t,s){var o=t.pendingLanes;if(o===0)return 0;var c=0,d=t.suspendedLanes,f=t.pingedLanes,v=o&268435455;if(v!==0){var w=v&~d;w!==0?c=Yr(w):(f&=v,f!==0&&(c=Yr(f)))}else v=o&~d,v!==0?c=Yr(v):f!==0&&(c=Yr(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=o&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=c;0<s;)o=31-Qt(s),d=1<<o,c|=t[o],s&=~d;return c}function fv(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pv(t,s){for(var o=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes;0<f;){var v=31-Qt(f),w=1<<v,b=d[v];b===-1?((w&o)===0||(w&c)!==0)&&(d[v]=fv(w,s)):b<=s&&(t.expiredLanes|=w),f&=~w}}function Ua(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sh(){var t=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),t}function Fa(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function Jr(t,s,o){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Qt(s),t[s]=o}function mv(t,s){var o=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-Qt(o),f=1<<d;s[d]=0,c[d]=-1,t[d]=-1,o&=~f}}function za(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var c=31-Qt(o),d=1<<c;d&s|t[c]&s&&(t[c]|=s),o&=~d}}var Le=0;function kh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ih,Ha,Th,jh,Ph,$a=!1,Eo=[],Un=null,Fn=null,zn=null,Xr=new Map,Zr=new Map,Hn=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rh(t,s){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Xr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(s.pointerId)}}function ei(t,s,o,c,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=pi(s),s!==null&&Ha(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function yv(t,s,o,c,d){switch(s){case"focusin":return Un=ei(Un,t,s,o,c,d),!0;case"dragenter":return Fn=ei(Fn,t,s,o,c,d),!0;case"mouseover":return zn=ei(zn,t,s,o,c,d),!0;case"pointerover":var f=d.pointerId;return Xr.set(f,ei(Xr.get(f)||null,t,s,o,c,d)),!0;case"gotpointercapture":return f=d.pointerId,Zr.set(f,ei(Zr.get(f)||null,t,s,o,c,d)),!0}return!1}function Ah(t){var s=vs(t.target);if(s!==null){var o=ys(s);if(o!==null){if(s=o.tag,s===13){if(s=vh(o),s!==null){t.blockedOn=s,Ph(t.priority,function(){Th(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=Ba(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Pa=c,o.target.dispatchEvent(c),Pa=null}else return s=pi(o),s!==null&&Ha(s),t.blockedOn=o,!1;s.shift()}return!0}function Mh(t,s,o){Co(t)&&o.delete(s)}function vv(){$a=!1,Un!==null&&Co(Un)&&(Un=null),Fn!==null&&Co(Fn)&&(Fn=null),zn!==null&&Co(zn)&&(zn=null),Xr.forEach(Mh),Zr.forEach(Mh)}function ti(t,s){t.blockedOn===s&&(t.blockedOn=null,$a||($a=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vv)))}function ni(t){function s(d){return ti(d,t)}if(0<Eo.length){ti(Eo[0],t);for(var o=1;o<Eo.length;o++){var c=Eo[o];c.blockedOn===t&&(c.blockedOn=null)}}for(Un!==null&&ti(Un,t),Fn!==null&&ti(Fn,t),zn!==null&&ti(zn,t),Xr.forEach(s),Zr.forEach(s),o=0;o<Hn.length;o++)c=Hn[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Hn.length&&(o=Hn[0],o.blockedOn===null);)Ah(o),o.blockedOn===null&&Hn.shift()}var Ys=q.ReactCurrentBatchConfig,So=!0;function xv(t,s,o,c){var d=Le,f=Ys.transition;Ys.transition=null;try{Le=1,Wa(t,s,o,c)}finally{Le=d,Ys.transition=f}}function _v(t,s,o,c){var d=Le,f=Ys.transition;Ys.transition=null;try{Le=4,Wa(t,s,o,c)}finally{Le=d,Ys.transition=f}}function Wa(t,s,o,c){if(So){var d=Ba(t,s,o,c);if(d===null)lc(t,s,c,ko,o),Rh(t,c);else if(yv(d,t,s,o,c))c.stopPropagation();else if(Rh(t,c),s&4&&-1<gv.indexOf(t)){for(;d!==null;){var f=pi(d);if(f!==null&&Ih(f),f=Ba(t,s,o,c),f===null&&lc(t,s,c,ko,o),f===d)break;d=f}d!==null&&c.stopPropagation()}else lc(t,s,c,null,o)}}var ko=null;function Ba(t,s,o,c){if(ko=null,t=Ra(c),t=vs(t),t!==null)if(s=ys(t),s===null)t=null;else if(o=s.tag,o===13){if(t=vh(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ko=t,null}function Oh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lv()){case Da:return 1;case Eh:return 4;case xo:case av:return 16;case Ch:return 536870912;default:return 16}default:return 16}}var $n=null,Ga=null,Io=null;function Lh(){if(Io)return Io;var t,s=Ga,o=s.length,c,d="value"in $n?$n.value:$n.textContent,f=d.length;for(t=0;t<o&&s[t]===d[t];t++);var v=o-t;for(c=1;c<=v&&s[o-c]===d[f-c];c++);return Io=d.slice(t,1<c?1-c:void 0)}function To(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function jo(){return!0}function Dh(){return!1}function Dt(t){function s(o,c,d,f,v){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?jo:Dh,this.isPropagationStopped=Dh,this}return K(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),s}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Va=Dt(Js),si=K({},Js,{view:0,detail:0}),wv=Dt(si),Ka,Qa,ri,Po=K({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Ka=t.screenX-ri.screenX,Qa=t.screenY-ri.screenY):Qa=Ka=0,ri=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),Uh=Dt(Po),Nv=K({},Po,{dataTransfer:0}),bv=Dt(Nv),Ev=K({},si,{relatedTarget:0}),qa=Dt(Ev),Cv=K({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=Dt(Cv),kv=K({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Iv=Dt(kv),Tv=K({},Js,{data:0}),Fh=Dt(Tv),jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Av(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Rv[t])?!!s[t]:!1}function Ya(){return Av}var Mv=K({},si,{key:function(t){if(t.key){var s=jv[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=To(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(t){return t.type==="keypress"?To(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?To(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ov=Dt(Mv),Lv=K({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zh=Dt(Lv),Dv=K({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),Uv=Dt(Dv),Fv=K({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),zv=Dt(Fv),Hv=K({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=Dt(Hv),Wv=[9,13,27,32],Ja=m&&"CompositionEvent"in window,ii=null;m&&"documentMode"in document&&(ii=document.documentMode);var Bv=m&&"TextEvent"in window&&!ii,Hh=m&&(!Ja||ii&&8<ii&&11>=ii),$h=" ",Wh=!1;function Bh(t,s){switch(t){case"keyup":return Wv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function Gv(t,s){switch(t){case"compositionend":return Gh(s);case"keypress":return s.which!==32?null:(Wh=!0,$h);case"textInput":return t=s.data,t===$h&&Wh?null:t;default:return null}}function Vv(t,s){if(Xs)return t==="compositionend"||!Ja&&Bh(t,s)?(t=Lh(),Io=Ga=$n=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hh&&s.locale!=="ko"?null:s.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Kv[t.type]:s==="textarea"}function Kh(t,s,o,c){fh(c),s=Lo(s,"onChange"),0<s.length&&(o=new Va("onChange","change",null,o,c),t.push({event:o,listeners:s}))}var oi=null,li=null;function Qv(t){hf(t,0)}function Ro(t){var s=sr(t);if(Oe(s))return t}function qv(t,s){if(t==="change")return s}var Qh=!1;if(m){var Xa;if(m){var Za="oninput"in document;if(!Za){var qh=document.createElement("div");qh.setAttribute("oninput","return;"),Za=typeof qh.oninput=="function"}Xa=Za}else Xa=!1;Qh=Xa&&(!document.documentMode||9<document.documentMode)}function Yh(){oi&&(oi.detachEvent("onpropertychange",Jh),li=oi=null)}function Jh(t){if(t.propertyName==="value"&&Ro(li)){var s=[];Kh(s,li,t,Ra(t)),yh(Qv,s)}}function Yv(t,s,o){t==="focusin"?(Yh(),oi=s,li=o,oi.attachEvent("onpropertychange",Jh)):t==="focusout"&&Yh()}function Jv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(li)}function Xv(t,s){if(t==="click")return Ro(s)}function Zv(t,s){if(t==="input"||t==="change")return Ro(s)}function ex(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var qt=typeof Object.is=="function"?Object.is:ex;function ai(t,s){if(qt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!p.call(s,d)||!qt(t[d],s[d]))return!1}return!0}function Xh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zh(t,s){var o=Xh(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=s&&c>=s)return{node:o,offset:s-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xh(o)}}function ef(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ef(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function tf(){for(var t=window,s=ke();s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=ke(t.document)}return s}function ec(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function tx(t){var s=tf(),o=t.focusedElem,c=t.selectionRange;if(s!==o&&o&&o.ownerDocument&&ef(o.ownerDocument.documentElement,o)){if(c!==null&&ec(o)){if(s=c.start,t=c.end,t===void 0&&(t=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(t,o.value.length);else if(t=(s=o.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!t.extend&&f>c&&(d=c,c=f,f=d),d=Zh(o,f);var v=Zh(o,c);d&&v&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),t.removeAllRanges(),f>c?(t.addRange(s),t.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),t.addRange(s)))}}for(s=[],t=o;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)t=s[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nx=m&&"documentMode"in document&&11>=document.documentMode,Zs=null,tc=null,ci=null,nc=!1;function nf(t,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nc||Zs==null||Zs!==ke(c)||(c=Zs,"selectionStart"in c&&ec(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ci&&ai(ci,c)||(ci=c,c=Lo(tc,"onSelect"),0<c.length&&(s=new Va("onSelect","select",null,s,o),t.push({event:s,listeners:c}),s.target=Zs)))}function Ao(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var er={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionend:Ao("Transition","TransitionEnd")},sc={},sf={};m&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete er.animationend.animation,delete er.animationiteration.animation,delete er.animationstart.animation),"TransitionEvent"in window||delete er.transitionend.transition);function Mo(t){if(sc[t])return sc[t];if(!er[t])return t;var s=er[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in sf)return sc[t]=s[o];return t}var rf=Mo("animationend"),of=Mo("animationiteration"),lf=Mo("animationstart"),af=Mo("transitionend"),cf=new Map,uf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(t,s){cf.set(t,s),u(s,[t])}for(var rc=0;rc<uf.length;rc++){var ic=uf[rc],sx=ic.toLowerCase(),rx=ic[0].toUpperCase()+ic.slice(1);Wn(sx,"on"+rx)}Wn(rf,"onAnimationEnd"),Wn(of,"onAnimationIteration"),Wn(lf,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(af,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("cancel close invalid load scroll toggle".split(" ").concat(ui));function df(t,s,o){var c=t.type||"unknown-event";t.currentTarget=o,sv(c,s,void 0,t),t.currentTarget=null}function hf(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var v=c.length-1;0<=v;v--){var w=c[v],b=w.instance,M=w.currentTarget;if(w=w.listener,b!==f&&d.isPropagationStopped())break e;df(d,w,M),f=b}else for(v=0;v<c.length;v++){if(w=c[v],b=w.instance,M=w.currentTarget,w=w.listener,b!==f&&d.isPropagationStopped())break e;df(d,w,M),f=b}}}if(vo)throw t=La,vo=!1,La=null,t}function We(t,s){var o=s[fc];o===void 0&&(o=s[fc]=new Set);var c=t+"__bubble";o.has(c)||(ff(s,t,2,!1),o.add(c))}function oc(t,s,o){var c=0;s&&(c|=4),ff(o,t,c,s)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function di(t){if(!t[Oo]){t[Oo]=!0,i.forEach(function(o){o!=="selectionchange"&&(ix.has(o)||oc(o,!1,t),oc(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Oo]||(s[Oo]=!0,oc("selectionchange",!1,s))}}function ff(t,s,o,c){switch(Oh(s)){case 1:var d=xv;break;case 4:d=_v;break;default:d=Wa}o=d.bind(null,s,o,t),d=void 0,!Oa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(s,o,{capture:!0,passive:d}):t.addEventListener(s,o,!0):d!==void 0?t.addEventListener(s,o,{passive:d}):t.addEventListener(s,o,!1)}function lc(t,s,o,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var w=c.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var b=v.tag;if((b===3||b===4)&&(b=v.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;v=v.return}for(;w!==null;){if(v=vs(w),v===null)return;if(b=v.tag,b===5||b===6){c=f=v;continue e}w=w.parentNode}}c=c.return}yh(function(){var M=f,W=Ra(o),B=[];e:{var $=cf.get(t);if($!==void 0){var ne=Va,oe=t;switch(t){case"keypress":if(To(o)===0)break e;case"keydown":case"keyup":ne=Ov;break;case"focusin":oe="focus",ne=qa;break;case"focusout":oe="blur",ne=qa;break;case"beforeblur":case"afterblur":ne=qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=bv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Uv;break;case rf:case of:case lf:ne=Sv;break;case af:ne=zv;break;case"scroll":ne=wv;break;case"wheel":ne=$v;break;case"copy":case"cut":case"paste":ne=Iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=zh}var le=(s&4)!==0,Ze=!le&&t==="scroll",j=le?$!==null?$+"Capture":null:$;le=[];for(var E=M,R;E!==null;){R=E;var Q=R.stateNode;if(R.tag===5&&Q!==null&&(R=Q,j!==null&&(Q=Kr(E,j),Q!=null&&le.push(hi(E,Q,R)))),Ze)break;E=E.return}0<le.length&&($=new ne($,oe,null,o,W),B.push({event:$,listeners:le}))}}if((s&7)===0){e:{if($=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",$&&o!==Pa&&(oe=o.relatedTarget||o.fromElement)&&(vs(oe)||oe[gn]))break e;if((ne||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,ne?(oe=o.relatedTarget||o.toElement,ne=M,oe=oe?vs(oe):null,oe!==null&&(Ze=ys(oe),oe!==Ze||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=M),ne!==oe)){if(le=Uh,Q="onMouseLeave",j="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(le=zh,Q="onPointerLeave",j="onPointerEnter",E="pointer"),Ze=ne==null?$:sr(ne),R=oe==null?$:sr(oe),$=new le(Q,E+"leave",ne,o,W),$.target=Ze,$.relatedTarget=R,Q=null,vs(W)===M&&(le=new le(j,E+"enter",oe,o,W),le.target=R,le.relatedTarget=Ze,Q=le),Ze=Q,ne&&oe)t:{for(le=ne,j=oe,E=0,R=le;R;R=tr(R))E++;for(R=0,Q=j;Q;Q=tr(Q))R++;for(;0<E-R;)le=tr(le),E--;for(;0<R-E;)j=tr(j),R--;for(;E--;){if(le===j||j!==null&&le===j.alternate)break t;le=tr(le),j=tr(j)}le=null}else le=null;ne!==null&&pf(B,$,ne,le,!1),oe!==null&&Ze!==null&&pf(B,Ze,oe,le,!0)}}e:{if($=M?sr(M):window,ne=$.nodeName&&$.nodeName.toLowerCase(),ne==="select"||ne==="input"&&$.type==="file")var ae=qv;else if(Vh($))if(Qh)ae=Zv;else{ae=Jv;var de=Yv}else(ne=$.nodeName)&&ne.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ae=Xv);if(ae&&(ae=ae(t,M))){Kh(B,ae,o,W);break e}de&&de(t,$,M),t==="focusout"&&(de=$._wrapperState)&&de.controlled&&$.type==="number"&&Sa($,"number",$.value)}switch(de=M?sr(M):window,t){case"focusin":(Vh(de)||de.contentEditable==="true")&&(Zs=de,tc=M,ci=null);break;case"focusout":ci=tc=Zs=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,nf(B,o,W);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":nf(B,o,W)}var he;if(Ja)e:{switch(t){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Xs?Bh(t,o)&&(ge="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(Hh&&o.locale!=="ko"&&(Xs||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Xs&&(he=Lh()):($n=W,Ga="value"in $n?$n.value:$n.textContent,Xs=!0)),de=Lo(M,ge),0<de.length&&(ge=new Fh(ge,t,null,o,W),B.push({event:ge,listeners:de}),he?ge.data=he:(he=Gh(o),he!==null&&(ge.data=he)))),(he=Bv?Gv(t,o):Vv(t,o))&&(M=Lo(M,"onBeforeInput"),0<M.length&&(W=new Fh("onBeforeInput","beforeinput",null,o,W),B.push({event:W,listeners:M}),W.data=he))}hf(B,s)})}function hi(t,s,o){return{instance:t,listener:s,currentTarget:o}}function Lo(t,s){for(var o=s+"Capture",c=[];t!==null;){var d=t,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Kr(t,o),f!=null&&c.unshift(hi(t,f,d)),f=Kr(t,s),f!=null&&c.push(hi(t,f,d))),t=t.return}return c}function tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pf(t,s,o,c,d){for(var f=s._reactName,v=[];o!==null&&o!==c;){var w=o,b=w.alternate,M=w.stateNode;if(b!==null&&b===c)break;w.tag===5&&M!==null&&(w=M,d?(b=Kr(o,f),b!=null&&v.unshift(hi(o,b,w))):d||(b=Kr(o,f),b!=null&&v.push(hi(o,b,w)))),o=o.return}v.length!==0&&t.push({event:s,listeners:v})}var ox=/\r\n?/g,lx=/\u0000|\uFFFD/g;function mf(t){return(typeof t=="string"?t:""+t).replace(ox,`
`).replace(lx,"")}function Do(t,s,o){if(s=mf(s),mf(t)!==s&&o)throw Error(n(425))}function Uo(){}var ac=null,cc=null;function uc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,cx=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(t){return gf.resolve(null).then(t).catch(ux)}:dc;function ux(t){setTimeout(function(){throw t})}function hc(t,s){var o=s,c=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){t.removeChild(d),ni(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);ni(s)}function Bn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function yf(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return t;s--}else o==="/$"&&s++}t=t.previousSibling}return null}var nr=Math.random().toString(36).slice(2),cn="__reactFiber$"+nr,fi="__reactProps$"+nr,gn="__reactContainer$"+nr,fc="__reactEvents$"+nr,dx="__reactListeners$"+nr,hx="__reactHandles$"+nr;function vs(t){var s=t[cn];if(s)return s;for(var o=t.parentNode;o;){if(s=o[gn]||o[cn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=yf(t);t!==null;){if(o=t[cn])return o;t=yf(t)}return s}t=o,o=t.parentNode}return null}function pi(t){return t=t[cn]||t[gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Fo(t){return t[fi]||null}var pc=[],rr=-1;function Gn(t){return{current:t}}function Be(t){0>rr||(t.current=pc[rr],pc[rr]=null,rr--)}function He(t,s){rr++,pc[rr]=t.current,t.current=s}var Vn={},yt=Gn(Vn),kt=Gn(!1),xs=Vn;function ir(t,s){var o=t.type.contextTypes;if(!o)return Vn;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in o)d[f]=s[f];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=d),d}function It(t){return t=t.childContextTypes,t!=null}function zo(){Be(kt),Be(yt)}function vf(t,s,o){if(yt.current!==Vn)throw Error(n(168));He(yt,s),He(kt,o)}function xf(t,s,o){var c=t.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(n(108,L(t)||"Unknown",d));return K({},o,c)}function Ho(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vn,xs=yt.current,He(yt,t),He(kt,kt.current),!0}function _f(t,s,o){var c=t.stateNode;if(!c)throw Error(n(169));o?(t=xf(t,s,xs),c.__reactInternalMemoizedMergedChildContext=t,Be(kt),Be(yt),He(yt,t)):Be(kt),He(kt,o)}var yn=null,$o=!1,mc=!1;function wf(t){yn===null?yn=[t]:yn.push(t)}function fx(t){$o=!0,wf(t)}function Kn(){if(!mc&&yn!==null){mc=!0;var t=0,s=Le;try{var o=yn;for(Le=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}yn=null,$o=!1}catch(d){throw yn!==null&&(yn=yn.slice(t+1)),Nh(Da,Kn),d}finally{Le=s,mc=!1}}return null}var or=[],lr=0,Wo=null,Bo=0,Ht=[],$t=0,_s=null,vn=1,xn="";function ws(t,s){or[lr++]=Bo,or[lr++]=Wo,Wo=t,Bo=s}function Nf(t,s,o){Ht[$t++]=vn,Ht[$t++]=xn,Ht[$t++]=_s,_s=t;var c=vn;t=xn;var d=32-Qt(c)-1;c&=~(1<<d),o+=1;var f=32-Qt(s)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,vn=1<<32-Qt(s)+d|o<<d|c,xn=f+t}else vn=1<<f|o<<d|c,xn=t}function gc(t){t.return!==null&&(ws(t,1),Nf(t,1,0))}function yc(t){for(;t===Wo;)Wo=or[--lr],or[lr]=null,Bo=or[--lr],or[lr]=null;for(;t===_s;)_s=Ht[--$t],Ht[$t]=null,xn=Ht[--$t],Ht[$t]=null,vn=Ht[--$t],Ht[$t]=null}var Ut=null,Ft=null,Ve=!1,Yt=null;function bf(t,s){var o=Vt(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=t,s=t.deletions,s===null?(t.deletions=[o],t.flags|=16):s.push(o)}function Ef(t,s){switch(t.tag){case 5:var o=t.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ut=t,Ft=Bn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ut=t,Ft=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=_s!==null?{id:vn,overflow:xn}:null,t.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Vt(18,null,null,0),o.stateNode=s,o.return=t,t.child=o,Ut=t,Ft=null,!0):!1;default:return!1}}function vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xc(t){if(Ve){var s=Ft;if(s){var o=s;if(!Ef(t,s)){if(vc(t))throw Error(n(418));s=Bn(o.nextSibling);var c=Ut;s&&Ef(t,s)?bf(c,o):(t.flags=t.flags&-4097|2,Ve=!1,Ut=t)}}else{if(vc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ve=!1,Ut=t}}}function Cf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Go(t){if(t!==Ut)return!1;if(!Ve)return Cf(t),Ve=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!uc(t.type,t.memoizedProps)),s&&(s=Ft)){if(vc(t))throw Sf(),Error(n(418));for(;s;)bf(t,s),s=Bn(s.nextSibling)}if(Cf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(s===0){Ft=Bn(t.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}t=t.nextSibling}Ft=null}}else Ft=Ut?Bn(t.stateNode.nextSibling):null;return!0}function Sf(){for(var t=Ft;t;)t=Bn(t.nextSibling)}function ar(){Ft=Ut=null,Ve=!1}function _c(t){Yt===null?Yt=[t]:Yt.push(t)}var px=q.ReactCurrentBatchConfig;function mi(t,s,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var c=o.stateNode}if(!c)throw Error(n(147,t));var d=c,f=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(v){var w=d.refs;v===null?delete w[f]:w[f]=v},s._stringRef=f,s)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function Vo(t,s){throw t=Object.prototype.toString.call(s),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function kf(t){var s=t._init;return s(t._payload)}function If(t){function s(j,E){if(t){var R=j.deletions;R===null?(j.deletions=[E],j.flags|=16):R.push(E)}}function o(j,E){if(!t)return null;for(;E!==null;)s(j,E),E=E.sibling;return null}function c(j,E){for(j=new Map;E!==null;)E.key!==null?j.set(E.key,E):j.set(E.index,E),E=E.sibling;return j}function d(j,E){return j=ts(j,E),j.index=0,j.sibling=null,j}function f(j,E,R){return j.index=R,t?(R=j.alternate,R!==null?(R=R.index,R<E?(j.flags|=2,E):R):(j.flags|=2,E)):(j.flags|=1048576,E)}function v(j){return t&&j.alternate===null&&(j.flags|=2),j}function w(j,E,R,Q){return E===null||E.tag!==6?(E=du(R,j.mode,Q),E.return=j,E):(E=d(E,R),E.return=j,E)}function b(j,E,R,Q){var ae=R.type;return ae===G?W(j,E,R.props.children,Q,R.key):E!==null&&(E.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Se&&kf(ae)===E.type)?(Q=d(E,R.props),Q.ref=mi(j,E,R),Q.return=j,Q):(Q=gl(R.type,R.key,R.props,null,j.mode,Q),Q.ref=mi(j,E,R),Q.return=j,Q)}function M(j,E,R,Q){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=hu(R,j.mode,Q),E.return=j,E):(E=d(E,R.children||[]),E.return=j,E)}function W(j,E,R,Q,ae){return E===null||E.tag!==7?(E=Ts(R,j.mode,Q,ae),E.return=j,E):(E=d(E,R),E.return=j,E)}function B(j,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return E=du(""+E,j.mode,R),E.return=j,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case D:return R=gl(E.type,E.key,E.props,null,j.mode,R),R.ref=mi(j,null,E),R.return=j,R;case Z:return E=hu(E,j.mode,R),E.return=j,E;case Se:var Q=E._init;return B(j,Q(E._payload),R)}if(Br(E)||te(E))return E=Ts(E,j.mode,R,null),E.return=j,E;Vo(j,E)}return null}function $(j,E,R,Q){var ae=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ae!==null?null:w(j,E,""+R,Q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case D:return R.key===ae?b(j,E,R,Q):null;case Z:return R.key===ae?M(j,E,R,Q):null;case Se:return ae=R._init,$(j,E,ae(R._payload),Q)}if(Br(R)||te(R))return ae!==null?null:W(j,E,R,Q,null);Vo(j,R)}return null}function ne(j,E,R,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return j=j.get(R)||null,w(E,j,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return j=j.get(Q.key===null?R:Q.key)||null,b(E,j,Q,ae);case Z:return j=j.get(Q.key===null?R:Q.key)||null,M(E,j,Q,ae);case Se:var de=Q._init;return ne(j,E,R,de(Q._payload),ae)}if(Br(Q)||te(Q))return j=j.get(R)||null,W(E,j,Q,ae,null);Vo(E,Q)}return null}function oe(j,E,R,Q){for(var ae=null,de=null,he=E,ge=E=0,ct=null;he!==null&&ge<R.length;ge++){he.index>ge?(ct=he,he=null):ct=he.sibling;var je=$(j,he,R[ge],Q);if(je===null){he===null&&(he=ct);break}t&&he&&je.alternate===null&&s(j,he),E=f(je,E,ge),de===null?ae=je:de.sibling=je,de=je,he=ct}if(ge===R.length)return o(j,he),Ve&&ws(j,ge),ae;if(he===null){for(;ge<R.length;ge++)he=B(j,R[ge],Q),he!==null&&(E=f(he,E,ge),de===null?ae=he:de.sibling=he,de=he);return Ve&&ws(j,ge),ae}for(he=c(j,he);ge<R.length;ge++)ct=ne(he,j,ge,R[ge],Q),ct!==null&&(t&&ct.alternate!==null&&he.delete(ct.key===null?ge:ct.key),E=f(ct,E,ge),de===null?ae=ct:de.sibling=ct,de=ct);return t&&he.forEach(function(ns){return s(j,ns)}),Ve&&ws(j,ge),ae}function le(j,E,R,Q){var ae=te(R);if(typeof ae!="function")throw Error(n(150));if(R=ae.call(R),R==null)throw Error(n(151));for(var de=ae=null,he=E,ge=E=0,ct=null,je=R.next();he!==null&&!je.done;ge++,je=R.next()){he.index>ge?(ct=he,he=null):ct=he.sibling;var ns=$(j,he,je.value,Q);if(ns===null){he===null&&(he=ct);break}t&&he&&ns.alternate===null&&s(j,he),E=f(ns,E,ge),de===null?ae=ns:de.sibling=ns,de=ns,he=ct}if(je.done)return o(j,he),Ve&&ws(j,ge),ae;if(he===null){for(;!je.done;ge++,je=R.next())je=B(j,je.value,Q),je!==null&&(E=f(je,E,ge),de===null?ae=je:de.sibling=je,de=je);return Ve&&ws(j,ge),ae}for(he=c(j,he);!je.done;ge++,je=R.next())je=ne(he,j,ge,je.value,Q),je!==null&&(t&&je.alternate!==null&&he.delete(je.key===null?ge:je.key),E=f(je,E,ge),de===null?ae=je:de.sibling=je,de=je);return t&&he.forEach(function(Kx){return s(j,Kx)}),Ve&&ws(j,ge),ae}function Ze(j,E,R,Q){if(typeof R=="object"&&R!==null&&R.type===G&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case D:e:{for(var ae=R.key,de=E;de!==null;){if(de.key===ae){if(ae=R.type,ae===G){if(de.tag===7){o(j,de.sibling),E=d(de,R.props.children),E.return=j,j=E;break e}}else if(de.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Se&&kf(ae)===de.type){o(j,de.sibling),E=d(de,R.props),E.ref=mi(j,de,R),E.return=j,j=E;break e}o(j,de);break}else s(j,de);de=de.sibling}R.type===G?(E=Ts(R.props.children,j.mode,Q,R.key),E.return=j,j=E):(Q=gl(R.type,R.key,R.props,null,j.mode,Q),Q.ref=mi(j,E,R),Q.return=j,j=Q)}return v(j);case Z:e:{for(de=R.key;E!==null;){if(E.key===de)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){o(j,E.sibling),E=d(E,R.children||[]),E.return=j,j=E;break e}else{o(j,E);break}else s(j,E);E=E.sibling}E=hu(R,j.mode,Q),E.return=j,j=E}return v(j);case Se:return de=R._init,Ze(j,E,de(R._payload),Q)}if(Br(R))return oe(j,E,R,Q);if(te(R))return le(j,E,R,Q);Vo(j,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,E!==null&&E.tag===6?(o(j,E.sibling),E=d(E,R),E.return=j,j=E):(o(j,E),E=du(R,j.mode,Q),E.return=j,j=E),v(j)):o(j,E)}return Ze}var cr=If(!0),Tf=If(!1),Ko=Gn(null),Qo=null,ur=null,wc=null;function Nc(){wc=ur=Qo=null}function bc(t){var s=Ko.current;Be(Ko),t._currentValue=s}function Ec(t,s,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===o)break;t=t.return}}function dr(t,s){Qo=t,wc=ur=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Tt=!0),t.firstContext=null)}function Wt(t){var s=t._currentValue;if(wc!==t)if(t={context:t,memoizedValue:s,next:null},ur===null){if(Qo===null)throw Error(n(308));ur=t,Qo.dependencies={lanes:0,firstContext:t}}else ur=ur.next=t;return s}var Ns=null;function Cc(t){Ns===null?Ns=[t]:Ns.push(t)}function jf(t,s,o,c){var d=s.interleaved;return d===null?(o.next=o,Cc(s)):(o.next=d.next,d.next=o),s.interleaved=o,_n(t,c)}function _n(t,s){t.lanes|=s;var o=t.alternate;for(o!==null&&(o.lanes|=s),o=t,t=t.return;t!==null;)t.childLanes|=s,o=t.alternate,o!==null&&(o.childLanes|=s),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Qn=!1;function Sc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function qn(t,s,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Te&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,_n(t,o)}return d=c.interleaved,d===null?(s.next=s,Cc(c)):(s.next=d.next,d.next=s),c.interleaved=s,_n(t,o)}function qo(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var c=s.lanes;c&=t.pendingLanes,o|=c,s.lanes=o,za(t,o)}}function Rf(t,s){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?d=f=v:f=f.next=v,o=o.next}while(o!==null);f===null?d=f=s:f=f.next=s}else d=f=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}function Yo(t,s,o,c){var d=t.updateQueue;Qn=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var b=w,M=b.next;b.next=null,v===null?f=M:v.next=M,v=b;var W=t.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==v&&(w===null?W.firstBaseUpdate=M:w.next=M,W.lastBaseUpdate=b))}if(f!==null){var B=d.baseState;v=0,W=M=b=null,w=f;do{var $=w.lane,ne=w.eventTime;if((c&$)===$){W!==null&&(W=W.next={eventTime:ne,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var oe=t,le=w;switch($=s,ne=o,le.tag){case 1:if(oe=le.payload,typeof oe=="function"){B=oe.call(ne,B,$);break e}B=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=le.payload,$=typeof oe=="function"?oe.call(ne,B,$):oe,$==null)break e;B=K({},B,$);break e;case 2:Qn=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,$=d.effects,$===null?d.effects=[w]:$.push(w))}else ne={eventTime:ne,lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(M=W=ne,b=B):W=W.next=ne,v|=$;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;$=w,w=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(W===null&&(b=B),d.baseState=b,d.firstBaseUpdate=M,d.lastBaseUpdate=W,s=d.shared.interleaved,s!==null){d=s;do v|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);Cs|=v,t.lanes=v,t.memoizedState=B}}function Af(t,s,o){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var c=t[s],d=c.callback;if(d!==null){if(c.callback=null,c=o,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var gi={},un=Gn(gi),yi=Gn(gi),vi=Gn(gi);function bs(t){if(t===gi)throw Error(n(174));return t}function kc(t,s){switch(He(vi,s),He(yi,t),He(un,gi),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ia(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ia(s,t)}Be(un),He(un,s)}function hr(){Be(un),Be(yi),Be(vi)}function Mf(t){bs(vi.current);var s=bs(un.current),o=Ia(s,t.type);s!==o&&(He(yi,t),He(un,o))}function Ic(t){yi.current===t&&(Be(un),Be(yi))}var Ke=Gn(0);function Jo(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tc=[];function jc(){for(var t=0;t<Tc.length;t++)Tc[t]._workInProgressVersionPrimary=null;Tc.length=0}var Xo=q.ReactCurrentDispatcher,Pc=q.ReactCurrentBatchConfig,Es=0,Qe=null,nt=null,lt=null,Zo=!1,xi=!1,_i=0,mx=0;function vt(){throw Error(n(321))}function Rc(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!qt(t[o],s[o]))return!1;return!0}function Ac(t,s,o,c,d,f){if(Es=f,Qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Xo.current=t===null||t.memoizedState===null?xx:_x,t=o(c,d),xi){f=0;do{if(xi=!1,_i=0,25<=f)throw Error(n(301));f+=1,lt=nt=null,s.updateQueue=null,Xo.current=wx,t=o(c,d)}while(xi)}if(Xo.current=nl,s=nt!==null&&nt.next!==null,Es=0,lt=nt=Qe=null,Zo=!1,s)throw Error(n(300));return t}function Mc(){var t=_i!==0;return _i=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Qe.memoizedState=lt=t:lt=lt.next=t,lt}function Bt(){if(nt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var s=lt===null?Qe.memoizedState:lt.next;if(s!==null)lt=s,nt=t;else{if(t===null)throw Error(n(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},lt===null?Qe.memoizedState=lt=t:lt=lt.next=t}return lt}function wi(t,s){return typeof s=="function"?s(t):s}function Oc(t){var s=Bt(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=nt,d=c.baseQueue,f=o.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}c.baseQueue=d=f,o.pending=null}if(d!==null){f=d.next,c=c.baseState;var w=v=null,b=null,M=f;do{var W=M.lane;if((Es&W)===W)b!==null&&(b=b.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),c=M.hasEagerState?M.eagerState:t(c,M.action);else{var B={lane:W,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};b===null?(w=b=B,v=c):b=b.next=B,Qe.lanes|=W,Cs|=W}M=M.next}while(M!==null&&M!==f);b===null?v=c:b.next=w,qt(c,s.memoizedState)||(Tt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=b,o.lastRenderedState=c}if(t=o.interleaved,t!==null){d=t;do f=d.lane,Qe.lanes|=f,Cs|=f,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function Lc(t){var s=Bt(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=o.dispatch,d=o.pending,f=s.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do f=t(f,v.action),v=v.next;while(v!==d);qt(f,s.memoizedState)||(Tt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),o.lastRenderedState=f}return[f,c]}function Of(){}function Lf(t,s){var o=Qe,c=Bt(),d=s(),f=!qt(c.memoizedState,d);if(f&&(c.memoizedState=d,Tt=!0),c=c.queue,Dc(Ff.bind(null,o,c,t),[t]),c.getSnapshot!==s||f||lt!==null&&lt.memoizedState.tag&1){if(o.flags|=2048,Ni(9,Uf.bind(null,o,c,d,s),void 0,null),at===null)throw Error(n(349));(Es&30)!==0||Df(o,s,d)}return d}function Df(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=Qe.updateQueue,s===null?(s={lastEffect:null,stores:null},Qe.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function Uf(t,s,o,c){s.value=o,s.getSnapshot=c,zf(s)&&Hf(t)}function Ff(t,s,o){return o(function(){zf(s)&&Hf(t)})}function zf(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!qt(t,o)}catch{return!0}}function Hf(t){var s=_n(t,1);s!==null&&en(s,t,1,-1)}function $f(t){var s=dn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:t},s.queue=t,t=t.dispatch=vx.bind(null,Qe,t),[s.memoizedState,t]}function Ni(t,s,o,c){return t={tag:t,create:s,destroy:o,deps:c,next:null},s=Qe.updateQueue,s===null?(s={lastEffect:null,stores:null},Qe.updateQueue=s,s.lastEffect=t.next=t):(o=s.lastEffect,o===null?s.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,s.lastEffect=t)),t}function Wf(){return Bt().memoizedState}function el(t,s,o,c){var d=dn();Qe.flags|=t,d.memoizedState=Ni(1|s,o,void 0,c===void 0?null:c)}function tl(t,s,o,c){var d=Bt();c=c===void 0?null:c;var f=void 0;if(nt!==null){var v=nt.memoizedState;if(f=v.destroy,c!==null&&Rc(c,v.deps)){d.memoizedState=Ni(s,o,f,c);return}}Qe.flags|=t,d.memoizedState=Ni(1|s,o,f,c)}function Bf(t,s){return el(8390656,8,t,s)}function Dc(t,s){return tl(2048,8,t,s)}function Gf(t,s){return tl(4,2,t,s)}function Vf(t,s){return tl(4,4,t,s)}function Kf(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Qf(t,s,o){return o=o!=null?o.concat([t]):null,tl(4,4,Kf.bind(null,s,t),o)}function Uc(){}function qf(t,s){var o=Bt();s=s===void 0?null:s;var c=o.memoizedState;return c!==null&&s!==null&&Rc(s,c[1])?c[0]:(o.memoizedState=[t,s],t)}function Yf(t,s){var o=Bt();s=s===void 0?null:s;var c=o.memoizedState;return c!==null&&s!==null&&Rc(s,c[1])?c[0]:(t=t(),o.memoizedState=[t,s],t)}function Jf(t,s,o){return(Es&21)===0?(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=o):(qt(o,s)||(o=Sh(),Qe.lanes|=o,Cs|=o,t.baseState=!0),s)}function gx(t,s){var o=Le;Le=o!==0&&4>o?o:4,t(!0);var c=Pc.transition;Pc.transition={};try{t(!1),s()}finally{Le=o,Pc.transition=c}}function Xf(){return Bt().memoizedState}function yx(t,s,o){var c=Zn(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Zf(t))ep(s,o);else if(o=jf(t,s,o,c),o!==null){var d=Et();en(o,t,c,d),tp(o,s,c)}}function vx(t,s,o){var c=Zn(t),d={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zf(t))ep(s,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var v=s.lastRenderedState,w=f(v,o);if(d.hasEagerState=!0,d.eagerState=w,qt(w,v)){var b=s.interleaved;b===null?(d.next=d,Cc(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}o=jf(t,s,d,c),o!==null&&(d=Et(),en(o,t,c,d),tp(o,s,c))}}function Zf(t){var s=t.alternate;return t===Qe||s!==null&&s===Qe}function ep(t,s){xi=Zo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function tp(t,s,o){if((o&4194240)!==0){var c=s.lanes;c&=t.pendingLanes,o|=c,s.lanes=o,za(t,o)}}var nl={readContext:Wt,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},xx={readContext:Wt,useCallback:function(t,s){return dn().memoizedState=[t,s===void 0?null:s],t},useContext:Wt,useEffect:Bf,useImperativeHandle:function(t,s,o){return o=o!=null?o.concat([t]):null,el(4194308,4,Kf.bind(null,s,t),o)},useLayoutEffect:function(t,s){return el(4194308,4,t,s)},useInsertionEffect:function(t,s){return el(4,2,t,s)},useMemo:function(t,s){var o=dn();return s=s===void 0?null:s,t=t(),o.memoizedState=[t,s],t},useReducer:function(t,s,o){var c=dn();return s=o!==void 0?o(s):s,c.memoizedState=c.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},c.queue=t,t=t.dispatch=yx.bind(null,Qe,t),[c.memoizedState,t]},useRef:function(t){var s=dn();return t={current:t},s.memoizedState=t},useState:$f,useDebugValue:Uc,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=$f(!1),s=t[0];return t=gx.bind(null,t[1]),dn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,o){var c=Qe,d=dn();if(Ve){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),at===null)throw Error(n(349));(Es&30)!==0||Df(c,s,o)}d.memoizedState=o;var f={value:o,getSnapshot:s};return d.queue=f,Bf(Ff.bind(null,c,f,t),[t]),c.flags|=2048,Ni(9,Uf.bind(null,c,f,o,s),void 0,null),o},useId:function(){var t=dn(),s=at.identifierPrefix;if(Ve){var o=xn,c=vn;o=(c&~(1<<32-Qt(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=_i++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=mx++,s=":"+s+"r"+o.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},_x={readContext:Wt,useCallback:qf,useContext:Wt,useEffect:Dc,useImperativeHandle:Qf,useInsertionEffect:Gf,useLayoutEffect:Vf,useMemo:Yf,useReducer:Oc,useRef:Wf,useState:function(){return Oc(wi)},useDebugValue:Uc,useDeferredValue:function(t){var s=Bt();return Jf(s,nt.memoizedState,t)},useTransition:function(){var t=Oc(wi)[0],s=Bt().memoizedState;return[t,s]},useMutableSource:Of,useSyncExternalStore:Lf,useId:Xf,unstable_isNewReconciler:!1},wx={readContext:Wt,useCallback:qf,useContext:Wt,useEffect:Dc,useImperativeHandle:Qf,useInsertionEffect:Gf,useLayoutEffect:Vf,useMemo:Yf,useReducer:Lc,useRef:Wf,useState:function(){return Lc(wi)},useDebugValue:Uc,useDeferredValue:function(t){var s=Bt();return nt===null?s.memoizedState=t:Jf(s,nt.memoizedState,t)},useTransition:function(){var t=Lc(wi)[0],s=Bt().memoizedState;return[t,s]},useMutableSource:Of,useSyncExternalStore:Lf,useId:Xf,unstable_isNewReconciler:!1};function Jt(t,s){if(t&&t.defaultProps){s=K({},s),t=t.defaultProps;for(var o in t)s[o]===void 0&&(s[o]=t[o]);return s}return s}function Fc(t,s,o,c){s=t.memoizedState,o=o(c,s),o=o==null?s:K({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var sl={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,s,o){t=t._reactInternals;var c=Et(),d=Zn(t),f=wn(c,d);f.payload=s,o!=null&&(f.callback=o),s=qn(t,f,d),s!==null&&(en(s,t,d,c),qo(s,t,d))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var c=Et(),d=Zn(t),f=wn(c,d);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=qn(t,f,d),s!==null&&(en(s,t,d,c),qo(s,t,d))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Et(),c=Zn(t),d=wn(o,c);d.tag=2,s!=null&&(d.callback=s),s=qn(t,d,c),s!==null&&(en(s,t,c,o),qo(s,t,c))}};function np(t,s,o,c,d,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,f,v):s.prototype&&s.prototype.isPureReactComponent?!ai(o,c)||!ai(d,f):!0}function sp(t,s,o){var c=!1,d=Vn,f=s.contextType;return typeof f=="object"&&f!==null?f=Wt(f):(d=It(s)?xs:yt.current,c=s.contextTypes,f=(c=c!=null)?ir(t,d):Vn),s=new s(o,f),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=sl,t.stateNode=s,s._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=f),s}function rp(t,s,o,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==t&&sl.enqueueReplaceState(s,s.state,null)}function zc(t,s,o,c){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},Sc(t);var f=s.contextType;typeof f=="object"&&f!==null?d.context=Wt(f):(f=It(s)?xs:yt.current,d.context=ir(t,f)),d.state=t.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Fc(t,s,f,o),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&sl.enqueueReplaceState(d,d.state,null),Yo(t,o,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function fr(t,s){try{var o="",c=s;do o+=N(c),c=c.return;while(c);var d=o}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:s,stack:d,digest:null}}function Hc(t,s,o){return{value:t,source:null,stack:o??null,digest:s??null}}function $c(t,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Nx=typeof WeakMap=="function"?WeakMap:Map;function ip(t,s,o){o=wn(-1,o),o.tag=3,o.payload={element:null};var c=s.value;return o.callback=function(){ul||(ul=!0,su=c),$c(t,s)},o}function op(t,s,o){o=wn(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;o.payload=function(){return c(d)},o.callback=function(){$c(t,s)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){$c(t,s),typeof c!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),o}function lp(t,s,o){var c=t.pingCache;if(c===null){c=t.pingCache=new Nx;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(d.add(o),t=Lx.bind(null,t,s,o),s.then(t,t))}function ap(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function cp(t,s,o,c,d){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=wn(-1,1),s.tag=2,qn(o,s,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}var bx=q.ReactCurrentOwner,Tt=!1;function bt(t,s,o,c){s.child=t===null?Tf(s,null,o,c):cr(s,t.child,o,c)}function up(t,s,o,c,d){o=o.render;var f=s.ref;return dr(s,d),c=Ac(t,s,o,c,f,d),o=Mc(),t!==null&&!Tt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,Nn(t,s,d)):(Ve&&o&&gc(s),s.flags|=1,bt(t,s,c,d),s.child)}function dp(t,s,o,c,d){if(t===null){var f=o.type;return typeof f=="function"&&!uu(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=f,hp(t,s,f,c,d)):(t=gl(o.type,null,c,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,(t.lanes&d)===0){var v=f.memoizedProps;if(o=o.compare,o=o!==null?o:ai,o(v,c)&&t.ref===s.ref)return Nn(t,s,d)}return s.flags|=1,t=ts(f,c),t.ref=s.ref,t.return=s,s.child=t}function hp(t,s,o,c,d){if(t!==null){var f=t.memoizedProps;if(ai(f,c)&&t.ref===s.ref)if(Tt=!1,s.pendingProps=c=f,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Tt=!0);else return s.lanes=t.lanes,Nn(t,s,d)}return Wc(t,s,o,c,d)}function fp(t,s,o){var c=s.pendingProps,d=c.children,f=t!==null?t.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(mr,zt),zt|=o;else{if((o&1073741824)===0)return t=f!==null?f.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,He(mr,zt),zt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:o,He(mr,zt),zt|=c}else f!==null?(c=f.baseLanes|o,s.memoizedState=null):c=o,He(mr,zt),zt|=c;return bt(t,s,d,o),s.child}function pp(t,s){var o=s.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function Wc(t,s,o,c,d){var f=It(o)?xs:yt.current;return f=ir(s,f),dr(s,d),o=Ac(t,s,o,c,f,d),c=Mc(),t!==null&&!Tt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~d,Nn(t,s,d)):(Ve&&c&&gc(s),s.flags|=1,bt(t,s,o,d),s.child)}function mp(t,s,o,c,d){if(It(o)){var f=!0;Ho(s)}else f=!1;if(dr(s,d),s.stateNode===null)il(t,s),sp(s,o,c),zc(s,o,c,d),c=!0;else if(t===null){var v=s.stateNode,w=s.memoizedProps;v.props=w;var b=v.context,M=o.contextType;typeof M=="object"&&M!==null?M=Wt(M):(M=It(o)?xs:yt.current,M=ir(s,M));var W=o.getDerivedStateFromProps,B=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";B||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==c||b!==M)&&rp(s,v,c,M),Qn=!1;var $=s.memoizedState;v.state=$,Yo(s,c,v,d),b=s.memoizedState,w!==c||$!==b||kt.current||Qn?(typeof W=="function"&&(Fc(s,o,W,c),b=s.memoizedState),(w=Qn||np(s,o,w,c,$,b,M))?(B||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),v.props=c,v.state=b,v.context=M,c=w):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Pf(t,s),w=s.memoizedProps,M=s.type===s.elementType?w:Jt(s.type,w),v.props=M,B=s.pendingProps,$=v.context,b=o.contextType,typeof b=="object"&&b!==null?b=Wt(b):(b=It(o)?xs:yt.current,b=ir(s,b));var ne=o.getDerivedStateFromProps;(W=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==B||$!==b)&&rp(s,v,c,b),Qn=!1,$=s.memoizedState,v.state=$,Yo(s,c,v,d);var oe=s.memoizedState;w!==B||$!==oe||kt.current||Qn?(typeof ne=="function"&&(Fc(s,o,ne,c),oe=s.memoizedState),(M=Qn||np(s,o,M,c,$,oe,b)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,oe,b),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,oe,b)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=oe),v.props=c,v.state=oe,v.context=b,c=M):(typeof v.componentDidUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&$===t.memoizedState||(s.flags|=1024),c=!1)}return Bc(t,s,o,c,f,d)}function Bc(t,s,o,c,d,f){pp(t,s);var v=(s.flags&128)!==0;if(!c&&!v)return d&&_f(s,o,!1),Nn(t,s,f);c=s.stateNode,bx.current=s;var w=v&&typeof o.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,t!==null&&v?(s.child=cr(s,t.child,null,f),s.child=cr(s,null,w,f)):bt(t,s,w,f),s.memoizedState=c.state,d&&_f(s,o,!0),s.child}function gp(t){var s=t.stateNode;s.pendingContext?vf(t,s.pendingContext,s.pendingContext!==s.context):s.context&&vf(t,s.context,!1),kc(t,s.containerInfo)}function yp(t,s,o,c,d){return ar(),_c(d),s.flags|=256,bt(t,s,o,c),s.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function vp(t,s,o){var c=s.pendingProps,d=Ke.current,f=!1,v=(s.flags&128)!==0,w;if((w=v)||(w=t!==null&&t.memoizedState===null?!1:(d&2)!==0),w?(f=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),He(Ke,d&1),t===null)return xc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,t=c.fallback,f?(c=s.mode,f=s.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=yl(v,c,0,null),t=Ts(t,c,o,null),f.return=s,t.return=s,f.sibling=t,s.child=f,s.child.memoizedState=Vc(o),s.memoizedState=Gc,t):Kc(s,v));if(d=t.memoizedState,d!==null&&(w=d.dehydrated,w!==null))return Ex(t,s,v,c,w,d,o);if(f){f=c.fallback,v=s.mode,d=t.child,w=d.sibling;var b={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=ts(d,b),c.subtreeFlags=d.subtreeFlags&14680064),w!==null?f=ts(w,f):(f=Ts(f,v,o,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,v=t.child.memoizedState,v=v===null?Vc(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=t.childLanes&~o,s.memoizedState=Gc,c}return f=t.child,t=f.sibling,c=ts(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=o),c.return=s,c.sibling=null,t!==null&&(o=s.deletions,o===null?(s.deletions=[t],s.flags|=16):o.push(t)),s.child=c,s.memoizedState=null,c}function Kc(t,s){return s=yl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function rl(t,s,o,c){return c!==null&&_c(c),cr(s,t.child,null,o),t=Kc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Ex(t,s,o,c,d,f,v){if(o)return s.flags&256?(s.flags&=-257,c=Hc(Error(n(422))),rl(t,s,v,c)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=yl({mode:"visible",children:c.children},d,0,null),f=Ts(f,d,v,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&cr(s,t.child,null,v),s.child.memoizedState=Vc(v),s.memoizedState=Gc,f);if((s.mode&1)===0)return rl(t,s,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var w=c.dgst;return c=w,f=Error(n(419)),c=Hc(f,c,void 0),rl(t,s,v,c)}if(w=(v&t.childLanes)!==0,Tt||w){if(c=at,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,_n(t,d),en(c,t,d,-1))}return cu(),c=Hc(Error(n(421))),rl(t,s,v,c)}return d.data==="$?"?(s.flags|=128,s.child=t.child,s=Dx.bind(null,t),d._reactRetry=s,null):(t=f.treeContext,Ft=Bn(d.nextSibling),Ut=s,Ve=!0,Yt=null,t!==null&&(Ht[$t++]=vn,Ht[$t++]=xn,Ht[$t++]=_s,vn=t.id,xn=t.overflow,_s=s),s=Kc(s,c.children),s.flags|=4096,s)}function xp(t,s,o){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Ec(t.return,s,o)}function Qc(t,s,o,c,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=o,f.tailMode=d)}function _p(t,s,o){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(bt(t,s,c.children,o),c=Ke.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xp(t,o,s);else if(t.tag===19)xp(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(He(Ke,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(o=s.child,d=null;o!==null;)t=o.alternate,t!==null&&Jo(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Qc(s,!1,d,o,f);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Jo(t)===null){s.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}Qc(s,!0,o,null,f);break;case"together":Qc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function il(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Nn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),Cs|=s.lanes,(o&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(n(153));if(s.child!==null){for(t=s.child,o=ts(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=ts(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function Cx(t,s,o){switch(s.tag){case 3:gp(s),ar();break;case 5:Mf(s);break;case 1:It(s.type)&&Ho(s);break;case 4:kc(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;He(Ko,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(He(Ke,Ke.current&1),s.flags|=128,null):(o&s.child.childLanes)!==0?vp(t,s,o):(He(Ke,Ke.current&1),t=Nn(t,s,o),t!==null?t.sibling:null);He(Ke,Ke.current&1);break;case 19:if(c=(o&s.childLanes)!==0,(t.flags&128)!==0){if(c)return _p(t,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(Ke,Ke.current),c)break;return null;case 22:case 23:return s.lanes=0,fp(t,s,o)}return Nn(t,s,o)}var wp,qc,Np,bp;wp=function(t,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},qc=function(){},Np=function(t,s,o,c){var d=t.memoizedProps;if(d!==c){t=s.stateNode,bs(un.current);var f=null;switch(o){case"input":d=Ue(t,d),c=Ue(t,c),f=[];break;case"select":d=K({},d,{value:void 0}),c=K({},c,{value:void 0}),f=[];break;case"textarea":d=ka(t,d),c=ka(t,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=Uo)}Ta(o,c);var v;o=null;for(M in d)if(!c.hasOwnProperty(M)&&d.hasOwnProperty(M)&&d[M]!=null)if(M==="style"){var w=d[M];for(v in w)w.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(l.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in c){var b=c[M];if(w=d?.[M],c.hasOwnProperty(M)&&b!==w&&(b!=null||w!=null))if(M==="style")if(w){for(v in w)!w.hasOwnProperty(v)||b&&b.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in b)b.hasOwnProperty(v)&&w[v]!==b[v]&&(o||(o={}),o[v]=b[v])}else o||(f||(f=[]),f.push(M,o)),o=b;else M==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,w=w?w.__html:void 0,b!=null&&w!==b&&(f=f||[]).push(M,b)):M==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(M,""+b):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(l.hasOwnProperty(M)?(b!=null&&M==="onScroll"&&We("scroll",t),f||w===b||(f=[])):(f=f||[]).push(M,b))}o&&(f=f||[]).push("style",o);var M=f;(s.updateQueue=M)&&(s.flags|=4)}},bp=function(t,s,o,c){o!==c&&(s.flags|=4)};function bi(t,s){if(!Ve)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function xt(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(s)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=o,s}function Sx(t,s,o){var c=s.pendingProps;switch(yc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return It(s.type)&&zo(),xt(s),null;case 3:return c=s.stateNode,hr(),Be(kt),Be(yt),jc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(Go(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yt!==null&&(ou(Yt),Yt=null))),qc(t,s),xt(s),null;case 5:Ic(s);var d=bs(vi.current);if(o=s.type,t!==null&&s.stateNode!=null)Np(t,s,o,c,d),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(n(166));return xt(s),null}if(t=bs(un.current),Go(s)){c=s.stateNode,o=s.type;var f=s.memoizedProps;switch(c[cn]=s,c[fi]=f,t=(s.mode&1)!==0,o){case"dialog":We("cancel",c),We("close",c);break;case"iframe":case"object":case"embed":We("load",c);break;case"video":case"audio":for(d=0;d<ui.length;d++)We(ui[d],c);break;case"source":We("error",c);break;case"img":case"image":case"link":We("error",c),We("load",c);break;case"details":We("toggle",c);break;case"input":Wr(c,f),We("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},We("invalid",c);break;case"textarea":ih(c,f),We("invalid",c)}Ta(o,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var w=f[v];v==="children"?typeof w=="string"?c.textContent!==w&&(f.suppressHydrationWarning!==!0&&Do(c.textContent,w,t),d=["children",w]):typeof w=="number"&&c.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&Do(c.textContent,w,t),d=["children",""+w]):l.hasOwnProperty(v)&&w!=null&&v==="onScroll"&&We("scroll",c)}switch(o){case"input":ce(c),rh(c,f,!0);break;case"textarea":ce(c),lh(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Uo)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ah(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(o,{is:c.is}):(t=v.createElement(o),o==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,o),t[cn]=s,t[fi]=c,wp(t,s,!1,!1),s.stateNode=t;e:{switch(v=ja(o,c),o){case"dialog":We("cancel",t),We("close",t),d=c;break;case"iframe":case"object":case"embed":We("load",t),d=c;break;case"video":case"audio":for(d=0;d<ui.length;d++)We(ui[d],t);d=c;break;case"source":We("error",t),d=c;break;case"img":case"image":case"link":We("error",t),We("load",t),d=c;break;case"details":We("toggle",t),d=c;break;case"input":Wr(t,c),d=Ue(t,c),We("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=K({},c,{value:void 0}),We("invalid",t);break;case"textarea":ih(t,c),d=ka(t,c),We("invalid",t);break;default:d=c}Ta(o,d),w=d;for(f in w)if(w.hasOwnProperty(f)){var b=w[f];f==="style"?dh(t,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&ch(t,b)):f==="children"?typeof b=="string"?(o!=="textarea"||b!=="")&&Gr(t,b):typeof b=="number"&&Gr(t,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?b!=null&&f==="onScroll"&&We("scroll",t):b!=null&&X(t,f,b,v))}switch(o){case"input":ce(t),rh(t,c,!1);break;case"textarea":ce(t),lh(t);break;case"option":c.value!=null&&t.setAttribute("value",""+T(c.value));break;case"select":t.multiple=!!c.multiple,f=c.value,f!=null?Ks(t,!!c.multiple,f,!1):c.defaultValue!=null&&Ks(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Uo)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return xt(s),null;case 6:if(t&&s.stateNode!=null)bp(t,s,t.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(o=bs(vi.current),bs(un.current),Go(s)){if(c=s.stateNode,o=s.memoizedProps,c[cn]=s,(f=c.nodeValue!==o)&&(t=Ut,t!==null))switch(t.tag){case 3:Do(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Do(c.nodeValue,o,(t.mode&1)!==0)}f&&(s.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[cn]=s,s.stateNode=c}return xt(s),null;case 13:if(Be(Ke),c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Ft!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Sf(),ar(),s.flags|=98560,f=!1;else if(f=Go(s),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(n(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[cn]=s}else ar(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),f=!1}else Yt!==null&&(ou(Yt),Yt=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=o,s):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Ke.current&1)!==0?st===0&&(st=3):cu())),s.updateQueue!==null&&(s.flags|=4),xt(s),null);case 4:return hr(),qc(t,s),t===null&&di(s.stateNode.containerInfo),xt(s),null;case 10:return bc(s.type._context),xt(s),null;case 17:return It(s.type)&&zo(),xt(s),null;case 19:if(Be(Ke),f=s.memoizedState,f===null)return xt(s),null;if(c=(s.flags&128)!==0,v=f.rendering,v===null)if(c)bi(f,!1);else{if(st!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(v=Jo(t),v!==null){for(s.flags|=128,bi(f,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=o,o=s.child;o!==null;)f=o,t=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,t=v.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return He(Ke,Ke.current&1|2),s.child}t=t.sibling}f.tail!==null&&Xe()>gr&&(s.flags|=128,c=!0,bi(f,!1),s.lanes=4194304)}else{if(!c)if(t=Jo(v),t!==null){if(s.flags|=128,c=!0,o=t.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),bi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!Ve)return xt(s),null}else 2*Xe()-f.renderingStartTime>gr&&o!==1073741824&&(s.flags|=128,c=!0,bi(f,!1),s.lanes=4194304);f.isBackwards?(v.sibling=s.child,s.child=v):(o=f.last,o!==null?o.sibling=v:s.child=v,f.last=v)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Xe(),s.sibling=null,o=Ke.current,He(Ke,c?o&1|2:o&1),s):(xt(s),null);case 22:case 23:return au(),c=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(zt&1073741824)!==0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function kx(t,s){switch(yc(s),s.tag){case 1:return It(s.type)&&zo(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return hr(),Be(kt),Be(yt),jc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Ic(s),null;case 13:if(Be(Ke),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ar()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Be(Ke),null;case 4:return hr(),null;case 10:return bc(s.type._context),null;case 22:case 23:return au(),null;case 24:return null;default:return null}}var ol=!1,_t=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,re=null;function pr(t,s){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){qe(t,s,c)}else o.current=null}function Yc(t,s,o){try{o()}catch(c){qe(t,s,c)}}var Ep=!1;function Tx(t,s){if(ac=So,t=tf(),ec(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var v=0,w=-1,b=-1,M=0,W=0,B=t,$=null;t:for(;;){for(var ne;B!==o||d!==0&&B.nodeType!==3||(w=v+d),B!==f||c!==0&&B.nodeType!==3||(b=v+c),B.nodeType===3&&(v+=B.nodeValue.length),(ne=B.firstChild)!==null;)$=B,B=ne;for(;;){if(B===t)break t;if($===o&&++M===d&&(w=v),$===f&&++W===c&&(b=v),(ne=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=ne}o=w===-1||b===-1?null:{start:w,end:b}}else o=null}o=o||{start:0,end:0}}else o=null;for(cc={focusedElem:t,selectionRange:o},So=!1,re=s;re!==null;)if(s=re,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,re=t;else for(;re!==null;){s=re;try{var oe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var le=oe.memoizedProps,Ze=oe.memoizedState,j=s.stateNode,E=j.getSnapshotBeforeUpdate(s.elementType===s.type?le:Jt(s.type,le),Ze);j.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var R=s.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Q){qe(s,s.return,Q)}if(t=s.sibling,t!==null){t.return=s.return,re=t;break}re=s.return}return oe=Ep,Ep=!1,oe}function Ei(t,s,o){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var f=d.destroy;d.destroy=void 0,f!==void 0&&Yc(s,o,f)}d=d.next}while(d!==c)}}function ll(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==s)}}function Jc(t){var s=t.ref;if(s!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof s=="function"?s(t):s.current=t}}function Cp(t){var s=t.alternate;s!==null&&(t.alternate=null,Cp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[cn],delete s[fi],delete s[fc],delete s[dx],delete s[hx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sp(t){return t.tag===5||t.tag===3||t.tag===4}function kp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xc(t,s,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(t,s):o.insertBefore(t,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(t,o)):(s=o,s.appendChild(t)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Uo));else if(c!==4&&(t=t.child,t!==null))for(Xc(t,s,o),t=t.sibling;t!==null;)Xc(t,s,o),t=t.sibling}function Zc(t,s,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(Zc(t,s,o),t=t.sibling;t!==null;)Zc(t,s,o),t=t.sibling}var pt=null,Xt=!1;function Yn(t,s,o){for(o=o.child;o!==null;)Ip(t,s,o),o=o.sibling}function Ip(t,s,o){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(_o,o)}catch{}switch(o.tag){case 5:_t||pr(o,s);case 6:var c=pt,d=Xt;pt=null,Yn(t,s,o),pt=c,Xt=d,pt!==null&&(Xt?(t=pt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):pt.removeChild(o.stateNode));break;case 18:pt!==null&&(Xt?(t=pt,o=o.stateNode,t.nodeType===8?hc(t.parentNode,o):t.nodeType===1&&hc(t,o),ni(t)):hc(pt,o.stateNode));break;case 4:c=pt,d=Xt,pt=o.stateNode.containerInfo,Xt=!0,Yn(t,s,o),pt=c,Xt=d;break;case 0:case 11:case 14:case 15:if(!_t&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&Yc(o,s,v),d=d.next}while(d!==c)}Yn(t,s,o);break;case 1:if(!_t&&(pr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(w){qe(o,s,w)}Yn(t,s,o);break;case 21:Yn(t,s,o);break;case 22:o.mode&1?(_t=(c=_t)||o.memoizedState!==null,Yn(t,s,o),_t=c):Yn(t,s,o);break;default:Yn(t,s,o)}}function Tp(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Ix),s.forEach(function(c){var d=Ux.bind(null,t,c);o.has(c)||(o.add(c),c.then(d,d))})}}function Zt(t,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];try{var f=t,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 5:pt=w.stateNode,Xt=!1;break e;case 3:pt=w.stateNode.containerInfo,Xt=!0;break e;case 4:pt=w.stateNode.containerInfo,Xt=!0;break e}w=w.return}if(pt===null)throw Error(n(160));Ip(f,v,d),pt=null,Xt=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(M){qe(d,s,M)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jp(s,t),s=s.sibling}function jp(t,s){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(s,t),hn(t),c&4){try{Ei(3,t,t.return),ll(3,t)}catch(le){qe(t,t.return,le)}try{Ei(5,t,t.return)}catch(le){qe(t,t.return,le)}}break;case 1:Zt(s,t),hn(t),c&512&&o!==null&&pr(o,o.return);break;case 5:if(Zt(s,t),hn(t),c&512&&o!==null&&pr(o,o.return),t.flags&32){var d=t.stateNode;try{Gr(d,"")}catch(le){qe(t,t.return,le)}}if(c&4&&(d=t.stateNode,d!=null)){var f=t.memoizedProps,v=o!==null?o.memoizedProps:f,w=t.type,b=t.updateQueue;if(t.updateQueue=null,b!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&Vs(d,f),ja(w,v);var M=ja(w,f);for(v=0;v<b.length;v+=2){var W=b[v],B=b[v+1];W==="style"?dh(d,B):W==="dangerouslySetInnerHTML"?ch(d,B):W==="children"?Gr(d,B):X(d,W,B,M)}switch(w){case"input":Ca(d,f);break;case"textarea":oh(d,f);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ne=f.value;ne!=null?Ks(d,!!f.multiple,ne,!1):$!==!!f.multiple&&(f.defaultValue!=null?Ks(d,!!f.multiple,f.defaultValue,!0):Ks(d,!!f.multiple,f.multiple?[]:"",!1))}d[fi]=f}catch(le){qe(t,t.return,le)}}break;case 6:if(Zt(s,t),hn(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,f=t.memoizedProps;try{d.nodeValue=f}catch(le){qe(t,t.return,le)}}break;case 3:if(Zt(s,t),hn(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ni(s.containerInfo)}catch(le){qe(t,t.return,le)}break;case 4:Zt(s,t),hn(t);break;case 13:Zt(s,t),hn(t),d=t.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(nu=Xe())),c&4&&Tp(t);break;case 22:if(W=o!==null&&o.memoizedState!==null,t.mode&1?(_t=(M=_t)||W,Zt(s,t),_t=M):Zt(s,t),hn(t),c&8192){if(M=t.memoizedState!==null,(t.stateNode.isHidden=M)&&!W&&(t.mode&1)!==0)for(re=t,W=t.child;W!==null;){for(B=re=W;re!==null;){switch($=re,ne=$.child,$.tag){case 0:case 11:case 14:case 15:Ei(4,$,$.return);break;case 1:pr($,$.return);var oe=$.stateNode;if(typeof oe.componentWillUnmount=="function"){c=$,o=$.return;try{s=c,oe.props=s.memoizedProps,oe.state=s.memoizedState,oe.componentWillUnmount()}catch(le){qe(c,o,le)}}break;case 5:pr($,$.return);break;case 22:if($.memoizedState!==null){Ap(B);continue}}ne!==null?(ne.return=$,re=ne):Ap(B)}W=W.sibling}e:for(W=null,B=t;;){if(B.tag===5){if(W===null){W=B;try{d=B.stateNode,M?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=B.stateNode,b=B.memoizedProps.style,v=b!=null&&b.hasOwnProperty("display")?b.display:null,w.style.display=uh("display",v))}catch(le){qe(t,t.return,le)}}}else if(B.tag===6){if(W===null)try{B.stateNode.nodeValue=M?"":B.memoizedProps}catch(le){qe(t,t.return,le)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===t)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===t)break e;for(;B.sibling===null;){if(B.return===null||B.return===t)break e;W===B&&(W=null),B=B.return}W===B&&(W=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Zt(s,t),hn(t),c&4&&Tp(t);break;case 21:break;default:Zt(s,t),hn(t)}}function hn(t){var s=t.flags;if(s&2){try{e:{for(var o=t.return;o!==null;){if(Sp(o)){var c=o;break e}o=o.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Gr(d,""),c.flags&=-33);var f=kp(t);Zc(t,f,d);break;case 3:case 4:var v=c.stateNode.containerInfo,w=kp(t);Xc(t,w,v);break;default:throw Error(n(161))}}catch(b){qe(t,t.return,b)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function jx(t,s,o){re=t,Pp(t)}function Pp(t,s,o){for(var c=(t.mode&1)!==0;re!==null;){var d=re,f=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||ol;if(!v){var w=d.alternate,b=w!==null&&w.memoizedState!==null||_t;w=ol;var M=_t;if(ol=v,(_t=b)&&!M)for(re=d;re!==null;)v=re,b=v.child,v.tag===22&&v.memoizedState!==null?Mp(d):b!==null?(b.return=v,re=b):Mp(d);for(;f!==null;)re=f,Pp(f),f=f.sibling;re=d,ol=w,_t=M}Rp(t)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,re=f):Rp(t)}}function Rp(t){for(;re!==null;){var s=re;if((s.flags&8772)!==0){var o=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:_t||ll(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!_t)if(o===null)c.componentDidMount();else{var d=s.elementType===s.type?o.memoizedProps:Jt(s.type,o.memoizedProps);c.componentDidUpdate(d,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&Af(s,f,c);break;case 3:var v=s.updateQueue;if(v!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}Af(s,v,o)}break;case 5:var w=s.stateNode;if(o===null&&s.flags&4){o=w;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&o.focus();break;case"img":b.src&&(o.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var M=s.alternate;if(M!==null){var W=M.memoizedState;if(W!==null){var B=W.dehydrated;B!==null&&ni(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}_t||s.flags&512&&Jc(s)}catch($){qe(s,s.return,$)}}if(s===t){re=null;break}if(o=s.sibling,o!==null){o.return=s.return,re=o;break}re=s.return}}function Ap(t){for(;re!==null;){var s=re;if(s===t){re=null;break}var o=s.sibling;if(o!==null){o.return=s.return,re=o;break}re=s.return}}function Mp(t){for(;re!==null;){var s=re;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{ll(4,s)}catch(b){qe(s,o,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){qe(s,d,b)}}var f=s.return;try{Jc(s)}catch(b){qe(s,f,b)}break;case 5:var v=s.return;try{Jc(s)}catch(b){qe(s,v,b)}}}catch(b){qe(s,s.return,b)}if(s===t){re=null;break}var w=s.sibling;if(w!==null){w.return=s.return,re=w;break}re=s.return}}var Px=Math.ceil,al=q.ReactCurrentDispatcher,eu=q.ReactCurrentOwner,Gt=q.ReactCurrentBatchConfig,Te=0,at=null,et=null,mt=0,zt=0,mr=Gn(0),st=0,Ci=null,Cs=0,cl=0,tu=0,Si=null,jt=null,nu=0,gr=1/0,bn=null,ul=!1,su=null,Jn=null,dl=!1,Xn=null,hl=0,ki=0,ru=null,fl=-1,pl=0;function Et(){return(Te&6)!==0?Xe():fl!==-1?fl:fl=Xe()}function Zn(t){return(t.mode&1)===0?1:(Te&2)!==0&&mt!==0?mt&-mt:px.transition!==null?(pl===0&&(pl=Sh()),pl):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Oh(t.type)),t)}function en(t,s,o,c){if(50<ki)throw ki=0,ru=null,Error(n(185));Jr(t,o,c),((Te&2)===0||t!==at)&&(t===at&&((Te&2)===0&&(cl|=o),st===4&&es(t,mt)),Pt(t,c),o===1&&Te===0&&(s.mode&1)===0&&(gr=Xe()+500,$o&&Kn()))}function Pt(t,s){var o=t.callbackNode;pv(t,s);var c=bo(t,t===at?mt:0);if(c===0)o!==null&&bh(o),t.callbackNode=null,t.callbackPriority=0;else if(s=c&-c,t.callbackPriority!==s){if(o!=null&&bh(o),s===1)t.tag===0?fx(Lp.bind(null,t)):wf(Lp.bind(null,t)),cx(function(){(Te&6)===0&&Kn()}),o=null;else{switch(kh(c)){case 1:o=Da;break;case 4:o=Eh;break;case 16:o=xo;break;case 536870912:o=Ch;break;default:o=xo}o=Bp(o,Op.bind(null,t))}t.callbackPriority=s,t.callbackNode=o}}function Op(t,s){if(fl=-1,pl=0,(Te&6)!==0)throw Error(n(327));var o=t.callbackNode;if(yr()&&t.callbackNode!==o)return null;var c=bo(t,t===at?mt:0);if(c===0)return null;if((c&30)!==0||(c&t.expiredLanes)!==0||s)s=ml(t,c);else{s=c;var d=Te;Te|=2;var f=Up();(at!==t||mt!==s)&&(bn=null,gr=Xe()+500,ks(t,s));do try{Mx();break}catch(w){Dp(t,w)}while(!0);Nc(),al.current=f,Te=d,et!==null?s=0:(at=null,mt=0,s=st)}if(s!==0){if(s===2&&(d=Ua(t),d!==0&&(c=d,s=iu(t,d))),s===1)throw o=Ci,ks(t,0),es(t,c),Pt(t,Xe()),o;if(s===6)es(t,c);else{if(d=t.current.alternate,(c&30)===0&&!Rx(d)&&(s=ml(t,c),s===2&&(f=Ua(t),f!==0&&(c=f,s=iu(t,f))),s===1))throw o=Ci,ks(t,0),es(t,c),Pt(t,Xe()),o;switch(t.finishedWork=d,t.finishedLanes=c,s){case 0:case 1:throw Error(n(345));case 2:Is(t,jt,bn);break;case 3:if(es(t,c),(c&130023424)===c&&(s=nu+500-Xe(),10<s)){if(bo(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){Et(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=dc(Is.bind(null,t,jt,bn),s);break}Is(t,jt,bn);break;case 4:if(es(t,c),(c&4194240)===c)break;for(s=t.eventTimes,d=-1;0<c;){var v=31-Qt(c);f=1<<v,v=s[v],v>d&&(d=v),c&=~f}if(c=d,c=Xe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Px(c/1960))-c,10<c){t.timeoutHandle=dc(Is.bind(null,t,jt,bn),c);break}Is(t,jt,bn);break;case 5:Is(t,jt,bn);break;default:throw Error(n(329))}}}return Pt(t,Xe()),t.callbackNode===o?Op.bind(null,t):null}function iu(t,s){var o=Si;return t.current.memoizedState.isDehydrated&&(ks(t,s).flags|=256),t=ml(t,s),t!==2&&(s=jt,jt=o,s!==null&&ou(s)),t}function ou(t){jt===null?jt=t:jt.push.apply(jt,t)}function Rx(t){for(var s=t;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var d=o[c],f=d.getSnapshot;d=d.value;try{if(!qt(f(),d))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function es(t,s){for(s&=~tu,s&=~cl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var o=31-Qt(s),c=1<<o;t[o]=-1,s&=~c}}function Lp(t){if((Te&6)!==0)throw Error(n(327));yr();var s=bo(t,0);if((s&1)===0)return Pt(t,Xe()),null;var o=ml(t,s);if(t.tag!==0&&o===2){var c=Ua(t);c!==0&&(s=c,o=iu(t,c))}if(o===1)throw o=Ci,ks(t,0),es(t,s),Pt(t,Xe()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Is(t,jt,bn),Pt(t,Xe()),null}function lu(t,s){var o=Te;Te|=1;try{return t(s)}finally{Te=o,Te===0&&(gr=Xe()+500,$o&&Kn())}}function Ss(t){Xn!==null&&Xn.tag===0&&(Te&6)===0&&yr();var s=Te;Te|=1;var o=Gt.transition,c=Le;try{if(Gt.transition=null,Le=1,t)return t()}finally{Le=c,Gt.transition=o,Te=s,(Te&6)===0&&Kn()}}function au(){zt=mr.current,Be(mr)}function ks(t,s){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,ax(o)),et!==null)for(o=et.return;o!==null;){var c=o;switch(yc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&zo();break;case 3:hr(),Be(kt),Be(yt),jc();break;case 5:Ic(c);break;case 4:hr();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:bc(c.type._context);break;case 22:case 23:au()}o=o.return}if(at=t,et=t=ts(t.current,null),mt=zt=s,st=0,Ci=null,tu=cl=Cs=0,jt=Si=null,Ns!==null){for(s=0;s<Ns.length;s++)if(o=Ns[s],c=o.interleaved,c!==null){o.interleaved=null;var d=c.next,f=o.pending;if(f!==null){var v=f.next;f.next=d,c.next=v}o.pending=c}Ns=null}return t}function Dp(t,s){do{var o=et;try{if(Nc(),Xo.current=nl,Zo){for(var c=Qe.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Zo=!1}if(Es=0,lt=nt=Qe=null,xi=!1,_i=0,eu.current=null,o===null||o.return===null){st=1,Ci=s,et=null;break}e:{var f=t,v=o.return,w=o,b=s;if(s=mt,w.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var M=b,W=w,B=W.tag;if((W.mode&1)===0&&(B===0||B===11||B===15)){var $=W.alternate;$?(W.updateQueue=$.updateQueue,W.memoizedState=$.memoizedState,W.lanes=$.lanes):(W.updateQueue=null,W.memoizedState=null)}var ne=ap(v);if(ne!==null){ne.flags&=-257,cp(ne,v,w,f,s),ne.mode&1&&lp(f,M,s),s=ne,b=M;var oe=s.updateQueue;if(oe===null){var le=new Set;le.add(b),s.updateQueue=le}else oe.add(b);break e}else{if((s&1)===0){lp(f,M,s),cu();break e}b=Error(n(426))}}else if(Ve&&w.mode&1){var Ze=ap(v);if(Ze!==null){(Ze.flags&65536)===0&&(Ze.flags|=256),cp(Ze,v,w,f,s),_c(fr(b,w));break e}}f=b=fr(b,w),st!==4&&(st=2),Si===null?Si=[f]:Si.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var j=ip(f,b,s);Rf(f,j);break e;case 1:w=b;var E=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Jn===null||!Jn.has(R)))){f.flags|=65536,s&=-s,f.lanes|=s;var Q=op(f,w,s);Rf(f,Q);break e}}f=f.return}while(f!==null)}zp(o)}catch(ae){s=ae,et===o&&o!==null&&(et=o=o.return);continue}break}while(!0)}function Up(){var t=al.current;return al.current=nl,t===null?nl:t}function cu(){(st===0||st===3||st===2)&&(st=4),at===null||(Cs&268435455)===0&&(cl&268435455)===0||es(at,mt)}function ml(t,s){var o=Te;Te|=2;var c=Up();(at!==t||mt!==s)&&(bn=null,ks(t,s));do try{Ax();break}catch(d){Dp(t,d)}while(!0);if(Nc(),Te=o,al.current=c,et!==null)throw Error(n(261));return at=null,mt=0,st}function Ax(){for(;et!==null;)Fp(et)}function Mx(){for(;et!==null&&!iv();)Fp(et)}function Fp(t){var s=Wp(t.alternate,t,zt);t.memoizedProps=t.pendingProps,s===null?zp(t):et=s,eu.current=null}function zp(t){var s=t;do{var o=s.alternate;if(t=s.return,(s.flags&32768)===0){if(o=Sx(o,s,zt),o!==null){et=o;return}}else{if(o=kx(o,s),o!==null){o.flags&=32767,et=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,et=null;return}}if(s=s.sibling,s!==null){et=s;return}et=s=t}while(s!==null);st===0&&(st=5)}function Is(t,s,o){var c=Le,d=Gt.transition;try{Gt.transition=null,Le=1,Ox(t,s,o,c)}finally{Gt.transition=d,Le=c}return null}function Ox(t,s,o,c){do yr();while(Xn!==null);if((Te&6)!==0)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var f=o.lanes|o.childLanes;if(mv(t,f),t===at&&(et=at=null,mt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||dl||(dl=!0,Bp(xo,function(){return yr(),null})),f=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||f){f=Gt.transition,Gt.transition=null;var v=Le;Le=1;var w=Te;Te|=4,eu.current=null,Tx(t,o),jp(o,t),tx(cc),So=!!ac,cc=ac=null,t.current=o,jx(o),ov(),Te=w,Le=v,Gt.transition=f}else t.current=o;if(dl&&(dl=!1,Xn=t,hl=d),f=t.pendingLanes,f===0&&(Jn=null),cv(o.stateNode),Pt(t,Xe()),s!==null)for(c=t.onRecoverableError,o=0;o<s.length;o++)d=s[o],c(d.value,{componentStack:d.stack,digest:d.digest});if(ul)throw ul=!1,t=su,su=null,t;return(hl&1)!==0&&t.tag!==0&&yr(),f=t.pendingLanes,(f&1)!==0?t===ru?ki++:(ki=0,ru=t):ki=0,Kn(),null}function yr(){if(Xn!==null){var t=kh(hl),s=Gt.transition,o=Le;try{if(Gt.transition=null,Le=16>t?16:t,Xn===null)var c=!1;else{if(t=Xn,Xn=null,hl=0,(Te&6)!==0)throw Error(n(331));var d=Te;for(Te|=4,re=t.current;re!==null;){var f=re,v=f.child;if((re.flags&16)!==0){var w=f.deletions;if(w!==null){for(var b=0;b<w.length;b++){var M=w[b];for(re=M;re!==null;){var W=re;switch(W.tag){case 0:case 11:case 15:Ei(8,W,f)}var B=W.child;if(B!==null)B.return=W,re=B;else for(;re!==null;){W=re;var $=W.sibling,ne=W.return;if(Cp(W),W===M){re=null;break}if($!==null){$.return=ne,re=$;break}re=ne}}}var oe=f.alternate;if(oe!==null){var le=oe.child;if(le!==null){oe.child=null;do{var Ze=le.sibling;le.sibling=null,le=Ze}while(le!==null)}}re=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,re=v;else e:for(;re!==null;){if(f=re,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ei(9,f,f.return)}var j=f.sibling;if(j!==null){j.return=f.return,re=j;break e}re=f.return}}var E=t.current;for(re=E;re!==null;){v=re;var R=v.child;if((v.subtreeFlags&2064)!==0&&R!==null)R.return=v,re=R;else e:for(v=E;re!==null;){if(w=re,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:ll(9,w)}}catch(ae){qe(w,w.return,ae)}if(w===v){re=null;break e}var Q=w.sibling;if(Q!==null){Q.return=w.return,re=Q;break e}re=w.return}}if(Te=d,Kn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(_o,t)}catch{}c=!0}return c}finally{Le=o,Gt.transition=s}}return!1}function Hp(t,s,o){s=fr(o,s),s=ip(t,s,1),t=qn(t,s,1),s=Et(),t!==null&&(Jr(t,1,s),Pt(t,s))}function qe(t,s,o){if(t.tag===3)Hp(t,t,o);else for(;s!==null;){if(s.tag===3){Hp(s,t,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jn===null||!Jn.has(c))){t=fr(o,t),t=op(s,t,1),s=qn(s,t,1),t=Et(),s!==null&&(Jr(s,1,t),Pt(s,t));break}}s=s.return}}function Lx(t,s,o){var c=t.pingCache;c!==null&&c.delete(s),s=Et(),t.pingedLanes|=t.suspendedLanes&o,at===t&&(mt&o)===o&&(st===4||st===3&&(mt&130023424)===mt&&500>Xe()-nu?ks(t,0):tu|=o),Pt(t,s)}function $p(t,s){s===0&&((t.mode&1)===0?s=1:(s=No,No<<=1,(No&130023424)===0&&(No=4194304)));var o=Et();t=_n(t,s),t!==null&&(Jr(t,s,o),Pt(t,o))}function Dx(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),$p(t,o)}function Ux(t,s){var o=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(s),$p(t,o)}var Wp;Wp=function(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps||kt.current)Tt=!0;else{if((t.lanes&o)===0&&(s.flags&128)===0)return Tt=!1,Cx(t,s,o);Tt=(t.flags&131072)!==0}else Tt=!1,Ve&&(s.flags&1048576)!==0&&Nf(s,Bo,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;il(t,s),t=s.pendingProps;var d=ir(s,yt.current);dr(s,o),d=Ac(null,s,c,t,d,o);var f=Mc();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,It(c)?(f=!0,Ho(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Sc(s),d.updater=sl,s.stateNode=d,d._reactInternals=s,zc(s,c,t,o),s=Bc(null,s,c,!0,f,o)):(s.tag=0,Ve&&f&&gc(s),bt(null,s,d,o),s=s.child),s;case 16:c=s.elementType;e:{switch(il(t,s),t=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=zx(c),t=Jt(c,t),d){case 0:s=Wc(null,s,c,t,o);break e;case 1:s=mp(null,s,c,t,o);break e;case 11:s=up(null,s,c,t,o);break e;case 14:s=dp(null,s,c,Jt(c.type,t),o);break e}throw Error(n(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Jt(c,d),Wc(t,s,c,d,o);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Jt(c,d),mp(t,s,c,d,o);case 3:e:{if(gp(s),t===null)throw Error(n(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Pf(t,s),Yo(s,c,null,o);var v=s.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=fr(Error(n(423)),s),s=yp(t,s,c,o,d);break e}else if(c!==d){d=fr(Error(n(424)),s),s=yp(t,s,c,o,d);break e}else for(Ft=Bn(s.stateNode.containerInfo.firstChild),Ut=s,Ve=!0,Yt=null,o=Tf(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ar(),c===d){s=Nn(t,s,o);break e}bt(t,s,c,o)}s=s.child}return s;case 5:return Mf(s),t===null&&xc(s),c=s.type,d=s.pendingProps,f=t!==null?t.memoizedProps:null,v=d.children,uc(c,d)?v=null:f!==null&&uc(c,f)&&(s.flags|=32),pp(t,s),bt(t,s,v,o),s.child;case 6:return t===null&&xc(s),null;case 13:return vp(t,s,o);case 4:return kc(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=cr(s,null,c,o):bt(t,s,c,o),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Jt(c,d),up(t,s,c,d,o);case 7:return bt(t,s,s.pendingProps,o),s.child;case 8:return bt(t,s,s.pendingProps.children,o),s.child;case 12:return bt(t,s,s.pendingProps.children,o),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,v=d.value,He(Ko,c._currentValue),c._currentValue=v,f!==null)if(qt(f.value,v)){if(f.children===d.children&&!kt.current){s=Nn(t,s,o);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var w=f.dependencies;if(w!==null){v=f.child;for(var b=w.firstContext;b!==null;){if(b.context===c){if(f.tag===1){b=wn(-1,o&-o),b.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var W=M.pending;W===null?b.next=b:(b.next=W.next,W.next=b),M.pending=b}}f.lanes|=o,b=f.alternate,b!==null&&(b.lanes|=o),Ec(f.return,o,s),w.lanes|=o;break}b=b.next}}else if(f.tag===10)v=f.type===s.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=o,w=v.alternate,w!==null&&(w.lanes|=o),Ec(v,o,s),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===s){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}bt(t,s,d.children,o),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,dr(s,o),d=Wt(d),c=c(d),s.flags|=1,bt(t,s,c,o),s.child;case 14:return c=s.type,d=Jt(c,s.pendingProps),d=Jt(c.type,d),dp(t,s,c,d,o);case 15:return hp(t,s,s.type,s.pendingProps,o);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Jt(c,d),il(t,s),s.tag=1,It(c)?(t=!0,Ho(s)):t=!1,dr(s,o),sp(s,c,d),zc(s,c,d,o),Bc(null,s,c,!0,t,o);case 19:return _p(t,s,o);case 22:return fp(t,s,o)}throw Error(n(156,s.tag))};function Bp(t,s){return Nh(t,s)}function Fx(t,s,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,s,o,c){return new Fx(t,s,o,c)}function uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zx(t){if(typeof t=="function")return uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ye)return 11;if(t===ve)return 14}return 2}function ts(t,s){var o=t.alternate;return o===null?(o=Vt(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function gl(t,s,o,c,d,f){var v=2;if(c=t,typeof t=="function")uu(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case G:return Ts(o.children,d,f,s);case se:v=8,d|=8;break;case ue:return t=Vt(12,o,s,d|2),t.elementType=ue,t.lanes=f,t;case Ce:return t=Vt(13,o,s,d),t.elementType=Ce,t.lanes=f,t;case Ie:return t=Vt(19,o,s,d),t.elementType=Ie,t.lanes=f,t;case fe:return yl(o,d,f,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:v=10;break e;case Ne:v=9;break e;case ye:v=11;break e;case ve:v=14;break e;case Se:v=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return s=Vt(v,o,s,d),s.elementType=t,s.type=c,s.lanes=f,s}function Ts(t,s,o,c){return t=Vt(7,t,c,s),t.lanes=o,t}function yl(t,s,o,c){return t=Vt(22,t,c,s),t.elementType=fe,t.lanes=o,t.stateNode={isHidden:!1},t}function du(t,s,o){return t=Vt(6,t,null,s),t.lanes=o,t}function hu(t,s,o){return s=Vt(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Hx(t,s,o,c,d){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fa(0),this.expirationTimes=Fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function fu(t,s,o,c,d,f,v,w,b){return t=new Hx(t,s,o,w,b),s===1?(s=1,f===!0&&(s|=8)):s=0,f=Vt(3,null,null,s),t.current=f,f.stateNode=t,f.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sc(f),t}function $x(t,s,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:c==null?null:""+c,children:t,containerInfo:s,implementation:o}}function Gp(t){if(!t)return Vn;t=t._reactInternals;e:{if(ys(t)!==t||t.tag!==1)throw Error(n(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(It(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(It(o))return xf(t,o,s)}return s}function Vp(t,s,o,c,d,f,v,w,b){return t=fu(o,c,!0,t,d,f,v,w,b),t.context=Gp(null),o=t.current,c=Et(),d=Zn(o),f=wn(c,d),f.callback=s??null,qn(o,f,d),t.current.lanes=d,Jr(t,d,c),Pt(t,c),t}function vl(t,s,o,c){var d=s.current,f=Et(),v=Zn(d);return o=Gp(o),s.context===null?s.context=o:s.pendingContext=o,s=wn(f,v),s.payload={element:t},c=c===void 0?null:c,c!==null&&(s.callback=c),t=qn(d,s,v),t!==null&&(en(t,d,v,f),qo(t,d,v)),v}function xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function pu(t,s){Kp(t,s),(t=t.alternate)&&Kp(t,s)}function Wx(){return null}var Qp=typeof reportError=="function"?reportError:function(t){console.error(t)};function mu(t){this._internalRoot=t}_l.prototype.render=mu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(n(409));vl(t,s,null,null)},_l.prototype.unmount=mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ss(function(){vl(null,t,null,null)}),s[gn]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var s=jh();t={blockedOn:null,target:t,priority:s};for(var o=0;o<Hn.length&&s!==0&&s<Hn[o].priority;o++);Hn.splice(o,0,t),o===0&&Ah(t)}};function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function Bx(t,s,o,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var M=xl(v);f.call(M)}}var v=Vp(s,c,t,0,null,!1,!1,"",qp);return t._reactRootContainer=v,t[gn]=v.current,di(t.nodeType===8?t.parentNode:t),Ss(),v}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var w=c;c=function(){var M=xl(b);w.call(M)}}var b=fu(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=b,t[gn]=b.current,di(t.nodeType===8?t.parentNode:t),Ss(function(){vl(s,b,o,c)}),b}function Nl(t,s,o,c,d){var f=o._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var w=d;d=function(){var b=xl(v);w.call(b)}}vl(s,v,t,d)}else v=Bx(o,s,t,d,c);return xl(v)}Ih=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var o=Yr(s.pendingLanes);o!==0&&(za(s,o|1),Pt(s,Xe()),(Te&6)===0&&(gr=Xe()+500,Kn()))}break;case 13:Ss(function(){var c=_n(t,1);if(c!==null){var d=Et();en(c,t,1,d)}}),pu(t,1)}},Ha=function(t){if(t.tag===13){var s=_n(t,134217728);if(s!==null){var o=Et();en(s,t,134217728,o)}pu(t,134217728)}},Th=function(t){if(t.tag===13){var s=Zn(t),o=_n(t,s);if(o!==null){var c=Et();en(o,t,s,c)}pu(t,s)}},jh=function(){return Le},Ph=function(t,s){var o=Le;try{return Le=t,s()}finally{Le=o}},Aa=function(t,s,o){switch(s){case"input":if(Ca(t,o),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==t&&c.form===t.form){var d=Fo(c);if(!d)throw Error(n(90));Oe(c),Ca(c,d)}}}break;case"textarea":oh(t,o);break;case"select":s=o.value,s!=null&&Ks(t,!!o.multiple,s,!1)}},mh=lu,gh=Ss;var Gx={usingClientEntryPoint:!1,Events:[pi,sr,Fo,fh,ph,lu]},Ii={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Ii.bundleType,version:Ii.version,rendererPackageName:Ii.rendererPackageName,rendererConfig:Ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_h(t),t===null?null:t.stateNode},findFiberByHostInstance:Ii.findFiberByHostInstance||Wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{_o=bl.inject(Vx),an=bl}catch{}}return Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx,Rt.createPortal=function(t,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(s))throw Error(n(200));return $x(t,s,null,o)},Rt.createRoot=function(t,s){if(!gu(t))throw Error(n(299));var o=!1,c="",d=Qp;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=fu(t,1,!1,null,null,o,!1,c,d),t[gn]=s.current,di(t.nodeType===8?t.parentNode:t),new mu(s)},Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=_h(s),t=t===null?null:t.stateNode,t},Rt.flushSync=function(t){return Ss(t)},Rt.hydrate=function(t,s,o){if(!wl(s))throw Error(n(200));return Nl(null,t,s,!0,o)},Rt.hydrateRoot=function(t,s,o){if(!gu(t))throw Error(n(405));var c=o!=null&&o.hydratedSources||null,d=!1,f="",v=Qp;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),s=Vp(s,null,t,1,o??null,d,!1,f,v),t[gn]=s.current,di(t),c)for(t=0;t<c.length;t++)o=c[t],d=o._getVersion,d=d(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,d]:s.mutableSourceEagerHydrationData.push(o,d);return new _l(s)},Rt.render=function(t,s,o){if(!wl(s))throw Error(n(200));return Nl(null,t,s,!1,o)},Rt.unmountComponentAtNode=function(t){if(!wl(t))throw Error(n(40));return t._reactRootContainer?(Ss(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[gn]=null})}),!0):!1},Rt.unstable_batchedUpdates=lu,Rt.unstable_renderSubtreeIntoContainer=function(t,s,o,c){if(!wl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Nl(t,s,o,!1,c)},Rt.version="18.3.1-next-f1338f8080-20240426",Rt}var sm;function t_(){if(sm)return xu.exports;sm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),xu.exports=e_(),xu.exports}var rm;function n_(){if(rm)return El;rm=1;var r=t_();return El.createRoot=r.createRoot,El.hydrateRoot=r.hydrateRoot,El}var s_=n_(),r_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i_=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o_=(r,e)=>{const n=z.forwardRef(({color:i="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:h,children:m,...p},g)=>z.createElement("svg",{ref:g,...r_,width:l,height:l,stroke:i,strokeWidth:h?Number(u)*24/Number(l):u,className:`lucide lucide-${i_(r)}`,...p},[...e.map(([y,_])=>z.createElement(y,_)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${r}`,n};var De=o_;const Cl=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_g=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),im=De("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Sl=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kl=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Cn=De("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Gi=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Di=De("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),l_=De("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),a_=De("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),om=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),c_=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Nu=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),kr=De("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),aa=De("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),u_=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Du=De("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),d_=De("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),lm=De("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Os=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ji=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),wg=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ft=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Ll=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),cd=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Dl=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ud=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ls=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),h_=De("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var f_=Object.defineProperty,Ul=Object.getOwnPropertySymbols,Ng=Object.prototype.hasOwnProperty,bg=Object.prototype.propertyIsEnumerable,am=(r,e,n)=>e in r?f_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Uu=(r,e)=>{for(var n in e||(e={}))Ng.call(e,n)&&am(r,n,e[n]);if(Ul)for(var n of Ul(e))bg.call(e,n)&&am(r,n,e[n]);return r},Fu=(r,e)=>{var n={};for(var i in r)Ng.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&Ul)for(var i of Ul(r))e.indexOf(i)<0&&bg.call(r,i)&&(n[i]=r[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ds;(r=>{const e=class be{constructor(p,g,y,_){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<be.MIN_VERSION||p>be.MAX_VERSION)throw new RangeError("Version value out of range");if(_<-1||_>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let x=[];for(let I=0;I<this.size;I++)x.push(!1);for(let I=0;I<this.size;I++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(y);if(this.drawCodewords(k),_==-1){let I=1e9;for(let O=0;O<8;O++){this.applyMask(O),this.drawFormatBits(O);const S=this.getPenaltyScore();S<I&&(_=O,I=S),this.applyMask(O)}}l(0<=_&&_<=7),this.mask=_,this.applyMask(_),this.drawFormatBits(_),this.isFunction=[]}static encodeText(p,g){const y=r.QrSegment.makeSegments(p);return be.encodeSegments(y,g)}static encodeBinary(p,g){const y=r.QrSegment.makeBytes(p);return be.encodeSegments([y],g)}static encodeSegments(p,g,y=1,_=40,x=-1,k=!0){if(!(be.MIN_VERSION<=y&&y<=_&&_<=be.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let I,O;for(I=y;;I++){const X=be.getNumDataCodewords(I,g)*8,q=h.getTotalBits(p,I);if(q<=X){O=q;break}if(I>=_)throw new RangeError("Data too long")}for(const X of[be.Ecc.MEDIUM,be.Ecc.QUARTILE,be.Ecc.HIGH])k&&O<=be.getNumDataCodewords(I,X)*8&&(g=X);let S=[];for(const X of p){n(X.mode.modeBits,4,S),n(X.numChars,X.mode.numCharCountBits(I),S);for(const q of X.getData())S.push(q)}l(S.length==O);const ee=be.getNumDataCodewords(I,g)*8;l(S.length<=ee),n(0,Math.min(4,ee-S.length),S),n(0,(8-S.length%8)%8,S),l(S.length%8==0);for(let X=236;S.length<ee;X^=253)n(X,8,S);let U=[];for(;U.length*8<S.length;)U.push(0);return S.forEach((X,q)=>U[q>>>3]|=X<<7-(q&7)),new be(I,g,U,x)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let y=0;y<g;y++)for(let _=0;_<g;_++)y==0&&_==0||y==0&&_==g-1||y==g-1&&_==0||this.drawAlignmentPattern(p[y],p[_]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let y=g;for(let x=0;x<10;x++)y=y<<1^(y>>>9)*1335;const _=(g<<10|y)^21522;l(_>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,i(_,x));this.setFunctionModule(8,7,i(_,6)),this.setFunctionModule(8,8,i(_,7)),this.setFunctionModule(7,8,i(_,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,i(_,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,i(_,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,i(_,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;l(g>>>18==0);for(let y=0;y<18;y++){const _=i(g,y),x=this.size-11+y%3,k=Math.floor(y/3);this.setFunctionModule(x,k,_),this.setFunctionModule(k,x,_)}}drawFinderPattern(p,g){for(let y=-4;y<=4;y++)for(let _=-4;_<=4;_++){const x=Math.max(Math.abs(_),Math.abs(y)),k=p+_,I=g+y;0<=k&&k<this.size&&0<=I&&I<this.size&&this.setFunctionModule(k,I,x!=2&&x!=4)}}drawAlignmentPattern(p,g){for(let y=-2;y<=2;y++)for(let _=-2;_<=2;_++)this.setFunctionModule(p+_,g+y,Math.max(Math.abs(_),Math.abs(y))!=1)}setFunctionModule(p,g,y){this.modules[g][p]=y,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,y=this.errorCorrectionLevel;if(p.length!=be.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const _=be.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],x=be.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],k=Math.floor(be.getNumRawDataModules(g)/8),I=_-k%_,O=Math.floor(k/_);let S=[];const ee=be.reedSolomonComputeDivisor(x);for(let X=0,q=0;X<_;X++){let D=p.slice(q,q+O-x+(X<I?0:1));q+=D.length;const Z=be.reedSolomonComputeRemainder(D,ee);X<I&&D.push(0),S.push(D.concat(Z))}let U=[];for(let X=0;X<S[0].length;X++)S.forEach((q,D)=>{(X!=O-x||D>=I)&&U.push(q[X])});return l(U.length==k),U}drawCodewords(p){if(p.length!=Math.floor(be.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let _=0;_<this.size;_++)for(let x=0;x<2;x++){const k=y-x,O=(y+1&2)==0?this.size-1-_:_;!this.isFunction[O][k]&&g<p.length*8&&(this.modules[O][k]=i(p[g>>>3],7-(g&7)),g++)}}l(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let _;switch(p){case 0:_=(y+g)%2==0;break;case 1:_=g%2==0;break;case 2:_=y%3==0;break;case 3:_=(y+g)%3==0;break;case 4:_=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:_=y*g%2+y*g%3==0;break;case 6:_=(y*g%2+y*g%3)%2==0;break;case 7:_=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&_&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let p=0;for(let x=0;x<this.size;x++){let k=!1,I=0,O=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[x][S]==k?(I++,I==5?p+=be.PENALTY_N1:I>5&&p++):(this.finderPenaltyAddHistory(I,O),k||(p+=this.finderPenaltyCountPatterns(O)*be.PENALTY_N3),k=this.modules[x][S],I=1);p+=this.finderPenaltyTerminateAndCount(k,I,O)*be.PENALTY_N3}for(let x=0;x<this.size;x++){let k=!1,I=0,O=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][x]==k?(I++,I==5?p+=be.PENALTY_N1:I>5&&p++):(this.finderPenaltyAddHistory(I,O),k||(p+=this.finderPenaltyCountPatterns(O)*be.PENALTY_N3),k=this.modules[S][x],I=1);p+=this.finderPenaltyTerminateAndCount(k,I,O)*be.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let k=0;k<this.size-1;k++){const I=this.modules[x][k];I==this.modules[x][k+1]&&I==this.modules[x+1][k]&&I==this.modules[x+1][k+1]&&(p+=be.PENALTY_N2)}let g=0;for(const x of this.modules)g=x.reduce((k,I)=>k+(I?1:0),g);const y=this.size*this.size,_=Math.ceil(Math.abs(g*20-y*10)/y)-1;return l(0<=_&&_<=9),p+=_*be.PENALTY_N4,l(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let _=this.size-7;y.length<p;_-=g)y.splice(1,0,_);return y}}static getNumRawDataModules(p){if(p<be.MIN_VERSION||p>be.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;g-=(25*y-10)*y-55,p>=7&&(g-=36)}return l(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(be.getNumRawDataModules(p)/8)-be.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*be.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let _=0;_<p-1;_++)g.push(0);g.push(1);let y=1;for(let _=0;_<p;_++){for(let x=0;x<g.length;x++)g[x]=be.reedSolomonMultiply(g[x],y),x+1<g.length&&(g[x]^=g[x+1]);y=be.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(p,g){let y=g.map(_=>0);for(const _ of p){const x=_^y.shift();y.push(0),g.forEach((k,I)=>y[I]^=be.reedSolomonMultiply(k,x))}return y}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let _=7;_>=0;_--)y=y<<1^(y>>>7)*285,y^=(g>>>_&1)*p;return l(y>>>8==0),y}finderPenaltyCountPatterns(p){const g=p[1];l(g<=this.size*3);const y=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(y&&p[0]>=g*4&&p[6]>=g?1:0)+(y&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,y){return p&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=e;function n(m,p,g){if(p<0||p>31||m>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)g.push(m>>>y&1)}function i(m,p){return(m>>>p&1)!=0}function l(m){if(!m)throw new Error("Assertion error")}const u=class Ye{constructor(p,g,y){if(this.mode=p,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let g=[];for(const y of p)n(y,8,g);return new Ye(Ye.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!Ye.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<p.length;){const _=Math.min(p.length-y,3);n(parseInt(p.substring(y,y+_),10),_*3+1,g),y+=_}return new Ye(Ye.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!Ye.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=p.length;y+=2){let _=Ye.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;_+=Ye.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),n(_,11,g)}return y<p.length&&n(Ye.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,g),new Ye(Ye.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:Ye.isNumeric(p)?[Ye.makeNumeric(p)]:Ye.isAlphanumeric(p)?[Ye.makeAlphanumeric(p)]:[Ye.makeBytes(Ye.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,g);else if(p<16384)n(2,2,g),n(p,14,g);else if(p<1e6)n(6,3,g),n(p,21,g);else throw new RangeError("ECI assignment value out of range");return new Ye(Ye.Mode.ECI,0,g)}static isNumeric(p){return Ye.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return Ye.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let y=0;for(const _ of p){const x=_.mode.numCharCountBits(g);if(_.numChars>=1<<x)return 1/0;y+=4+x+_.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?g.push(p.charCodeAt(y)):(g.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return g}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=u;r.QrSegment=u})(Ds||(Ds={}));(r=>{(e=>{const n=class{constructor(l,u){this.ordinal=l,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(r.QrCode||(r.QrCode={}))})(Ds||(Ds={}));(r=>{(e=>{const n=class{constructor(l,u){this.modeBits=l,this.numBitsCharCount=u}numCharCountBits(l){return this.numBitsCharCount[Math.floor((l+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(r.QrSegment||(r.QrSegment={}))})(Ds||(Ds={}));var _r=Ds;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var p_={L:_r.QrCode.Ecc.LOW,M:_r.QrCode.Ecc.MEDIUM,Q:_r.QrCode.Ecc.QUARTILE,H:_r.QrCode.Ecc.HIGH},Eg=128,Cg="L",Sg="#FFFFFF",kg="#000000",Ig=!1,Tg=1,m_=4,g_=0,y_=.1;function jg(r,e=0){const n=[];return r.forEach(function(i,l){let u=null;i.forEach(function(h,m){if(!h&&u!==null){n.push(`M${u+e} ${l+e}h${m-u}v1H${u+e}z`),u=null;return}if(m===i.length-1){if(!h)return;u===null?n.push(`M${m+e},${l+e} h1v1H${m+e}z`):n.push(`M${u+e},${l+e} h${m+1-u}v1H${u+e}z`);return}h&&u===null&&(u=m)})}),n.join("")}function Pg(r,e){return r.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((l,u)=>u<e.x||u>=e.x+e.w?l:!1))}function v_(r,e,n,i){if(i==null)return null;const l=r.length+n*2,u=Math.floor(e*y_),h=l/e,m=(i.width||u)*h,p=(i.height||u)*h,g=i.x==null?r.length/2-m/2:i.x*h,y=i.y==null?r.length/2-p/2:i.y*h,_=i.opacity==null?1:i.opacity;let x=null;if(i.excavate){let I=Math.floor(g),O=Math.floor(y),S=Math.ceil(m+g-I),ee=Math.ceil(p+y-O);x={x:I,y:O,w:S,h:ee}}const k=i.crossOrigin;return{x:g,y,h:p,w:m,excavation:x,opacity:_,crossOrigin:k}}function x_(r,e){return e!=null?Math.max(Math.floor(e),0):r?m_:g_}function Rg({value:r,level:e,minVersion:n,includeMargin:i,marginSize:l,imageSettings:u,size:h,boostLevel:m}){let p=rt.useMemo(()=>{const I=(Array.isArray(r)?r:[r]).reduce((O,S)=>(O.push(..._r.QrSegment.makeSegments(S)),O),[]);return _r.QrCode.encodeSegments(I,p_[e],n,void 0,void 0,m)},[r,e,n,m]);const{cells:g,margin:y,numCells:_,calculatedImageSettings:x}=rt.useMemo(()=>{let k=p.getModules();const I=x_(i,l),O=k.length+I*2,S=v_(k,h,I,u);return{cells:k,margin:I,numCells:O,calculatedImageSettings:S}},[p,h,u,i,l]);return{qrcode:p,margin:y,cells:g,numCells:_,calculatedImageSettings:x}}var __=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),w_=rt.forwardRef(function(e,n){const i=e,{value:l,size:u=Eg,level:h=Cg,bgColor:m=Sg,fgColor:p=kg,includeMargin:g=Ig,minVersion:y=Tg,boostLevel:_,marginSize:x,imageSettings:k}=i,O=Fu(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=O,ee=Fu(O,["style"]),U=k?.src,X=rt.useRef(null),q=rt.useRef(null),D=rt.useCallback(Ie=>{X.current=Ie,typeof n=="function"?n(Ie):n&&(n.current=Ie)},[n]),[Z,G]=rt.useState(!1),{margin:se,cells:ue,numCells:Me,calculatedImageSettings:Ne}=Rg({value:l,level:h,minVersion:y,boostLevel:_,includeMargin:g,marginSize:x,imageSettings:k,size:u});rt.useEffect(()=>{if(X.current!=null){const Ie=X.current,ve=Ie.getContext("2d");if(!ve)return;let Se=ue;const fe=q.current,V=Ne!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;V&&Ne.excavation!=null&&(Se=Pg(ue,Ne.excavation));const te=window.devicePixelRatio||1;Ie.height=Ie.width=u*te;const K=u/Me*te;ve.scale(K,K),ve.fillStyle=m,ve.fillRect(0,0,Me,Me),ve.fillStyle=p,__?ve.fill(new Path2D(jg(Se,se))):ue.forEach(function(C,P){C.forEach(function(Y,ie){Y&&ve.fillRect(ie+se,P+se,1,1)})}),Ne&&(ve.globalAlpha=Ne.opacity),V&&ve.drawImage(fe,Ne.x+se,Ne.y+se,Ne.w,Ne.h)}}),rt.useEffect(()=>{G(!1)},[U]);const ye=Uu({height:u,width:u},S);let Ce=null;return U!=null&&(Ce=rt.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{G(!0)},ref:q,crossOrigin:Ne?.crossOrigin})),rt.createElement(rt.Fragment,null,rt.createElement("canvas",Uu({style:ye,height:u,width:u,ref:D,role:"img"},ee)),Ce)});w_.displayName="QRCodeCanvas";var so=rt.forwardRef(function(e,n){const i=e,{value:l,size:u=Eg,level:h=Cg,bgColor:m=Sg,fgColor:p=kg,includeMargin:g=Ig,minVersion:y=Tg,boostLevel:_,title:x,marginSize:k,imageSettings:I}=i,O=Fu(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:ee,numCells:U,calculatedImageSettings:X}=Rg({value:l,level:h,minVersion:y,boostLevel:_,includeMargin:g,marginSize:k,imageSettings:I,size:u});let q=ee,D=null;I!=null&&X!=null&&(X.excavation!=null&&(q=Pg(ee,X.excavation)),D=rt.createElement("image",{href:I.src,height:X.h,width:X.w,x:X.x+S,y:X.y+S,preserveAspectRatio:"none",opacity:X.opacity,crossOrigin:X.crossOrigin}));const Z=jg(q,S);return rt.createElement("svg",Uu({height:u,width:u,viewBox:`0 0 ${U} ${U}`,ref:n,role:"img"},O),!!x&&rt.createElement("title",null,x),rt.createElement("path",{fill:m,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),rt.createElement("path",{fill:p,d:Z,shapeRendering:"crispEdges"}),D)});so.displayName="QRCodeSVG";const N_=()=>{};var cm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J=function(r,e){if(!r)throw Or(e)},Or=function(r){return new Error("Firebase Database ("+Ag.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},b_=function(r){const e=[];let n=0,i=0;for(;n<r.length;){const l=r[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],h=r[n++],m=r[n++],p=((l&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<r.length;l+=3){const u=r[l],h=l+1<r.length,m=h?r[l+1]:0,p=l+2<r.length,g=p?r[l+2]:0,y=u>>2,_=(u&3)<<4|m>>4;let x=(m&15)<<2|g>>6,k=g&63;p||(k=64,h||(x=64)),i.push(n[y],n[_],n[x],n[k])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Mg(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):b_(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],m=l<r.length?n[r.charAt(l)]:0;++l;const g=l<r.length?n[r.charAt(l)]:64;++l;const _=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||m==null||g==null||_==null)throw new E_;const x=u<<2|m>>4;if(i.push(x),g!==64){const k=m<<4&240|g>>2;if(i.push(k),_!==64){const I=g<<6&192|_;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class E_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Og=function(r){const e=Mg(r);return dd.encodeByteArray(e,!0)},Fl=function(r){return Og(r).replace(/\./g,"")},zl=function(r){try{return dd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(r){return Lg(void 0,r)}function Lg(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!S_(n)||(r[n]=Lg(r[n],e[n]));return r}function S_(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=()=>k_().__FIREBASE_DEFAULTS__,T_=()=>{if(typeof process>"u"||typeof cm>"u")return;const r=cm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},j_=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&zl(r[1]);return e&&JSON.parse(e)},hd=()=>{try{return N_()||I_()||T_()||j_()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Dg=r=>hd()?.emulatorHosts?.[r],P_=r=>{const e=Dg(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ug=()=>hd()?.config,Fg=r=>hd()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zg(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Fl(JSON.stringify(n)),Fl(JSON.stringify(h)),""].join(".")}const Ui={};function A_(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ui))Ui[e]?r.emulator.push(e):r.prod.push(e);return r}function M_(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let um=!1;function Hg(r,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||Ui[r]===e||Ui[r]||um)return;Ui[r]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",u=A_().prod.length>0;function h(){const x=document.getElementById(i);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,k){x.setAttribute("width","24"),x.setAttribute("id",k),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{um=!0,h()},x}function y(x,k){x.setAttribute("id",k),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function _(){const x=M_(i),k=n("text"),I=document.getElementById(k)||document.createElement("span"),O=n("learnmore"),S=document.getElementById(O)||document.createElement("a"),ee=n("preprendIcon"),U=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const X=x.element;m(X),y(S,O);const q=g();p(U,ee),X.append(U,I,S,q),document.body.appendChild(X)}u?(I.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function O_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L_(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $g(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D_(){const r=St();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function U_(){return Ag.NODE_ADMIN===!0}function F_(){try{return typeof indexedDB=="object"}catch{return!1}}function z_(){return new Promise((r,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="FirebaseError";class ms extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=H_,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?$_(u,i):"Error",m=`${this.serviceName}: ${h} (${l}).`;return new ms(l,m,i)}}function $_(r,e){return r.replace(W_,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const W_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(r){return JSON.parse(r)}function it(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=function(r){let e={},n={},i={},l="";try{const u=r.split(".");e=Vi(zl(u[0])||""),n=Vi(zl(u[1])||""),l=u[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:l}},B_=function(r){const e=Wg(r),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},G_=function(r){const e=Wg(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ir(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function zu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Hl(r,e,n){const i={};for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=e.call(n,r[l],l,r));return i}function Us(r,e){if(r===e)return!0;const n=Object.keys(r),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=r[l],h=e[l];if(dm(u)&&dm(h)){if(!Us(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function dm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(r){const e=[];for(const[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Oi(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Li(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)i[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const x=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(x<<1|x>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],h=this.chain_[2],m=this.chain_[3],p=this.chain_[4],g,y;for(let _=0;_<80;_++){_<40?_<20?(g=m^u&(h^m),y=1518500249):(g=u^h^m,y=1859775393):_<60?(g=u&h|m&(u|h),y=2400959708):(g=u^h^m,y=3395469782);const x=(l<<5|l>>>27)+g+p+y+i[_]&4294967295;p=m,m=h,h=(u<<30|u>>>2)&4294967295,u=l,l=x}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let l=0;const u=this.buf_;let h=this.inbuf_;for(;l<n;){if(h===0)for(;l<=i;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(u[h]=e.charCodeAt(l),++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}else for(;l<n;)if(u[h]=e[l],++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}this.inbuf_=h,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[i]=this.chain_[l]>>u&255,++i;return e}}function K_(r,e){const n=new Q_(r,e);return n.subscribe.bind(n)}class Q_{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");q_(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=bu),l.error===void 0&&(l.error=bu),l.complete===void 0&&(l.complete=bu);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q_(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function bu(){}function pd(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=function(r){const e=[];let n=0;for(let i=0;i<r.length;i++){let l=r.charCodeAt(i);if(l>=55296&&l<=56319){const u=l-55296;i++,J(i<r.length,"Surrogate pair missing trail surrogate.");const h=r.charCodeAt(i)-56320;l=65536+(u<<10)+h}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},ua=function(r){let e=0;for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(r){return r&&r._delegate?r._delegate:r}class Fs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ca;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z_(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:X_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X_(r){return r===js?void 0:r}function Z_(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const tw={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},nw=Fe.INFO,sw={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},rw=(r,e,...n)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),l=sw[e];if(l)console[l](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class md{constructor(e){this.name=e,this._logLevel=nw,this._logHandler=rw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const iw=(r,e)=>e.some(n=>r instanceof n);let hm,fm;function ow(){return hm||(hm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lw(){return fm||(fm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bg=new WeakMap,Hu=new WeakMap,Gg=new WeakMap,Eu=new WeakMap,gd=new WeakMap;function aw(r){const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(ls(r.result)),l()},h=()=>{i(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Bg.set(n,r)}).catch(()=>{}),gd.set(e,r),e}function cw(r){if(Hu.has(r))return;const e=new Promise((n,i)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Hu.set(r,e)}let $u={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Hu.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Gg.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function uw(r){$u=r($u)}function dw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=r.call(Cu(this),e,...n);return Gg.set(i,e.sort?e.sort():[e]),ls(i)}:lw().includes(r)?function(...e){return r.apply(Cu(this),e),ls(Bg.get(this))}:function(...e){return ls(r.apply(Cu(this),e))}}function hw(r){return typeof r=="function"?dw(r):(r instanceof IDBTransaction&&cw(r),iw(r,ow())?new Proxy(r,$u):r)}function ls(r){if(r instanceof IDBRequest)return aw(r);if(Eu.has(r))return Eu.get(r);const e=hw(r);return e!==r&&(Eu.set(r,e),gd.set(e,r)),e}const Cu=r=>gd.get(r);function fw(r,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(r,e),m=ls(h);return i&&h.addEventListener("upgradeneeded",p=>{i(ls(h.result),p.oldVersion,p.newVersion,ls(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const pw=["get","getKey","getAll","getAllKeys","count"],mw=["put","add","delete","clear"],Su=new Map;function pm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Su.get(e))return Su.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=mw.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||pw.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,l?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),l&&p.done]))[0]};return Su.set(e,u),u}uw(r=>({...r,get:(e,n,i)=>pm(e,n)||r.get(e,n,i),has:(e,n)=>!!pm(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yw(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function yw(r){return r.getComponent()?.type==="VERSION"}const Wu="@firebase/app",mm="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new md("@firebase/app"),vw="@firebase/app-compat",xw="@firebase/analytics-compat",_w="@firebase/analytics",ww="@firebase/app-check-compat",Nw="@firebase/app-check",bw="@firebase/auth",Ew="@firebase/auth-compat",Cw="@firebase/database",Sw="@firebase/data-connect",kw="@firebase/database-compat",Iw="@firebase/functions",Tw="@firebase/functions-compat",jw="@firebase/installations",Pw="@firebase/installations-compat",Rw="@firebase/messaging",Aw="@firebase/messaging-compat",Mw="@firebase/performance",Ow="@firebase/performance-compat",Lw="@firebase/remote-config",Dw="@firebase/remote-config-compat",Uw="@firebase/storage",Fw="@firebase/storage-compat",zw="@firebase/firestore",Hw="@firebase/ai",$w="@firebase/firestore-compat",Ww="firebase",Bw="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="[DEFAULT]",Gw={[Wu]:"fire-core",[vw]:"fire-core-compat",[_w]:"fire-analytics",[xw]:"fire-analytics-compat",[Nw]:"fire-app-check",[ww]:"fire-app-check-compat",[bw]:"fire-auth",[Ew]:"fire-auth-compat",[Cw]:"fire-rtdb",[Sw]:"fire-data-connect",[kw]:"fire-rtdb-compat",[Iw]:"fire-fn",[Tw]:"fire-fn-compat",[jw]:"fire-iid",[Pw]:"fire-iid-compat",[Rw]:"fire-fcm",[Aw]:"fire-fcm-compat",[Mw]:"fire-perf",[Ow]:"fire-perf-compat",[Lw]:"fire-rc",[Dw]:"fire-rc-compat",[Uw]:"fire-gcs",[Fw]:"fire-gcs-compat",[zw]:"fire-fst",[$w]:"fire-fst-compat",[Hw]:"fire-vertex","fire-js":"fire-js",[Ww]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Map,Vw=new Map,Gu=new Map;function gm(r,e){try{r.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Tr(r){const e=r.name;if(Gu.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;Gu.set(e,r);for(const n of $l.values())gm(n,r);for(const n of Vw.values())gm(n,r);return!0}function yd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function At(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new ro("app","Firebase",Kw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=Bw;function Vg(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const i={name:Bu,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw as.create("bad-app-name",{appName:String(l)});if(n||(n=Ug()),!n)throw as.create("no-options");const u=$l.get(l);if(u){if(Us(n,u.options)&&Us(i,u.config))return u;throw as.create("duplicate-app",{appName:l})}const h=new ew(l);for(const p of Gu.values())h.addComponent(p);const m=new Qw(n,i,h);return $l.set(l,m),m}function Kg(r=Bu){const e=$l.get(r);if(!e&&r===Bu&&Ug())return Vg();if(!e)throw as.create("no-app",{appName:r});return e}function cs(r,e,n){let i=Gw[r]??r;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(h.join(" "));return}Tr(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebase-heartbeat-database",Yw=1,Ki="firebase-heartbeat-store";let ku=null;function Qg(){return ku||(ku=fw(qw,Yw,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ki)}catch(n){console.warn(n)}}}}).catch(r=>{throw as.create("idb-open",{originalErrorMessage:r.message})})),ku}async function Jw(r){try{const n=(await Qg()).transaction(Ki),i=await n.objectStore(Ki).get(qg(r));return await n.done,i}catch(e){if(e instanceof ms)jn.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}}async function ym(r,e){try{const i=(await Qg()).transaction(Ki,"readwrite");await i.objectStore(Ki).put(e,qg(r)),await i.done}catch(n){if(n instanceof ms)jn.warn(n.message);else{const i=as.create("idb-set",{originalErrorMessage:n?.message});jn.warn(i.message)}}}function qg(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=1024,Zw=30;class e1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vm();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Zw){const l=s1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vm(),{heartbeatsToSend:n,unsentEntries:i}=t1(this._heartbeatsCache.heartbeats),l=Fl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return jn.warn(e),""}}}function vm(){return new Date().toISOString().substring(0,10)}function t1(r,e=Xw){const n=[];let i=r.slice();for(const l of r){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),xm(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),xm(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class n1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F_()?z_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ym(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ym(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xm(r){return Fl(JSON.stringify({version:2,heartbeats:r})).length}function s1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(r){Tr(new Fs("platform-logger",e=>new gw(e),"PRIVATE")),Tr(new Fs("heartbeat",e=>new e1(e),"PRIVATE")),cs(Wu,mm,r),cs(Wu,mm,"esm2020"),cs("fire-js","")}r1("");var i1="firebase",o1="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(i1,o1,"app");var _m={};const wm="@firebase/database",Nm="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg="";function l1(r){Yg=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Vi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new a1(e)}}catch{}return new c1},Rs=Jg("localStorage"),u1=Jg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new md("@firebase/database"),d1=(function(){let r=1;return function(){return r++}})(),Xg=function(r){const e=Y_(r),n=new V_;n.update(e);const i=n.digest();return dd.encodeByteArray(i)},io=function(...r){let e="";for(let n=0;n<r.length;n++){const i=r[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=io.apply(null,i):typeof i=="object"?e+=it(i):e+=i,e+=" "}return e};let Fi=null,bm=!0;const h1=function(r,e){J(!0,"Can't turn on custom loggers persistently."),Nr.logLevel=Fe.VERBOSE,Fi=Nr.log.bind(Nr)},wt=function(...r){if(bm===!0&&(bm=!1,Fi===null&&u1.get("logging_enabled")===!0&&h1()),Fi){const e=io.apply(null,r);Fi(e)}},oo=function(r){return function(...e){wt(r,...e)}},Vu=function(...r){const e="FIREBASE INTERNAL ERROR: "+io(...r);Nr.error(e)},Pn=function(...r){const e=`FIREBASE FATAL ERROR: ${io(...r)}`;throw Nr.error(e),new Error(e)},Ot=function(...r){const e="FIREBASE WARNING: "+io(...r);Nr.warn(e)},f1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zg=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},p1=function(r){if(document.readyState==="complete")r();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jr="[MIN_NAME]",zs="[MAX_NAME]",Fr=function(r,e){if(r===e)return 0;if(r===jr||e===zs)return-1;if(e===jr||r===zs)return 1;{const n=Em(r),i=Em(e);return n!==null?i!==null?n-i===0?r.length-e.length:n-i:-1:i!==null?1:r<e?-1:1}},m1=function(r,e){return r===e?0:r<e?-1:1},Pi=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+it(e))},vd=function(r){if(typeof r!="object"||r===null)return it(r);const e=[];for(const i in r)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=it(e[i]),n+=":",n+=vd(r[e[i]]);return n+="}",n},e0=function(r,e){const n=r.length;if(n<=e)return[r];const i=[];for(let l=0;l<n;l+=e)l+e>n?i.push(r.substring(l,n)):i.push(r.substring(l,l+e));return i};function Lt(r,e){for(const n in r)r.hasOwnProperty(n)&&e(n,r[n])}const t0=function(r){J(!Zg(r),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let l,u,h,m,p;r===0?(u=0,h=0,l=1/r===-1/0?1:0):(l=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(m=Math.min(Math.floor(Math.log(r)/Math.LN2),i),u=m+i,h=Math.round(r*Math.pow(2,n-m)-Math.pow(2,n))):(u=0,h=Math.round(r/Math.pow(2,1-i-n))));const g=[];for(p=n;p;p-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(p=e;p;p-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(l?1:0),g.reverse();const y=g.join("");let _="";for(p=0;p<64;p+=8){let x=parseInt(y.substr(p,8),2).toString(16);x.length===1&&(x="0"+x),_=_+x}return _.toLowerCase()},g1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},y1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function v1(r,e){let n="Unknown Error";r==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?n="Client doesn't have permission to access the desired data.":r==="unavailable"&&(n="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+n);return i.code=r.toUpperCase(),i}const x1=new RegExp("^-?(0*)\\d{1,10}$"),_1=-2147483648,w1=2147483647,Em=function(r){if(x1.test(r)){const e=Number(r);if(e>=_1&&e<=w1)return e}return null},zr=function(r){try{r()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ot("Exception was thrown by user callback.",n),e},Math.floor(0))}},N1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zi=function(r,e){const n=setTimeout(r,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,At(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(e)}}class Pl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Pl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="5",n0="v",s0="s",r0="r",i0="f",o0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,l0="ls",a0="p",Ku="ac",c0="websocket",u0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,i,l,u=!1,h="",m=!1,p=!1,g=null){this.secure=n,this.namespace=i,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function C1(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function h0(r,e,n){J(typeof e=="string","typeof type must == string"),J(typeof n=="object","typeof params must == object");let i;if(e===c0)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===u0)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);C1(r)&&(n.ns=r.namespace);const l=[];return Lt(n,(u,h)=>{l.push(u+"="+h)}),i+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.counters_={}}incrementCounter(e,n=1){Mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return C_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu={},Tu={};function _d(r){const e=r.toString();return Iu[e]||(Iu[e]=new S1),Iu[e]}function k1(r,e){const n=r.toString();return Tu[n]||(Tu[n]=e()),Tu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<i.length;++l)i[l]&&zr(()=>{this.onMessage_(i[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="start",T1="close",j1="pLPCommand",P1="pRTLPCB",f0="id",p0="pw",m0="ser",R1="cb",A1="seg",M1="ts",O1="d",L1="dframe",g0=1870,y0=30,D1=g0-y0,U1=25e3,F1=3e4;class wr{constructor(e,n,i,l,u,h,m){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=l,this.authToken=u,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oo(e),this.stats_=_d(n),this.urlFn=p=>(this.appCheckToken&&(p[Ku]=this.appCheckToken),h0(n,u0,p))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new I1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(F1)),p1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wd((...u)=>{const[h,m,p,g,y]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===Cm)this.id=m,this.password=p;else if(h===T1)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...u)=>{const[h,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const i={};i[Cm]="t",i[m0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[R1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[n0]=xd,this.transportSessionId&&(i[s0]=this.transportSessionId),this.lastSessionId&&(i[l0]=this.lastSessionId),this.applicationId&&(i[a0]=this.applicationId),this.appCheckToken&&(i[Ku]=this.appCheckToken),typeof location<"u"&&location.hostname&&o0.test(location.hostname)&&(i[r0]=i0);const l=this.urlFn(i);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wr.forceAllow_=!0}static forceDisallow(){wr.forceDisallow_=!0}static isAvailable(){return wr.forceAllow_?!0:!wr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g1()&&!y1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Og(n),l=e0(i,D1);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[L1]="t",i[f0]=e,i[p0]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=it(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class wd{constructor(e,n,i,l){this.onDisconnect=i,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=d1(),window[j1+this.uniqueCallbackIdentifier]=e,window[P1+this.uniqueCallbackIdentifier]=n,this.myIFrame=wd.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){wt("frame writing exception"),m.stack&&wt(m.stack),wt(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||wt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[f0]=this.myID,e[p0]=this.myPW,e[m0]=this.currentSerial;let n=this.urlFn(e),i="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+y0+i.length<=g0;){const h=this.pendingSegs.shift();i=i+"&"+A1+l+"="+h.seg+"&"+M1+l+"="+h.ts+"&"+O1+l+"="+h.d,l++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(i,Math.floor(U1)),u=()=>{clearTimeout(l),i()};this.addTag(e,u)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const l=i.readyState;(!l||l==="loaded"||l==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{wt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=16384,H1=45e3;let Wl=null;typeof MozWebSocket<"u"?Wl=MozWebSocket:typeof WebSocket<"u"&&(Wl=WebSocket);class tn{constructor(e,n,i,l,u,h,m){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oo(this.connId),this.stats_=_d(n),this.connURL=tn.connectionURL_(n,h,m,l,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,l,u){const h={};return h[n0]=xd,typeof location<"u"&&location.hostname&&o0.test(location.hostname)&&(h[r0]=i0),n&&(h[s0]=n),i&&(h[l0]=i),l&&(h[Ku]=l),u&&(h[a0]=u),h0(e,c0,h)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rs.set("previous_websocket_failure",!0);try{let i;U_(),this.mySock=new Wl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){tn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Wl!==null&&!tn.forceDisallow_}static previouslyFailed(){return Rs.isInMemoryStorage||Rs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Vi(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(J(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=it(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=e0(n,z1);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(H1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tn.responsesRequiredToBeHealthy=2;tn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{static get ALL_TRANSPORTS(){return[wr,tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=tn&&tn.isAvailable();let i=n&&!tn.previouslyFailed();if(e.webSocketOnly&&(n||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[tn];else{const l=this.transports_=[];for(const u of Qi.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);Qi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=6e4,W1=5e3,B1=10*1024,G1=100*1024,ju="t",Sm="d",V1="s",km="r",K1="e",Im="o",Tm="a",jm="n",Pm="p",Q1="h";class q1{constructor(e,n,i,l,u,h,m,p,g,y){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oo("c:"+this.id+":"),this.transportManager_=new Qi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=zi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>G1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>B1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ju in e){const n=e[ju];n===Tm?this.upgradeIfSecondaryHealthy_():n===km?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Im&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Pi("t",e),i=Pi("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Pm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Tm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Pi("t",e),i=Pi("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Pi(ju,e);if(Sm in e){const i=e[Sm];if(n===Q1){const l={...i};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===jm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===V1?this.onConnectionShutdown_(i):n===km?this.onReset_(i):n===K1?Vu("Server Error: "+i):n===Im?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xd!==i&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),zi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(W1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Pm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{put(e,n,i,l){}merge(e,n,i,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.allowedEvents_=e,this.listeners_={},J(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let l=0;l<i.length;l++)i[l].callback.apply(i[l].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const l=this.getInitialEvent(e);l&&n.apply(i,l)}off(e,n,i){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!i||i===l[u].context)){l.splice(u,1);return}}validateEventType_(e){J(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends x0{static getInstance(){return new Bl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return J(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=32,Am=768;class ze{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[i]=this.pieces_[l],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new ze("")}function _e(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function hs(r){return r.pieces_.length-r.pieceNum_}function $e(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new ze(r.pieces_,e)}function _0(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function Y1(r){let e="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[n])));return e||"/"}function w0(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function N0(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)e.push(r.pieces_[n]);return new ze(e,0)}function ot(r,e){const n=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)n.push(r.pieces_[i]);if(e instanceof ze)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let l=0;l<i.length;l++)i[l].length>0&&n.push(i[l])}return new ze(n,0)}function Ee(r){return r.pieceNum_>=r.pieces_.length}function Ct(r,e){const n=_e(r),i=_e(e);if(n===null)return e;if(n===i)return Ct($e(r),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function Nd(r,e){if(hs(r)!==hs(e))return!1;for(let n=r.pieceNum_,i=e.pieceNum_;n<=r.pieces_.length;n++,i++)if(r.pieces_[n]!==e.pieces_[i])return!1;return!0}function nn(r,e){let n=r.pieceNum_,i=e.pieceNum_;if(hs(r)>hs(e))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class J1{constructor(e,n){this.errorPrefix_=n,this.parts_=w0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ua(this.parts_[i]);b0(this)}}function X1(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=ua(e),b0(r)}function Z1(r){const e=r.parts_.pop();r.byteLength_-=ua(e),r.parts_.length>0&&(r.byteLength_-=1)}function b0(r){if(r.byteLength_>Am)throw new Error(r.errorPrefix_+"has a key path longer than "+Am+" bytes ("+r.byteLength_+").");if(r.parts_.length>Rm)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rm+") or object contains a cycle "+Ps(r))}function Ps(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends x0{static getInstance(){return new bd}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return J(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=1e3,eN=300*1e3,Mm=30*1e3,tN=1.3,nN=3e4,sN="server_kill",Om=3;class Tn extends v0{constructor(e,n,i,l,u,h,m,p){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=Tn.nextPersistentConnectionId_++,this.log_=oo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ri,this.maxReconnectDelay_=eN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const l=++this.requestNumber_,u={r:l,a:e,b:n};this.log_(it(u)),J(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const n=new ca,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?n.resolve(m):n.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(e,n,i,l){this.initConnection_();const u=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),J(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:n,query:e,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+i+" for "+l);const u={p:i},h="q";e.tag&&(u.q=n._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(h,u,m=>{const p=m.d,g=m.s;Tn.warnOnListenWarnings_(p,n),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(i,l),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mn(e,"w")){const i=Ir(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||G_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Mm)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=B_(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,l=>{const u=l.s,h=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,n)}sendUnlisten_(e,n,i,l){this.log_("Unlisten on "+e+" for "+n);const u={p:e},h="n";l&&(u.q=i,u.t=l),this.sendRequest(h,u)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,l){const u={p:n,d:i};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(e,n,i,l){this.putInternal("p",e,n,i,l)}merge(e,n,i,l){this.putInternal("m",e,n,i,l)}putInternal(e,n,i,l,u){this.initConnection_();const h={p:n,d:i};u!==void 0&&(h.h=u),this.outstandingPuts_.push({action:e,request:h,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const u=i.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+it(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vu("Unrecognized action received from server: "+it(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){J(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nN&&(this.reconnectDelay_=Ri),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Tn.nextConnectionId_++,u=this.lastSessionId;let h=!1,m=null;const p=function(){m?m.close():(h=!0,i())},g=function(_){J(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(_)};this.realtime_={close:p,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,x]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);h?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=x&&x.token,m=new q1(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,k=>{Ot(k+" ("+this.repoInfo_.toString()+")"),this.interrupt(sN)},u))}catch(_){this.log_("Failed to get token: "+_),h||(this.repoInfo_.nodeAdmin&&Ot(_),p())}}}interrupt(e){wt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){wt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zu(this.interruptReasons_)&&(this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(u=>vd(u)).join("$"):i="default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const i=new ze(e).toString();let l;if(this.listens.has(i)){const u=this.listens.get(i);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,n){wt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Om&&(this.reconnectDelay_=Mm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){wt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Om&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Yg.replace(/\./g,"-")]=1,fd()?e["framework.cordova"]=1:$g()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bl.getInstance().currentlyOnline();return zu(this.interruptReasons_)&&e}}Tn.nextPersistentConnectionId_=0;Tn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new we(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new we(jr,e),l=new we(jr,n);return this.compare(i,l)!==0}minPost(){return we.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il;class E0 extends da{static get __EMPTY_NODE(){return Il}static set __EMPTY_NODE(e){Il=e}compare(e,n){return Fr(e.name,n.name)}isDefinedOn(e){throw Or("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(zs,Il)}makePost(e,n){return J(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,Il)}toString(){return".key"}}const br=new E0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,i,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=n?i(e.key,n):1,l&&(h*=-1),h<0)this.isReverse_?e=e.left:e=e.right;else if(h===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dt{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??dt.RED,this.left=l??Mt.EMPTY_NODE,this.right=u??Mt.EMPTY_NODE}copy(e,n,i,l,u){return new dt(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,l;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dt.RED=!0;dt.BLACK=!1;class rN{copy(e,n,i,l,u){return this}insert(e,n,i){return new dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Mt{constructor(e,n=Mt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Mt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dt.BLACK,null,null))}remove(e){return new Mt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,l=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return l?l.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(l=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Tl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Tl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Tl(this.root_,null,this.comparator_,!0,e)}}Mt.EMPTY_NODE=new rN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(r,e){return Fr(r.name,e.name)}function Ed(r,e){return Fr(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu;function oN(r){Qu=r}const C0=function(r){return typeof r=="number"?"number:"+t0(r):"string:"+r},S0=function(r){if(r.isLeafNode()){const e=r.val();J(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mn(e,".sv"),"Priority must be a string or number.")}else J(r===Qu||r.isEmpty(),"priority of unexpected type.");J(r===Qu||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm;class ut{static set __childrenNodeConstructor(e){Lm=e}static get __childrenNodeConstructor(){return Lm}constructor(e,n=ut.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,J(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),S0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ut(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ee(e)?this:_e(e)===".priority"?this.priorityNode_:ut.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ut.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=_e(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(J(i!==".priority"||hs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ut.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+C0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=t0(this.value_):e+=this.value_,this.lazyHash_=Xg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ut.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ut.__childrenNodeConstructor?-1:(J(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,l=ut.VALUE_TYPE_ORDER.indexOf(n),u=ut.VALUE_TYPE_ORDER.indexOf(i);return J(l>=0,"Unknown leaf type: "+n),J(u>=0,"Unknown leaf type: "+i),l===u?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ut.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k0,I0;function lN(r){k0=r}function aN(r){I0=r}class cN extends da{compare(e,n){const i=e.node.getPriority(),l=n.node.getPriority(),u=i.compareTo(l);return u===0?Fr(e.name,n.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(zs,new ut("[PRIORITY-POST]",I0))}makePost(e,n){const i=k0(e);return new we(n,new ut("[PRIORITY-POST]",i))}toString(){return".priority"}}const Je=new cN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=Math.log(2);class dN{constructor(e){const n=u=>parseInt(Math.log(u)/uN,10),i=u=>parseInt(Array(u+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=i(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gl=function(r,e,n,i){r.sort(e);const l=function(p,g){const y=g-p;let _,x;if(y===0)return null;if(y===1)return _=r[p],x=n?n(_):_,new dt(x,_.node,dt.BLACK,null,null);{const k=parseInt(y/2,10)+p,I=l(p,k),O=l(k+1,g);return _=r[k],x=n?n(_):_,new dt(x,_.node,dt.BLACK,I,O)}},u=function(p){let g=null,y=null,_=r.length;const x=function(I,O){const S=_-I,ee=_;_-=I;const U=l(S+1,ee),X=r[S],q=n?n(X):X;k(new dt(q,X.node,O,null,U))},k=function(I){g?(g.left=I,g=I):(y=I,g=I)};for(let I=0;I<p.count;++I){const O=p.nextBitIsOne(),S=Math.pow(2,p.count-(I+1));O?x(S,dt.BLACK):(x(S,dt.BLACK),x(S,dt.RED))}return y},h=new dN(r.length),m=u(h);return new Mt(i||e,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;const vr={};class Sn{static get Default(){return J(vr&&Je,"ChildrenNode.ts has not been loaded"),Pu=Pu||new Sn({".priority":vr},{".priority":Je}),Pu}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ir(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Mt?n:null}hasIndex(e){return Mn(this.indexSet_,e.toString())}addIndex(e,n){J(e!==br,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let l=!1;const u=n.getIterator(we.Wrap);let h=u.getNext();for(;h;)l=l||e.isDefinedOn(h.node),i.push(h),h=u.getNext();let m;l?m=Gl(i,e.getCompare()):m=vr;const p=e.toString(),g={...this.indexSet_};g[p]=e;const y={...this.indexes_};return y[p]=m,new Sn(y,g)}addToIndexes(e,n){const i=Hl(this.indexes_,(l,u)=>{const h=Ir(this.indexSet_,u);if(J(h,"Missing index implementation for "+u),l===vr)if(h.isDefinedOn(e.node)){const m=[],p=n.getIterator(we.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&m.push(g),g=p.getNext();return m.push(e),Gl(m,h.getCompare())}else return vr;else{const m=n.get(e.name);let p=l;return m&&(p=p.remove(new we(e.name,m))),p.insert(e,e.node)}});return new Sn(i,this.indexSet_)}removeFromIndexes(e,n){const i=Hl(this.indexes_,l=>{if(l===vr)return l;{const u=n.get(e.name);return u?l.remove(new we(e.name,u)):l}});return new Sn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai;class me{static get EMPTY_NODE(){return Ai||(Ai=new me(new Mt(Ed),null,Sn.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&S0(this.priorityNode_),this.children_.isEmpty()&&J(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ai}updatePriority(e){return this.children_.isEmpty()?this:new me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ai:n}}getChild(e){const n=_e(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(J(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new we(e,n);let l,u;n.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,n),u=this.indexMap_.addToIndexes(i,this.children_));const h=l.isEmpty()?Ai:this.priorityNode_;return new me(l,h,u)}}updateChild(e,n){const i=_e(e);if(i===null)return n;{J(_e(e)!==".priority"||hs(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild($e(e),n);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,l=0,u=!0;if(this.forEachChild(Je,(h,m)=>{n[h]=m.val(e),i++,u&&me.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):u=!1}),!e&&u&&l<2*i){const h=[];for(const m in n)h[m]=n[m];return h}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+C0(this.getPriority().val())+":"),this.forEachChild(Je,(n,i)=>{const l=i.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":Xg(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const l=this.resolveIndex_(i);if(l){const u=l.getPredecessorKey(new we(e,n));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new we(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new we(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,we.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,we.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lo?-1:0}withIndex(e){if(e===br||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new me(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===br||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Je),l=n.getIterator(Je);let u=i.getNext(),h=l.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=l.getNext()}return u===null&&h===null}else return!1;else return!1}}resolveIndex_(e){return e===br?null:this.indexMap_.get(e.toString())}}me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hN extends me{constructor(){super(new Mt(Ed),me.EMPTY_NODE,Sn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}}const lo=new hN;Object.defineProperties(we,{MIN:{value:new we(jr,me.EMPTY_NODE)},MAX:{value:new we(zs,lo)}});E0.__EMPTY_NODE=me.EMPTY_NODE;ut.__childrenNodeConstructor=me;oN(lo);aN(lo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=!0;function ht(r,e=null){if(r===null)return me.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),J(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new ut(n,ht(e))}if(!(r instanceof Array)&&fN){const n=[];let i=!1;if(Lt(r,(h,m)=>{if(h.substring(0,1)!=="."){const p=ht(m);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),n.push(new we(h,p)))}}),n.length===0)return me.EMPTY_NODE;const u=Gl(n,iN,h=>h.name,Ed);if(i){const h=Gl(n,Je.getCompare());return new me(u,ht(e),new Sn({".priority":h},{".priority":Je}))}else return new me(u,ht(e),Sn.Default)}else{let n=me.EMPTY_NODE;return Lt(r,(i,l)=>{if(Mn(r,i)&&i.substring(0,1)!=="."){const u=ht(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(i,u))}}),n.updatePriority(ht(e))}}lN(ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN extends da{constructor(e){super(),this.indexPath_=e,J(!Ee(e)&&_e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),l=this.extractChild(n.node),u=i.compareTo(l);return u===0?Fr(e.name,n.name):u}makePost(e,n){const i=ht(e),l=me.EMPTY_NODE.updateChild(this.indexPath_,i);return new we(n,l)}maxPost(){const e=me.EMPTY_NODE.updateChild(this.indexPath_,lo);return new we(zs,e)}toString(){return w0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN extends da{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Fr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){const i=ht(e);return new we(n,i)}toString(){return".value"}}const gN=new mN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r){return{type:"value",snapshotNode:r}}function Pr(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function qi(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Yi(r,e,n){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:n}}function yN(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.index_=e}updateChild(e,n,i,l,u,h){J(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(n);return m.getChild(l).equals(i.getChild(l))&&m.isEmpty()===i.isEmpty()||(h!=null&&(i.isEmpty()?e.hasChild(n)?h.trackChildChange(qi(n,m)):J(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(Pr(n,i)):h.trackChildChange(Yi(n,i,m))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Je,(l,u)=>{n.hasChild(l)||i.trackChildChange(qi(l,u))}),n.isLeafNode()||n.forEachChild(Je,(l,u)=>{if(e.hasChild(l)){const h=e.getImmediateChild(l);h.equals(u)||i.trackChildChange(Yi(l,u,h))}else i.trackChildChange(Pr(l,u))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?me.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.indexedFilter_=new Cd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ji.getStartPost_(e),this.endPost_=Ji.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,l,u,h){return this.matches(new we(n,i))||(i=me.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,l,u,h)}updateFullNode(e,n,i){n.isLeafNode()&&(n=me.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(me.EMPTY_NODE);const u=this;return n.forEachChild(Je,(h,m)=>{u.matches(new we(h,m))||(l=l.updateImmediateChild(h,me.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ji(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,l,u,h){return this.rangedFilter_.matches(new we(n,i))||(i=me.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,l,u,h):this.fullLimitUpdateChild_(e,n,i,u,h)}updateFullNode(e,n,i){let l;if(n.isLeafNode()||n.isEmpty())l=me.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=me.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;u.hasNext()&&h<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))l=l.updateImmediateChild(m.name,m.node),h++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(me.EMPTY_NODE);let u;this.reverse_?u=l.getReverseIterator(this.index_):u=l.getIterator(this.index_);let h=0;for(;u.hasNext();){const m=u.getNext();h<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?h++:l=l.updateImmediateChild(m.name,me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,l,u){let h;if(this.reverse_){const _=this.index_.getCompare();h=(x,k)=>_(k,x)}else h=this.index_.getCompare();const m=e;J(m.numChildren()===this.limit_,"");const p=new we(n,i),g=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),y=this.rangedFilter_.matches(p);if(m.hasChild(n)){const _=m.getImmediateChild(n);let x=l.getChildAfterChild(this.index_,g,this.reverse_);for(;x!=null&&(x.name===n||m.hasChild(x.name));)x=l.getChildAfterChild(this.index_,x,this.reverse_);const k=x==null?1:h(x,p);if(y&&!i.isEmpty()&&k>=0)return u?.trackChildChange(Yi(n,i,_)),m.updateImmediateChild(n,i);{u?.trackChildChange(qi(n,_));const O=m.updateImmediateChild(n,me.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(u?.trackChildChange(Pr(x.name,x.node)),O.updateImmediateChild(x.name,x.node)):O}}else return i.isEmpty()?e:y&&h(g,p)>=0?(u!=null&&(u.trackChildChange(qi(g.name,g.node)),u.trackChildChange(Pr(n,i))),m.updateImmediateChild(n,i).updateImmediateChild(g.name,me.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return J(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return J(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jr}hasEnd(){return this.endSet_}getIndexEndValue(){return J(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return J(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return J(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Je}copy(){const e=new Sd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xN(r){return r.loadsAllData()?new Cd(r.getIndex()):r.hasLimit()?new vN(r):new Ji(r)}function Dm(r){const e={};if(r.isDefault())return e;let n;if(r.index_===Je?n="$priority":r.index_===gN?n="$value":r.index_===br?n="$key":(J(r.index_ instanceof pN,"Unrecognized index type!"),n=r.index_.toString()),e.orderBy=it(n),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=it(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+it(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=it(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+it(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Um(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),e.vf=n}return r.index_!==Je&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends v0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(J(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=l,this.log_=oo("p:rest:"),this.listens_={}}listen(e,n,i,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const h=Vl.getListenId_(e,i),m={};this.listens_[h]=m;const p=Dm(e._queryParams);this.restRequest_(u+".json",p,(g,y)=>{let _=y;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(u,_,!1,i),Ir(this.listens_,h)===m){let x;g?g===401?x="permission_denied":x="rest_error:"+g:x="ok",l(x,null)}})}unlisten(e,n){const i=Vl.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Dm(e._queryParams),i=e._path.toString(),l=new ca;return this.restRequest_(i+".json",n,(u,h)=>{let m=h;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(i,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Dr(n);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(i&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=Vi(m.responseText)}catch{Ot("Failed to parse JSON response for "+h+": "+m.responseText)}i(null,p)}else m.status!==401&&m.status!==404&&Ot("Got unsuccessful REST response for "+h+" Status: "+m.status),i(m.status);i=null}},m.open("GET",h,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(){return{value:null,children:new Map}}function j0(r,e,n){if(Ee(e))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,n);else{const i=_e(e);r.children.has(i)||r.children.set(i,Kl());const l=r.children.get(i);e=$e(e),j0(l,e,n)}}function qu(r,e,n){r.value!==null?n(e,r.value):wN(r,(i,l)=>{const u=new ze(e.toString()+"/"+i);qu(l,u,n)})}function wN(r,e){r.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Lt(this.last_,(i,l)=>{n[i]=n[i]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=10*1e3,bN=30*1e3,EN=300*1e3;class CN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new NN(e);const i=Fm+(bN-Fm)*Math.random();zi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Lt(e,(l,u)=>{u>0&&Mn(this.statsToReport_,l)&&(n[l]=u,i=!0)}),i&&this.server_.reportStats(n),zi(this.reportStats_.bind(this),Math.floor(Math.random()*2*EN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sn||(sn={}));function P0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Id(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=sn.ACK_USER_WRITE,this.source=P0()}operationForChild(e){if(Ee(this.path)){if(this.affectedTree.value!=null)return J(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ze(e));return new Ql(Pe(),n,this.revert)}}else return J(_e(this.path)===e,"operationForChild called for unrelated child."),new Ql($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.source=e,this.path=n,this.type=sn.LISTEN_COMPLETE}operationForChild(e){return Ee(this.path)?new Xi(this.source,Pe()):new Xi(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=sn.OVERWRITE}operationForChild(e){return Ee(this.path)?new Hs(this.source,Pe(),this.snap.getImmediateChild(e)):new Hs(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=sn.MERGE}operationForChild(e){if(Ee(this.path)){const n=this.children.subtree(new ze(e));return n.isEmpty()?null:n.value?new Hs(this.source,Pe(),n.value):new Zi(this.source,Pe(),n)}else return J(_e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zi(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=_e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kN(r,e,n,i){const l=[],u=[];return e.forEach(h=>{h.type==="child_changed"&&r.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&u.push(yN(h.childName,h.snapshotNode))}),Mi(r,l,"child_removed",e,i,n),Mi(r,l,"child_added",e,i,n),Mi(r,l,"child_moved",u,i,n),Mi(r,l,"child_changed",e,i,n),Mi(r,l,"value",e,i,n),l}function Mi(r,e,n,i,l,u){const h=i.filter(m=>m.type===n);h.sort((m,p)=>TN(r,m,p)),h.forEach(m=>{const p=IN(r,m,u);l.forEach(g=>{g.respondsTo(m.type)&&e.push(g.createEvent(p,r.query_))})})}function IN(r,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function TN(r,e,n){if(e.childName==null||n.childName==null)throw Or("Should only compare child_ events.");const i=new we(e.childName,e.snapshotNode),l=new we(n.childName,n.snapshotNode);return r.index_.compare(i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r,e){return{eventCache:r,serverCache:e}}function Hi(r,e,n,i){return ha(new fs(e,n,i),r.serverCache)}function R0(r,e,n,i){return ha(r.eventCache,new fs(e,n,i))}function ql(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function $s(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const jN=()=>(Ru||(Ru=new Mt(m1)),Ru);class Ge{static fromObject(e){let n=new Ge(null);return Lt(e,(i,l)=>{n=n.set(new ze(i),l)}),n}constructor(e,n=jN()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(Ee(e))return null;{const i=_e(e),l=this.children.get(i);if(l!==null){const u=l.findRootMostMatchingPathAndValue($e(e),n);return u!=null?{path:ot(new ze(i),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ee(e))return this;{const n=_e(e),i=this.children.get(n);return i!==null?i.subtree($e(e)):new Ge(null)}}set(e,n){if(Ee(e))return new Ge(n,this.children);{const i=_e(e),u=(this.children.get(i)||new Ge(null)).set($e(e),n),h=this.children.insert(i,u);return new Ge(this.value,h)}}remove(e){if(Ee(e))return this.children.isEmpty()?new Ge(null):new Ge(null,this.children);{const n=_e(e),i=this.children.get(n);if(i){const l=i.remove($e(e));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new Ge(null):new Ge(this.value,u)}else return this}}get(e){if(Ee(e))return this.value;{const n=_e(e),i=this.children.get(n);return i?i.get($e(e)):null}}setTree(e,n){if(Ee(e))return n;{const i=_e(e),u=(this.children.get(i)||new Ge(null)).setTree($e(e),n);let h;return u.isEmpty()?h=this.children.remove(i):h=this.children.insert(i,u),new Ge(this.value,h)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((l,u)=>{i[l]=u.fold_(ot(e,l),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,i){const l=this.value?i(n,this.value):!1;if(l)return l;if(Ee(e))return null;{const u=_e(e),h=this.children.get(u);return h?h.findOnPath_($e(e),ot(n,u),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,i){if(Ee(e))return this;{this.value&&i(n,this.value);const l=_e(e),u=this.children.get(l);return u?u.foreachOnPath_($e(e),ot(n,l),i):new Ge(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((i,l)=>{l.foreach_(ot(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.writeTree_=e}static empty(){return new on(new Ge(null))}}function $i(r,e,n){if(Ee(e))return new on(new Ge(n));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const l=i.path;let u=i.value;const h=Ct(l,e);return u=u.updateChild(h,n),new on(r.writeTree_.set(l,u))}else{const l=new Ge(n),u=r.writeTree_.setTree(e,l);return new on(u)}}}function zm(r,e,n){let i=r;return Lt(n,(l,u)=>{i=$i(i,ot(e,l),u)}),i}function Hm(r,e){if(Ee(e))return on.empty();{const n=r.writeTree_.setTree(e,new Ge(null));return new on(n)}}function Yu(r,e){return Bs(r,e)!=null}function Bs(r,e){const n=r.writeTree_.findRootMostValueAndPath(e);return n!=null?r.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function $m(r){const e=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Je,(i,l)=>{e.push(new we(i,l))}):r.writeTree_.children.inorderTraversal((i,l)=>{l.value!=null&&e.push(new we(i,l.value))}),e}function us(r,e){if(Ee(e))return r;{const n=Bs(r,e);return n!=null?new on(new Ge(n)):new on(r.writeTree_.subtree(e))}}function Ju(r){return r.writeTree_.isEmpty()}function Rr(r,e){return A0(Pe(),r.writeTree_,e)}function A0(r,e,n){if(e.value!=null)return n.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(J(u.value!==null,"Priority writes must always be leaf nodes"),i=u.value):n=A0(ot(r,l),u,n)}),!n.getChild(r).isEmpty()&&i!==null&&(n=n.updateChild(ot(r,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(r,e){return D0(e,r)}function PN(r,e,n,i,l){J(i>r.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),r.allWrites.push({path:e,snap:n,writeId:i,visible:l}),l&&(r.visibleWrites=$i(r.visibleWrites,e,n)),r.lastWriteId=i}function RN(r,e){for(let n=0;n<r.allWrites.length;n++){const i=r.allWrites[n];if(i.writeId===e)return i}return null}function AN(r,e){const n=r.allWrites.findIndex(m=>m.writeId===e);J(n>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[n];r.allWrites.splice(n,1);let l=i.visible,u=!1,h=r.allWrites.length-1;for(;l&&h>=0;){const m=r.allWrites[h];m.visible&&(h>=n&&MN(m,i.path)?l=!1:nn(i.path,m.path)&&(u=!0)),h--}if(l){if(u)return ON(r),!0;if(i.snap)r.visibleWrites=Hm(r.visibleWrites,i.path);else{const m=i.children;Lt(m,p=>{r.visibleWrites=Hm(r.visibleWrites,ot(i.path,p))})}return!0}else return!1}function MN(r,e){if(r.snap)return nn(r.path,e);for(const n in r.children)if(r.children.hasOwnProperty(n)&&nn(ot(r.path,n),e))return!0;return!1}function ON(r){r.visibleWrites=M0(r.allWrites,LN,Pe()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function LN(r){return r.visible}function M0(r,e,n){let i=on.empty();for(let l=0;l<r.length;++l){const u=r[l];if(e(u)){const h=u.path;let m;if(u.snap)nn(n,h)?(m=Ct(n,h),i=$i(i,m,u.snap)):nn(h,n)&&(m=Ct(h,n),i=$i(i,Pe(),u.snap.getChild(m)));else if(u.children){if(nn(n,h))m=Ct(n,h),i=zm(i,m,u.children);else if(nn(h,n))if(m=Ct(h,n),Ee(m))i=zm(i,Pe(),u.children);else{const p=Ir(u.children,_e(m));if(p){const g=p.getChild($e(m));i=$i(i,Pe(),g)}}}else throw Or("WriteRecord should have .snap or .children")}}return i}function O0(r,e,n,i,l){if(!i&&!l){const u=Bs(r.visibleWrites,e);if(u!=null)return u;{const h=us(r.visibleWrites,e);if(Ju(h))return n;if(n==null&&!Yu(h,Pe()))return null;{const m=n||me.EMPTY_NODE;return Rr(h,m)}}}else{const u=us(r.visibleWrites,e);if(!l&&Ju(u))return n;if(!l&&n==null&&!Yu(u,Pe()))return null;{const h=function(g){return(g.visible||l)&&(!i||!~i.indexOf(g.writeId))&&(nn(g.path,e)||nn(e,g.path))},m=M0(r.allWrites,h,e),p=n||me.EMPTY_NODE;return Rr(m,p)}}}function DN(r,e,n){let i=me.EMPTY_NODE;const l=Bs(r.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Je,(u,h)=>{i=i.updateImmediateChild(u,h)}),i;if(n){const u=us(r.visibleWrites,e);return n.forEachChild(Je,(h,m)=>{const p=Rr(us(u,new ze(h)),m);i=i.updateImmediateChild(h,p)}),$m(u).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}else{const u=us(r.visibleWrites,e);return $m(u).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}}function UN(r,e,n,i,l){J(i||l,"Either existingEventSnap or existingServerSnap must exist");const u=ot(e,n);if(Yu(r.visibleWrites,u))return null;{const h=us(r.visibleWrites,u);return Ju(h)?l.getChild(n):Rr(h,l.getChild(n))}}function FN(r,e,n,i){const l=ot(e,n),u=Bs(r.visibleWrites,l);if(u!=null)return u;if(i.isCompleteForChild(n)){const h=us(r.visibleWrites,l);return Rr(h,i.getNode().getImmediateChild(n))}else return null}function zN(r,e){return Bs(r.visibleWrites,e)}function HN(r,e,n,i,l,u,h){let m;const p=us(r.visibleWrites,e),g=Bs(p,Pe());if(g!=null)m=g;else if(n!=null)m=Rr(p,n);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const y=[],_=h.getCompare(),x=u?m.getReverseIteratorFrom(i,h):m.getIteratorFrom(i,h);let k=x.getNext();for(;k&&y.length<l;)_(k,i)!==0&&y.push(k),k=x.getNext();return y}else return[]}function $N(){return{visibleWrites:on.empty(),allWrites:[],lastWriteId:-1}}function Yl(r,e,n,i){return O0(r.writeTree,r.treePath,e,n,i)}function Td(r,e){return DN(r.writeTree,r.treePath,e)}function Wm(r,e,n,i){return UN(r.writeTree,r.treePath,e,n,i)}function Jl(r,e){return zN(r.writeTree,ot(r.treePath,e))}function WN(r,e,n,i,l,u){return HN(r.writeTree,r.treePath,e,n,i,l,u)}function jd(r,e,n){return FN(r.writeTree,r.treePath,e,n)}function L0(r,e){return D0(ot(r.treePath,e),r.writeTree)}function D0(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;J(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),J(i!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(i);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(i,Yi(i,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(i,qi(i,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(i,Pr(i,e.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(i,Yi(i,e.snapshotNode,l.oldSnap));else throw Or("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const U0=new GN;class Pd{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new fs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jd(this.writes_,e,i)}}getChildAfterChild(e,n,i){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$s(this.viewCache_),u=WN(this.writes_,l,n,1,i,e);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(r){return{filter:r}}function KN(r,e){J(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),J(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function QN(r,e,n,i,l){const u=new BN;let h,m;if(n.type===sn.OVERWRITE){const g=n;g.source.fromUser?h=Xu(r,e,g.path,g.snap,i,l,u):(J(g.source.fromServer,"Unknown source."),m=g.source.tagged||e.serverCache.isFiltered()&&!Ee(g.path),h=Xl(r,e,g.path,g.snap,i,l,m,u))}else if(n.type===sn.MERGE){const g=n;g.source.fromUser?h=YN(r,e,g.path,g.children,i,l,u):(J(g.source.fromServer,"Unknown source."),m=g.source.tagged||e.serverCache.isFiltered(),h=Zu(r,e,g.path,g.children,i,l,m,u))}else if(n.type===sn.ACK_USER_WRITE){const g=n;g.revert?h=ZN(r,e,g.path,i,l,u):h=JN(r,e,g.path,g.affectedTree,i,l,u)}else if(n.type===sn.LISTEN_COMPLETE)h=XN(r,e,n.path,i,u);else throw Or("Unknown operation type: "+n.type);const p=u.getChanges();return qN(e,h,p),{viewCache:h,changes:p}}function qN(r,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const l=i.getNode().isLeafNode()||i.getNode().isEmpty(),u=ql(r);(n.length>0||!r.eventCache.isFullyInitialized()||l&&!i.getNode().equals(u)||!i.getNode().getPriority().equals(u.getPriority()))&&n.push(T0(ql(e)))}}function F0(r,e,n,i,l,u){const h=e.eventCache;if(Jl(i,n)!=null)return e;{let m,p;if(Ee(n))if(J(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=$s(e),y=g instanceof me?g:me.EMPTY_NODE,_=Td(i,y);m=r.filter.updateFullNode(e.eventCache.getNode(),_,u)}else{const g=Yl(i,$s(e));m=r.filter.updateFullNode(e.eventCache.getNode(),g,u)}else{const g=_e(n);if(g===".priority"){J(hs(n)===1,"Can't have a priority with additional path components");const y=h.getNode();p=e.serverCache.getNode();const _=Wm(i,n,y,p);_!=null?m=r.filter.updatePriority(y,_):m=h.getNode()}else{const y=$e(n);let _;if(h.isCompleteForChild(g)){p=e.serverCache.getNode();const x=Wm(i,n,h.getNode(),p);x!=null?_=h.getNode().getImmediateChild(g).updateChild(y,x):_=h.getNode().getImmediateChild(g)}else _=jd(i,g,e.serverCache);_!=null?m=r.filter.updateChild(h.getNode(),g,_,y,l,u):m=h.getNode()}}return Hi(e,m,h.isFullyInitialized()||Ee(n),r.filter.filtersNodes())}}function Xl(r,e,n,i,l,u,h,m){const p=e.serverCache;let g;const y=h?r.filter:r.filter.getIndexedFilter();if(Ee(n))g=y.updateFullNode(p.getNode(),i,null);else if(y.filtersNodes()&&!p.isFiltered()){const k=p.getNode().updateChild(n,i);g=y.updateFullNode(p.getNode(),k,null)}else{const k=_e(n);if(!p.isCompleteForPath(n)&&hs(n)>1)return e;const I=$e(n),S=p.getNode().getImmediateChild(k).updateChild(I,i);k===".priority"?g=y.updatePriority(p.getNode(),S):g=y.updateChild(p.getNode(),k,S,I,U0,null)}const _=R0(e,g,p.isFullyInitialized()||Ee(n),y.filtersNodes()),x=new Pd(l,_,u);return F0(r,_,n,l,x,m)}function Xu(r,e,n,i,l,u,h){const m=e.eventCache;let p,g;const y=new Pd(l,e,u);if(Ee(n))g=r.filter.updateFullNode(e.eventCache.getNode(),i,h),p=Hi(e,g,!0,r.filter.filtersNodes());else{const _=_e(n);if(_===".priority")g=r.filter.updatePriority(e.eventCache.getNode(),i),p=Hi(e,g,m.isFullyInitialized(),m.isFiltered());else{const x=$e(n),k=m.getNode().getImmediateChild(_);let I;if(Ee(x))I=i;else{const O=y.getCompleteChild(_);O!=null?_0(x)===".priority"&&O.getChild(N0(x)).isEmpty()?I=O:I=O.updateChild(x,i):I=me.EMPTY_NODE}if(k.equals(I))p=e;else{const O=r.filter.updateChild(m.getNode(),_,I,x,y,h);p=Hi(e,O,m.isFullyInitialized(),r.filter.filtersNodes())}}}return p}function Bm(r,e){return r.eventCache.isCompleteForChild(e)}function YN(r,e,n,i,l,u,h){let m=e;return i.foreach((p,g)=>{const y=ot(n,p);Bm(e,_e(y))&&(m=Xu(r,m,y,g,l,u,h))}),i.foreach((p,g)=>{const y=ot(n,p);Bm(e,_e(y))||(m=Xu(r,m,y,g,l,u,h))}),m}function Gm(r,e,n){return n.foreach((i,l)=>{e=e.updateChild(i,l)}),e}function Zu(r,e,n,i,l,u,h,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;Ee(n)?g=i:g=new Ge(null).setTree(n,i);const y=e.serverCache.getNode();return g.children.inorderTraversal((_,x)=>{if(y.hasChild(_)){const k=e.serverCache.getNode().getImmediateChild(_),I=Gm(r,k,x);p=Xl(r,p,new ze(_),I,l,u,h,m)}}),g.children.inorderTraversal((_,x)=>{const k=!e.serverCache.isCompleteForChild(_)&&x.value===null;if(!y.hasChild(_)&&!k){const I=e.serverCache.getNode().getImmediateChild(_),O=Gm(r,I,x);p=Xl(r,p,new ze(_),O,l,u,h,m)}}),p}function JN(r,e,n,i,l,u,h){if(Jl(l,n)!=null)return e;const m=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if(Ee(n)&&p.isFullyInitialized()||p.isCompleteForPath(n))return Xl(r,e,n,p.getNode().getChild(n),l,u,m,h);if(Ee(n)){let g=new Ge(null);return p.getNode().forEachChild(br,(y,_)=>{g=g.set(new ze(y),_)}),Zu(r,e,n,g,l,u,m,h)}else return e}else{let g=new Ge(null);return i.foreach((y,_)=>{const x=ot(n,y);p.isCompleteForPath(x)&&(g=g.set(y,p.getNode().getChild(x)))}),Zu(r,e,n,g,l,u,m,h)}}function XN(r,e,n,i,l){const u=e.serverCache,h=R0(e,u.getNode(),u.isFullyInitialized()||Ee(n),u.isFiltered());return F0(r,h,n,i,U0,l)}function ZN(r,e,n,i,l,u){let h;if(Jl(i,n)!=null)return e;{const m=new Pd(i,e,l),p=e.eventCache.getNode();let g;if(Ee(n)||_e(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Yl(i,$s(e));else{const _=e.serverCache.getNode();J(_ instanceof me,"serverChildren would be complete if leaf node"),y=Td(i,_)}y=y,g=r.filter.updateFullNode(p,y,u)}else{const y=_e(n);let _=jd(i,y,e.serverCache);_==null&&e.serverCache.isCompleteForChild(y)&&(_=p.getImmediateChild(y)),_!=null?g=r.filter.updateChild(p,y,_,$e(n),m,u):e.eventCache.getNode().hasChild(y)?g=r.filter.updateChild(p,y,me.EMPTY_NODE,$e(n),m,u):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=Yl(i,$s(e)),h.isLeafNode()&&(g=r.filter.updateFullNode(g,h,u)))}return h=e.serverCache.isFullyInitialized()||Jl(i,Pe())!=null,Hi(e,g,h,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,l=new Cd(i.getIndex()),u=xN(i);this.processor_=VN(u);const h=n.serverCache,m=n.eventCache,p=l.updateFullNode(me.EMPTY_NODE,h.getNode(),null),g=u.updateFullNode(me.EMPTY_NODE,m.getNode(),null),y=new fs(p,h.isFullyInitialized(),l.filtersNodes()),_=new fs(g,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=ha(_,y),this.eventGenerator_=new SN(this.query_)}get query(){return this.query_}}function tb(r){return r.viewCache_.serverCache.getNode()}function nb(r){return ql(r.viewCache_)}function sb(r,e){const n=$s(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!Ee(e)&&!n.getImmediateChild(_e(e)).isEmpty())?n.getChild(e):null}function Vm(r){return r.eventRegistrations_.length===0}function rb(r,e){r.eventRegistrations_.push(e)}function Km(r,e,n){const i=[];if(n){J(e==null,"A cancel should cancel all event registrations.");const l=r.query._path;r.eventRegistrations_.forEach(u=>{const h=u.createCancelEvent(n,l);h&&i.push(h)})}if(e){let l=[];for(let u=0;u<r.eventRegistrations_.length;++u){const h=r.eventRegistrations_[u];if(!h.matches(e))l.push(h);else if(e.hasAnyCallback()){l=l.concat(r.eventRegistrations_.slice(u+1));break}}r.eventRegistrations_=l}else r.eventRegistrations_=[];return i}function Qm(r,e,n,i){e.type===sn.MERGE&&e.source.queryId!==null&&(J($s(r.viewCache_),"We should always have a full cache before handling merges"),J(ql(r.viewCache_),"Missing event cache, even though we have a server cache"));const l=r.viewCache_,u=QN(r.processor_,l,e,n,i);return KN(r.processor_,u.viewCache),J(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=u.viewCache,z0(r,u.changes,u.viewCache.eventCache.getNode(),null)}function ib(r,e){const n=r.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Je,(u,h)=>{i.push(Pr(u,h))}),n.isFullyInitialized()&&i.push(T0(n.getNode())),z0(r,i,n.getNode(),e)}function z0(r,e,n,i){const l=i?[i]:r.eventRegistrations_;return kN(r.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl;class H0{constructor(){this.views=new Map}}function ob(r){J(!Zl,"__referenceConstructor has already been defined"),Zl=r}function lb(){return J(Zl,"Reference.ts has not been loaded"),Zl}function ab(r){return r.views.size===0}function Rd(r,e,n,i){const l=e.source.queryId;if(l!==null){const u=r.views.get(l);return J(u!=null,"SyncTree gave us an op for an invalid query."),Qm(u,e,n,i)}else{let u=[];for(const h of r.views.values())u=u.concat(Qm(h,e,n,i));return u}}function $0(r,e,n,i,l){const u=e._queryIdentifier,h=r.views.get(u);if(!h){let m=Yl(n,l?i:null),p=!1;m?p=!0:i instanceof me?(m=Td(n,i),p=!1):(m=me.EMPTY_NODE,p=!1);const g=ha(new fs(m,p,!1),new fs(i,l,!1));return new eb(e,g)}return h}function cb(r,e,n,i,l,u){const h=$0(r,e,i,l,u);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,h),rb(h,n),ib(h,n)}function ub(r,e,n,i){const l=e._queryIdentifier,u=[];let h=[];const m=ps(r);if(l==="default")for(const[p,g]of r.views.entries())h=h.concat(Km(g,n,i)),Vm(g)&&(r.views.delete(p),g.query._queryParams.loadsAllData()||u.push(g.query));else{const p=r.views.get(l);p&&(h=h.concat(Km(p,n,i)),Vm(p)&&(r.views.delete(l),p.query._queryParams.loadsAllData()||u.push(p.query)))}return m&&!ps(r)&&u.push(new(lb())(e._repo,e._path)),{removed:u,events:h}}function W0(r){const e=[];for(const n of r.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ds(r,e){let n=null;for(const i of r.views.values())n=n||sb(i,e);return n}function B0(r,e){if(e._queryParams.loadsAllData())return pa(r);{const i=e._queryIdentifier;return r.views.get(i)}}function G0(r,e){return B0(r,e)!=null}function ps(r){return pa(r)!=null}function pa(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea;function db(r){J(!ea,"__referenceConstructor has already been defined"),ea=r}function hb(){return J(ea,"Reference.ts has not been loaded"),ea}let fb=1;class qm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ge(null),this.pendingWriteTree_=$N(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V0(r,e,n,i,l){return PN(r.pendingWriteTree_,e,n,i,l),l?co(r,new Hs(P0(),e,n)):[]}function As(r,e,n=!1){const i=RN(r.pendingWriteTree_,e);if(AN(r.pendingWriteTree_,e)){let u=new Ge(null);return i.snap!=null?u=u.set(Pe(),!0):Lt(i.children,h=>{u=u.set(new ze(h),!0)}),co(r,new Ql(i.path,u,n))}else return[]}function ao(r,e,n){return co(r,new Hs(kd(),e,n))}function pb(r,e,n){const i=Ge.fromObject(n);return co(r,new Zi(kd(),e,i))}function mb(r,e){return co(r,new Xi(kd(),e))}function gb(r,e,n){const i=Md(r,n);if(i){const l=Od(i),u=l.path,h=l.queryId,m=Ct(u,e),p=new Xi(Id(h),m);return Ld(r,u,p)}else return[]}function ta(r,e,n,i,l=!1){const u=e._path,h=r.syncPointTree_.get(u);let m=[];if(h&&(e._queryIdentifier==="default"||G0(h,e))){const p=ub(h,e,n,i);ab(h)&&(r.syncPointTree_=r.syncPointTree_.remove(u));const g=p.removed;if(m=p.events,!l){const y=g.findIndex(x=>x._queryParams.loadsAllData())!==-1,_=r.syncPointTree_.findOnPath(u,(x,k)=>ps(k));if(y&&!_){const x=r.syncPointTree_.subtree(u);if(!x.isEmpty()){const k=xb(x);for(let I=0;I<k.length;++I){const O=k[I],S=O.query,ee=Y0(r,O);r.listenProvider_.startListening(Wi(S),eo(r,S),ee.hashFn,ee.onComplete)}}}!_&&g.length>0&&!i&&(y?r.listenProvider_.stopListening(Wi(e),null):g.forEach(x=>{const k=r.queryToTagMap.get(ma(x));r.listenProvider_.stopListening(Wi(x),k)}))}_b(r,g)}return m}function K0(r,e,n,i){const l=Md(r,i);if(l!=null){const u=Od(l),h=u.path,m=u.queryId,p=Ct(h,e),g=new Hs(Id(m),p,n);return Ld(r,h,g)}else return[]}function yb(r,e,n,i){const l=Md(r,i);if(l){const u=Od(l),h=u.path,m=u.queryId,p=Ct(h,e),g=Ge.fromObject(n),y=new Zi(Id(m),p,g);return Ld(r,h,y)}else return[]}function ed(r,e,n,i=!1){const l=e._path;let u=null,h=!1;r.syncPointTree_.foreachOnPath(l,(x,k)=>{const I=Ct(x,l);u=u||ds(k,I),h=h||ps(k)});let m=r.syncPointTree_.get(l);m?(h=h||ps(m),u=u||ds(m,Pe())):(m=new H0,r.syncPointTree_=r.syncPointTree_.set(l,m));let p;u!=null?p=!0:(p=!1,u=me.EMPTY_NODE,r.syncPointTree_.subtree(l).foreachChild((k,I)=>{const O=ds(I,Pe());O&&(u=u.updateImmediateChild(k,O))}));const g=G0(m,e);if(!g&&!e._queryParams.loadsAllData()){const x=ma(e);J(!r.queryToTagMap.has(x),"View does not exist, but we have a tag");const k=wb();r.queryToTagMap.set(x,k),r.tagToQueryMap.set(k,x)}const y=fa(r.pendingWriteTree_,l);let _=cb(m,e,n,y,u,p);if(!g&&!h&&!i){const x=B0(m,e);_=_.concat(Nb(r,e,x))}return _}function Ad(r,e,n){const l=r.pendingWriteTree_,u=r.syncPointTree_.findOnPath(e,(h,m)=>{const p=Ct(h,e),g=ds(m,p);if(g)return g});return O0(l,e,u,n,!0)}function vb(r,e){const n=e._path;let i=null;r.syncPointTree_.foreachOnPath(n,(g,y)=>{const _=Ct(g,n);i=i||ds(y,_)});let l=r.syncPointTree_.get(n);l?i=i||ds(l,Pe()):(l=new H0,r.syncPointTree_=r.syncPointTree_.set(n,l));const u=i!=null,h=u?new fs(i,!0,!1):null,m=fa(r.pendingWriteTree_,e._path),p=$0(l,e,m,u?h.getNode():me.EMPTY_NODE,u);return nb(p)}function co(r,e){return Q0(e,r.syncPointTree_,null,fa(r.pendingWriteTree_,Pe()))}function Q0(r,e,n,i){if(Ee(r.path))return q0(r,e,n,i);{const l=e.get(Pe());n==null&&l!=null&&(n=ds(l,Pe()));let u=[];const h=_e(r.path),m=r.operationForChild(h),p=e.children.get(h);if(p&&m){const g=n?n.getImmediateChild(h):null,y=L0(i,h);u=u.concat(Q0(m,p,g,y))}return l&&(u=u.concat(Rd(l,r,i,n))),u}}function q0(r,e,n,i){const l=e.get(Pe());n==null&&l!=null&&(n=ds(l,Pe()));let u=[];return e.children.inorderTraversal((h,m)=>{const p=n?n.getImmediateChild(h):null,g=L0(i,h),y=r.operationForChild(h);y&&(u=u.concat(q0(y,m,p,g)))}),l&&(u=u.concat(Rd(l,r,i,n))),u}function Y0(r,e){const n=e.query,i=eo(r,n);return{hashFn:()=>(tb(e)||me.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return i?gb(r,n._path,i):mb(r,n._path);{const u=v1(l,n);return ta(r,n,null,u)}}}}function eo(r,e){const n=ma(e);return r.queryToTagMap.get(n)}function ma(r){return r._path.toString()+"$"+r._queryIdentifier}function Md(r,e){return r.tagToQueryMap.get(e)}function Od(r){const e=r.indexOf("$");return J(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new ze(r.substr(0,e))}}function Ld(r,e,n){const i=r.syncPointTree_.get(e);J(i,"Missing sync point for query tag that we're tracking");const l=fa(r.pendingWriteTree_,e);return Rd(i,n,l,null)}function xb(r){return r.fold((e,n,i)=>{if(n&&ps(n))return[pa(n)];{let l=[];return n&&(l=W0(n)),Lt(i,(u,h)=>{l=l.concat(h)}),l}})}function Wi(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(hb())(r._repo,r._path):r}function _b(r,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const l=ma(i),u=r.queryToTagMap.get(l);r.queryToTagMap.delete(l),r.tagToQueryMap.delete(u)}}}function wb(){return fb++}function Nb(r,e,n){const i=e._path,l=eo(r,e),u=Y0(r,n),h=r.listenProvider_.startListening(Wi(e),l,u.hashFn,u.onComplete),m=r.syncPointTree_.subtree(i);if(l)J(!ps(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((g,y,_)=>{if(!Ee(g)&&y&&ps(y))return[pa(y).query];{let x=[];return y&&(x=x.concat(W0(y).map(k=>k.query))),Lt(_,(k,I)=>{x=x.concat(I)}),x}});for(let g=0;g<p.length;++g){const y=p[g];r.listenProvider_.stopListening(Wi(y),eo(r,y))}}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Dd(n)}node(){return this.node_}}class Ud{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ot(this.path_,e);return new Ud(this.syncTree_,n)}node(){return Ad(this.syncTree_,this.path_)}}const bb=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Ym=function(r,e,n){if(!r||typeof r!="object")return r;if(J(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return Eb(r[".sv"],e,n);if(typeof r[".sv"]=="object")return Cb(r[".sv"],e);J(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},Eb=function(r,e,n){switch(r){case"timestamp":return n.timestamp;default:J(!1,"Unexpected server value: "+r)}},Cb=function(r,e,n){r.hasOwnProperty("increment")||J(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&J(!1,"Unexpected increment value: "+i);const l=e.node();if(J(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return i;const h=l.getValue();return typeof h!="number"?i:h+i},Sb=function(r,e,n,i){return Fd(e,new Ud(n,r),i)},J0=function(r,e,n){return Fd(r,new Dd(e),n)};function Fd(r,e,n){const i=r.getPriority().val(),l=Ym(i,e.getImmediateChild(".priority"),n);let u;if(r.isLeafNode()){const h=r,m=Ym(h.getValue(),e,n);return m!==h.getValue()||l!==h.getPriority().val()?new ut(m,ht(l)):r}else{const h=r;return u=h,l!==h.getPriority().val()&&(u=u.updatePriority(new ut(l))),h.forEachChild(Je,(m,p)=>{const g=Fd(p,e.getImmediateChild(m),n);g!==p&&(u=u.updateImmediateChild(m,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Hd(r,e){let n=e instanceof ze?e:new ze(e),i=r,l=_e(n);for(;l!==null;){const u=Ir(i.node.children,l)||{children:{},childCount:0};i=new zd(l,i,u),n=$e(n),l=_e(n)}return i}function Hr(r){return r.node.value}function X0(r,e){r.node.value=e,td(r)}function Z0(r){return r.node.childCount>0}function kb(r){return Hr(r)===void 0&&!Z0(r)}function ga(r,e){Lt(r.node.children,(n,i)=>{e(new zd(n,r,i))})}function ey(r,e,n,i){n&&e(r),ga(r,l=>{ey(l,e,!0)})}function Ib(r,e,n){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function uo(r){return new ze(r.parent===null?r.name:uo(r.parent)+"/"+r.name)}function td(r){r.parent!==null&&Tb(r.parent,r.name,r)}function Tb(r,e,n){const i=kb(n),l=Mn(r.node.children,e);i&&l?(delete r.node.children[e],r.node.childCount--,td(r)):!i&&!l&&(r.node.children[e]=n.node,r.node.childCount++,td(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=/[\[\].#$\/\u0000-\u001F\u007F]/,Pb=/[\[\].#$\u0000-\u001F\u007F]/,Au=10*1024*1024,ty=function(r){return typeof r=="string"&&r.length!==0&&!jb.test(r)},ny=function(r){return typeof r=="string"&&r.length!==0&&!Pb.test(r)},Rb=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),ny(r)},Ab=function(r,e,n,i){$d(pd(r,"value"),e,n)},$d=function(r,e,n){const i=n instanceof ze?new J1(n,r):n;if(e===void 0)throw new Error(r+"contains undefined "+Ps(i));if(typeof e=="function")throw new Error(r+"contains a function "+Ps(i)+" with contents = "+e.toString());if(Zg(e))throw new Error(r+"contains "+e.toString()+" "+Ps(i));if(typeof e=="string"&&e.length>Au/3&&ua(e)>Au)throw new Error(r+"contains a string greater than "+Au+" utf8 bytes "+Ps(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(Lt(e,(h,m)=>{if(h===".value")l=!0;else if(h!==".priority"&&h!==".sv"&&(u=!0,!ty(h)))throw new Error(r+" contains an invalid key ("+h+") "+Ps(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);X1(i,h),$d(r,m,i),Z1(i)}),l&&u)throw new Error(r+' contains ".value" child '+Ps(i)+" in addition to actual children.")}},sy=function(r,e,n,i){if(!ny(n))throw new Error(pd(r,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Mb=function(r,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sy(r,e,n)},ry=function(r,e){if(_e(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},Ob=function(r,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ty(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Rb(n))throw new Error(pd(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wd(r,e){let n=null;for(let i=0;i<e.length;i++){const l=e[i],u=l.getPath();n!==null&&!Nd(u,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&r.eventLists_.push(n)}function iy(r,e,n){Wd(r,n),oy(r,i=>Nd(i,e))}function mn(r,e,n){Wd(r,n),oy(r,i=>nn(i,e)||nn(e,i))}function oy(r,e){r.recursionDepth_++;let n=!0;for(let i=0;i<r.eventLists_.length;i++){const l=r.eventLists_[i];if(l){const u=l.path;e(u)?(Db(r.eventLists_[i]),r.eventLists_[i]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function Db(r){for(let e=0;e<r.events.length;e++){const n=r.events[e];if(n!==null){r.events[e]=null;const i=n.getEventRunner();Fi&&wt("event: "+n.toString()),zr(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="repo_interrupt",Fb=25;class zb{constructor(e,n,i,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kl(),this.transactionQueueTree_=new zd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hb(r,e,n){if(r.stats_=_d(r.repoInfo_),r.forceRestClient_||N1())r.server_=new Vl(r.repoInfo_,(i,l,u,h)=>{Jm(r,i,l,u,h)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Xm(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Tn(r.repoInfo_,e,(i,l,u,h)=>{Jm(r,i,l,u,h)},i=>{Xm(r,i)},i=>{Wb(r,i)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=k1(r.repoInfo_,()=>new CN(r.stats_,r.server_)),r.infoData_=new _N,r.infoSyncTree_=new qm({startListening:(i,l,u,h)=>{let m=[];const p=r.infoData_.getNode(i._path);return p.isEmpty()||(m=ao(r.infoSyncTree_,i._path,p),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),Gd(r,"connected",!1),r.serverSyncTree_=new qm({startListening:(i,l,u,h)=>(r.server_.listen(i,u,l,(m,p)=>{const g=h(m,p);mn(r.eventQueue_,i._path,g)}),[]),stopListening:(i,l)=>{r.server_.unlisten(i,l)}})}function $b(r){const n=r.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bd(r){return bb({timestamp:$b(r)})}function Jm(r,e,n,i,l){r.dataUpdateCount++;const u=new ze(e);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,n):n;let h=[];if(l)if(i){const p=Hl(n,g=>ht(g));h=yb(r.serverSyncTree_,u,p,l)}else{const p=ht(n);h=K0(r.serverSyncTree_,u,p,l)}else if(i){const p=Hl(n,g=>ht(g));h=pb(r.serverSyncTree_,u,p)}else{const p=ht(n);h=ao(r.serverSyncTree_,u,p)}let m=u;h.length>0&&(m=va(r,u)),mn(r.eventQueue_,m,h)}function Xm(r,e){Gd(r,"connected",e),e===!1&&Vb(r)}function Wb(r,e){Lt(e,(n,i)=>{Gd(r,n,i)})}function Gd(r,e,n){const i=new ze("/.info/"+e),l=ht(n);r.infoData_.updateSnapshot(i,l);const u=ao(r.infoSyncTree_,i,l);mn(r.eventQueue_,i,u)}function ly(r){return r.nextWriteId_++}function Bb(r,e,n){const i=vb(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(l=>{const u=ht(l).withIndex(e._queryParams.getIndex());ed(r.serverSyncTree_,e,n,!0);let h;if(e._queryParams.loadsAllData())h=ao(r.serverSyncTree_,e._path,u);else{const m=eo(r.serverSyncTree_,e);h=K0(r.serverSyncTree_,e._path,u,m)}return mn(r.eventQueue_,e._path,h),ta(r.serverSyncTree_,e,n,null,!0),u},l=>(ya(r,"get for query "+it(e)+" failed: "+l),Promise.reject(new Error(l))))}function Gb(r,e,n,i,l){ya(r,"set",{path:e.toString(),value:n,priority:i});const u=Bd(r),h=ht(n,i),m=Ad(r.serverSyncTree_,e),p=J0(h,m,u),g=ly(r),y=V0(r.serverSyncTree_,e,p,g,!0);Wd(r.eventQueue_,y),r.server_.put(e.toString(),h.val(!0),(x,k)=>{const I=x==="ok";I||Ot("set at "+e+" failed: "+x);const O=As(r.serverSyncTree_,g,!I);mn(r.eventQueue_,e,O),Yb(r,l,x,k)});const _=hy(r,e);va(r,_),mn(r.eventQueue_,_,[])}function Vb(r){ya(r,"onDisconnectEvents");const e=Bd(r),n=Kl();qu(r.onDisconnect_,Pe(),(l,u)=>{const h=Sb(l,u,r.serverSyncTree_,e);j0(n,l,h)});let i=[];qu(n,Pe(),(l,u)=>{i=i.concat(ao(r.serverSyncTree_,l,u));const h=hy(r,l);va(r,h)}),r.onDisconnect_=Kl(),mn(r.eventQueue_,Pe(),i)}function Kb(r,e,n){let i;_e(e._path)===".info"?i=ed(r.infoSyncTree_,e,n):i=ed(r.serverSyncTree_,e,n),iy(r.eventQueue_,e._path,i)}function Qb(r,e,n){let i;_e(e._path)===".info"?i=ta(r.infoSyncTree_,e,n):i=ta(r.serverSyncTree_,e,n),iy(r.eventQueue_,e._path,i)}function qb(r){r.persistentConnection_&&r.persistentConnection_.interrupt(Ub)}function ya(r,...e){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),wt(n,...e)}function Yb(r,e,n,i){e&&zr(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let u=l;i&&(u+=": "+i);const h=new Error(u);h.code=l,e(h)}})}function ay(r,e,n){return Ad(r.serverSyncTree_,e,n)||me.EMPTY_NODE}function Vd(r,e=r.transactionQueueTree_){if(e||xa(r,e),Hr(e)){const n=uy(r,e);J(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&Jb(r,uo(e),n)}else Z0(e)&&ga(e,n=>{Vd(r,n)})}function Jb(r,e,n){const i=n.map(g=>g.currentWriteId),l=ay(r,e,i);let u=l;const h=l.hash();for(let g=0;g<n.length;g++){const y=n[g];J(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const _=Ct(e,y.path);u=u.updateChild(_,y.currentOutputSnapshotRaw)}const m=u.val(!0),p=e;r.server_.put(p.toString(),m,g=>{ya(r,"transaction put response",{path:p.toString(),status:g});let y=[];if(g==="ok"){const _=[];for(let x=0;x<n.length;x++)n[x].status=2,y=y.concat(As(r.serverSyncTree_,n[x].currentWriteId)),n[x].onComplete&&_.push(()=>n[x].onComplete(null,!0,n[x].currentOutputSnapshotResolved)),n[x].unwatcher();xa(r,Hd(r.transactionQueueTree_,e)),Vd(r,r.transactionQueueTree_),mn(r.eventQueue_,e,y);for(let x=0;x<_.length;x++)zr(_[x])}else{if(g==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Ot("transaction at "+p.toString()+" failed: "+g);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=g}va(r,e)}},h)}function va(r,e){const n=cy(r,e),i=uo(n),l=uy(r,n);return Xb(r,l,i),i}function Xb(r,e,n){if(e.length===0)return;const i=[];let l=[];const h=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const p=e[m],g=Ct(n,p.path);let y=!1,_;if(J(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)y=!0,_=p.abortReason,l=l.concat(As(r.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=Fb)y=!0,_="maxretry",l=l.concat(As(r.serverSyncTree_,p.currentWriteId,!0));else{const x=ay(r,p.path,h);p.currentInputSnapshot=x;const k=e[m].update(x.val());if(k!==void 0){$d("transaction failed: Data returned ",k,p.path);let I=ht(k);typeof k=="object"&&k!=null&&Mn(k,".priority")||(I=I.updatePriority(x.getPriority()));const S=p.currentWriteId,ee=Bd(r),U=J0(I,x,ee);p.currentOutputSnapshotRaw=I,p.currentOutputSnapshotResolved=U,p.currentWriteId=ly(r),h.splice(h.indexOf(S),1),l=l.concat(V0(r.serverSyncTree_,p.path,U,p.currentWriteId,p.applyLocally)),l=l.concat(As(r.serverSyncTree_,S,!0))}else y=!0,_="nodata",l=l.concat(As(r.serverSyncTree_,p.currentWriteId,!0))}mn(r.eventQueue_,n,l),l=[],y&&(e[m].status=2,(function(x){setTimeout(x,Math.floor(0))})(e[m].unwatcher),e[m].onComplete&&(_==="nodata"?i.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):i.push(()=>e[m].onComplete(new Error(_),!1,null))))}xa(r,r.transactionQueueTree_);for(let m=0;m<i.length;m++)zr(i[m]);Vd(r,r.transactionQueueTree_)}function cy(r,e){let n,i=r.transactionQueueTree_;for(n=_e(e);n!==null&&Hr(i)===void 0;)i=Hd(i,n),e=$e(e),n=_e(e);return i}function uy(r,e){const n=[];return dy(r,e,n),n.sort((i,l)=>i.order-l.order),n}function dy(r,e,n){const i=Hr(e);if(i)for(let l=0;l<i.length;l++)n.push(i[l]);ga(e,l=>{dy(r,l,n)})}function xa(r,e){const n=Hr(e);if(n){let i=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[i]=n[l],i++);n.length=i,X0(e,n.length>0?n:void 0)}ga(e,i=>{xa(r,i)})}function hy(r,e){const n=uo(cy(r,e)),i=Hd(r.transactionQueueTree_,e);return Ib(i,l=>{Mu(r,l)}),Mu(r,i),ey(i,l=>{Mu(r,l)}),n}function Mu(r,e){const n=Hr(e);if(n){const i=[];let l=[],u=-1;for(let h=0;h<n.length;h++)n[h].status===3||(n[h].status===1?(J(u===h-1,"All SENT items should be at beginning of queue."),u=h,n[h].status=3,n[h].abortReason="set"):(J(n[h].status===0,"Unexpected transaction status in abort"),n[h].unwatcher(),l=l.concat(As(r.serverSyncTree_,n[h].currentWriteId,!0)),n[h].onComplete&&i.push(n[h].onComplete.bind(null,new Error("set"),!1,null))));u===-1?X0(e,void 0):n.length=u+1,mn(r.eventQueue_,uo(e),l);for(let h=0;h<i.length;h++)zr(i[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r){let e="";const n=r.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let l=n[i];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function eE(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ot(`Invalid query segment '${n}' in query '${r}'`)}return e}const Zm=function(r,e){const n=tE(r),i=n.namespace;n.domain==="firebase.com"&&Pn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||f1();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new d0(n.host,n.secure,i,l,e,"",i!==n.subdomain),path:new ze(n.pathString)}},tE=function(r){let e="",n="",i="",l="",u="",h=!0,m="https",p=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(m=r.substring(0,g-1),r=r.substring(g+2));let y=r.indexOf("/");y===-1&&(y=r.length);let _=r.indexOf("?");_===-1&&(_=r.length),e=r.substring(0,Math.min(y,_)),y<_&&(l=Zb(r.substring(y,_)));const x=eE(r.substring(Math.min(r.length,_)));g=e.indexOf(":"),g>=0?(h=m==="https"||m==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const k=e.slice(0,g);if(k.toLowerCase()==="localhost")n="localhost";else if(k.split(".").length<=2)n=k;else{const I=e.indexOf(".");i=e.substring(0,I).toLowerCase(),n=e.substring(I+1),u=i}"ns"in x&&(u=x.ns)}return{host:e,port:p,domain:n,subdomain:i,secure:h,scheme:m,pathString:l,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,i,l){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+it(this.snapshot.exportVal())}}class sE{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return J(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,i,l){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=l}get key(){return Ee(this._path)?null:_0(this._path)}get ref(){return new On(this._repo,this._path)}get _queryIdentifier(){const e=Um(this._queryParams),n=vd(e);return n==="{}"?"default":n}get _queryObject(){return Um(this._queryParams)}isEqual(e){if(e=Nt(e),!(e instanceof Kd))return!1;const n=this._repo===e._repo,i=Nd(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&i&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+Y1(this._path)}}class On extends Kd{constructor(e,n){super(e,n,new Sd,!1)}get parent(){const e=N0(this._path);return e===null?null:new On(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class to{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ze(e),i=nd(this.ref,e);return new to(this._node.getChild(n),i,Je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,l)=>e(new to(l,nd(this.ref,i),Je)))}hasChild(e){const n=new ze(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Re(r,e){return r=Nt(r),r._checkNotDeleted("ref"),e!==void 0?nd(r._root,e):r._root}function nd(r,e){return r=Nt(r),_e(r._path)===null?Mb("child","path",e):sy("child","path",e),new On(r._repo,ot(r._path,e))}function eg(r){return ry("remove",r._path),gt(r,null)}function gt(r,e){r=Nt(r),ry("set",r._path),Ab("set",e,r._path);const n=new ca;return Gb(r._repo,r._path,e,null,n.wrapCallback(()=>{})),n.promise}function tt(r){r=Nt(r);const e=new fy(()=>{}),n=new _a(e);return Bb(r._repo,r,n).then(i=>new to(i,new On(r._repo,r._path),r._queryParams.getIndex()))}class _a{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new nE("value",this,new to(e.snapshotNode,new On(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new sE(this,e,n):null}matches(e){return e instanceof _a?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function rE(r,e,n,i,l){const u=new fy(n,void 0),h=new _a(u);return Kb(r._repo,r,h),()=>Qb(r._repo,r,h)}function wa(r,e,n,i){return rE(r,"value",e)}ob(On);db(On);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FIREBASE_DATABASE_EMULATOR_HOST",sd={};let oE=!1;function lE(r,e,n,i){const l=e.lastIndexOf(":"),u=e.substring(0,l),h=Lr(u);r.repoInfo_=new d0(e,h,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(r.authTokenProvider_=i)}function aE(r,e,n,i,l){let u=i||r.options.databaseURL;u===void 0&&(r.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",r.options.projectId),u=`${r.options.projectId}-default-rtdb.firebaseio.com`);let h=Zm(u,l),m=h.repoInfo,p;typeof process<"u"&&_m&&(p=_m[iE]),p?(u=`http://${p}?ns=${m.namespace}`,h=Zm(u,l),m=h.repoInfo):h.repoInfo.secure;const g=new E1(r.name,r.options,e);Ob("Invalid Firebase Database URL",h),Ee(h.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=uE(m,r,g,new b1(r,n));return new dE(y,r)}function cE(r,e){const n=sd[e];(!n||n[r.key]!==r)&&Pn(`Database ${e}(${r.repoInfo_}) has already been deleted.`),qb(r),delete n[r.key]}function uE(r,e,n,i){let l=sd[e.name];l||(l={},sd[e.name]=l);let u=l[r.toURLString()];return u&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new zb(r,oE,n,i),l[r.toURLString()]=u,u}class dE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Hb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new On(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pn("Cannot call "+e+" on a deleted database.")}}function hE(r=Kg(),e){const n=yd(r,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=P_("database");i&&fE(n,...i)}return n}function fE(r,e,n,i={}){r=Nt(r),r._checkNotDeleted("useEmulator");const l=`${e}:${n}`,u=r._repoInternal;if(r._instanceStarted){if(l===r._repoInternal.repoInfo_.host&&Us(i,u.repoInfo_.emulatorOptions))return;Pn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(u.repoInfo_.nodeAdmin)i.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new Pl(Pl.OWNER);else if(i.mockUserToken){const m=typeof i.mockUserToken=="string"?i.mockUserToken:R_(i.mockUserToken,r.app.options.projectId);h=new Pl(m)}Lr(e)&&(zg(e),Hg("Database",!0)),lE(u,l,i,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(r){l1(Ur),Tr(new Fs("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return aE(i,l,u,n)},"PUBLIC").setMultipleInstances(!0)),cs(wm,Nm,r),cs(wm,Nm,"esm2020")}Tn.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Tn.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};pE();function py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mE=py,my=new ro("auth","Firebase",py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new md("@firebase/auth");function gE(r,...e){na.logLevel<=Fe.WARN&&na.warn(`Auth (${Ur}): ${r}`,...e)}function Rl(r,...e){na.logLevel<=Fe.ERROR&&na.error(`Auth (${Ur}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,...e){throw qd(r,...e)}function ln(r,...e){return qd(r,...e)}function Qd(r,e,n){const i={...mE(),[e]:n};return new ro("auth","Firebase",i).create(e,{appName:r.name})}function fn(r){return Qd(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yE(r,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Kt(r,"argument-error"),Qd(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qd(r,...e){if(typeof r!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return my.create(r,...e)}function pe(r,e,...n){if(!r)throw qd(e,...n)}function kn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Rl(e),new Error(e)}function Rn(r,e){r||kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(){return typeof self<"u"&&self.location?.href||""}function vE(){return tg()==="http:"||tg()==="https:"}function tg(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vE()||L_()||"connection"in navigator)?navigator.onLine:!0}function _E(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rn(n>e,"Short delay should be less than long delay!"),this.isMobile=fd()||$g()}get(){return xE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(r,e){Rn(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bE=new ho(3e4,6e4);function gs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ln(r,e,n,i,l={}){return yy(r,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=Dr({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return O_()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Lr(r.emulatorConfig.host)&&(g.credentials="include"),gy.fetch()(await vy(r,r.config.apiHost,n,m),g)})}async function yy(r,e,n){r._canInitEmulator=!1;const i={...wE,...e};try{const l=new CE(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw jl(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw jl(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw jl(r,"user-disabled",h);const y=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Qd(r,y,g);Kt(r,y)}}catch(l){if(l instanceof ms)throw l;Kt(r,"network-request-failed",{message:String(l)})}}async function fo(r,e,n,i,l={}){const u=await Ln(r,e,n,i,l);return"mfaPendingCredential"in u&&Kt(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function vy(r,e,n,i){const l=`${e}${n}?${i}`,u=r,h=u.config.emulator?Yd(r.config,l):`${r.config.apiScheme}://${l}`;return NE.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function EE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ln(this.auth,"network-request-failed")),bE.get())})}}function jl(r,e,n){const i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ln(r,e,i);return l.customData._tokenResponse=n,l}function ng(r){return r!==void 0&&r.enterprise!==void 0}class SE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kE(r,e){return Ln(r,"GET","/v2/recaptchaConfig",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(r,e){return Ln(r,"POST","/v1/accounts:delete",e)}async function sa(r,e){return Ln(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TE(r,e=!1){const n=Nt(r),i=await n.getIdToken(e),l=Jd(i);pe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Bi(Ou(l.auth_time)),issuedAtTime:Bi(Ou(l.iat)),expirationTime:Bi(Ou(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Ou(r){return Number(r)*1e3}function Jd(r){const[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Rl("JWT malformed, contained fewer than 3 sections"),null;try{const l=zl(n);return l?JSON.parse(l):(Rl("Failed to decode base64 JWT payload"),null)}catch(l){return Rl("Caught error parsing JWT payload as JSON",l?.toString()),null}}function sg(r){const e=Jd(r);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ms&&jE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function jE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bi(this.lastLoginAt),this.creationTime=Bi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(r){const e=r.auth,n=await r.getIdToken(),i=await Ar(r,sa(e,{idToken:n}));pe(i?.users.length,e,"internal-error");const l=i.users[0];r._notifyReloadListener(l);const u=l.providerUserInfo?.length?xy(l.providerUserInfo):[],h=AE(r.providerData,u),m=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!h?.length,g=m?p:!1,y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new id(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(r,y)}async function RE(r){const e=Nt(r);await ra(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AE(r,e){return[...r.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function xy(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(r,e){const n=await yy(r,{},async()=>{const i=Dr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,h=await vy(r,l,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&Lr(r.emulatorConfig.host)&&(p.credentials="include"),gy.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OE(r,e){return Ln(r,"POST","/v2/accounts:revokeToken",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=sg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await ME(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new Er;return i&&(pe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(pe(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(pe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Er,this.toJSON())}_performRefresh(){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(r,e){pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class rn{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new PE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new id(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Ar(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TE(this,e)}reload(){return RE(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ra(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(At(this.auth.app))return Promise.reject(fn(this.auth));const e=await this.getIdToken();return await Ar(this,IE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:_,emailVerified:x,isAnonymous:k,providerData:I,stsTokenManager:O}=n;pe(_&&O,e,"internal-error");const S=Er.fromJSON(this.name,O);pe(typeof _=="string",e,"internal-error"),ss(i,e.name),ss(l,e.name),pe(typeof x=="boolean",e,"internal-error"),pe(typeof k=="boolean",e,"internal-error"),ss(u,e.name),ss(h,e.name),ss(m,e.name),ss(p,e.name),ss(g,e.name),ss(y,e.name);const ee=new rn({uid:_,auth:e,email:l,emailVerified:x,displayName:i,isAnonymous:k,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:S,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(ee.providerData=I.map(U=>({...U}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,n,i=!1){const l=new Er;l.updateFromServerResponse(n);const u=new rn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await ra(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];pe(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?xy(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,m=new Er;m.updateFromIdToken(i);const p=new rn({uid:l.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new id(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new Map;function In(r){Rn(r instanceof Function,"Expected a class definition");let e=rg.get(r);return e?(Rn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,rg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_y.type="NONE";const ig=_y;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(r,e,n){return`firebase:${r}:${e}:${n}`}class Cr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=Al(this.userKey,l.apiKey,u),this.fullPersistenceKey=Al("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sa(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Cr(In(ig),e,i);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||In(ig);const h=Al(i,e.config.apiKey,e.name);let m=null;for(const g of n)try{const y=await g._get(h);if(y){let _;if(typeof y=="string"){const x=await sa(e,{idToken:y}).catch(()=>{});if(!x)break;_=await rn._fromGetAccountInfoResponse(e,x,y)}else _=rn._fromJSON(e,y);g!==u&&(m=_),u=g;break}}catch{}const p=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Cr(u,e,i):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Cr(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ey(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sy(e))return"Blackberry";if(ky(e))return"Webos";if(Ny(e))return"Safari";if((e.includes("chrome/")||by(e))&&!e.includes("edge/"))return"Chrome";if(Cy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function wy(r=St()){return/firefox\//i.test(r)}function Ny(r=St()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function by(r=St()){return/crios\//i.test(r)}function Ey(r=St()){return/iemobile/i.test(r)}function Cy(r=St()){return/android/i.test(r)}function Sy(r=St()){return/blackberry/i.test(r)}function ky(r=St()){return/webos/i.test(r)}function Xd(r=St()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LE(r=St()){return Xd(r)&&!!window.navigator?.standalone}function DE(){return D_()&&document.documentMode===10}function Iy(r=St()){return Xd(r)||Cy(r)||ky(r)||Sy(r)||/windows phone/i.test(r)||Ey(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(r,e=[]){let n;switch(r){case"Browser":n=og(St());break;case"Worker":n=`${og(St())}-${r}`;break;default:n=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ur}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(r,e={}){return Ln(r,"GET","/v2/passwordPolicy",gs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=6;class HE{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zE,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lg(this),this.idTokenSubscription=new lg(this),this.beforeStateQueue=new UE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=my,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=In(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Cr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sa(this,{idToken:e}),i=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(At(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(i=m.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ra(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_E()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(At(this.app))return Promise.reject(fn(this));const n=e?Nt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return At(this.app)?Promise.reject(fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return At(this.app)?Promise.reject(fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(In(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FE(this),n=new HE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await OE(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&In(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Cr.create(this,[In(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,l);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ty(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gE(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Dn(r){return Nt(r)}class lg{constructor(e){this.auth=e,this.observer=null,this.addObserver=K_(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WE(r){Na=r}function jy(r){return Na.loadJS(r)}function BE(){return Na.recaptchaEnterpriseScript}function GE(){return Na.gapiScript}function VE(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class KE{constructor(){this.enterprise=new QE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QE{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const qE="recaptcha-enterprise",Py="NO_RECAPTCHA";class YE{constructor(e){this.type=qE,this.auth=Dn(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{kE(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new SE(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function l(u,h,m){const p=window.grecaptcha;ng(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(Py)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KE().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(m=>{if(!n&&ng(window.grecaptcha))l(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=BE();p.length!==0&&(p+=m),jy(p).then(()=>{l(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function ag(r,e,n,i=!1,l=!1){const u=new YE(r);let h;if(l)h=Py;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function od(r,e,n,i,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ag(r,e,n,n==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ag(r,e,n,n==="getOobCode");return i(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(r,e){const n=yd(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Us(u,e??{}))return l;Kt(l,"already-initialized")}return n.initialize({options:e})}function XE(r,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(In);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function ZE(r,e,n){const i=Dn(r);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=Ry(e),{host:h,port:m}=eC(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},y=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(Us(g,i.config.emulator)&&Us(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Lr(h)?(zg(`${u}//${h}${p}`),Hg("Auth",!0)):tC()}function Ry(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eC(r){const e=Ry(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:cg(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:cg(h)}}}function cg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,n){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}}async function nC(r,e){return Ln(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(r,e){return fo(r,"POST","/v1/accounts:signInWithPassword",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(r,e){return fo(r,"POST","/v1/accounts:signInWithEmailLink",gs(r,e))}async function iC(r,e){return fo(r,"POST","/v1/accounts:signInWithEmailLink",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Zd{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new no(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new no(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return od(e,n,"signInWithPassword",sC);case"emailLink":return rC(e,{email:this._email,oobCode:this._password});default:Kt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return od(e,i,"signUpPassword",nC);case"emailLink":return iC(e,{idToken:n,email:this._email,oobCode:this._password});default:Kt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(r,e){return fo(r,"POST","/v1/accounts:signInWithIdp",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="http://localhost";class Ws extends Zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Ws(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Sr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Sr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sr(e,n)}buildRequest(){const e={requestUri:oC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aC(r){const e=Oi(Li(r)).link,n=e?Oi(Li(e)).deep_link_id:null,i=Oi(Li(r)).deep_link_id;return(i?Oi(Li(i)).link:null)||i||n||e||r}class eh{constructor(e){const n=Oi(Li(e)),i=n.apiKey??null,l=n.oobCode??null,u=lC(n.mode??null);pe(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aC(e);try{return new eh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.providerId=$r.PROVIDER_ID}static credential(e,n){return no._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=eh.parseLink(n);return pe(i,"argument-error"),no._fromEmailAndCode(e,i.code,i.tenantId)}}$r.PROVIDER_ID="password";$r.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$r.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends th{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends po{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ws._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return En.credential(n,i)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends po{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends po{constructor(){super("twitter.com")}static credential(e,n){return Ws._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return os.credential(n,i)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(r,e){return fo(r,"POST","/v1/accounts:signUp",gs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await rn._fromIdTokenResponse(e,i,l),h=ug(i);return new An({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=ug(i);return new An({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function ug(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(r){if(At(r.app))return Promise.reject(fn(r));const e=Dn(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new An({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Ay(e,{returnSecureToken:!0}),i=await An._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends ms{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new ia(e,n,i,l)}}function My(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ia._fromErrorAndOperation(r,u,e,i):u})}async function uC(r,e,n=!1){const i=await Ar(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return An._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(r,e,n=!1){const{auth:i}=r;if(At(i.app))return Promise.reject(fn(i));const l="reauthenticate";try{const u=await Ar(r,My(i,l,e,r),n);pe(u.idToken,i,"internal-error");const h=Jd(u.idToken);pe(h,i,"internal-error");const{sub:m}=h;return pe(r.uid===m,i,"user-mismatch"),An._forOperation(r,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Kt(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(r,e,n=!1){if(At(r.app))return Promise.reject(fn(r));const i="signIn",l=await My(r,i,e),u=await An._fromIdTokenResponse(r,i,l);return n||await r._updateCurrentUser(u.user),u}async function hC(r,e){return Oy(Dn(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ly(r){const e=Dn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fC(r,e,n){if(At(r.app))return Promise.reject(fn(r));const i=Dn(r),h=await od(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ay).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Ly(r),p}),m=await An._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function pC(r,e,n){return At(r.app)?Promise.reject(fn(r)):hC(Nt(r),$r.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ly(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e){return Ln(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Nt(r),u={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await Ar(i,mC(i.auth,u));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const m=i.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=i.displayName,m.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function yC(r,e,n,i){return Nt(r).onIdTokenChanged(e,n,i)}function vC(r,e,n){return Nt(r).beforeAuthStateChanged(e,n)}function xC(r,e,n,i){return Nt(r).onAuthStateChanged(e,n,i)}function _C(r){return Nt(r).signOut()}const oa="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=1e3,NC=10;class Uy extends Dy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);DE()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,NC):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uy.type="LOCAL";const bC=Uy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends Dy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Fy.type="SESSION";const zy=Fy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new ba(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await EC(m);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ba.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=nh("",20);l.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(_){const x=_;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(y),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function SC(r){pn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function kC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IC(){return navigator?.serviceWorker?.controller||null}function TC(){return Hy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="firebaseLocalStorageDb",jC=1,la="firebaseLocalStorage",Wy="fbase_key";class mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ea(r,e){return r.transaction([la],e?"readwrite":"readonly").objectStore(la)}function PC(){const r=indexedDB.deleteDatabase($y);return new mo(r).toPromise()}function ld(){const r=indexedDB.open($y,jC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(la,{keyPath:Wy})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(la)?e(i):(i.close(),await PC(),e(await ld()))})})}async function dg(r,e,n){const i=Ea(r,!0).put({[Wy]:e,value:n});return new mo(i).toPromise()}async function RC(r,e){const n=Ea(r,!1).get(e),i=await new mo(n).toPromise();return i===void 0?null:i.value}function hg(r,e){const n=Ea(r,!0).delete(e);return new mo(n).toPromise()}const AC=800,MC=3;class By{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ld(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>MC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ba._getInstance(TC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kC(),!this.activeServiceWorker)return;this.sender=new CC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ld();return await dg(e,oa,"1"),await hg(e,oa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>dg(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>RC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Ea(l,!1).getAll();return new mo(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}By.type="LOCAL";const OC=By;new ho(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(r,e){return e?In(e):(pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends Zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LC(r){return Oy(r.auth,new sh(r),r.bypassAuthState)}function DC(r){const{auth:e,user:n}=r;return pe(n,e,"internal-error"),dC(n,new sh(r),r.bypassAuthState)}async function UC(r){const{auth:e,user:n}=r;return pe(n,e,"internal-error"),uC(n,new sh(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:Kt(this.auth,"internal-error")}}resolve(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new ho(2e3,1e4);async function zC(r,e,n){if(At(r.app))return Promise.reject(ln(r,"operation-not-supported-in-this-environment"));const i=Dn(r);yE(r,e,th);const l=Gy(i,n);return new Ms(i,"signInViaPopup",e,l).executeNotNull()}class Ms extends Vy{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Rn(this.filter.length===1,"Popup operations only handle one event");const e=nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FC.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="pendingRedirect",Ml=new Map;class $C extends Vy{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ml.get(this.auth._key());if(!e){try{const i=await WC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ml.set(this.auth._key(),e)}return this.bypassAuthState||Ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WC(r,e){const n=VC(e),i=GC(r);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function BC(r,e){Ml.set(r._key(),e)}function GC(r){return In(r._redirectPersistence)}function VC(r){return Al(HC,r.config.apiKey,r.name)}async function KC(r,e,n=!1){if(At(r.app))return Promise.reject(fn(r));const i=Dn(r),l=Gy(i,e),h=await new $C(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=600*1e3;class qC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ky(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ln(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QC&&this.cachedEventUids.clear(),this.cachedEventUids.has(fg(e))}saveEventToCache(e){this.cachedEventUids.add(fg(e)),this.lastProcessedEventTime=Date.now()}}function fg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ky({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function YC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ky(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(r,e={}){return Ln(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZC=/^https?/;async function eS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JC(r);for(const n of e)try{if(tS(n))return}catch{}Kt(r,"unauthorized-domain")}function tS(r){const e=rd(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!ZC.test(n))return!1;if(XC.test(r))return i===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new ho(3e4,6e4);function pg(){const r=pn().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function sS(r){return new Promise((e,n)=>{function i(){pg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pg(),n(ln(r,"network-request-failed"))},timeout:nS.get()})}if(pn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(pn().gapi?.load)i();else{const l=VE("iframefcb");return pn()[l]=()=>{gapi.load?i():n(ln(r,"network-request-failed"))},jy(`${GE()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ol=null,e})}let Ol=null;function rS(r){return Ol=Ol||sS(r),Ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new ho(5e3,15e3),oS="__/auth/iframe",lS="emulator/auth/iframe",aS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uS(r){const e=r.config;pe(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Yd(e,lS):`https://${r.config.authDomain}/${oS}`,i={apiKey:e.apiKey,appName:r.name,v:Ur},l=cS.get(r.config.apiHost);l&&(i.eid=l);const u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Dr(i).slice(1)}`}async function dS(r){const e=await rS(r),n=pn().gapi;return pe(n,r,"internal-error"),e.open({where:document.body,url:uS(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aS,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=ln(r,"network-request-failed"),m=pn().setTimeout(()=>{u(h)},iS.get());function p(){pn().clearTimeout(m),l(i)}i.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fS=500,pS=600,mS="_blank",gS="http://localhost";class mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yS(r,e,n,i=fS,l=pS){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...hS,width:i.toString(),height:l.toString(),top:u,left:h},g=St().toLowerCase();n&&(m=by(g)?mS:n),wy(g)&&(e=e||gS,p.scrollbars="yes");const y=Object.entries(p).reduce((x,[k,I])=>`${x}${k}=${I},`,"");if(LE(g)&&m!=="_self")return vS(e||"",m),new mg(null);const _=window.open(e||"",m,y);pe(_,r,"popup-blocked");try{_.focus()}catch{}return new mg(_)}function vS(r,e){const n=document.createElement("a");n.href=r,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="__/auth/handler",_S="emulator/auth/handler",wS=encodeURIComponent("fac");async function gg(r,e,n,i,l,u){pe(r.config.authDomain,r,"auth-domain-config-required"),pe(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:Ur,eventId:l};if(e instanceof th){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",zu(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))h[y]=_}if(e instanceof po){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(h.scopes=y.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const p=await r._getAppCheckToken(),g=p?`#${wS}=${encodeURIComponent(p)}`:"";return`${NS(r)}?${Dr(m).slice(1)}${g}`}function NS({config:r}){return r.emulator?Yd(r,_S):`https://${r.authDomain}/${xS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="webStorageSupport";class bS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zy,this._completeRedirectFn=KC,this._overrideRedirectResult=BC}async _openPopup(e,n,i,l){Rn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await gg(e,n,i,rd(),l);return yS(e,u,nh())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await gg(e,n,i,rd(),l);return SC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Rn(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await dS(e),i=new qC(e);return n.register("authEvent",l=>(pe(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lu,{type:Lu},l=>{const u=l?.[0]?.[Lu];u!==void 0&&n(!!u),Kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Iy()||Ny()||Xd()}}const ES=bS;var yg="@firebase/auth",vg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kS(r){Tr(new Fs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;pe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ty(r)},g=new $E(i,l,u,p);return XE(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Tr(new Fs("auth-internal",e=>{const n=Dn(e.getProvider("auth").getImmediate());return(i=>new CS(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(yg,vg,SS(r)),cs(yg,vg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=300,TS=Fg("authIdTokenMaxAge")||IS;let xg=null;const jS=r=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>TS)return;const l=n?.token;xg!==l&&(xg=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function PS(r=Kg()){const e=yd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=JE(r,{popupRedirectResolver:ES,persistence:[OC,bC,zy]}),i=Fg("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=jS(u.toString());vC(n,h,()=>h(n.currentUser)),yC(n,m=>h(m))}}const l=Dg("auth");return l&&ZE(n,`http://${l}`),n}function RS(){return document.getElementsByTagName("head")?.[0]??document}WE({loadJS(r){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=l=>{const u=ln("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",RS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kS("Browser");const AS={apiKey:"AIzaSyBplm3Xt3Mru_Sxi2g3uptgbzXbQ8KZ0Aw",authDomain:"bowling-fun.firebaseapp.com",databaseURL:"https://bowling-fun-default-rtdb.firebaseio.com",projectId:"bowling-fun",storageBucket:"bowling-fun.firebasestorage.app",messagingSenderId:"1041099466681",appId:"1:1041099466681:web:55553970cd19f150dc3868"},Qy=Vg(AS),Ae=hE(Qy),xr=PS(Qy),MS=new En,OS=["davesfx@gmail.com","daves.seeker@gmail.com"],LS=r=>!r||!r.email?!1:OS.includes(r.email.toLowerCase()),qy=z.createContext();function Gs(){return z.useContext(qy)}function DS({children:r}){const[e,n]=z.useState(null),[i,l]=z.useState(!0),[u,h]=z.useState(!1),[m,p]=z.useState(!1),g=async S=>{if(!S)return;const ee=Re(Ae,`users/${S.uid}`),U=await tt(ee);if(!U.exists())await gt(ee,{uid:S.uid,displayName:S.displayName||"Guest User",email:S.email||null,photoURL:S.photoURL||null,isAnonymous:S.isAnonymous,createdAt:Date.now(),stats:{makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}});else{const X={displayName:S.displayName||U.val().displayName,photoURL:S.photoURL||U.val().photoURL,email:S.email||U.val().email,lastLogin:Date.now()};await gt(ee,{...U.val(),...X})}},y=async()=>{try{const S=await zC(xr,MS);return await g(S.user),h(!1),S.user}catch(S){throw console.error("Error signing in with Google:",S),S}},_=async(S,ee,U)=>{try{const X=await fC(xr,S,ee);return U&&await gC(X.user,{displayName:U}),await g(X.user),h(!1),X.user}catch(X){throw console.error("Error signing up with email:",X),X}},x=async(S,ee)=>{try{const U=await pC(xr,S,ee);return await g(U.user),h(!1),U.user}catch(U){throw console.error("Error signing in with email:",U),U}},k=async()=>{try{const S=await cC(xr);return await g(S.user),h(!0),S.user}catch(S){throw console.error("Error signing in anonymously:",S),S}},I=async()=>{try{await _C(xr),h(!1)}catch(S){throw console.error("Error signing out:",S),S}};z.useEffect(()=>xC(xr,async ee=>{n(ee),h(ee?.isAnonymous||!1),p(LS(ee)),ee&&await g(ee),l(!1)}),[]);const O={currentUser:e,isGuest:u,isAdmin:m,signInWithGoogle:y,signUpWithEmail:_,signInWithEmail:x,continueAsGuest:k,signOut:I,loading:i};return a.jsx(qy.Provider,{value:O,children:!i&&r})}function US(){const{currentUser:r}=Gs(),e=async(h,m)=>{if(r)try{const p=Re(Ae,`users/${r.uid}/stats/${h}`),g=await tt(p),_={...g.exists()?g.val():{}};Object.keys(m).forEach(x=>{typeof m[x]=="number"?_[x]=(_[x]||0)+m[x]:_[x]=m[x]}),await gt(p,_)}catch(p){console.error("Error updating stats:",p)}};return{recordMakesOrMissesGame:async h=>{const{isWinner:m,points:p}=h;await e("makesOrMisses",{gamesPlayed:1,totalPoints:p,wins:m?1:0,losses:m?0:1})},recordMatchPlayGame:async h=>{const{outcome:m}=h;await e("matchPlay",{gamesPlayed:1,wins:m==="win"?1:0,losses:m==="loss"?1:0,ties:m==="tie"?1:0})},recordKingOfTheHillGame:async h=>{const{wonHighGame:m,wonHighTotal:p}=h;await e("kingOfTheHill",{gamesPlayed:1,highGameWins:m?1:0,highTotalWins:p?1:0})},recordBracketPlayTournament:async h=>{const{isChampion:m,isRunnerUp:p}=h;await e("bracketPlay",{tournamentsPlayed:1,championships:m?1:0,runnerUps:p?1:0})}}}function FS(){const{currentUser:r}=Gs(),{recordMakesOrMissesGame:e}=US(),[n,i]=z.useState(""),[l,u]=z.useState(""),[h,m]=z.useState(!1),[p,g]=z.useState(!1),[y,_]=z.useState(!1),[x,k]=z.useState([]),[I,O]=z.useState(""),[S,ee]=z.useState(0),[U,X]=z.useState(0),[q,D]=z.useState(null),[Z,G]=z.useState(!1),[se,ue]=z.useState({}),Me=.25,Ne=T=>(T*Me).toFixed(2),ye=(T,F)=>`${T}->${F}`,Ce=()=>`${window.location.origin+window.location.pathname}?join=${n}`,Ie=T=>{let F=0,H=0;return Object.entries(se).forEach(([ce,Oe])=>{if(!Oe)return;const[ke,Ue]=ce.split("->").map(Number);Ue===T&&(F+=Oe),ke===T&&(H+=Oe)}),F-H},ve=()=>Math.random().toString(36).substring(2,8).toUpperCase();z.useEffect(()=>{const F=new URLSearchParams(window.location.search).get("join");F&&u(F.toUpperCase())},[]),z.useEffect(()=>{if(!n)return;const T=Re(Ae,`games/${n}`),F=wa(T,H=>{const ce=H.val();ce&&(k(ce.players||[]),ee(ce.currentRound||0),X(ce.activePlayerIndex||0),D(ce.activePlayerChoice||null),G(ce.gameStarted||!1),ue(ce.ledger||{}))});return()=>F()},[n]);const Se=()=>{const T=ve();i(T),m(!0),g(!0);const F=Re(Ae,`games/${T}`);gt(F,{players:[],currentRound:0,activePlayerIndex:0,activePlayerChoice:null,gameStarted:!1,ledger:{},createdAt:Date.now()})},fe=async()=>{if(!l.trim())return;const T=l.toUpperCase(),F=Re(Ae,`games/${T}`);(await tt(F)).exists()?(i(T),m(!1),g(!0)):alert("Game not found! Check the code and try again.")},V=T=>{if(!n)return;const F=Re(Ae,`games/${n}`);gt(F,{players:x,currentRound:S,activePlayerIndex:U,activePlayerChoice:q,gameStarted:Z,ledger:se,...T})},te=()=>{if(I.trim()&&!Z){const T=[...x,{id:Date.now(),name:I.trim(),score:0}];V({players:T}),O("")}},K=()=>{x.length>=2&&V({gameStarted:!0,currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},C=T=>{V({activePlayerChoice:T})},P=T=>{const F=x[U],H=x.filter((ke,Ue)=>Ue!==U),ce=x.map((ke,Ue)=>Ue===U?q===T?{...ke,score:ke.score+(x.length-1)}:ke:(q==="make"?"miss":"make")===T?{...ke,score:ke.score+1}:ke),Oe={...se};q===T?H.forEach(ke=>{const Ue=ye(ke.id,F.id);Oe[Ue]=(Oe[Ue]||0)+1}):H.forEach(ke=>{const Ue=ye(F.id,ke.id);Oe[Ue]=(Oe[Ue]||0)+1}),V({players:ce,ledger:Oe,currentRound:S<50?S+1:S,activePlayerIndex:S<50?(U+1)%x.length:U,activePlayerChoice:null})},Y=async()=>{if(!r||!L)return;const T=x.find(F=>F.name.toLowerCase()===r.displayName?.toLowerCase()||F.id===r.uid);if(T){const F=Math.max(...x.map(ce=>ce.score)),H=T.score===F;await e({isWinner:H,points:T.score})}},ie=()=>{Y(),V({players:x.map(T=>({...T,score:0})),ledger:{},currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},N=()=>{g(!1),i(""),u(""),m(!1)},A=x[U],L=S>50;return p?a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"25%",right:"25%",backgroundColor:"rgb(8, 145, 178)"}}),a.jsx("div",{className:"game-content",children:a.jsx("div",{className:"game-max-width",children:a.jsxs("div",{className:"game-card",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:a.jsx(Os,{size:20,className:"text-white sm:w-6 sm:h-6"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"info-box",children:[a.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),a.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:n})]}),a.jsx("button",{onClick:()=>_(!y),className:"btn-primary-cyan p-2",title:"Show QR code to join",children:a.jsx(aa,{size:20})})]})]}),y&&a.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),a.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:a.jsx(so,{value:Ce(),size:200,level:"H",includeMargin:!0})}),a.jsx("p",{className:"text-sm text-slate-400 mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Or manually enter code: ",a.jsx("span",{className:"font-mono font-bold",children:n})]}),a.jsx("button",{onClick:()=>_(!1),className:"mt-3 text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Hide QR Code"})]})}),Z?a.jsxs("div",{className:"space-y-6",children:[L?a.jsxs("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 rounded-lg p-6 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:" Game Over! "}),a.jsx("p",{className:"text-xl mb-6 text-slate-300",children:"50 rounds completed!"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Round ",S]}),a.jsxs("p",{className:"text-lg mt-2 text-slate-300",children:[a.jsx("span",{className:"font-bold text-purple-600",children:A?.name}),"'s turn to choose"]})]}),a.jsxs("div",{className:"bg-amber-900/30 border-2 border-amber-500 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-center mb-4 text-white",children:[A?.name,", make your choice:"]}),a.jsxs("div",{className:"flex gap-4 mb-4",children:[a.jsxs("button",{onClick:()=>C("make"),disabled:q!==null,className:`flex-1 py-4 rounded-lg font-bold text-lg transition ${q==="make"?"bg-green-500 text-white":"bg-slate-800/50 border-2 border-green-500 text-green-600 hover:bg-green-50"} disabled:opacity-50`,children:[a.jsx(im,{className:"inline mr-2",size:24}),"Make"]}),a.jsxs("button",{onClick:()=>C("miss"),disabled:q!==null,className:`flex-1 py-4 rounded-lg font-bold text-lg transition ${q==="miss"?"bg-red-500 text-white":"bg-slate-800/50 border-2 border-red-500 text-red-600 hover:bg-red-50"} disabled:opacity-50`,children:[a.jsx(Ls,{className:"inline mr-2",size:24}),"Miss"]})]}),q&&a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mt-4",children:[a.jsxs("p",{className:"text-center text-slate-300 mb-3",children:[a.jsx("span",{className:"font-bold",children:A?.name})," chose:"," ",a.jsx("span",{className:`font-bold ml-2 ${q==="make"?"text-green-600":"text-red-600"}`,children:q==="make"?"MAKES":"MISSES"})]}),a.jsxs("p",{className:"text-center text-sm text-slate-400 mb-4",children:["All other players automatically get:"," ",a.jsx("span",{className:`font-bold ml-2 ${q==="miss"?"text-green-600":"text-red-600"}`,children:q==="miss"?"MAKES":"MISSES"})]}),a.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[a.jsx("h4",{className:"font-bold text-center mb-3 text-white",children:"What was the result?"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("button",{onClick:()=>P("make"),className:"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-bold",children:[a.jsx(im,{className:"inline mr-2",size:20}),"Made It!"]}),a.jsxs("button",{onClick:()=>P("miss"),className:"flex-1 bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 transition font-bold",children:[a.jsx(Ls,{className:"inline mr-2",size:20}),"Missed!"]})]})]})]})]}),a.jsx("div",{className:"player-grid",children:x.map((T,F)=>{const H=F===U,ce=H?q:q==="make"?"miss":q==="miss"?"make":null;return a.jsxs("div",{className:`player-card ${H?"active bg-amber-900/30 border-2 border-amber-500":""}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"font-semibold text-sm sm:text-base text-white",children:[T.name," ",H&&""]}),a.jsx("span",{className:"score-badge",children:T.score})]}),ce&&a.jsx("div",{className:`text-center py-2 rounded font-semibold text-sm ${ce==="make"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:ce==="make"?"MAKES":"MISSES"})]},T.id)})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(ft,{className:"text-amber-400",size:24}),"Leaderboard"]}),a.jsx("div",{className:"space-y-2",children:[...x].sort((T,F)=>F.score-T.score).map((T,F)=>{const H=(T.score*Me).toFixed(2),ce=Ne(Ie(T.id));return a.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 px-4 py-2 rounded-lg",children:[a.jsxs("span",{className:"font-semibold",children:[F===0&&""," ",F===1&&""," ",F===2&&""," ",T.name]}),a.jsxs("span",{className:"font-bold text-purple-600 text-sm",children:[T.score," pts ($",H,")  Net $",ce]})]},T.id)})}),a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4 mt-4",children:[a.jsx("h4",{className:"font-bold text-md mb-2 text-white",children:" Owes Breakdown"}),x.length<=1?a.jsx("p",{className:"text-slate-400 text-sm",children:"Add more players to calculate owes."}):(()=>{const T={};x.forEach(H=>T[H.id]=[]),Object.entries(se).forEach(([H,ce])=>{if(!ce)return;const[Oe,ke]=H.split("->").map(Number),Ue=x.find(Vs=>Vs.id===Oe),Wr=x.find(Vs=>Vs.id===ke);!Ue||!Wr||T[ke].push({debtorId:Oe,debtorName:Ue.name,pts:ce,money:Ne(ce)})});const F=x.map(H=>{const ce=T[H.id]||[],Oe=ce.reduce((ke,Ue)=>ke+Number(Ue.money),0).toFixed(2);return{cr:H,items:ce,total:Oe}}).filter(H=>H.items.length>0);return F.length===0?a.jsx("p",{className:"text-slate-300 text-sm",children:"No debts yet."}):a.jsx("div",{className:"space-y-4",children:F.map(({cr:H,items:ce,total:Oe})=>a.jsxs("div",{className:"bg-slate-800/50 rounded-md p-3",children:[a.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Payouts to ",a.jsx("span",{className:"font-semibold",children:H.name}),":"]}),a.jsx("ul",{className:"list-disc ml-5 space-y-1",children:ce.map(ke=>a.jsxs("li",{className:"text-white text-sm",children:[ke.debtorName," owes ",H.name," $",ke.money," (",ke.pts," pts)"]},ke.debtorId))}),a.jsxs("p",{className:"text-slate-300 text-sm mt-2",children:[H.name," total to collect: ",a.jsxs("span",{className:"font-semibold",children:["$",Oe]})]})]},H.id))})})()]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:ie,className:"flex-1 btn-primary-cyan",children:"Reset Scores"}),a.jsx("button",{onClick:N,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:a.jsxs("p",{className:"text-cyan-300",children:["Share code ",a.jsx("span",{className:"font-mono font-bold text-xl",children:n})," with friends or show them the QR code!"]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:I,onChange:T=>O(T.target.value),onKeyDown:T=>T.key==="Enter"&&te(),placeholder:"Enter Bowler's Name",className:"game-input"}),a.jsxs("button",{onClick:te,className:"btn-primary-orange flex items-center justify-center gap-2",children:[a.jsx(cd,{size:20}),a.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),a.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),x.length>0&&a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Bowlers (",x.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x.map(T=>a.jsx("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow text-white",children:T.name},T.id))})]}),a.jsx("button",{onClick:K,disabled:x.length<2,className:"w-full bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl disabled:bg-gray-300 disabled:cursor-not-allowed",children:x.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(8, 145, 178)"}}),a.jsx("div",{className:"game-content flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full game-card",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:a.jsx(Os,{size:24,className:"text-white sm:w-7 sm:h-7"})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),a.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Multiplayer Bowling Predictor"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:Se,className:"w-full btn-primary-cyan flex items-center justify-center gap-2 text-lg sm:text-xl",children:[a.jsx(ud,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-700"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:l,onChange:T=>u(T.target.value.toUpperCase()),onKeyDown:T=>T.key==="Enter"&&fe(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),a.jsx("button",{onClick:fe,className:"w-full btn-primary-cyan text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function zS(){const[r,e]=z.useState(""),[n,i]=z.useState(""),[l,u]=z.useState(!1),[h,m]=z.useState(!1),[p,g]=z.useState(!1),[y,_]=z.useState({name:"",id:null}),[x,k]=z.useState({name:"",id:null}),[I,O]=z.useState(!1),[S,ee]=z.useState(1),[U,X]=z.useState({game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),[q,D]=z.useState({perGame:5,totals:5}),Z=()=>`${window.location.origin+window.location.pathname}?join=${r}`,G=()=>Math.random().toString(36).substring(2,8).toUpperCase();z.useEffect(()=>{const Y=new URLSearchParams(window.location.search).get("join");Y&&i(Y.toUpperCase())},[]),z.useEffect(()=>{if(!r)return;const P=Re(Ae,`matchplay/${r}`),Y=wa(P,ie=>{const N=ie.val();N&&(_(N.player1||{name:"",id:null}),k(N.player2||{name:"",id:null}),O(N.gameStarted||!1),ee(N.currentGame||1),X(N.scores||{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),D(N.stakes||{perGame:5,totals:5}))});return()=>Y()},[r]);const se=()=>{const P=G();e(P),u(!0),m(!0);const Y=Re(Ae,`matchplay/${P}`);gt(Y,{player1:{name:"",id:null},player2:{name:"",id:null},gameStarted:!1,currentGame:1,scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},stakes:{perGame:5,totals:5},createdAt:Date.now()})},ue=async()=>{if(!n.trim())return;const P=n.toUpperCase(),Y=Re(Ae,`matchplay/${P}`);(await tt(Y)).exists()?(e(P),u(!1),m(!0)):alert("Game not found! Check the code and try again.")},Me=async P=>{if(r)try{const Y=Re(Ae,`matchplay/${r}`),N=(await tt(Y)).val()||{};await gt(Y,{...N,...P})}catch(Y){console.error("Error updating game:",Y)}},Ne=(P,Y)=>{Me(P===1?{player1:{name:Y,id:Date.now()}}:{player2:{name:Y,id:Date.now()}})},ye=()=>{y.name&&x.name&&Me({gameStarted:!0})},Ce=async(P,Y,ie)=>{if(!r){console.log("No game code");return}console.log("Updating score:",{gameNum:P,playerNum:Y,score:ie});try{const N=Re(Ae,`matchplay/${r}`),L=(await tt(N)).val();if(console.log("Current data:",L),!L){console.error("No current data found");return}const T=JSON.parse(JSON.stringify(L.scores||{})),F=`game${P}`,H=`player${Y}`;T[F]||(T[F]={player1:null,player2:null}),T[F][H]=ie===""?null:parseInt(ie),console.log("New scores:",T),await gt(N,{...L,scores:T}),console.log("Score updated successfully")}catch(N){console.error("Error updating score:",N),alert("Error updating score: "+N.message)}},Ie=async(P,Y)=>{if(r)try{const ie=Re(Ae,`matchplay/${r}`),A=(await tt(ie)).val();if(!A)return;const L={...A.stakes};L[P]=parseFloat(Y)||0,await gt(ie,{...A,stakes:L})}catch(ie){console.error("Error updating stakes:",ie)}},ve=()=>{const P=(U?.game1?.player1||0)+(U?.game2?.player1||0)+(U?.game3?.player1||0),Y=(U?.game1?.player2||0)+(U?.game2?.player2||0)+(U?.game3?.player2||0);return{player1:P,player2:Y}},Se=()=>{let P=0,Y=0;["game1","game2","game3"].forEach(L=>{const T=U?.[L]?.player1,F=U?.[L]?.player2;T!=null&&F!==null&&F!==void 0&&(T>F?P+=q.perGame:F>T&&(Y+=q.perGame))});const ie=ve();ie.player1>ie.player2?P+=q.totals:ie.player2>ie.player1&&(Y+=q.totals);const N=P-Y,A=Y-P;return{player1:N,player2:A}},fe=()=>{Me({scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},currentGame:1})},V=()=>{m(!1),e(""),i(""),u(!1)},te=ve(),K=Se(),C=U?.game1?.player1!==null&&U?.game1?.player1!==void 0&&U?.game1?.player2!==null&&U?.game1?.player2!==void 0&&U?.game2?.player1!==null&&U?.game2?.player1!==void 0&&U?.game2?.player2!==null&&U?.game2?.player2!==void 0&&U?.game3?.player1!==null&&U?.game3?.player1!==void 0&&U?.game3?.player2!==null&&U?.game3?.player2!==void 0;return h?a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(34, 197, 94)"}}),a.jsx("div",{className:"game-content",children:a.jsx("div",{className:"game-max-width",children:a.jsxs("div",{className:"game-card",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:a.jsx(ft,{size:20,className:"text-white sm:w-6 sm:h-6"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-green",children:"Match Play"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"info-box",children:[a.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),a.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:r})]}),a.jsx("button",{onClick:()=>g(!p),className:"btn-primary-green p-2",title:"Show QR code to join",children:a.jsx(aa,{size:20})})]})]}),p&&a.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Match"}),a.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:a.jsx(so,{value:Z(),size:200,level:"H",includeMargin:!0})}),a.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),a.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",a.jsx("span",{className:"font-mono font-bold",children:r})]}),a.jsx("button",{onClick:()=>g(!1),className:"mt-3 text-green-400 hover:text-green-300 font-semibold text-sm",children:"Hide QR Code"})]})}),I?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white text-center mb-4",children:"Best of 3 Games"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:a.jsx("p",{className:"font-semibold text-lg text-green-400",children:y.name})}),a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:a.jsx("p",{className:"font-semibold text-lg text-green-400",children:x.name})})]})]}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(P=>a.jsxs("div",{className:"game-card",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 text-white",children:["Game ",P]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:y.name}),a.jsx("input",{type:"number",value:U[`game${P}`]?.player1??"",onChange:Y=>Ce(P,1,Y.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:x.name}),a.jsx("input",{type:"number",value:U[`game${P}`]?.player2??"",onChange:Y=>Ce(P,2,Y.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]})]}),U[`game${P}`]?.player1!==null&&U[`game${P}`]?.player1!==void 0&&U[`game${P}`]?.player2!==null&&U[`game${P}`]?.player2!==void 0&&a.jsx("div",{className:"mt-3 text-center",children:U[`game${P}`].player1>U[`game${P}`].player2?a.jsxs("p",{className:"text-green-400 font-semibold",children:[" ",y.name," wins (+$",q.perGame,")"]}):U[`game${P}`].player2>U[`game${P}`].player1?a.jsxs("p",{className:"text-green-400 font-semibold",children:[" ",x.name," wins (+$",q.perGame,")"]}):a.jsx("p",{className:"text-primary font-semibold",children:"Tie"})})]},P))}),a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-green-900/30 rounded-lg p-4 border-2 border-green-600",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(ft,{className:"text-green-400",size:24}),"Totals"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[a.jsx("p",{className:"text-sm text-primary mb-1",children:y.name}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:te.player1})]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[a.jsx("p",{className:"text-sm text-primary mb-1",children:x.name}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:te.player2})]})]}),C&&a.jsx("div",{className:"mt-3 text-center",children:te.player1>te.player2?a.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:[" ",y.name," wins totals (+$",q.totals,")"]}):te.player2>te.player1?a.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:[" ",x.name," wins totals (+$",q.totals,")"]}):a.jsx("p",{className:"text-primary font-semibold text-lg",children:"Totals tied"})})]}),C&&a.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(Gi,{className:"text-green-400",size:24}),"Final Payout"]}),a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:K.player1>0?a.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[y.name," wins $",Math.abs(K.player1).toFixed(2)]}):K.player2>0?a.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[x.name," wins $",Math.abs(K.player2).toFixed(2)]}):a.jsx("p",{className:"text-center text-xl font-bold text-primary",children:"Match tied - No payout"})})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:fe,className:"flex-1 btn-primary-green",children:"Reset Scores"}),a.jsx("button",{onClick:V,className:"flex-1 btn-secondary",children:"Leave Match"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:a.jsxs("p",{className:"text-green-300",children:["Share code ",a.jsx("span",{className:"font-mono font-bold text-xl",children:r})," with your opponent!"]})}),a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(Gi,{className:"text-green-400",size:20}),"Stakes"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Per Game"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"mr-2 text-primary",children:"$"}),a.jsx("input",{type:"number",value:q.perGame,onChange:P=>Ie("perGame",P.target.value),className:"game-input",min:"0",step:"0.5"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Totals"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"mr-2 text-primary",children:"$"}),a.jsx("input",{type:"number",value:q.totals,onChange:P=>Ie("totals",P.target.value),className:"game-input",min:"0",step:"0.5"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 1"}),a.jsx("input",{type:"text",value:y.name,onChange:P=>Ne(1,P.target.value),placeholder:"Enter Player 1's Name",className:"w-full game-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 2"}),a.jsx("input",{type:"text",value:x.name,onChange:P=>Ne(2,P.target.value),placeholder:"Enter Player 2's Name",className:"w-full game-input"})]})]}),a.jsx("button",{onClick:ye,disabled:!y.name||!x.name,className:"w-full btn-primary-green text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:!y.name||!x.name?"Enter both player names":"Start Match"})]})]})})})]}):a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(34, 197, 94)"}}),a.jsx("div",{className:"game-content flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full game-card",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:a.jsx(ft,{size:24,className:"text-white sm:w-7 sm:h-7"})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-green",children:"Match Play"})]}),a.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Head-to-Head Bowling Match"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:se,className:"w-full btn-primary-green flex items-center justify-center gap-2 text-lg sm:text-xl",children:[a.jsx(ud,{size:24}),"Create New Match"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-700"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:n,onChange:P=>i(P.target.value.toUpperCase()),onKeyDown:P=>P.key==="Enter"&&ue(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),a.jsx("button",{onClick:ue,className:"w-full btn-primary-green text-lg sm:text-xl",children:"Join Match"})]})]})]})})]})}function HS(){const[r,e]=z.useState(""),[n,i]=z.useState(""),[l,u]=z.useState(!1),[h,m]=z.useState(!1),[p,g]=z.useState(!1),[y,_]=z.useState([]),[x,k]=z.useState(""),[I,O]=z.useState(!1),[S,ee]=z.useState(1),[U,X]=z.useState({game1:{},game2:{},game3:{}}),[q]=z.useState(5),[D]=z.useState(1),[Z]=z.useState(2),G=()=>`${window.location.origin+window.location.pathname}?join=${r}`,se=()=>Math.random().toString(36).substring(2,8).toUpperCase();z.useEffect(()=>{const A=new URLSearchParams(window.location.search).get("join");A&&i(A.toUpperCase())},[]),z.useEffect(()=>{if(!r)return;const N=Re(Ae,`kingofthehill/${r}`),A=wa(N,L=>{const T=L.val();T&&(_(T.players||[]),O(T.gameStarted||!1),ee(T.currentGame||1),X(T.scores||{game1:{},game2:{},game3:{}}))});return()=>A()},[r]);const ue=()=>{const N=se();e(N),u(!0),m(!0);const A=Re(Ae,`kingofthehill/${N}`);gt(A,{players:[],gameStarted:!1,currentGame:1,scores:{game1:{},game2:{},game3:{}},createdAt:Date.now()})},Me=async()=>{if(!n.trim())return;const N=n.toUpperCase(),A=Re(Ae,`kingofthehill/${N}`);(await tt(A)).exists()?(e(N),u(!1),m(!0)):alert("Game not found! Check the code and try again.")},Ne=async N=>{if(r)try{const A=Re(Ae,`kingofthehill/${r}`),T=(await tt(A)).val()||{};await gt(A,{...T,...N})}catch(A){console.error("Error updating game:",A)}},ye=()=>{if(x.trim()&&!I){const N=[...y,{id:Date.now(),name:x.trim()}];Ne({players:N}),k("")}},Ce=()=>{y.length>=2&&Ne({gameStarted:!0,currentGame:1})},Ie=async(N,A,L)=>{if(!r){console.log("No game code");return}console.log("Updating score:",{gameNum:N,playerId:A,score:L});try{const T=Re(Ae,`kingofthehill/${r}`),H=(await tt(T)).val();if(console.log("Current data:",H),!H){console.error("No current data found");return}const ce=JSON.parse(JSON.stringify(H.scores||{})),Oe=`game${N}`;ce[Oe]||(ce[Oe]={}),ce[Oe][A]=L===""?null:parseInt(L),console.log("New scores:",ce),await gt(T,{...H,scores:ce}),console.log("Score updated successfully")}catch(T){console.error("Error updating score:",T),alert("Error updating score: "+T.message)}},ve=(N,A)=>U?.[`game${N}`]?.[A]??"",Se=N=>{const A=U?.[`game${N}`]||{},L=Object.entries(A).filter(([H,ce])=>ce!=null).map(([H,ce])=>({playerId:parseInt(H),score:ce}));if(L.length===0)return null;const T=Math.max(...L.map(H=>H.score)),F=L.filter(H=>H.score===T);return{score:T,playerIds:F.map(H=>H.playerId)}},fe=()=>{const N={};return y.forEach(A=>{const L=U?.game1?.[A.id]||0,T=U?.game2?.[A.id]||0,F=U?.game3?.[A.id]||0;N[A.id]=L+T+F}),N},V=()=>{const N=fe(),A=Object.entries(N).filter(([F,H])=>H>0).map(([F,H])=>({playerId:parseInt(F),total:H}));if(A.length===0)return null;const L=Math.max(...A.map(F=>F.total)),T=A.filter(F=>F.total===L);return{total:L,playerIds:T.map(F=>F.playerId)}},te=()=>{const N={};y.forEach(H=>{N[H.id]=-q});const A=Se(1);if(A&&A.playerIds.length>0){const H=y.length*D/A.playerIds.length;A.playerIds.forEach(ce=>{N[ce]+=H})}const L=Se(2);if(L&&L.playerIds.length>0){const H=y.length*D/L.playerIds.length;L.playerIds.forEach(ce=>{N[ce]+=H})}const T=Se(3);if(T&&T.playerIds.length>0){const H=y.length*D/T.playerIds.length;T.playerIds.forEach(ce=>{N[ce]+=H})}const F=V();if(F&&F.playerIds.length>0){const H=y.length*Z/F.playerIds.length;F.playerIds.forEach(ce=>{N[ce]+=H})}return N},K=()=>{Ne({scores:{game1:{},game2:{},game3:{}},currentGame:1})},C=()=>{m(!1),e(""),i(""),u(!1)},P=fe(),Y=te(),ie=y.length>0&&y.every(N=>U?.game1?.[N.id]!==null&&U?.game1?.[N.id]!==void 0&&U?.game2?.[N.id]!==null&&U?.game2?.[N.id]!==void 0&&U?.game3?.[N.id]!==null&&U?.game3?.[N.id]!==void 0);return h?a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(168, 85, 247)"}}),a.jsx("div",{className:"game-content",children:a.jsx("div",{className:"game-max-width",children:a.jsxs("div",{className:"game-card",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:a.jsx(Cn,{size:20,className:"text-white sm:w-6 sm:h-6"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-purple",children:"King of the Hill"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"info-box",children:[a.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),a.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:r})]}),a.jsx("button",{onClick:()=>g(!p),className:"btn-primary-purple p-2",title:"Show QR code to join",children:a.jsx(aa,{size:20})})]})]}),p&&a.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),a.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:a.jsx(so,{value:G(),size:200,level:"H",includeMargin:!0})}),a.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),a.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",a.jsx("span",{className:"font-mono font-bold",children:r})]}),a.jsx("button",{onClick:()=>g(!1),className:"mt-3 text-purple-400 hover:text-purple-300 font-semibold text-sm",children:"Hide QR Code"})]})}),I?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white text-center mb-3",children:"3-Game Series"}),a.jsxs("p",{className:"text-center text-sm text-primary",children:["High score each game wins $",D," per player"]}),a.jsxs("p",{className:"text-center text-sm text-primary",children:["High total wins $",Z," per player"]})]}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(N=>{const A=Se(N);return a.jsxs("div",{className:"game-card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-bold text-lg text-white",children:["Game ",N]}),A&&a.jsxs("span",{className:"text-sm text-purple-400 font-semibold flex items-center gap-1",children:[a.jsx(Cn,{size:16}),"High: ",A.score]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(L=>{const T=A&&A.playerIds.includes(L.id);return a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-primary mb-1",children:L.name}),a.jsx("input",{type:"number",value:ve(N,L.id),onChange:F=>Ie(N,L.id,F.target.value),placeholder:"Score",className:`w-full game-input text-center text-lg font-bold ${T?"border-purple-400 bg-purple-900/30 text-purple-300":""}`,min:"0",max:"300"}),T&&a.jsx("p",{className:"text-xs text-purple-400 font-semibold mt-1 text-center",children:" Winner"})]},L.id)})})]},N)})}),a.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4 border-2 border-purple-600",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(ft,{className:"text-purple-400",size:24}),"Total Pins"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(N=>{const A=V(),L=A&&A.playerIds.includes(N.id);return a.jsxs("div",{className:`bg-slate-800/50 rounded-lg p-3 border ${L?"ring-2 ring-purple-400 border-purple-500":"border-slate-700"}`,children:[a.jsx("p",{className:"text-xs text-primary mb-1",children:N.name}),a.jsxs("p",{className:`text-2xl font-bold ${L?"text-purple-400":"text-white"}`,children:[P[N.id]||0,L&&" "]})]},N.id)})})]}),ie&&a.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[a.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(Gi,{className:"text-green-400",size:24}),"Final Payouts"]}),a.jsx("div",{className:"space-y-2",children:y.sort((N,A)=>Y[A.id]-Y[N.id]).map((N,A)=>{const L=Y[N.id],T=L>0,F=L<0;return a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 flex justify-between items-center border border-slate-700",children:[a.jsxs("span",{className:"font-semibold text-white",children:[A===0&&L>0&&" ",N.name]}),a.jsxs("span",{className:`font-bold text-lg ${T?"text-green-400":F?"text-red-400":"text-primary"}`,children:[T?"+":"",L>=0?"$"+L.toFixed(2):"-$"+Math.abs(L).toFixed(2)]})]},N.id)})})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:K,className:"flex-1 btn-primary-purple",children:"Reset Scores"}),a.jsx("button",{onClick:C,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(Gi,{className:"text-green-400",size:20}),"Prize Structure"]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"Entry Fee:"}),a.jsxs("span",{className:"font-bold text-red-400",children:["$",q]})]}),a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"High Game 1:"}),a.jsxs("span",{className:"font-bold text-green-400",children:["$",D," per player"]})]}),a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"High Game 2:"}),a.jsxs("span",{className:"font-bold text-green-400",children:["$",D," per player"]})]}),a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"High Game 3:"}),a.jsxs("span",{className:"font-bold text-green-400",children:["$",D," per player"]})]}),a.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[a.jsx("span",{className:"text-primary font-semibold",children:"High Totals:"}),a.jsxs("span",{className:"font-bold text-purple-400",children:["$",Z," per player"]})]})]})]}),a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:a.jsxs("p",{className:"text-purple-300",children:["Share code ",a.jsx("span",{className:"font-mono font-bold text-xl",children:r})," with friends or show them the QR code!"]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:N=>k(N.target.value),onKeyDown:N=>N.key==="Enter"&&ye(),placeholder:"Enter Player's Name",className:"game-input"}),a.jsxs("button",{onClick:ye,className:"btn-primary-purple flex items-center justify-center gap-2",children:[a.jsx(cd,{size:20}),a.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),a.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),y.length>0&&a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",y.length,")"]}),a.jsx("div",{className:"space-y-2",children:y.map(N=>a.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow flex justify-between items-center border border-slate-700",children:[a.jsx("span",{className:"text-white",children:N.name}),a.jsxs("span",{className:"text-sm text-red-400 font-semibold",children:["$",q," in"]})]},N.id))}),a.jsx("div",{className:"mt-3 bg-purple-900/30 border border-purple-700 rounded p-2 text-center",children:a.jsxs("p",{className:"text-sm text-primary",children:["Prize Pool: ",a.jsxs("span",{className:"font-bold text-green-400",children:["$",y.length*q]})]})})]}),a.jsx("button",{onClick:Ce,disabled:y.length<2,className:"w-full btn-primary-purple text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:y.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(168, 85, 247)"}}),a.jsx("div",{className:"game-content flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full game-card",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:a.jsx(Cn,{size:24,className:"text-white sm:w-7 sm:h-7"})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-purple",children:"King of the Hill"})]}),a.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Battle for the highest scores!"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:ue,className:"w-full btn-primary-purple flex items-center justify-center gap-2 text-lg sm:text-xl",children:[a.jsx(Cn,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-700"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:n,onChange:N=>i(N.target.value.toUpperCase()),onKeyDown:N=>N.key==="Enter"&&Me(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),a.jsx("button",{onClick:Me,className:"w-full btn-primary-purple text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function $S(){const[r,e]=z.useState(""),[n,i]=z.useState(""),[l,u]=z.useState(!1),[h,m]=z.useState(!1),[p,g]=z.useState(!1),[y,_]=z.useState([]),[x,k]=z.useState(""),[I,O]=z.useState(!1),[S,ee]=z.useState({quarterfinals:[],semifinals:[],finals:null,champion:null}),[U,X]=z.useState({}),[q]=z.useState(5),[D,Z]=z.useState(0),[G]=z.useState(10),se=()=>`${window.location.origin+window.location.pathname}?join=${r}`,ue=()=>Math.random().toString(36).substring(2,8).toUpperCase();z.useEffect(()=>{const A=new URLSearchParams(window.location.search).get("join");A&&i(A.toUpperCase())},[]),z.useEffect(()=>{const A=y.length*q-G;Z(A)},[y.length,q,G]),z.useEffect(()=>{if(!r)return;const N=Re(Ae,`bracketplay/${r}`),A=wa(N,L=>{const T=L.val();T&&(_(T.players||[]),O(T.gameStarted||!1),ee(T.matches||{quarterfinals:[],semifinals:[],finals:null,champion:null}),X(T.scores||{}))});return()=>A()},[r]);const Me=()=>{const N=ue();e(N),u(!0),m(!0);const A=Re(Ae,`bracketplay/${N}`);gt(A,{players:[],gameStarted:!1,matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},createdAt:Date.now()})},Ne=async()=>{if(!n.trim())return;const N=n.toUpperCase(),A=Re(Ae,`bracketplay/${N}`);(await tt(A)).exists()?(e(N),u(!1),m(!0)):alert("Game not found! Check the code and try again.")},ye=async N=>{if(r)try{const A=Re(Ae,`bracketplay/${r}`),T=(await tt(A)).val()||{};await gt(A,{...T,...N})}catch(A){console.error("Error updating game:",A)}},Ce=async()=>{if(x.trim()&&!I&&y.length<8){const N=[...y,{id:Date.now(),name:x.trim()}];await ye({players:N}),k("")}},Ie=N=>{const A=[...N];for(let L=A.length-1;L>0;L--){const T=Math.floor(Math.random()*(L+1));[A[L],A[T]]=[A[T],A[L]]}return A},ve=async()=>{if(y.length!==8){console.error("Need exactly 8 players to start tournament");return}try{const N=Ie(y);if(console.log("Shuffled players:",N),!N.every(L=>L&&L.id&&L.name)){console.error("Invalid player data:",N),alert("Error: Invalid player data. Please refresh and try again.");return}const A=[{id:"qf1",player1:N[0],player2:N[1],winner:null},{id:"qf2",player1:N[2],player2:N[3],winner:null},{id:"qf3",player1:N[4],player2:N[5],winner:null},{id:"qf4",player1:N[6],player2:N[7],winner:null}];console.log("Created quarterfinals:",A),await ye({gameStarted:!0,matches:{quarterfinals:A,semifinals:[],finals:null,champion:null},scores:{}}),console.log("Tournament started successfully")}catch(N){console.error("Error starting tournament:",N),alert("Failed to start tournament. Check console for details.")}},Se=async(N,A,L)=>{const T={...U},F=`${N}_${A}`;if(L==="")T[F]="";else{const H=parseInt(L,10);if(!isNaN(H)&&H>=0&&H<=300)T[F]=H;else return}X(T);try{await ye({scores:T})}catch(H){console.error("Failed to save score:",H)}},fe=(N,A)=>{const L=`${N}_${A}`;return U[L]??""},V=(N,A,L)=>{const T=fe(N,A),F=fe(N,L),H=typeof T=="number"?T:parseInt(T,10),ce=typeof F=="number"?F:parseInt(F,10),Oe=!isNaN(H)&&H>=0,ke=!isNaN(ce)&&ce>=0;return console.log(`isMatchComplete(${N}): p1Score=${T}, p2Score=${F}, p1Valid=${Oe}, p2Valid=${ke}, result=${Oe&&ke}`),Oe&&ke},te=async N=>{const A={...S};if(N==="quarterfinals")A.quarterfinals=A.quarterfinals.map(L=>{const T=fe(L.id,L.player1.id),F=fe(L.id,L.player2.id),H=T>F?L.player1:L.player2;return{...L,winner:H}}),A.semifinals=[{id:"sf1",player1:A.quarterfinals[0].winner,player2:A.quarterfinals[1].winner,winner:null},{id:"sf2",player1:A.quarterfinals[2].winner,player2:A.quarterfinals[3].winner,winner:null}];else if(N==="semifinals")A.semifinals=A.semifinals.map(L=>{const T=fe(L.id,L.player1.id),F=fe(L.id,L.player2.id),H=T>F?L.player1:L.player2;return{...L,winner:H}}),A.finals={id:"final",player1:A.semifinals[0].winner,player2:A.semifinals[1].winner,winner:null};else if(N==="finals"){const L=A.finals,T=fe(L.id,L.player1.id),F=fe(L.id,L.player2.id),H=T>F?L.player1:L.player2;A.finals.winner=H,A.champion=H}await ye({matches:A})},K=N=>!N||N.length===0?!1:N.every(A=>A&&A.player1&&A.player2&&V(A.id,A.player1.id,A.player2.id)),C=async()=>{await ye({matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},gameStarted:!1})},P=()=>{m(!1),e(""),i(""),u(!1)},Y=(N,A)=>{if(!N||!N.player1||!N.player2)return null;const L=fe(N.id,N.player1.id),T=fe(N.id,N.player2.id),F=V(N.id,N.player1.id,N.player2.id),H=N.winner!==null;console.log(`${N.id}: p1Score=${L} (${typeof L}), p2Score=${T} (${typeof T}), isComplete=${F}, hasWinner=${H}`);const ce=F&&L>T,Oe=F&&T>L;return a.jsxs("div",{className:"game-card",children:[a.jsx("h4",{className:"font-bold text-sm text-center mb-3 text-orange-400",children:N.id.toUpperCase()}),a.jsxs("div",{className:`mb-3 p-3 rounded-lg ${H&&N.winner?.id===N.player1.id?"bg-green-900/30 border-2 border-green-500":ce&&!H?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-bold text-sm text-white",children:N.player1.name||"Player 1"}),H&&N.winner?.id===N.player1.id&&a.jsx(ft,{className:"text-orange-400",size:16}),!H&&ce&&a.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),a.jsx("input",{type:"text",name:`${N.id}_player1_score`,inputMode:"numeric",pattern:"[0-9]*",value:L===""?"":L,onChange:ke=>{const Ue=ke.target.value;(Ue===""||/^\d+$/.test(Ue))&&Se(N.id,N.player1.id,Ue)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),a.jsx("div",{className:"text-center text-xs font-bold text-secondary mb-3",children:"VS"}),a.jsxs("div",{className:`mb-3 p-3 rounded-lg ${H&&N.winner?.id===N.player2.id?"bg-green-900/30 border-2 border-green-500":Oe&&!H?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-bold text-sm text-white",children:N.player2.name||"Player 2"}),H&&N.winner?.id===N.player2.id&&a.jsx(ft,{className:"text-orange-400",size:16}),!H&&Oe&&a.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),a.jsx("input",{type:"text",name:`${N.id}_player2_score`,inputMode:"numeric",pattern:"[0-9]*",value:T===""?"":T,onChange:ke=>{const Ue=ke.target.value;(Ue===""||/^\d+$/.test(Ue))&&Se(N.id,N.player2.id,Ue)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),!H&&!F&&a.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:a.jsx("p",{className:"text-xs text-secondary",children:"Enter both scores"})}),!H&&F&&a.jsx("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-2 text-center",children:a.jsxs("p",{className:"text-xs font-bold text-green-400",children:[" Winner: ",L>T?N.player1.name:N.player2.name]})}),H&&N.winner&&a.jsx("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-2 text-center",children:a.jsxs("p",{className:"text-xs font-bold text-green-400",children:[" ",N.winner.name," advances to next round!"]})})]})},ie=S.finals&&S.finals.winner?S.finals.winner.id===S.finals.player1.id?S.finals.player2:S.finals.player1:null;return h?a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(249, 115, 22)"}}),a.jsx("div",{className:"game-content",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"game-card",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:a.jsx(kr,{size:20,className:"text-white sm:w-6 sm:h-6"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-orange",children:"Bracket Play"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"info-box",children:[a.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),a.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:r})]}),a.jsx("button",{onClick:()=>g(!p),className:"btn-primary-orange p-2",title:"Show QR code to join",children:a.jsx(aa,{size:20})})]})]}),p&&a.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Tournament"}),a.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:a.jsx(so,{value:se(),size:200,level:"H",includeMargin:!0})}),a.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),a.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",a.jsx("span",{className:"font-mono font-bold",children:r})]}),a.jsx("button",{onClick:()=>g(!1),className:"mt-3 text-orange-400 hover:text-orange-300 font-semibold text-sm",children:"Hide QR Code"})]})}),I?a.jsxs("div",{className:"space-y-6",children:[S.champion&&a.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 rounded-lg p-6 border-2 border-orange-500",children:[a.jsxs("h2",{className:"text-3xl font-bold text-center mb-4 flex items-center justify-center gap-2 text-white",children:[a.jsx(ft,{className:"text-orange-400",size:40}),"Tournament Champion!"]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 mb-4 border border-slate-700",children:[a.jsxs("p",{className:"text-center text-2xl font-bold text-green-400 mb-2",children:[" ",S.champion.name]}),a.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:["Prize: $",D]})]}),ie&&a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[a.jsxs("p",{className:"text-center text-lg font-bold text-primary",children:[" Runner-up: ",ie.name]}),a.jsxs("p",{className:"text-center text-md font-bold text-primary",children:["Prize: $",G]})]})]}),S?.quarterfinals&&S.quarterfinals.length>0&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Quarterfinals"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.quarterfinals.filter(N=>N&&N.id&&N.player1&&N.player2).map(N=>a.jsx("div",{children:Y(N)},N.id))}),(!S.semifinals||S.semifinals.length===0)&&K(S.quarterfinals)&&a.jsx("button",{onClick:()=>te("quarterfinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:" Advance 4 Winners to Semifinals"})]}),S?.semifinals&&S.semifinals.length>0&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Semifinals"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:S.semifinals.filter(N=>N&&N.id&&N.player1&&N.player2).map(N=>a.jsx("div",{children:Y(N)},N.id))}),!S.finals&&K(S.semifinals)&&a.jsx("button",{onClick:()=>te("semifinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:" Advance 2 Winners to Finals"})]}),S.finals&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4 text-white text-center",children:" Championship Finals "}),a.jsx("div",{className:"max-w-md mx-auto",children:Y(S.finals)}),!S.finals.winner&&V(S.finals.id,S.finals.player1.id,S.finals.player2.id)&&a.jsx("button",{onClick:()=>te("finals"),className:"w-full mt-6 bg-orange-500 text-white py-4 rounded-lg hover:bg-orange-600 transition font-bold text-xl shadow-lg",children:" Crown the Champion!"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:C,className:"flex-1 btn-primary-orange",children:"Reset Tournament"}),a.jsx("button",{onClick:P,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[a.jsx(Gi,{className:"text-green-400",size:20}),"Prize Structure"]}),a.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"Entry Fee:"}),a.jsxs("span",{className:"font-bold text-red-400",children:["$",q]})]}),a.jsxs("p",{className:"flex justify-between",children:[a.jsx("span",{className:"text-primary",children:"2nd Place:"}),a.jsxs("span",{className:"font-bold text-primary",children:["$",G]})]}),a.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[a.jsx("span",{className:"text-primary font-semibold",children:"1st Place:"}),a.jsxs("span",{className:"font-bold text-green-400",children:["$",D]})]}),a.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Total Prize Pool: $",y.length*q]})]})]}),a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-lg mb-2 text-white",children:"Tournament Format"}),a.jsxs("ul",{className:"text-sm text-primary space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{className:"text-white",children:"Quarterfinals (Game 1):"})," 8 players compete  4 winners advance"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{className:"text-white",children:"Semifinals (Game 2):"})," 4 players compete  2 winners advance"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{className:"text-white",children:"Finals (Game 3):"})," 2 players compete  Champion crowned"]})]})]}),a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:a.jsxs("p",{className:"text-orange-300",children:["Share code ",a.jsx("span",{className:"font-mono font-bold text-xl",children:r})," with 7 friends!"]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:N=>k(N.target.value),onKeyDown:N=>N.key==="Enter"&&Ce(),placeholder:"Enter Player's Name",className:"game-input",disabled:y.length>=8}),a.jsxs("button",{onClick:Ce,disabled:y.length>=8,className:"btn-primary-orange flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:[a.jsx(cd,{size:20}),a.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),a.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),y.length>0&&a.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",y.length,"/8)"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map((N,A)=>a.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow border border-slate-700 text-white",children:[A+1,". ",N.name]},N.id))})]}),a.jsxs("button",{onClick:ve,disabled:y.length!==8,className:"w-full btn-primary-orange text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(d_,{size:20,className:"sm:w-6 sm:h-6"}),y.length!==8?`Need ${8-y.length} more player${8-y.length!==1?"s":""}`:"Start Tournament (Randomize Bracket)"]})]})]})})})]}):a.jsxs("div",{className:"game-container",children:[a.jsx("div",{className:"game-background"}),a.jsx("div",{className:"game-grid-overlay"}),a.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(249, 115, 22)"}}),a.jsx("div",{className:"game-content flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full game-card",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:a.jsx(kr,{size:24,className:"text-white sm:w-7 sm:h-7"})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-orange",children:"Bracket Play"})]}),a.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"8-Player Single Elimination Tournament"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:Me,className:"w-full btn-primary-orange flex items-center justify-center gap-2 text-lg sm:text-xl",children:[a.jsx(ft,{size:20,className:"sm:w-6 sm:h-6"}),"Create Tournament"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-700"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:n,onChange:N=>i(N.target.value.toUpperCase()),onKeyDown:N=>N.key==="Enter"&&Ne(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),a.jsx("button",{onClick:Ne,className:"w-full btn-primary-orange text-lg sm:text-xl",children:"Join Tournament"})]})]})]})})]})}function WS({isOpen:r,onClose:e}){const{signInWithGoogle:n,signUpWithEmail:i,signInWithEmail:l,continueAsGuest:u}=Gs(),[h,m]=z.useState(!1),[p,g]=z.useState(null),[y,_]=z.useState("signin"),[x,k]=z.useState(""),[I,O]=z.useState(""),[S,ee]=z.useState("");if(!r)return null;const U=()=>{k(""),O(""),ee(""),g(null)},X=async()=>{m(!0),g(null);try{await n(),e(),U()}catch(se){g(se.message)}finally{m(!1)}},q=async se=>{se.preventDefault(),m(!0),g(null);try{await l(x,I),e(),U()}catch(ue){g(ue.code==="auth/user-not-found"?"No account found with this email":ue.code==="auth/wrong-password"?"Incorrect password":ue.code==="auth/invalid-email"?"Invalid email address":ue.message)}finally{m(!1)}},D=async se=>{se.preventDefault(),m(!0),g(null);try{await i(x,I,S),e(),U()}catch(ue){g(ue.code==="auth/email-already-in-use"?"Email already in use":ue.code==="auth/weak-password"?"Password should be at least 6 characters":ue.code==="auth/invalid-email"?"Invalid email address":ue.message)}finally{m(!1)}},Z=async()=>{m(!0),g(null);try{await u(),e(),U()}catch(se){g(se.message)}finally{m(!1)}},G=se=>{_(se),g(null)};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-md w-full p-8",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition",children:a.jsx(Ls,{size:24})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:y==="signup"?"Create Account":"Welcome Back!"}),a.jsx("p",{className:"text-slate-400",children:y==="email"||y==="signup"?"Sign in to track your stats":"Sign in to track your stats and compete"})]}),p&&a.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 text-sm",children:p}),y==="signin"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:X,disabled:h,className:"w-full bg-white text-gray-800 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsxs("button",{onClick:()=>G("email"),disabled:h,className:"w-full bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[a.jsx(Nu,{size:20}),"Continue with Email"]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-700"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-slate-900 text-slate-400",children:"OR"})})]}),a.jsxs("button",{onClick:Z,disabled:h,className:"w-full bg-slate-800 text-slate-300 font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[a.jsx(Dl,{size:20}),"Continue as Guest"]}),a.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"Guest accounts won't save your stats across devices"})]}),y==="email"&&a.jsxs("form",{onSubmit:q,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),a.jsx("input",{type:"email",value:x,onChange:se=>k(se.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(om,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),a.jsx("input",{type:"password",value:I,onChange:se=>O(se.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:""})]})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Signing In...":"Sign In"}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>G("signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Don't have an account? Sign up"})}),a.jsx("button",{type:"button",onClick:()=>G("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:" Back to other options"})]}),y==="signup"&&a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Display Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Dl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),a.jsx("input",{type:"text",value:S,onChange:se=>ee(se.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"Your Name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),a.jsx("input",{type:"email",value:x,onChange:se=>k(se.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(om,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),a.jsx("input",{type:"password",value:I,onChange:se=>O(se.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:""})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creating Account...":"Create Account"}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>G("email"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Already have an account? Sign in"})}),a.jsx("button",{type:"button",onClick:()=>G("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:" Back to other options"})]})]})]})}function BS({isOpen:r,onClose:e}){const{currentUser:n,isGuest:i}=Gs(),[l,u]=z.useState(null),[h,m]=z.useState(!0);z.useEffect(()=>{r&&n&&p()},[r,n]);const p=async()=>{if(n){m(!0);try{const g=Re(Ae,`users/${n.uid}/stats`),y=await tt(g);y.exists()?u(y.val()):u({makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}})}catch(g){console.error("Error fetching stats:",g)}finally{m(!1)}}};return r?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-4xl w-full p-8 max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition",children:a.jsx(Ls,{size:24})}),a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n?.photoURL?a.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer",onError:g=>{g.target.style.display="none",g.target.nextSibling.style.display="flex"}}):null,a.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-2xl font-bold ${n?.photoURL?"hidden":"flex"}`,children:n?.displayName?.[0]||"G"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white",children:n?.displayName||"Guest User"}),i&&a.jsx("p",{className:"text-amber-400 text-sm mt-1",children:"Guest Account - Sign in to save stats permanently"})]})]}),h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-slate-400 mt-4",children:"Loading your stats..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:a.jsx(Os,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Makes or Misses"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:l?.makesOrMisses?.gamesPlayed||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:l?.makesOrMisses?.wins||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:l?.makesOrMisses?.losses||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:l?.makesOrMisses?.totalPoints||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Total Points"})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:a.jsx(ft,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Match Play"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:l?.matchPlay?.gamesPlayed||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Matches Played"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:l?.matchPlay?.wins||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:l?.matchPlay?.losses||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:l?.matchPlay?.ties||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Ties"})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:a.jsx(Cn,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"King of the Hill"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-400",children:l?.kingOfTheHill?.gamesPlayed||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:l?.kingOfTheHill?.highGameWins||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"High Game Wins"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-400",children:l?.kingOfTheHill?.highTotalWins||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"High Total Wins"})]})]})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:a.jsx(kr,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Bracket Play"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-violet-400",children:l?.bracketPlay?.tournamentsPlayed||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Tournaments"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:l?.bracketPlay?.championships||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Championships"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-400",children:l?.bracketPlay?.runnerUps||0}),a.jsx("div",{className:"text-sm text-slate-400",children:"Runner-Ups"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-700 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(wg,{size:24,className:"text-cyan-400"}),a.jsx("h3",{className:"text-xl font-bold text-white",children:"Overall Performance"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:(l?.makesOrMisses?.gamesPlayed||0)+(l?.matchPlay?.gamesPlayed||0)+(l?.kingOfTheHill?.gamesPlayed||0)+(l?.bracketPlay?.tournamentsPlayed||0)}),a.jsx("div",{className:"text-sm text-slate-400",children:"Total Games Played"})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400",children:(l?.makesOrMisses?.wins||0)+(l?.matchPlay?.wins||0)+(l?.kingOfTheHill?.highGameWins||0)+(l?.bracketPlay?.championships||0)}),a.jsx("div",{className:"text-sm text-slate-400",children:"Total Wins"})]})]})]})]})]})]}):null}function GS({isOpen:r,onClose:e}){const{isAdmin:n}=Gs(),[i,l]=z.useState(!0),[u,h]=z.useState([]),[m,p]=z.useState({makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]}),[g,y]=z.useState({totalUsers:0,totalGames:0,guestUsers:0,authenticatedUsers:0}),[_,x]=z.useState("overview"),[k,I]=z.useState(null),[O,S]=z.useState(null);z.useEffect(()=>{r&&n&&ee()},[r,n]);const ee=async()=>{l(!0);try{const D=Re(Ae,"users"),Z=await tt(D),G=Z.exists()?Z.val():{},se=Object.entries(G).map(([K,C])=>({uid:K,...C}));h(se);const ue={makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]},Me=Re(Ae,"games"),Ne=await tt(Me);Ne.exists()&&(ue.makesOrMisses=Object.entries(Ne.val()).map(([K,C])=>({code:K,...C})));const ye=Re(Ae,"matchplay"),Ce=await tt(ye);Ce.exists()&&(ue.matchPlay=Object.entries(Ce.val()).map(([K,C])=>({code:K,...C})));const Ie=Re(Ae,"kingofthehill"),ve=await tt(Ie);ve.exists()&&(ue.kingOfTheHill=Object.entries(ve.val()).map(([K,C])=>({code:K,...C})));const Se=Re(Ae,"bracketplay"),fe=await tt(Se);fe.exists()&&(ue.bracketPlay=Object.entries(fe.val()).map(([K,C])=>({code:K,...C}))),p(ue);const V=se.filter(K=>K.isAnonymous).length,te=ue.makesOrMisses.length+ue.matchPlay.length+ue.kingOfTheHill.length+ue.bracketPlay.length;y({totalUsers:se.length,totalGames:te,guestUsers:V,authenticatedUsers:se.length-V})}catch(D){console.error("Error fetching admin data:",D)}finally{l(!1)}},U=async D=>{try{await eg(Re(Ae,`users/${D}`)),await ee(),S(null)}catch(Z){console.error("Error deleting user:",Z),alert("Failed to delete user")}},X=async(D,Z=null)=>{try{const G=Re(Ae,`users/${D}`),se=await tt(G);if(se.exists()){const ue=se.val();Z?ue.stats[Z]={gamesPlayed:0,totalPoints:0,wins:0,losses:0,...Z==="matchPlay"&&{ties:0},...Z==="kingOfTheHill"&&{highGameWins:0,highTotalWins:0},...Z==="bracketPlay"&&{tournamentsPlayed:0,championships:0,runnerUps:0}}:ue.stats={makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}},await gt(G,ue),await ee(),S(null)}}catch(G){console.error("Error resetting stats:",G),alert("Failed to reset stats")}},q=async(D,Z)=>{try{const G={makesOrMisses:`games/${Z}`,matchPlay:`matchplay/${Z}`,kingOfTheHill:`kingofthehill/${Z}`,bracketPlay:`bracketplay/${Z}`};await eg(Re(Ae,G[D])),await ee(),S(null)}catch(G){console.error("Error deleting game:",G),alert("Failed to delete game")}};return r?n?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),O&&a.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>S(null)}),a.jsxs("div",{className:"relative bg-slate-800 border-2 border-red-600 rounded-xl p-6 max-w-md w-full",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:["Confirm ",O.type==="user"?"User Deletion":O.type==="game"?"Game Deletion":"Stats Reset"]}),a.jsx("p",{className:"text-slate-300 mb-6",children:O.type==="user"?`Are you sure you want to delete "${O.name}"? This action cannot be undone.`:O.type==="game"?`Delete game "${O.name}"? All game data will be permanently removed.`:`Reset ${O.gameType==="all"?"all stats":`${O.gameType} stats`} for "${O.name}"?`}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>S(null),className:"flex-1 bg-slate-700 text-white py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),a.jsx("button",{onClick:()=>{O.type==="user"?U(O.id):O.type==="game"?q(O.gameType,O.id):X(O.id,O.gameType==="all"?null:O.gameType)},className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition font-semibold",children:O.type==="game"||O.type==="user"?"Delete":"Reset"})]})]})]}),a.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border-b border-slate-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:a.jsx(Du,{size:24,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"System Overview & Management"})]})]}),a.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition",children:a.jsx(Ls,{size:24})})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs("button",{onClick:()=>x("overview"),className:`px-4 py-2 rounded-lg font-semibold transition ${_==="overview"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[a.jsx(_g,{size:16,className:"inline mr-2"}),"Overview"]}),a.jsxs("button",{onClick:()=>x("users"),className:`px-4 py-2 rounded-lg font-semibold transition ${_==="users"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[a.jsx(ud,{size:16,className:"inline mr-2"}),"Users (",g.totalUsers,")"]}),a.jsxs("button",{onClick:()=>x("games"),className:`px-4 py-2 rounded-lg font-semibold transition ${_==="games"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[a.jsx(wg,{size:16,className:"inline mr-2"}),"Active Games (",g.totalGames,")"]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-slate-400 mt-4",children:"Loading admin data..."})]}):a.jsxs(a.Fragment,{children:[_==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:g.totalUsers}),a.jsx("div",{className:"text-sm text-slate-400",children:"Total Users"})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-green-700 rounded-xl p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:g.authenticatedUsers}),a.jsx("div",{className:"text-sm text-slate-400",children:"Authenticated"})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-amber-400",children:g.guestUsers}),a.jsx("div",{className:"text-sm text-slate-400",children:"Guest Users"})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-purple-700 rounded-xl p-4",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:g.totalGames}),a.jsx("div",{className:"text-sm text-slate-400",children:"Active Games"})]})]}),a.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Games by Mode"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Os,{size:32,className:"text-cyan-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:m.makesOrMisses.length}),a.jsx("div",{className:"text-xs text-slate-400",children:"Makes or Misses"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ft,{size:32,className:"text-emerald-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:m.matchPlay.length}),a.jsx("div",{className:"text-xs text-slate-400",children:"Match Play"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cn,{size:32,className:"text-amber-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:m.kingOfTheHill.length}),a.jsx("div",{className:"text-xs text-slate-400",children:"King of the Hill"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kr,{size:32,className:"text-violet-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:m.bracketPlay.length}),a.jsx("div",{className:"text-xs text-slate-400",children:"Bracket Play"})]})]})]})]})]}),_==="users"&&a.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-900/50 border-b border-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"User"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Joined"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Total Games"}),a.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-700",children:u.map(D=>{const Z=(D.stats?.makesOrMisses?.gamesPlayed||0)+(D.stats?.matchPlay?.gamesPlayed||0)+(D.stats?.kingOfTheHill?.gamesPlayed||0)+(D.stats?.bracketPlay?.tournamentsPlayed||0);return a.jsxs("tr",{className:"hover:bg-slate-800/30",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[D.photoURL?a.jsx("img",{src:D.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:G=>{G.target.style.display="none",G.target.nextSibling.style.display="flex"}}):null,a.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-sm font-bold ${D.photoURL?"hidden":"flex"}`,children:D.displayName?.[0]||"G"}),a.jsx("span",{className:"text-white font-medium",children:D.displayName||"Guest User"})]})}),a.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:D.email||"-"}),a.jsx("td",{className:"px-4 py-3",children:D.isAnonymous?a.jsx("span",{className:"px-2 py-1 bg-amber-900/30 border border-amber-700 rounded text-amber-400 text-xs font-semibold",children:"Guest"}):a.jsx("span",{className:"px-2 py-1 bg-green-900/30 border border-green-700 rounded text-green-400 text-xs font-semibold",children:"Authenticated"})}),a.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:D.createdAt?new Date(D.createdAt).toLocaleDateString():"-"}),a.jsx("td",{className:"px-4 py-3 text-white font-semibold",children:Z}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>S({type:"stats",id:D.uid,name:D.displayName||"User",gameType:"all"}),className:"p-2 bg-amber-900/30 border border-amber-700 rounded hover:bg-amber-900/50 transition",title:"Reset All Stats",children:a.jsx(u_,{size:14,className:"text-amber-400"})}),a.jsx("button",{onClick:()=>S({type:"user",id:D.uid,name:D.displayName||"User"}),className:"p-2 bg-red-900/30 border border-red-700 rounded hover:bg-red-900/50 transition",title:"Delete User",children:a.jsx(ji,{size:14,className:"text-red-400"})})]})})]},D.uid)})})]})})}),_==="games"&&a.jsxs("div",{className:"space-y-6",children:[m.makesOrMisses.length>0&&a.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx(Os,{size:20,className:"text-cyan-400"}),"Makes or Misses (",m.makesOrMisses.length,")"]}),a.jsx("div",{className:"grid gap-2",children:m.makesOrMisses.map(D=>{const Z=k===`mom-${D.code}`;return a.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-800/50",onClick:()=>I(Z?null:`mom-${D.code}`),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[Z?a.jsx(kl,{size:16,className:"text-cyan-400"}):a.jsx(Sl,{size:16,className:"text-slate-400"}),a.jsx("span",{className:"text-white font-mono font-semibold",children:D.code}),a.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[D.players?.length||0," players  Round ",D.currentRound||0]})]}),a.jsx("div",{className:"text-xs text-slate-500",children:D.createdAt?new Date(D.createdAt).toLocaleString():"-"})]}),Z&&a.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:D.players?.map((G,se)=>a.jsxs("div",{className:"flex justify-between bg-slate-900/50 px-3 py-2 rounded",children:[a.jsx("span",{className:"text-slate-300",children:G.name}),a.jsxs("span",{className:"text-cyan-400 font-semibold",children:[G.score||0," pts"]})]},G.id||se))}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Status:"}),a.jsx("span",{className:"ml-2 text-white",children:D.gameStarted?"In Progress":"Waiting"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Active Player:"}),a.jsx("span",{className:"ml-2 text-white",children:D.players?.[D.activePlayerIndex]?.name||"-"})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsxs("button",{onClick:G=>{G.stopPropagation(),S({type:"game",id:D.code,name:D.code,gameType:"makesOrMisses"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[a.jsx(ji,{size:16}),"Delete Game"]})})]})]},D.code)})})]}),m.matchPlay.length>0&&a.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx(ft,{size:20,className:"text-emerald-400"}),"Match Play (",m.matchPlay.length,")"]}),a.jsx("div",{className:"grid gap-2",children:m.matchPlay.map(D=>{const Z=k===`matchPlay-${D.code}`;return a.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>I(Z?null:`matchPlay-${D.code}`),children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white font-mono font-semibold",children:D.code}),a.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[D.player1?.name||"Player 1"," vs ",D.player2?.name||"Player 2"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-xs text-slate-500",children:D.createdAt?new Date(D.createdAt).toLocaleString():"-"}),Z?a.jsx(kl,{size:20}):a.jsx(Sl,{size:20})]})]}),Z&&a.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Match Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 1"}),a.jsx("div",{className:"text-white font-semibold",children:D.player1?.name||"Not joined"}),a.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[D.player1?.score||0," points"]})]}),a.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 2"}),a.jsx("div",{className:"text-white font-semibold",children:D.player2?.name||"Not joined"}),a.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[D.player2?.score||0," points"]})]})]}),D.currentRound&&a.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",D.currentRound," / 10"]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsxs("button",{onClick:G=>{G.stopPropagation(),S({type:"game",id:D.code,name:D.code,gameType:"matchPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[a.jsx(ji,{size:16}),"Delete Game"]})})]})]},D.code)})})]}),m.kingOfTheHill.length>0&&a.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx(Cn,{size:20,className:"text-amber-400"}),"King of the Hill (",m.kingOfTheHill.length,")"]}),a.jsx("div",{className:"grid gap-2",children:m.kingOfTheHill.map(D=>{const Z=k===`kingOfTheHill-${D.code}`;return a.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>I(Z?null:`kingOfTheHill-${D.code}`),children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white font-mono font-semibold",children:D.code}),a.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[D.players?.length||0," players"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-xs text-slate-500",children:D.createdAt?new Date(D.createdAt).toLocaleString():"-"}),Z?a.jsx(kl,{size:20}):a.jsx(Sl,{size:20})]})]}),Z&&a.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:D.players?.map((G,se)=>a.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[a.jsx("span",{className:"text-white text-sm",children:G.name}),a.jsxs("span",{className:"text-amber-400 font-semibold text-sm",children:[G.score||0," pts"]})]},G.id||se))}),D.currentRound&&a.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",D.currentRound]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsxs("button",{onClick:G=>{G.stopPropagation(),S({type:"game",id:D.code,name:D.code,gameType:"kingOfTheHill"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[a.jsx(ji,{size:16}),"Delete Game"]})})]})]},D.code)})})]}),m.bracketPlay.length>0&&a.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[a.jsx(kr,{size:20,className:"text-violet-400"}),"Bracket Play (",m.bracketPlay.length,")"]}),a.jsx("div",{className:"grid gap-2",children:m.bracketPlay.map(D=>{const Z=k===`bracketPlay-${D.code}`;return a.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>I(Z?null:`bracketPlay-${D.code}`),children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white font-mono font-semibold",children:D.code}),a.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[D.players?.length||0," players"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-xs text-slate-500",children:D.createdAt?new Date(D.createdAt).toLocaleString():"-"}),Z?a.jsx(kl,{size:20}):a.jsx(Sl,{size:20})]})]}),Z&&a.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[a.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Standings"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:D.players?.map((G,se)=>a.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[a.jsx("span",{className:"text-white text-sm",children:G.name}),a.jsxs("span",{className:"text-violet-400 font-semibold text-sm",children:[G.wins||0," wins"]})]},G.id||se))}),D.currentRound&&a.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",D.currentRound]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsxs("button",{onClick:G=>{G.stopPropagation(),S({type:"game",id:D.code,name:D.code,gameType:"bracketPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[a.jsx(ji,{size:16}),"Delete Game"]})})]})]},D.code)})})]}),g.totalGames===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-400",children:"No active games"})})]})]})})]})]}):a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-slate-900 border-2 border-red-700 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[a.jsx(Du,{size:48,className:"text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have permission to access the admin dashboard."}),a.jsx("button",{onClick:e,className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition",children:"Close"})]})]}):null}const Mr=[{id:"668e3aca-5106-4c24-a9c1-2bd89926ebad",name:"Default Center",url:"https://livescore.lanetalk.com/livescoring/668e3aca-5106-4c24-a9c1-2bd89926ebad"},{id:"15903a3d-a2f1-48d8-ab8b-97c9476b688a",name:"Enterprise Lanes",url:"https://livescore.lanetalk.com/livescoring/15903a3d-a2f1-48d8-ab8b-97c9476b688a"}],Yy=Mr[0],Jy=r=>{const e=Mr.find(n=>n.id===r)||Yy;return{finished:`${e.url}?tab=finished&q=&order=date&sort=asc`,scores:`${e.url}?tab=scores`,live:e.url}};function VS({isOpen:r,onClose:e}){const[n,i]=z.useState(Yy.id);if(!r)return null;const l=Jy(n),u=Mr.find(h=>h.id===n);return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-amber-500 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-amber-600 to-amber-700 p-6 flex justify-between items-center border-b-2 border-amber-500",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ft,{size:32,className:"text-white"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Top Bowlers"}),a.jsx("p",{className:"text-amber-100 text-sm",children:"Weekly Leaderboard"})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-amber-800 rounded-lg transition",children:a.jsx(Ls,{size:24,className:"text-white"})})]}),a.jsxs("div",{className:"p-6 border-b border-slate-700",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Bowling Center"}),a.jsx("select",{value:n,onChange:h=>i(h.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-amber-500",children:Mr.map(h=>a.jsx("option",{value:h.id,children:h.name},h.id))})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6 text-center",children:[a.jsx(ft,{size:64,className:"text-amber-500 mx-auto mb-4"}),a.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:["View ",u?.name," Leaderboard"]}),a.jsx("p",{className:"text-slate-400 mb-6",children:"Click below to view the weekly top bowlers on Lanetalk Live Scoring"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("a",{href:l.scores,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white font-bold rounded-lg transition shadow-lg",children:[a.jsx(ft,{size:20}),"View Top Bowlers",a.jsx(Di,{size:16})]}),a.jsxs("a",{href:l.finished,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition",children:["View Finished Games",a.jsx(Di,{size:16})]}),a.jsxs("a",{href:l.live,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition",children:["View Live Games",a.jsx(Di,{size:16})]})]})]}),a.jsx("div",{className:"mt-6 bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-300",children:[a.jsx("strong",{children:"Note:"})," Leaderboard data is provided by Lanetalk Live Scoring. Rankings update automatically as games are completed at the bowling center."]})})]})]})})}function KS({isOpen:r,onClose:e}){const{currentUser:n}=Gs(),[i,l]=z.useState("lanetalk"),[u,h]=z.useState(Mr[0].id),[m,p]=z.useState("matchPlay"),[g,y]=z.useState(""),[_,x]=z.useState(""),[k,I]=z.useState("win"),[O,S]=z.useState(!1),[ee,U]=z.useState(null),[X,q]=z.useState([]),[D,Z]=z.useState([]),[G,se]=z.useState(!1);if(!r)return null;const ue=async ye=>{if(ye.preventDefault(),!!n){S(!0),U(null);try{const Ce=Re(Ae,`users/${n.uid}`),Ie=await tt(Ce),ve=Ie.exists()?Ie.val():{stats:{}};ve.stats||(ve.stats={}),ve.stats[m]||(ve.stats[m]={gamesPlayed:0,wins:0,losses:0,totalPoints:0});const Se=ve.stats[m];Se.gamesPlayed+=1,k==="win"?Se.wins+=1:Se.losses+=1,g&&(Se.totalPoints+=parseInt(g)),await gt(Ce,ve),U({type:"success",text:"Game score imported successfully!"}),y(""),x(""),I("win"),setTimeout(()=>{e(),U(null)},2e3)}catch(Ce){console.error("Error importing score:",Ce),U({type:"error",text:"Failed to import score. Please try again."})}finally{S(!1)}}},Me=[{value:"matchPlay",label:"Match Play",icon:ft},{value:"kingOfTheHill",label:"King of the Hill",icon:Cn},{value:"bracketPlay",label:"Bracket Play",icon:Os}],Ne=Jy(u);return a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-blue-500 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 flex justify-between items-center border-b-2 border-blue-500 rounded-t-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ll,{size:28,className:"text-white"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Import Game Scores"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"Add completed game results to your stats"})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-blue-800 rounded-lg transition",children:a.jsx(Ls,{size:24,className:"text-white"})})]}),a.jsxs("div",{className:"flex border-b border-slate-700 bg-slate-800/50",children:[a.jsxs("button",{onClick:()=>l("lanetalk"),className:`flex-1 px-6 py-4 font-semibold transition flex items-center justify-center gap-2 ${i==="lanetalk"?"bg-slate-900 text-blue-400 border-b-2 border-blue-500":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(a_,{size:18}),"From Lanetalk"]}),a.jsxs("button",{onClick:()=>l("manual"),className:`flex-1 px-6 py-4 font-semibold transition flex items-center justify-center gap-2 ${i==="manual"?"bg-slate-900 text-blue-400 border-b-2 border-blue-500":"text-slate-400 hover:text-slate-300"}`,children:[a.jsx(l_,{size:18}),"Manual Entry"]})]}),i==="lanetalk"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Bowling Center"}),a.jsx("select",{value:u,onChange:ye=>h(ye.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:Mr.map(ye=>a.jsx("option",{value:ye.id,children:ye.name},ye.id))})]}),a.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-semibold text-white mb-2 flex items-center gap-2",children:[a.jsx(Di,{size:16}),"How to Import from Lanetalk"]}),a.jsxs("ol",{className:"text-sm text-blue-300 space-y-2 ml-4 list-decimal",children:[a.jsx("li",{children:'Click "Open Lanetalk Scores" below to view your completed games'}),a.jsx("li",{children:'Find your games in the "COMPLETED" tab'}),a.jsx("li",{children:"Note your scores and results"}),a.jsx("li",{children:'Return here and use "Manual Entry" to add each game'})]})]}),a.jsxs("a",{href:Ne.finished,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold rounded-lg transition shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Di,{size:20}),"Open Lanetalk Scores"]}),a.jsx("div",{className:"bg-amber-900/20 border border-amber-700 rounded-lg p-4",children:a.jsxs("p",{className:"text-xs text-amber-300",children:[a.jsx("strong",{children:"Coming Soon:"})," We're working on automatic score detection! For now, please use the Manual Entry tab to add your games after viewing them on Lanetalk."]})})]}),i==="manual"&&a.jsxs("form",{onSubmit:ue,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Game Type"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Me.map(ye=>{const Ce=ye.icon;return a.jsxs("button",{type:"button",onClick:()=>p(ye.value),className:`p-3 rounded-lg border-2 transition flex flex-col items-center gap-1 ${m===ye.value?"bg-blue-600 border-blue-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:[a.jsx(Ce,{size:20}),a.jsx("span",{className:"text-xs font-semibold text-center",children:ye.label})]},ye.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Opponent Name (Optional)"}),a.jsx("input",{type:"text",value:_,onChange:ye=>x(ye.target.value),placeholder:"Enter opponent's name",className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Your Score/Points"}),a.jsx("input",{type:"number",value:g,onChange:ye=>y(ye.target.value),placeholder:"Enter your total score (e.g., 775)",required:!0,min:"0",className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Result"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{type:"button",onClick:()=>I("win"),className:`py-3 rounded-lg border-2 font-semibold transition ${k==="win"?"bg-green-600 border-green-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Win"}),a.jsx("button",{type:"button",onClick:()=>I("loss"),className:`py-3 rounded-lg border-2 font-semibold transition ${k==="loss"?"bg-red-600 border-red-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Loss"})]})]}),ee&&a.jsx("div",{className:`p-3 rounded-lg border ${ee.type==="success"?"bg-green-900/30 border-green-600 text-green-300":"bg-red-900/30 border-red-600 text-red-300"}`,children:ee.text}),a.jsxs("button",{type:"submit",disabled:O||!g,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-slate-700 disabled:to-slate-700 text-white font-bold rounded-lg transition shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Ll,{size:20}),O?"Importing...":"Import Score"]}),a.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-blue-300",children:[a.jsx("strong",{children:"Tip:"})," Enter your total series score from Lanetalk. For example, if you bowled 140, 232, 139, 134, 124 (totaling 769), enter 769."]})})]})]})})}function QS(){const[r,e]=z.useState(null),[n,i]=z.useState(null),[l,u]=z.useState(!1),[h,m]=z.useState(!1),[p,g]=z.useState(!1),[y,_]=z.useState(!1),[x,k]=z.useState(!1),[I,O]=z.useState(!1),{currentUser:S,isGuest:ee,isAdmin:U,signOut:X}=Gs(),q=[{id:"makes-or-misses",name:"Makes or Misses",description:"Predict if you make or miss the next shot",icon:Os,gradient:"from-cyan-500 via-blue-500 to-indigo-600",glowColor:"shadow-cyan-500/50",badge:" Quick Play",available:!0},{id:"match-play",name:"Match Play",description:"Head-to-head 3-game match",icon:ft,gradient:"from-emerald-500 via-teal-500 to-cyan-600",glowColor:"shadow-emerald-500/50",badge:" 1v1 Battle",available:!0},{id:"king-of-the-hill",name:"King of the Hill",description:"High game takes it all",icon:Cn,gradient:"from-amber-500 via-orange-500 to-red-600",glowColor:"shadow-amber-500/50",badge:" Multiplayer",available:!0},{id:"bracket-play",name:"Bracket Play",description:"8-player single elimination bracket",icon:kr,gradient:"from-violet-500 via-purple-500 to-fuchsia-600",glowColor:"shadow-violet-500/50",badge:" Tournament",available:!0}],D=G=>{q.find(ue=>ue.id===G).available&&e(G)},Z=()=>{e(null)};return r==="makes-or-misses"?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Z,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[a.jsx(Cl,{size:20}),"Back to Games"]}),a.jsx(FS,{})]}):r==="match-play"?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Z,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[a.jsx(Cl,{size:20}),"Back to Games"]}),a.jsx(zS,{})]}):r==="king-of-the-hill"?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Z,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[a.jsx(Cl,{size:20}),"Back to Games"]}),a.jsx(HS,{})]}):r==="bracket-play"?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Z,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[a.jsx(Cl,{size:20}),"Back to Games"]}),a.jsx($S,{})]}):a.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950"}),a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-6 right-6 z-20",children:S?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>m(!h),className:"flex items-center gap-3 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-full px-4 py-2 hover:bg-slate-800 transition",children:[S.photoURL?a.jsx("img",{src:S.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:G=>{G.target.style.display="none",G.target.nextSibling.style.display="flex"}}):null,a.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center ${S.photoURL?"hidden":"flex"}`,children:a.jsx(Dl,{size:20,className:"text-white"})}),a.jsxs("span",{className:"text-white font-semibold",children:[S.displayName||"Guest",ee&&a.jsx("span",{className:"text-slate-400 text-sm ml-1",children:"(Guest)"})]})]}),h&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-slate-900 border border-slate-700 rounded-lg shadow-2xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>{g(!0),m(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-slate-800 transition flex items-center gap-3",children:[a.jsx(_g,{size:18}),"View Stats"]}),U&&a.jsxs("button",{onClick:()=>{_(!0),m(!1)},className:"w-full px-4 py-3 text-left text-purple-400 hover:bg-slate-800 transition flex items-center gap-3 border-t border-slate-800",children:[a.jsx(Du,{size:18}),"Admin Dashboard"]}),a.jsxs("button",{onClick:async()=>{await X(),m(!1)},className:"w-full px-4 py-3 text-left text-red-400 hover:bg-slate-800 transition flex items-center gap-3 border-t border-slate-800",children:[a.jsx(c_,{size:18}),"Sign Out"]})]})]}):a.jsxs("button",{onClick:()=>u(!0),className:"bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold px-6 py-2 rounded-full hover:shadow-lg hover:shadow-cyan-500/50 transition flex items-center gap-2",children:[a.jsx(Dl,{size:20}),"Sign In"]})}),a.jsx(WS,{isOpen:l,onClose:()=>u(!1)}),a.jsx(BS,{isOpen:p,onClose:()=>g(!1)}),a.jsx(GS,{isOpen:y,onClose:()=>_(!1)}),a.jsx(VS,{isOpen:x,onClose:()=>k(!1)}),a.jsx(KS,{isOpen:I,onClose:()=>O(!1)}),a.jsx("div",{className:"relative z-10 min-h-screen p-6 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-7xl w-full",children:[a.jsxs("div",{className:"text-center mb-16 space-y-4",children:[a.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20 rounded-full px-6 py-2 mb-4",children:[a.jsx(lm,{className:"text-purple-400",size:18}),a.jsx("span",{className:"text-purple-300 text-sm font-semibold tracking-wide",children:"MULTIPLAYER BOWLING GAMES"})]}),a.jsx("h1",{className:"text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 mb-4 tracking-tight",children:"BOWLING FUN"}),a.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-light",children:"Choose your battleground and dominate the lanes with friends"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[q.map(G=>{const se=G.icon,ue=n===G.id;return a.jsxs("button",{onClick:()=>D(G.id),onMouseEnter:()=>i(G.id),onMouseLeave:()=>i(null),disabled:!G.available,className:`group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 ${G.available?"hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl":"opacity-40 cursor-not-allowed"}`,children:[ue&&G.available&&a.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${G.gradient} rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500`}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:G.badge})}),a.jsx("div",{className:`w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br ${G.gradient} flex items-center justify-center transform ${G.available?"group-hover:scale-110 group-hover:rotate-6":""} transition-all duration-500 shadow-lg ${ue?G.glowColor+" shadow-2xl":""}`,children:a.jsx(se,{size:32,className:"text-white"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:G.name}),a.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:G.description}),G.available?a.jsxs("div",{className:`flex items-center justify-center gap-2 bg-gradient-to-r ${G.gradient} px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300`,children:[a.jsx(h_,{size:16}),a.jsx("span",{children:"PLAY NOW"})]}):a.jsx("div",{className:"inline-flex items-center gap-2 bg-slate-800 text-slate-500 px-4 py-2.5 rounded-lg text-sm font-semibold",children:" Coming Soon"})]})]},G.id)}),a.jsxs("button",{onClick:()=>k(!0),onMouseEnter:()=>i("top-bowlers"),onMouseLeave:()=>i(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[n==="top-bowlers"&&a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:" Leaderboard"})}),a.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-amber-500 via-yellow-500 to-orange-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-amber-500/50 hover:shadow-2xl",children:a.jsx(ft,{size:32,className:"text-white"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Top Bowlers"}),a.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Weekly leaderboard from your bowling center"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[a.jsx(lm,{size:16}),a.jsx("span",{children:"VIEW LEADERS"})]})]})]}),S&&!ee&&a.jsxs("button",{onClick:()=>O(!0),onMouseEnter:()=>i("import-scores"),onMouseLeave:()=>i(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[n==="import-scores"&&a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:" Track Stats"})}),a.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-blue-500/50 hover:shadow-2xl",children:a.jsx(Ll,{size:32,className:"text-white"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Import Scores"}),a.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Add your completed game scores"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[a.jsx(Ll,{size:16}),a.jsx("span",{children:"ADD SCORES"})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[a.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:"4"}),a.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Game Modes"})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[a.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:""}),a.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Multiplayer Fun"})]}),a.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[a.jsx("div",{className:"text-3xl font-bold",children:""}),a.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Real-Time Sync"})]})]})]})})]})}s_.createRoot(document.getElementById("root")).render(a.jsx(z.StrictMode,{children:a.jsx(DS,{children:a.jsx(QS,{})})}));
