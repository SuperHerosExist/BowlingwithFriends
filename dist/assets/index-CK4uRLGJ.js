import{r as Fe,a as qe}from"./react-vendor-D3F3s8fL.js";import{r as n,T as re,U as Re,Q as Ne,a as ze,C as Me,X as ne,b as X,D as ue,c as le,N as ce,S as _e,M as Se,d as je,L as Ce,e as Te,f as Ge,B as Ae,g as Qe,h as me,i as pe,j as ge,E as he,k as ye,l as Je,F as Ke,A as be,m as Ve,n as Ee,Z as Ze}from"./icons-wX-I1vpo.js";import{Q as ve}from"./qrcode-BU27vht1.js";import{i as Ye,g as Xe,a as es,G as ss,o as ts,s as as,b as ls,c as rs,d as ns,u as is,e as os,r as L,f as Q,h as te,j as we,k as Ie}from"./firebase-BQ0DpbZQ.js";(function(){const N=document.createElement("link").relList;if(N&&N.supports&&N.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))R(p);new MutationObserver(p=>{for(const P of p)if(P.type==="childList")for(const y of P.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&R(y)}).observe(document,{childList:!0,subtree:!0});function j(p){const P={};return p.integrity&&(P.integrity=p.integrity),p.referrerPolicy&&(P.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?P.credentials="include":p.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function R(p){if(p.ep)return;p.ep=!0;const P=j(p);fetch(p.href,P)}})();var Pe={exports:{}},xe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function cs(){if(Ue)return xe;Ue=1;var h=Fe(),N=Symbol.for("react.element"),j=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,p=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P={key:!0,ref:!0,__self:!0,__source:!0};function y(x,G,f){var m,I={},u=null,T=null;f!==void 0&&(u=""+f),G.key!==void 0&&(u=""+G.key),G.ref!==void 0&&(T=G.ref);for(m in G)R.call(G,m)&&!P.hasOwnProperty(m)&&(I[m]=G[m]);if(x&&x.defaultProps)for(m in G=x.defaultProps,G)I[m]===void 0&&(I[m]=G[m]);return{$$typeof:N,type:x,key:u,ref:T,props:I,_owner:p.current}}return xe.Fragment=j,xe.jsx=y,xe.jsxs=y,xe}var Le;function ds(){return Le||(Le=1,Pe.exports=cs()),Pe.exports}var e=ds(),fe={},Oe;function ms(){if(Oe)return fe;Oe=1;var h=qe();return fe.createRoot=h.createRoot,fe.hydrateRoot=h.hydrateRoot,fe}var xs=ms();const hs={apiKey:"AIzaSyBplm3Xt3Mru_Sxi2g3uptgbzXbQ8KZ0Aw",authDomain:"bowling-fun.firebaseapp.com",databaseURL:"https://bowling-fun-default-rtdb.firebaseio.com",projectId:"bowling-fun",storageBucket:"bowling-fun.firebasestorage.app",messagingSenderId:"1041099466681",appId:"1:1041099466681:web:55553970cd19f150dc3868"},He=Ye(hs),O=Xe(He),oe=es(He),us=new ss,ps=["davesfx@gmail.com","daves.seeker@gmail.com"],gs=h=>!h||!h.email?!1:ps.includes(h.email.toLowerCase()),De=n.createContext();function ie(){return n.useContext(De)}function bs({children:h}){const[N,j]=n.useState(null),[R,p]=n.useState(!0),[P,y]=n.useState(!1),[x,G]=n.useState(!1),f=async o=>{if(!o)return;const M=L(O,`users/${o.uid}`),d=await Q(M);if(!d.exists())await te(M,{uid:o.uid,displayName:o.displayName||"Guest User",email:o.email||null,photoURL:o.photoURL||null,isAnonymous:o.isAnonymous,createdAt:Date.now(),stats:{makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}});else{const A=d.val()||{},C={displayName:o.displayName||A.displayName||"Guest User",photoURL:o.photoURL||A.photoURL||null,email:o.email||A.email||null,lastLogin:Date.now()};await te(M,{...A,...C})}},m=async()=>{try{const o=await os(oe,us);return await f(o.user),y(!1),o.user}catch(o){throw console.error("Error signing in with Google:",o),o}},I=async(o,M,d)=>{try{const A=await ns(oe,o,M);return d&&await is(A.user,{displayName:d}),await f(A.user),y(!1),A.user}catch(A){throw console.error("Error signing up with email:",A),A}},u=async(o,M)=>{try{const d=await rs(oe,o,M);return await f(d.user),y(!1),d.user}catch(d){throw console.error("Error signing in with email:",d),d}},T=async()=>{try{const o=await ls(oe);return await f(o.user),y(!0),o.user}catch(o){throw console.error("Error signing in anonymously:",o),o}},H=async()=>{try{await as(oe),y(!1)}catch(o){throw console.error("Error signing out:",o),o}};n.useEffect(()=>ts(oe,async M=>{j(M),y(M?.isAnonymous||!1),G(gs(M)),M&&await f(M),p(!1)}),[]);const $={currentUser:N,isGuest:P,isAdmin:x,signInWithGoogle:m,signUpWithEmail:I,signInWithEmail:u,continueAsGuest:T,signOut:H,loading:R};return e.jsx(De.Provider,{value:$,children:!R&&h})}function fs(){const{currentUser:h}=ie(),N=async(y,x)=>{if(h)try{const G=L(O,`users/${h.uid}/stats/${y}`),f=await Q(G),I={...f.exists()?f.val():{}};Object.keys(x).forEach(u=>{typeof x[u]=="number"?I[u]=(I[u]||0)+x[u]:I[u]=x[u]}),await te(G,I)}catch(G){console.error("Error updating stats:",G)}};return{recordMakesOrMissesGame:async y=>{const{isWinner:x,points:G}=y;await N("makesOrMisses",{gamesPlayed:1,totalPoints:G,wins:x?1:0,losses:x?0:1})},recordMatchPlayGame:async y=>{const{outcome:x}=y;await N("matchPlay",{gamesPlayed:1,wins:x==="win"?1:0,losses:x==="loss"?1:0,ties:x==="tie"?1:0})},recordKingOfTheHillGame:async y=>{const{wonHighGame:x,wonHighTotal:G}=y;await N("kingOfTheHill",{gamesPlayed:1,highGameWins:x?1:0,highTotalWins:G?1:0})},recordBracketPlayTournament:async y=>{const{isChampion:x,isRunnerUp:G}=y;await N("bracketPlay",{tournamentsPlayed:1,championships:x?1:0,runnerUps:G?1:0})}}}function js(){const{currentUser:h}=ie(),{recordMakesOrMissesGame:N}=fs(),[j,R]=n.useState(""),[p,P]=n.useState(""),[y,x]=n.useState(!1),[G,f]=n.useState(!1),[m,I]=n.useState(!1),[u,T]=n.useState([]),[H,$]=n.useState(""),[o,M]=n.useState(0),[d,A]=n.useState(0),[C,l]=n.useState(null),[k,v]=n.useState(!1),[S,g]=n.useState({}),J=.25,q=t=>(t*J).toFixed(2),E=(t,c)=>`${t}->${c}`,K=()=>`${window.location.origin+window.location.pathname}?join=${j}`,ae=t=>{let c=0,i=0;return Object.entries(S).forEach(([w,D])=>{if(!D)return;const[U,B]=w.split("->").map(Number);B===t&&(c+=D),U===t&&(i+=D)}),c-i},Z=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("join");c&&P(c.toUpperCase())},[]),n.useEffect(()=>{if(!j)return;const t=L(O,`games/${j}`),c=we(t,i=>{const w=i.val();w&&(T(w.players||[]),M(w.currentRound||0),A(w.activePlayerIndex||0),l(w.activePlayerChoice||null),v(w.gameStarted||!1),g(w.ledger||{}))});return()=>c()},[j]);const Y=()=>{const t=Z();R(t),x(!0),f(!0);const c=L(O,`games/${t}`);te(c,{players:[],currentRound:0,activePlayerIndex:0,activePlayerChoice:null,gameStarted:!1,ledger:{},createdAt:Date.now()})},_=async()=>{if(!p.trim())return;const t=p.toUpperCase(),c=L(O,`games/${t}`);(await Q(c)).exists()?(R(t),x(!1),f(!0)):alert("Game not found! Check the code and try again.")},ee=t=>{if(!j)return;const c=L(O,`games/${j}`);te(c,{players:u,currentRound:o,activePlayerIndex:d,activePlayerChoice:C,gameStarted:k,ledger:S,...t})},se=()=>{if(H.trim()&&!k){const t=[...u,{id:Date.now(),name:H.trim(),score:0}];ee({players:t}),$("")}},F=()=>{u.length>=2&&ee({gameStarted:!0,currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},V=t=>{ee({activePlayerChoice:t})},b=t=>{const c=u[d],i=u.filter((U,B)=>B!==d),w=u.map((U,B)=>B===d?C===t?{...U,score:U.score+(u.length-1)}:U:(C==="make"?"miss":"make")===t?{...U,score:U.score+1}:U),D={...S};C===t?i.forEach(U=>{const B=E(U.id,c.id);D[B]=(D[B]||0)+1}):i.forEach(U=>{const B=E(c.id,U.id);D[B]=(D[B]||0)+1}),ee({players:w,ledger:D,currentRound:o<50?o+1:o,activePlayerIndex:o<50?(d+1)%u.length:d,activePlayerChoice:null})},z=async()=>{if(!h||!r)return;const t=u.find(c=>c.name.toLowerCase()===h.displayName?.toLowerCase()||c.id===h.uid);if(t){const c=Math.max(...u.map(w=>w.score)),i=t.score===c;await N({isWinner:i,points:t.score})}},W=()=>{z(),ee({players:u.map(t=>({...t,score:0})),ledger:{},currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},s=()=>{f(!1),R(""),P(""),x(!1)},a=u[d],r=o>50;return G?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",right:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(re,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:j})]}),e.jsx("button",{onClick:()=>I(!m),className:"btn-primary-cyan p-2",title:"Show QR code to join",children:e.jsx(Ne,{size:20})})]})]}),m&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(ve,{value:K(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-slate-400 mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:j})]}),e.jsx("button",{onClick:()=>I(!1),className:"mt-3 text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Hide QR Code"})]})}),k?e.jsxs("div",{className:"space-y-6",children:[r?e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"ðŸŽ‰ Game Over! ðŸŽ‰"}),e.jsx("p",{className:"text-xl mb-6 text-slate-300",children:"50 rounds completed!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Round ",o]}),e.jsxs("p",{className:"text-lg mt-2 text-slate-300",children:[e.jsx("span",{className:"font-bold text-purple-600",children:a?.name}),"'s turn to choose"]})]}),e.jsxs("div",{className:"bg-amber-900/30 border-2 border-amber-500 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-center mb-4 text-white",children:[a?.name,", make your choice:"]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>V("make"),disabled:C!==null,className:`flex-1 py-4 rounded-lg font-bold text-lg transition ${C==="make"?"bg-green-500 text-white":"bg-slate-800/50 border-2 border-green-500 text-green-600 hover:bg-green-50"} disabled:opacity-50`,children:[e.jsx(Me,{className:"inline mr-2",size:24}),"Make"]}),e.jsxs("button",{onClick:()=>V("miss"),disabled:C!==null,className:`flex-1 py-4 rounded-lg font-bold text-lg transition ${C==="miss"?"bg-red-500 text-white":"bg-slate-800/50 border-2 border-red-500 text-red-600 hover:bg-red-50"} disabled:opacity-50`,children:[e.jsx(ne,{className:"inline mr-2",size:24}),"Miss"]})]}),C&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mt-4",children:[e.jsxs("p",{className:"text-center text-slate-300 mb-3",children:[e.jsx("span",{className:"font-bold",children:a?.name})," chose:"," ",e.jsx("span",{className:`font-bold ml-2 ${C==="make"?"text-green-600":"text-red-600"}`,children:C==="make"?"MAKES":"MISSES"})]}),e.jsxs("p",{className:"text-center text-sm text-slate-400 mb-4",children:["All other players automatically get:"," ",e.jsx("span",{className:`font-bold ml-2 ${C==="miss"?"text-green-600":"text-red-600"}`,children:C==="miss"?"MAKES":"MISSES"})]}),e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsx("h4",{className:"font-bold text-center mb-3 text-white",children:"What was the result?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>b("make"),className:"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-bold",children:[e.jsx(Me,{className:"inline mr-2",size:20}),"Made It!"]}),e.jsxs("button",{onClick:()=>b("miss"),className:"flex-1 bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 transition font-bold",children:[e.jsx(ne,{className:"inline mr-2",size:20}),"Missed!"]})]})]})]})]}),e.jsx("div",{className:"player-grid",children:u.map((t,c)=>{const i=c===d,w=i?C:C==="make"?"miss":C==="miss"?"make":null;return e.jsxs("div",{className:`player-card ${i?"active bg-amber-900/30 border-2 border-amber-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm sm:text-base text-white",children:[t.name," ",i&&"ðŸ‘ˆ"]}),e.jsx("span",{className:"score-badge",children:t.score})]}),w&&e.jsx("div",{className:`text-center py-2 rounded font-semibold text-sm ${w==="make"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:w==="make"?"MAKES":"MISSES"})]},t.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(X,{className:"text-amber-400",size:24}),"Leaderboard"]}),e.jsx("div",{className:"space-y-2",children:[...u].sort((t,c)=>c.score-t.score).map((t,c)=>{const i=(t.score*J).toFixed(2),w=q(ae(t.id));return e.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 px-4 py-2 rounded-lg",children:[e.jsxs("span",{className:"font-semibold",children:[c===0&&"ðŸ¥‡"," ",c===1&&"ðŸ¥ˆ"," ",c===2&&"ðŸ¥‰"," ",t.name]}),e.jsxs("span",{className:"font-bold text-purple-600 text-sm",children:[t.score," pts ($",i,") Â· Net $",w]})]},t.id)})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4 mt-4",children:[e.jsx("h4",{className:"font-bold text-md mb-2 text-white",children:"ðŸ’µ Owes Breakdown"}),u.length<=1?e.jsx("p",{className:"text-slate-400 text-sm",children:"Add more players to calculate owes."}):(()=>{const t={};u.forEach(i=>t[i.id]=[]),Object.entries(S).forEach(([i,w])=>{if(!w)return;const[D,U]=i.split("->").map(Number),B=u.find(ke=>ke.id===D),$e=u.find(ke=>ke.id===U);!B||!$e||t[U].push({debtorId:D,debtorName:B.name,pts:w,money:q(w)})});const c=u.map(i=>{const w=t[i.id]||[],D=w.reduce((U,B)=>U+Number(B.money),0).toFixed(2);return{cr:i,items:w,total:D}}).filter(i=>i.items.length>0);return c.length===0?e.jsx("p",{className:"text-slate-300 text-sm",children:"No debts yet."}):e.jsx("div",{className:"space-y-4",children:c.map(({cr:i,items:w,total:D})=>e.jsxs("div",{className:"bg-slate-800/50 rounded-md p-3",children:[e.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Payouts to ",e.jsx("span",{className:"font-semibold",children:i.name}),":"]}),e.jsx("ul",{className:"list-disc ml-5 space-y-1",children:w.map(U=>e.jsxs("li",{className:"text-white text-sm",children:[U.debtorName," owes ",i.name," $",U.money," (",U.pts," pts)"]},U.debtorId))}),e.jsxs("p",{className:"text-slate-300 text-sm mt-2",children:[i.name," total to collect: ",e.jsxs("span",{className:"font-semibold",children:["$",D]})]})]},i.id))})})()]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:W,className:"flex-1 btn-primary-cyan",children:"Reset Scores"}),e.jsx("button",{onClick:s,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-cyan-300",children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",children:j})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:H,onChange:t=>$(t.target.value),onKeyDown:t=>t.key==="Enter"&&se(),placeholder:"Enter Bowler's Name",className:"game-input"}),e.jsxs("button",{onClick:se,className:"btn-primary-orange flex items-center justify-center gap-2",children:[e.jsx(ze,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),u.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Bowlers (",u.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:u.map(t=>e.jsx("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow text-white",children:t.name},t.id))})]}),e.jsx("button",{onClick:F,disabled:u.length<2,className:"w-full bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl disabled:bg-gray-300 disabled:cursor-not-allowed",children:u.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(re,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Multiplayer Bowling Predictor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:Y,className:"w-full btn-primary-cyan flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(Re,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:p,onChange:t=>P(t.target.value.toUpperCase()),onKeyDown:t=>t.key==="Enter"&&_(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:_,className:"w-full btn-primary-cyan text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function ys(){const[h,N]=n.useState(""),[j,R]=n.useState(""),[p,P]=n.useState(!1),[y,x]=n.useState(!1),[G,f]=n.useState(!1),[m,I]=n.useState({name:"",id:null}),[u,T]=n.useState({name:"",id:null}),[H,$]=n.useState(!1),[o,M]=n.useState(1),[d,A]=n.useState({game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),[C,l]=n.useState({perGame:5,totals:5}),k=()=>`${window.location.origin+window.location.pathname}?join=${h}`,v=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const z=new URLSearchParams(window.location.search).get("join");z&&R(z.toUpperCase())},[]),n.useEffect(()=>{if(!h)return;const b=L(O,`matchplay/${h}`),z=we(b,W=>{const s=W.val();s&&(I(s.player1||{name:"",id:null}),T(s.player2||{name:"",id:null}),$(s.gameStarted||!1),M(s.currentGame||1),A(s.scores||{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),l(s.stakes||{perGame:5,totals:5}))});return()=>z()},[h]);const S=()=>{const b=v();N(b),P(!0),x(!0);const z=L(O,`matchplay/${b}`);te(z,{player1:{name:"",id:null},player2:{name:"",id:null},gameStarted:!1,currentGame:1,scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},stakes:{perGame:5,totals:5},createdAt:Date.now()})},g=async()=>{if(!j.trim())return;const b=j.toUpperCase(),z=L(O,`matchplay/${b}`);(await Q(z)).exists()?(N(b),P(!1),x(!0)):alert("Game not found! Check the code and try again.")},J=async b=>{if(h)try{const z=L(O,`matchplay/${h}`),s=(await Q(z)).val()||{};await te(z,{...s,...b})}catch(z){console.error("Error updating game:",z)}},q=(b,z)=>{J(b===1?{player1:{name:z,id:Date.now()}}:{player2:{name:z,id:Date.now()}})},E=()=>{m.name&&u.name&&J({gameStarted:!0})},K=async(b,z,W)=>{if(!h){console.log("No game code");return}console.log("Updating score:",{gameNum:b,playerNum:z,score:W});try{const s=L(O,`matchplay/${h}`),r=(await Q(s)).val();if(console.log("Current data:",r),!r){console.error("No current data found");return}const t=JSON.parse(JSON.stringify(r.scores||{})),c=`game${b}`,i=`player${z}`;t[c]||(t[c]={player1:null,player2:null}),t[c][i]=W===""?null:parseInt(W),console.log("New scores:",t),await te(s,{...r,scores:t}),console.log("Score updated successfully")}catch(s){console.error("Error updating score:",s),alert("Error updating score: "+s.message)}},ae=async(b,z)=>{if(h)try{const W=L(O,`matchplay/${h}`),a=(await Q(W)).val();if(!a)return;const r={...a.stakes};r[b]=parseFloat(z)||0,await te(W,{...a,stakes:r})}catch(W){console.error("Error updating stakes:",W)}},Z=()=>{const b=(d?.game1?.player1||0)+(d?.game2?.player1||0)+(d?.game3?.player1||0),z=(d?.game1?.player2||0)+(d?.game2?.player2||0)+(d?.game3?.player2||0);return{player1:b,player2:z}},Y=()=>{let b=0,z=0;["game1","game2","game3"].forEach(r=>{const t=d?.[r]?.player1,c=d?.[r]?.player2;t!=null&&c!==null&&c!==void 0&&(t>c?b+=C.perGame:c>t&&(z+=C.perGame))});const W=Z();W.player1>W.player2?b+=C.totals:W.player2>W.player1&&(z+=C.totals);const s=b-z,a=z-b;return{player1:s,player2:a}},_=()=>{J({scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},currentGame:1})},ee=()=>{x(!1),N(""),R(""),P(!1)},se=Z(),F=Y(),V=d?.game1?.player1!==null&&d?.game1?.player1!==void 0&&d?.game1?.player2!==null&&d?.game1?.player2!==void 0&&d?.game2?.player1!==null&&d?.game2?.player1!==void 0&&d?.game2?.player2!==null&&d?.game2?.player2!==void 0&&d?.game3?.player1!==null&&d?.game3?.player1!==void 0&&d?.game3?.player2!==null&&d?.game3?.player2!==void 0;return y?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(X,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>f(!G),className:"btn-primary-green p-2",title:"Show QR code to join",children:e.jsx(Ne,{size:20})})]})]}),G&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Match"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(ve,{value:k(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>f(!1),className:"mt-3 text-green-400 hover:text-green-300 font-semibold text-sm",children:"Hide QR Code"})]})}),H?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-4",children:"Best of 3 Games"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:m.name})}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:u.name})})]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(b=>e.jsxs("div",{className:"game-card",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 text-white",children:["Game ",b]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:m.name}),e.jsx("input",{type:"number",value:d[`game${b}`]?.player1??"",onChange:z=>K(b,1,z.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:u.name}),e.jsx("input",{type:"number",value:d[`game${b}`]?.player2??"",onChange:z=>K(b,2,z.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]})]}),d[`game${b}`]?.player1!==null&&d[`game${b}`]?.player1!==void 0&&d[`game${b}`]?.player2!==null&&d[`game${b}`]?.player2!==void 0&&e.jsx("div",{className:"mt-3 text-center",children:d[`game${b}`].player1>d[`game${b}`].player2?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",m.name," wins (+$",C.perGame,")"]}):d[`game${b}`].player2>d[`game${b}`].player1?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",u.name," wins (+$",C.perGame,")"]}):e.jsx("p",{className:"text-primary font-semibold",children:"Tie"})})]},b))}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-green-900/30 rounded-lg p-4 border-2 border-green-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(X,{className:"text-green-400",size:24}),"Totals"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:m.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:se.player1})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:u.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:se.player2})]})]}),V&&e.jsx("div",{className:"mt-3 text-center",children:se.player1>se.player2?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",m.name," wins totals (+$",C.totals,")"]}):se.player2>se.player1?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",u.name," wins totals (+$",C.totals,")"]}):e.jsx("p",{className:"text-primary font-semibold text-lg",children:"Totals tied"})})]}),V&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ue,{className:"text-green-400",size:24}),"Final Payout"]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:F.player1>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[m.name," wins $",Math.abs(F.player1).toFixed(2)]}):F.player2>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[u.name," wins $",Math.abs(F.player2).toFixed(2)]}):e.jsx("p",{className:"text-center text-xl font-bold text-primary",children:"Match tied - No payout"})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:_,className:"flex-1 btn-primary-green",children:"Reset Scores"}),e.jsx("button",{onClick:ee,className:"flex-1 btn-secondary",children:"Leave Match"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-green-300",children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",children:h})," with your opponent!"]})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ue,{className:"text-green-400",size:20}),"Stakes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Per Game"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:C.perGame,onChange:b=>ae("perGame",b.target.value),className:"game-input",min:"0",step:"0.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Totals"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:C.totals,onChange:b=>ae("totals",b.target.value),className:"game-input",min:"0",step:"0.5"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 1"}),e.jsx("input",{type:"text",value:m.name,onChange:b=>q(1,b.target.value),placeholder:"Enter Player 1's Name",className:"w-full game-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 2"}),e.jsx("input",{type:"text",value:u.name,onChange:b=>q(2,b.target.value),placeholder:"Enter Player 2's Name",className:"w-full game-input"})]})]}),e.jsx("button",{onClick:E,disabled:!m.name||!u.name,className:"w-full btn-primary-green text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:!m.name||!u.name?"Enter both player names":"Start Match"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(X,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Head-to-Head Bowling Match"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:S,className:"w-full btn-primary-green flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(Re,{size:24}),"Create New Match"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:j,onChange:b=>R(b.target.value.toUpperCase()),onKeyDown:b=>b.key==="Enter"&&g(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:g,className:"w-full btn-primary-green text-lg sm:text-xl",children:"Join Match"})]})]})]})})]})}function Ns(){const[h,N]=n.useState(""),[j,R]=n.useState(""),[p,P]=n.useState(!1),[y,x]=n.useState(!1),[G,f]=n.useState(!1),[m,I]=n.useState([]),[u,T]=n.useState(""),[H,$]=n.useState(!1),[o,M]=n.useState(1),[d,A]=n.useState({game1:{},game2:{},game3:{}}),[C]=n.useState(5),[l]=n.useState(1),[k]=n.useState(2),v=()=>`${window.location.origin+window.location.pathname}?join=${h}`,S=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("join");a&&R(a.toUpperCase())},[]),n.useEffect(()=>{if(!h)return;const s=L(O,`kingofthehill/${h}`),a=we(s,r=>{const t=r.val();t&&(I(t.players||[]),$(t.gameStarted||!1),M(t.currentGame||1),A(t.scores||{game1:{},game2:{},game3:{}}))});return()=>a()},[h]);const g=()=>{const s=S();N(s),P(!0),x(!0);const a=L(O,`kingofthehill/${s}`);te(a,{players:[],gameStarted:!1,currentGame:1,scores:{game1:{},game2:{},game3:{}},createdAt:Date.now()})},J=async()=>{if(!j.trim())return;const s=j.toUpperCase(),a=L(O,`kingofthehill/${s}`);(await Q(a)).exists()?(N(s),P(!1),x(!0)):alert("Game not found! Check the code and try again.")},q=async s=>{if(h)try{const a=L(O,`kingofthehill/${h}`),t=(await Q(a)).val()||{};await te(a,{...t,...s})}catch(a){console.error("Error updating game:",a)}},E=()=>{if(u.trim()&&!H){const s=[...m,{id:Date.now(),name:u.trim()}];q({players:s}),T("")}},K=()=>{m.length>=2&&q({gameStarted:!0,currentGame:1})},ae=async(s,a,r)=>{if(!h){console.log("No game code");return}console.log("Updating score:",{gameNum:s,playerId:a,score:r});try{const t=L(O,`kingofthehill/${h}`),i=(await Q(t)).val();if(console.log("Current data:",i),!i){console.error("No current data found");return}const w=JSON.parse(JSON.stringify(i.scores||{})),D=`game${s}`;w[D]||(w[D]={}),w[D][a]=r===""?null:parseInt(r),console.log("New scores:",w),await te(t,{...i,scores:w}),console.log("Score updated successfully")}catch(t){console.error("Error updating score:",t),alert("Error updating score: "+t.message)}},Z=(s,a)=>d?.[`game${s}`]?.[a]??"",Y=s=>{const a=d?.[`game${s}`]||{},r=Object.entries(a).filter(([i,w])=>w!=null).map(([i,w])=>({playerId:parseInt(i),score:w}));if(r.length===0)return null;const t=Math.max(...r.map(i=>i.score)),c=r.filter(i=>i.score===t);return{score:t,playerIds:c.map(i=>i.playerId)}},_=()=>{const s={};return m.forEach(a=>{const r=d?.game1?.[a.id]||0,t=d?.game2?.[a.id]||0,c=d?.game3?.[a.id]||0;s[a.id]=r+t+c}),s},ee=()=>{const s=_(),a=Object.entries(s).filter(([c,i])=>i>0).map(([c,i])=>({playerId:parseInt(c),total:i}));if(a.length===0)return null;const r=Math.max(...a.map(c=>c.total)),t=a.filter(c=>c.total===r);return{total:r,playerIds:t.map(c=>c.playerId)}},se=()=>{const s={};m.forEach(i=>{s[i.id]=-C});const a=Y(1);if(a&&a.playerIds.length>0){const i=m.length*l/a.playerIds.length;a.playerIds.forEach(w=>{s[w]+=i})}const r=Y(2);if(r&&r.playerIds.length>0){const i=m.length*l/r.playerIds.length;r.playerIds.forEach(w=>{s[w]+=i})}const t=Y(3);if(t&&t.playerIds.length>0){const i=m.length*l/t.playerIds.length;t.playerIds.forEach(w=>{s[w]+=i})}const c=ee();if(c&&c.playerIds.length>0){const i=m.length*k/c.playerIds.length;c.playerIds.forEach(w=>{s[w]+=i})}return s},F=()=>{q({scores:{game1:{},game2:{},game3:{}},currentGame:1})},V=()=>{x(!1),N(""),R(""),P(!1)},b=_(),z=se(),W=m.length>0&&m.every(s=>d?.game1?.[s.id]!==null&&d?.game1?.[s.id]!==void 0&&d?.game2?.[s.id]!==null&&d?.game2?.[s.id]!==void 0&&d?.game3?.[s.id]!==null&&d?.game3?.[s.id]!==void 0);return y?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(le,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>f(!G),className:"btn-primary-purple p-2",title:"Show QR code to join",children:e.jsx(Ne,{size:20})})]})]}),G&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(ve,{value:v(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>f(!1),className:"mt-3 text-purple-400 hover:text-purple-300 font-semibold text-sm",children:"Hide QR Code"})]})}),H?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-3",children:"3-Game Series"}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High score each game wins $",l," per player"]}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High total wins $",k," per player"]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>{const a=Y(s);return e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-white",children:["Game ",s]}),a&&e.jsxs("span",{className:"text-sm text-purple-400 font-semibold flex items-center gap-1",children:[e.jsx(le,{size:16}),"High: ",a.score]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map(r=>{const t=a&&a.playerIds.includes(r.id);return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-primary mb-1",children:r.name}),e.jsx("input",{type:"number",value:Z(s,r.id),onChange:c=>ae(s,r.id,c.target.value),placeholder:"Score",className:`w-full game-input text-center text-lg font-bold ${t?"border-purple-400 bg-purple-900/30 text-purple-300":""}`,min:"0",max:"300"}),t&&e.jsx("p",{className:"text-xs text-purple-400 font-semibold mt-1 text-center",children:"ðŸ‘‘ Winner"})]},r.id)})})]},s)})}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4 border-2 border-purple-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(X,{className:"text-purple-400",size:24}),"Total Pins"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map(s=>{const a=ee(),r=a&&a.playerIds.includes(s.id);return e.jsxs("div",{className:`bg-slate-800/50 rounded-lg p-3 border ${r?"ring-2 ring-purple-400 border-purple-500":"border-slate-700"}`,children:[e.jsx("p",{className:"text-xs text-primary mb-1",children:s.name}),e.jsxs("p",{className:`text-2xl font-bold ${r?"text-purple-400":"text-white"}`,children:[b[s.id]||0,r&&" ðŸ‘‘"]})]},s.id)})})]}),W&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ue,{className:"text-green-400",size:24}),"Final Payouts"]}),e.jsx("div",{className:"space-y-2",children:m.sort((s,a)=>z[a.id]-z[s.id]).map((s,a)=>{const r=z[s.id],t=r>0,c=r<0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 flex justify-between items-center border border-slate-700",children:[e.jsxs("span",{className:"font-semibold text-white",children:[a===0&&r>0&&"ðŸ‘‘ ",s.name]}),e.jsxs("span",{className:`font-bold text-lg ${t?"text-green-400":c?"text-red-400":"text-primary"}`,children:[t?"+":"",r>=0?"$"+r.toFixed(2):"-$"+Math.abs(r).toFixed(2)]})]},s.id)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:F,className:"flex-1 btn-primary-purple",children:"Reset Scores"}),e.jsx("button",{onClick:V,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ue,{className:"text-green-400",size:20}),"Prize Structure"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold text-red-400",children:["$",C]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"High Game 1:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["$",l," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"High Game 2:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["$",l," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"High Game 3:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["$",l," per player"]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"High Totals:"}),e.jsxs("span",{className:"font-bold text-purple-400",children:["$",k," per player"]})]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-purple-300",children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",children:h})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:s=>T(s.target.value),onKeyDown:s=>s.key==="Enter"&&E(),placeholder:"Enter Player's Name",className:"game-input"}),e.jsxs("button",{onClick:E,className:"btn-primary-purple flex items-center justify-center gap-2",children:[e.jsx(ze,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),m.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",m.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.map(s=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow flex justify-between items-center border border-slate-700",children:[e.jsx("span",{className:"text-white",children:s.name}),e.jsxs("span",{className:"text-sm text-red-400 font-semibold",children:["$",C," in"]})]},s.id))}),e.jsx("div",{className:"mt-3 bg-purple-900/30 border border-purple-700 rounded p-2 text-center",children:e.jsxs("p",{className:"text-sm text-primary",children:["Prize Pool: ",e.jsxs("span",{className:"font-bold text-green-400",children:["$",m.length*C]})]})})]}),e.jsx("button",{onClick:K,disabled:m.length<2,className:"w-full btn-primary-purple text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:m.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(le,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Battle for the highest scores!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:g,className:"w-full btn-primary-purple flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(le,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:j,onChange:s=>R(s.target.value.toUpperCase()),onKeyDown:s=>s.key==="Enter"&&J(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:J,className:"w-full btn-primary-purple text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function vs(){const[h,N]=n.useState(""),[j,R]=n.useState(""),[p,P]=n.useState(!1),[y,x]=n.useState(!1),[G,f]=n.useState(!1),[m,I]=n.useState([]),[u,T]=n.useState(""),[H,$]=n.useState(!1),[o,M]=n.useState({quarterfinals:[],semifinals:[],finals:null,champion:null}),[d,A]=n.useState({}),[C]=n.useState(5),[l,k]=n.useState(0),[v]=n.useState(10),S=()=>`${window.location.origin+window.location.pathname}?join=${h}`,g=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("join");a&&R(a.toUpperCase())},[]),n.useEffect(()=>{const a=m.length*C-v;k(a)},[m.length,C,v]),n.useEffect(()=>{if(!h)return;const s=L(O,`bracketplay/${h}`),a=we(s,r=>{const t=r.val();t&&(I(t.players||[]),$(t.gameStarted||!1),M(t.matches||{quarterfinals:[],semifinals:[],finals:null,champion:null}),A(t.scores||{}))});return()=>a()},[h]);const J=()=>{const s=g();N(s),P(!0),x(!0);const a=L(O,`bracketplay/${s}`);te(a,{players:[],gameStarted:!1,matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},createdAt:Date.now()})},q=async()=>{if(!j.trim())return;const s=j.toUpperCase(),a=L(O,`bracketplay/${s}`);(await Q(a)).exists()?(N(s),P(!1),x(!0)):alert("Game not found! Check the code and try again.")},E=async s=>{if(h)try{const a=L(O,`bracketplay/${h}`),t=(await Q(a)).val()||{};await te(a,{...t,...s})}catch(a){console.error("Error updating game:",a)}},K=async()=>{if(u.trim()&&!H&&m.length<8){const s=[...m,{id:Date.now(),name:u.trim()}];await E({players:s}),T("")}},ae=s=>{const a=[...s];for(let r=a.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[a[r],a[t]]=[a[t],a[r]]}return a},Z=async()=>{if(m.length!==8){console.error("Need exactly 8 players to start tournament");return}try{const s=ae(m);if(console.log("Shuffled players:",s),!s.every(r=>r&&r.id&&r.name)){console.error("Invalid player data:",s),alert("Error: Invalid player data. Please refresh and try again.");return}const a=[{id:"qf1",player1:s[0],player2:s[1],winner:null},{id:"qf2",player1:s[2],player2:s[3],winner:null},{id:"qf3",player1:s[4],player2:s[5],winner:null},{id:"qf4",player1:s[6],player2:s[7],winner:null}];console.log("Created quarterfinals:",a),await E({gameStarted:!0,matches:{quarterfinals:a,semifinals:[],finals:null,champion:null},scores:{}}),console.log("Tournament started successfully")}catch(s){console.error("Error starting tournament:",s),alert("Failed to start tournament. Check console for details.")}},Y=async(s,a,r)=>{const t={...d},c=`${s}_${a}`;if(r==="")t[c]="";else{const i=parseInt(r,10);if(!isNaN(i)&&i>=0&&i<=300)t[c]=i;else return}A(t);try{await E({scores:t})}catch(i){console.error("Failed to save score:",i)}},_=(s,a)=>{const r=`${s}_${a}`;return d[r]??""},ee=(s,a,r)=>{const t=_(s,a),c=_(s,r),i=typeof t=="number"?t:parseInt(t,10),w=typeof c=="number"?c:parseInt(c,10),D=!isNaN(i)&&i>=0,U=!isNaN(w)&&w>=0;return console.log(`isMatchComplete(${s}): p1Score=${t}, p2Score=${c}, p1Valid=${D}, p2Valid=${U}, result=${D&&U}`),D&&U},se=async s=>{const a={...o};if(s==="quarterfinals")a.quarterfinals=a.quarterfinals.map(r=>{const t=_(r.id,r.player1.id),c=_(r.id,r.player2.id),i=t>c?r.player1:r.player2;return{...r,winner:i}}),a.semifinals=[{id:"sf1",player1:a.quarterfinals[0].winner,player2:a.quarterfinals[1].winner,winner:null},{id:"sf2",player1:a.quarterfinals[2].winner,player2:a.quarterfinals[3].winner,winner:null}];else if(s==="semifinals")a.semifinals=a.semifinals.map(r=>{const t=_(r.id,r.player1.id),c=_(r.id,r.player2.id),i=t>c?r.player1:r.player2;return{...r,winner:i}}),a.finals={id:"final",player1:a.semifinals[0].winner,player2:a.semifinals[1].winner,winner:null};else if(s==="finals"){const r=a.finals,t=_(r.id,r.player1.id),c=_(r.id,r.player2.id),i=t>c?r.player1:r.player2;a.finals.winner=i,a.champion=i}await E({matches:a})},F=s=>!s||s.length===0?!1:s.every(a=>a&&a.player1&&a.player2&&ee(a.id,a.player1.id,a.player2.id)),V=async()=>{await E({matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},gameStarted:!1})},b=()=>{x(!1),N(""),R(""),P(!1)},z=(s,a)=>{if(!s||!s.player1||!s.player2)return null;const r=_(s.id,s.player1.id),t=_(s.id,s.player2.id),c=ee(s.id,s.player1.id,s.player2.id),i=s.winner!==null;console.log(`${s.id}: p1Score=${r} (${typeof r}), p2Score=${t} (${typeof t}), isComplete=${c}, hasWinner=${i}`);const w=c&&r>t,D=c&&t>r;return e.jsxs("div",{className:"game-card",children:[e.jsx("h4",{className:"font-bold text-sm text-center mb-3 text-orange-400",children:s.id.toUpperCase()}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${i&&s.winner?.id===s.player1.id?"bg-green-900/30 border-2 border-green-500":w&&!i?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player1.name||"Player 1"}),i&&s.winner?.id===s.player1.id&&e.jsx(X,{className:"text-orange-400",size:16}),!i&&w&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player1_score`,inputMode:"numeric",pattern:"[0-9]*",value:r===""?"":r,onChange:U=>{const B=U.target.value;(B===""||/^\d+$/.test(B))&&Y(s.id,s.player1.id,B)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),e.jsx("div",{className:"text-center text-xs font-bold text-secondary mb-3",children:"VS"}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${i&&s.winner?.id===s.player2.id?"bg-green-900/30 border-2 border-green-500":D&&!i?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player2.name||"Player 2"}),i&&s.winner?.id===s.player2.id&&e.jsx(X,{className:"text-orange-400",size:16}),!i&&D&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player2_score`,inputMode:"numeric",pattern:"[0-9]*",value:t===""?"":t,onChange:U=>{const B=U.target.value;(B===""||/^\d+$/.test(B))&&Y(s.id,s.player2.id,B)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),!i&&!c&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Enter both scores"})}),!i&&c&&e.jsx("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["âœ“ Winner: ",r>t?s.player1.name:s.player2.name]})}),i&&s.winner&&e.jsx("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["ðŸ† ",s.winner.name," advances to next round!"]})})]})},W=o.finals&&o.finals.winner?o.finals.winner.id===o.finals.player1.id?o.finals.player2:o.finals.player1:null;return y?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(ce,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>f(!G),className:"btn-primary-orange p-2",title:"Show QR code to join",children:e.jsx(Ne,{size:20})})]})]}),G&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Tournament"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(ve,{value:S(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>f(!1),className:"mt-3 text-orange-400 hover:text-orange-300 font-semibold text-sm",children:"Hide QR Code"})]})}),H?e.jsxs("div",{className:"space-y-6",children:[o.champion&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 rounded-lg p-6 border-2 border-orange-500",children:[e.jsxs("h2",{className:"text-3xl font-bold text-center mb-4 flex items-center justify-center gap-2 text-white",children:[e.jsx(X,{className:"text-orange-400",size:40}),"Tournament Champion!"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 mb-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-2xl font-bold text-green-400 mb-2",children:["ðŸ¥‡ ",o.champion.name]}),e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:["Prize: $",l]})]}),W&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-lg font-bold text-primary",children:["ðŸ¥ˆ Runner-up: ",W.name]}),e.jsxs("p",{className:"text-center text-md font-bold text-primary",children:["Prize: $",v]})]})]}),o?.quarterfinals&&o.quarterfinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Quarterfinals"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.quarterfinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:z(s)},s.id))}),(!o.semifinals||o.semifinals.length===0)&&F(o.quarterfinals)&&e.jsx("button",{onClick:()=>se("quarterfinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 4 Winners to Semifinals"})]}),o?.semifinals&&o.semifinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Semifinals"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:o.semifinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:z(s)},s.id))}),!o.finals&&F(o.semifinals)&&e.jsx("button",{onClick:()=>se("semifinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 2 Winners to Finals"})]}),o.finals&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white text-center",children:"ðŸ† Championship Finals ðŸ†"}),e.jsx("div",{className:"max-w-md mx-auto",children:z(o.finals)}),!o.finals.winner&&ee(o.finals.id,o.finals.player1.id,o.finals.player2.id)&&e.jsx("button",{onClick:()=>se("finals"),className:"w-full mt-6 bg-orange-500 text-white py-4 rounded-lg hover:bg-orange-600 transition font-bold text-xl shadow-lg",children:"ðŸ‘‘ Crown the Champion!"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:V,className:"flex-1 btn-primary-orange",children:"Reset Tournament"}),e.jsx("button",{onClick:b,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ue,{className:"text-green-400",size:20}),"Prize Structure"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold text-red-400",children:["$",C]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary",children:"2nd Place:"}),e.jsxs("span",{className:"font-bold text-primary",children:["$",v]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{className:"text-primary font-semibold",children:"1st Place:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["$",l]})]}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Total Prize Pool: $",m.length*C]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-white",children:"Tournament Format"}),e.jsxs("ul",{className:"text-sm text-primary space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Quarterfinals (Game 1):"})," 8 players compete â†’ 4 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Semifinals (Game 2):"})," 4 players compete â†’ 2 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Finals (Game 3):"})," 2 players compete â†’ Champion crowned"]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{className:"text-orange-300",children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",children:h})," with 7 friends!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:s=>T(s.target.value),onKeyDown:s=>s.key==="Enter"&&K(),placeholder:"Enter Player's Name",className:"game-input",disabled:m.length>=8}),e.jsxs("button",{onClick:K,disabled:m.length>=8,className:"btn-primary-orange flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(ze,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),m.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",m.length,"/8)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.map((s,a)=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow border border-slate-700 text-white",children:[a+1,". ",s.name]},s.id))})]}),e.jsxs("button",{onClick:Z,disabled:m.length!==8,className:"w-full btn-primary-orange text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(_e,{size:20,className:"sm:w-6 sm:h-6"}),m.length!==8?`Need ${8-m.length} more player${8-m.length!==1?"s":""}`:"Start Tournament (Randomize Bracket)"]})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(ce,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"8-Player Single Elimination Tournament"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:J,className:"w-full btn-primary-orange flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(X,{size:20,className:"sm:w-6 sm:h-6"}),"Create Tournament"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:j,onChange:s=>R(s.target.value.toUpperCase()),onKeyDown:s=>s.key==="Enter"&&q(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:q,className:"w-full btn-primary-orange text-lg sm:text-xl",children:"Join Tournament"})]})]})]})})]})}function ws({isOpen:h,onClose:N}){const{signInWithGoogle:j,signUpWithEmail:R,signInWithEmail:p,continueAsGuest:P}=ie(),[y,x]=n.useState(!1),[G,f]=n.useState(null),[m,I]=n.useState("signin"),[u,T]=n.useState(""),[H,$]=n.useState(""),[o,M]=n.useState("");if(!h)return null;const d=()=>{T(""),$(""),M(""),f(null)},A=async()=>{x(!0),f(null);try{await j(),N(),d()}catch(S){f(S.message)}finally{x(!1)}},C=async S=>{S.preventDefault(),x(!0),f(null);try{await p(u,H),N(),d()}catch(g){f(g.code==="auth/user-not-found"?"No account found with this email":g.code==="auth/wrong-password"?"Incorrect password":g.code==="auth/invalid-email"?"Invalid email address":g.message)}finally{x(!1)}},l=async S=>{S.preventDefault(),x(!0),f(null);try{await R(u,H,o),N(),d()}catch(g){f(g.code==="auth/email-already-in-use"?"Email already in use":g.code==="auth/weak-password"?"Password should be at least 6 characters":g.code==="auth/invalid-email"?"Invalid email address":g.message)}finally{x(!1)}},k=async()=>{x(!0),f(null);try{await P(),N(),d()}catch(S){f(S.message)}finally{x(!1)}},v=S=>{I(S),f(null)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:N}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition",children:e.jsx(ne,{size:24})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:m==="signup"?"Create Account":"Welcome Back!"}),e.jsx("p",{className:"text-slate-400",children:m==="email"||m==="signup"?"Sign in to track your stats":"Sign in to track your stats and compete"})]}),G&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 text-sm",children:G}),m==="signin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:A,disabled:y,className:"w-full bg-white text-gray-800 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{onClick:()=>v("email"),disabled:y,className:"w-full bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[e.jsx(Se,{size:20}),"Continue with Email"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-slate-900 text-slate-400",children:"OR"})})]}),e.jsxs("button",{onClick:k,disabled:y,className:"w-full bg-slate-800 text-slate-300 font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[e.jsx(je,{size:20}),"Continue as Guest"]}),e.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"Guest accounts won't save your stats across devices"})]}),m==="email"&&e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:u,onChange:S=>T(S.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:H,onChange:S=>$(S.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Signing In...":"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>v("signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Don't have an account? Sign up"})}),e.jsx("button",{type:"button",onClick:()=>v("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]}),m==="signup"&&e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Display Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",value:o,onChange:S=>M(S.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"Your Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:u,onChange:S=>T(S.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:H,onChange:S=>$(S.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>v("email"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Already have an account? Sign in"})}),e.jsx("button",{type:"button",onClick:()=>v("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]})]})]})}function ks({isOpen:h,onClose:N}){const{currentUser:j,isGuest:R}=ie(),[p,P]=n.useState(null),[y,x]=n.useState(!0);n.useEffect(()=>{h&&j&&G()},[h,j]);const G=async()=>{if(j){x(!0);try{const f=L(O,`users/${j.uid}/stats`),m=await Q(f);m.exists()?P(m.val()):P({makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}})}catch(f){console.error("Error fetching stats:",f)}finally{x(!1)}}};return h?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:N}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-4xl w-full p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition",children:e.jsx(ne,{size:24})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[j?.photoURL?e.jsx("img",{src:j.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer",onError:f=>{f.target.style.display="none",f.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-2xl font-bold ${j?.photoURL?"hidden":"flex"}`,children:j?.displayName?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:j?.displayName||"Guest User"}),R&&e.jsx("p",{className:"text-amber-400 text-sm mt-1",children:"Guest Account - Sign in to save stats permanently"})]})]}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading your stats..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx(re,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Makes or Misses"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:p?.makesOrMisses?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:p?.makesOrMisses?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:p?.makesOrMisses?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:p?.makesOrMisses?.totalPoints||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Points"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:e.jsx(X,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Match Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:p?.matchPlay?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Matches Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:p?.matchPlay?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:p?.matchPlay?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:p?.matchPlay?.ties||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ties"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:e.jsx(le,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"King of the Hill"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-400",children:p?.kingOfTheHill?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:p?.kingOfTheHill?.highGameWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Game Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-400",children:p?.kingOfTheHill?.highTotalWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Total Wins"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:e.jsx(ce,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Bracket Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-violet-400",children:p?.bracketPlay?.tournamentsPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:p?.bracketPlay?.championships||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Championships"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-400",children:p?.bracketPlay?.runnerUps||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Runner-Ups"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Te,{size:24,className:"text-cyan-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Overall Performance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:(p?.makesOrMisses?.gamesPlayed||0)+(p?.matchPlay?.gamesPlayed||0)+(p?.kingOfTheHill?.gamesPlayed||0)+(p?.bracketPlay?.tournamentsPlayed||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400",children:(p?.makesOrMisses?.wins||0)+(p?.matchPlay?.wins||0)+(p?.kingOfTheHill?.highGameWins||0)+(p?.bracketPlay?.championships||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Wins"})]})]})]})]})]})]}):null}function Ss({isOpen:h,onClose:N}){const{isAdmin:j}=ie(),[R,p]=n.useState(!0),[P,y]=n.useState([]),[x,G]=n.useState({makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]}),[f,m]=n.useState({totalUsers:0,totalGames:0,guestUsers:0,authenticatedUsers:0}),[I,u]=n.useState("overview"),[T,H]=n.useState(null),[$,o]=n.useState(null);n.useEffect(()=>{h&&j&&M()},[h,j]);const M=async()=>{p(!0);try{const l=L(O,"users"),k=await Q(l),v=k.exists()?k.val():{},S=Object.entries(v).map(([F,V])=>({uid:F,...V}));y(S);const g={makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]},J=L(O,"games"),q=await Q(J);q.exists()&&(g.makesOrMisses=Object.entries(q.val()).map(([F,V])=>({code:F,...V})));const E=L(O,"matchplay"),K=await Q(E);K.exists()&&(g.matchPlay=Object.entries(K.val()).map(([F,V])=>({code:F,...V})));const ae=L(O,"kingofthehill"),Z=await Q(ae);Z.exists()&&(g.kingOfTheHill=Object.entries(Z.val()).map(([F,V])=>({code:F,...V})));const Y=L(O,"bracketplay"),_=await Q(Y);_.exists()&&(g.bracketPlay=Object.entries(_.val()).map(([F,V])=>({code:F,...V}))),G(g);const ee=S.filter(F=>F.isAnonymous).length,se=g.makesOrMisses.length+g.matchPlay.length+g.kingOfTheHill.length+g.bracketPlay.length;m({totalUsers:S.length,totalGames:se,guestUsers:ee,authenticatedUsers:S.length-ee})}catch(l){console.error("Error fetching admin data:",l)}finally{p(!1)}},d=async l=>{try{await Ie(L(O,`users/${l}`)),await M(),o(null)}catch(k){console.error("Error deleting user:",k),alert("Failed to delete user")}},A=async(l,k=null)=>{try{const v=L(O,`users/${l}`),S=await Q(v);if(S.exists()){const g=S.val();k?g.stats[k]={gamesPlayed:0,totalPoints:0,wins:0,losses:0,...k==="matchPlay"&&{ties:0},...k==="kingOfTheHill"&&{highGameWins:0,highTotalWins:0},...k==="bracketPlay"&&{tournamentsPlayed:0,championships:0,runnerUps:0}}:g.stats={makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}},await te(v,g),await M(),o(null)}}catch(v){console.error("Error resetting stats:",v),alert("Failed to reset stats")}},C=async(l,k)=>{try{const v={makesOrMisses:`games/${k}`,matchPlay:`matchplay/${k}`,kingOfTheHill:`kingofthehill/${k}`,bracketPlay:`bracketplay/${k}`};await Ie(L(O,v[l])),await M(),o(null)}catch(v){console.error("Error deleting game:",v),alert("Failed to delete game")}};return h?j?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:N}),$&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>o(null)}),e.jsxs("div",{className:"relative bg-slate-800 border-2 border-red-600 rounded-xl p-6 max-w-md w-full",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:["Confirm ",$.type==="user"?"User Deletion":$.type==="game"?"Game Deletion":"Stats Reset"]}),e.jsx("p",{className:"text-slate-300 mb-6",children:$.type==="user"?`Are you sure you want to delete "${$.name}"? This action cannot be undone.`:$.type==="game"?`Delete game "${$.name}"? All game data will be permanently removed.`:`Reset ${$.gameType==="all"?"all stats":`${$.gameType} stats`} for "${$.name}"?`}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>o(null),className:"flex-1 bg-slate-700 text-white py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{onClick:()=>{$.type==="user"?d($.id):$.type==="game"?C($.gameType,$.id):A($.id,$.gameType==="all"?null:$.gameType)},className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition font-semibold",children:$.type==="game"||$.type==="user"?"Delete":"Reset"})]})]})]}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border-b border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:e.jsx(Ge,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"System Overview & Management"})]})]}),e.jsx("button",{onClick:N,className:"text-slate-400 hover:text-white transition",children:e.jsx(ne,{size:24})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>u("overview"),className:`px-4 py-2 rounded-lg font-semibold transition ${I==="overview"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[e.jsx(Ae,{size:16,className:"inline mr-2"}),"Overview"]}),e.jsxs("button",{onClick:()=>u("users"),className:`px-4 py-2 rounded-lg font-semibold transition ${I==="users"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[e.jsx(Re,{size:16,className:"inline mr-2"}),"Users (",f.totalUsers,")"]}),e.jsxs("button",{onClick:()=>u("games"),className:`px-4 py-2 rounded-lg font-semibold transition ${I==="games"?"bg-cyan-500 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[e.jsx(Te,{size:16,className:"inline mr-2"}),"Active Games (",f.totalGames,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:R?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading admin data..."})]}):e.jsxs(e.Fragment,{children:[I==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:f.totalUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:f.authenticatedUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Authenticated"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:f.guestUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Guest Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-purple-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:f.totalGames}),e.jsx("div",{className:"text-sm text-slate-400",children:"Active Games"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Games by Mode"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{size:32,className:"text-cyan-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.makesOrMisses.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Makes or Misses"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{size:32,className:"text-emerald-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.matchPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Match Play"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{size:32,className:"text-amber-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.kingOfTheHill.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"King of the Hill"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{size:32,className:"text-violet-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:x.bracketPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Bracket Play"})]})]})]})]})]}),I==="users"&&e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900/50 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Total Games"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:P.map(l=>{const k=(l.stats?.makesOrMisses?.gamesPlayed||0)+(l.stats?.matchPlay?.gamesPlayed||0)+(l.stats?.kingOfTheHill?.gamesPlayed||0)+(l.stats?.bracketPlay?.tournamentsPlayed||0);return e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.photoURL?e.jsx("img",{src:l.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:v=>{v.target.style.display="none",v.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-sm font-bold ${l.photoURL?"hidden":"flex"}`,children:l.displayName?.[0]||"G"}),e.jsx("span",{className:"text-white font-medium",children:l.displayName||"Guest User"})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:l.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:l.isAnonymous?e.jsx("span",{className:"px-2 py-1 bg-amber-900/30 border border-amber-700 rounded text-amber-400 text-xs font-semibold",children:"Guest"}):e.jsx("span",{className:"px-2 py-1 bg-green-900/30 border border-green-700 rounded text-green-400 text-xs font-semibold",children:"Authenticated"})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:l.createdAt?new Date(l.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-white font-semibold",children:k}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>o({type:"stats",id:l.uid,name:l.displayName||"User",gameType:"all"}),className:"p-2 bg-amber-900/30 border border-amber-700 rounded hover:bg-amber-900/50 transition",title:"Reset All Stats",children:e.jsx(Qe,{size:14,className:"text-amber-400"})}),e.jsx("button",{onClick:()=>o({type:"user",id:l.uid,name:l.displayName||"User"}),className:"p-2 bg-red-900/30 border border-red-700 rounded hover:bg-red-900/50 transition",title:"Delete User",children:e.jsx(me,{size:14,className:"text-red-400"})})]})})]},l.uid)})})]})})}),I==="games"&&e.jsxs("div",{className:"space-y-6",children:[x.makesOrMisses.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-cyan-400"}),"Makes or Misses (",x.makesOrMisses.length,")"]}),e.jsx("div",{className:"grid gap-2",children:x.makesOrMisses.map(l=>{const k=T===`mom-${l.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-800/50",onClick:()=>H(k?null:`mom-${l.code}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[k?e.jsx(pe,{size:16,className:"text-cyan-400"}):e.jsx(ge,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-white font-mono font-semibold",children:l.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[l.players?.length||0," players â€¢ Round ",l.currentRound||0]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:l.createdAt?new Date(l.createdAt).toLocaleString():"-"})]}),k&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.players?.map((v,S)=>e.jsxs("div",{className:"flex justify-between bg-slate-900/50 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:v.name}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[v.score||0," pts"]})]},v.id||S))}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Status:"}),e.jsx("span",{className:"ml-2 text-white",children:l.gameStarted?"In Progress":"Waiting"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Active Player:"}),e.jsx("span",{className:"ml-2 text-white",children:l.players?.[l.activePlayerIndex]?.name||"-"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:v=>{v.stopPropagation(),o({type:"game",id:l.code,name:l.code,gameType:"makesOrMisses"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(me,{size:16}),"Delete Game"]})})]})]},l.code)})})]}),x.matchPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(X,{size:20,className:"text-emerald-400"}),"Match Play (",x.matchPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:x.matchPlay.map(l=>{const k=T===`matchPlay-${l.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>H(k?null:`matchPlay-${l.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:l.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[l.player1?.name||"Player 1"," vs ",l.player2?.name||"Player 2"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:l.createdAt?new Date(l.createdAt).toLocaleString():"-"}),k?e.jsx(pe,{size:20}):e.jsx(ge,{size:20})]})]}),k&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Match Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 1"}),e.jsx("div",{className:"text-white font-semibold",children:l.player1?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[l.player1?.score||0," points"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 2"}),e.jsx("div",{className:"text-white font-semibold",children:l.player2?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[l.player2?.score||0," points"]})]})]}),l.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",l.currentRound," / 10"]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:v=>{v.stopPropagation(),o({type:"game",id:l.code,name:l.code,gameType:"matchPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(me,{size:16}),"Delete Game"]})})]})]},l.code)})})]}),x.kingOfTheHill.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(le,{size:20,className:"text-amber-400"}),"King of the Hill (",x.kingOfTheHill.length,")"]}),e.jsx("div",{className:"grid gap-2",children:x.kingOfTheHill.map(l=>{const k=T===`kingOfTheHill-${l.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>H(k?null:`kingOfTheHill-${l.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:l.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[l.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:l.createdAt?new Date(l.createdAt).toLocaleString():"-"}),k?e.jsx(pe,{size:20}):e.jsx(ge,{size:20})]})]}),k&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:l.players?.map((v,S)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:v.name}),e.jsxs("span",{className:"text-amber-400 font-semibold text-sm",children:[v.score||0," pts"]})]},v.id||S))}),l.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",l.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:v=>{v.stopPropagation(),o({type:"game",id:l.code,name:l.code,gameType:"kingOfTheHill"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(me,{size:16}),"Delete Game"]})})]})]},l.code)})})]}),x.bracketPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(ce,{size:20,className:"text-violet-400"}),"Bracket Play (",x.bracketPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:x.bracketPlay.map(l=>{const k=T===`bracketPlay-${l.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>H(k?null:`bracketPlay-${l.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:l.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[l.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:l.createdAt?new Date(l.createdAt).toLocaleString():"-"}),k?e.jsx(pe,{size:20}):e.jsx(ge,{size:20})]})]}),k&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Standings"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:l.players?.map((v,S)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:v.name}),e.jsxs("span",{className:"text-violet-400 font-semibold text-sm",children:[v.wins||0," wins"]})]},v.id||S))}),l.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",l.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:v=>{v.stopPropagation(),o({type:"game",id:l.code,name:l.code,gameType:"bracketPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(me,{size:16}),"Delete Game"]})})]})]},l.code)})})]}),f.totalGames===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"No active games"})})]})]})})]})]}):e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:N}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-red-700 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx(Ge,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:N,className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition",children:"Close"})]})]}):null}const de=[{id:"668e3aca-5106-4c24-a9c1-2bd89926ebad",name:"Default Center",url:"https://livescore.lanetalk.com/livescoring/668e3aca-5106-4c24-a9c1-2bd89926ebad"},{id:"15903a3d-a2f1-48d8-ab8b-97c9476b688a",name:"Enterprise Lanes",url:"https://livescore.lanetalk.com/livescoring/15903a3d-a2f1-48d8-ab8b-97c9476b688a"}],We=de[0],Be=h=>{const N=de.find(j=>j.id===h)||We;return{finished:`${N.url}?tab=finished&q=&order=date&sort=asc`,scores:`${N.url}?tab=scores`,live:N.url}};function Ps({isOpen:h,onClose:N}){const[j,R]=n.useState(We.id);if(!h)return null;const p=Be(j),P=de.find(y=>y.id===j);return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-amber-500 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-amber-600 to-amber-700 p-6 flex justify-between items-center border-b-2 border-amber-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{size:32,className:"text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Top Bowlers"}),e.jsx("p",{className:"text-amber-100 text-sm",children:"Weekly Leaderboard"})]})]}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-amber-800 rounded-lg transition",children:e.jsx(ne,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:"p-6 border-b border-slate-700",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Bowling Center"}),e.jsx("select",{value:j,onChange:y=>R(y.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-amber-500",children:de.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6 text-center",children:[e.jsx(X,{size:64,className:"text-amber-500 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:["View ",P?.name," Leaderboard"]}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Click below to view the weekly top bowlers on Lanetalk Live Scoring"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("a",{href:p.scores,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white font-bold rounded-lg transition shadow-lg",children:[e.jsx(X,{size:20}),"View Top Bowlers",e.jsx(he,{size:16})]}),e.jsxs("a",{href:p.finished,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition",children:["View Finished Games",e.jsx(he,{size:16})]}),e.jsxs("a",{href:p.live,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition",children:["View Live Games",e.jsx(he,{size:16})]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-300",children:[e.jsx("strong",{children:"Note:"})," Leaderboard data is provided by Lanetalk Live Scoring. Rankings update automatically as games are completed at the bowling center."]})})]})]})})}function Cs({isOpen:h,onClose:N}){const{currentUser:j}=ie(),[R,p]=n.useState("lanetalk"),[P,y]=n.useState(de[0].id),[x,G]=n.useState("matchPlay"),[f,m]=n.useState(""),[I,u]=n.useState(""),[T,H]=n.useState("win"),[$,o]=n.useState(!1),[M,d]=n.useState(null),[A,C]=n.useState([]),[l,k]=n.useState([]),[v,S]=n.useState(!1);if(!h)return null;const g=async E=>{if(E.preventDefault(),!!j){o(!0),d(null);try{const K=L(O,`users/${j.uid}`),ae=await Q(K),Z=ae.exists()?ae.val():{stats:{}};Z.stats||(Z.stats={}),Z.stats[x]||(Z.stats[x]={gamesPlayed:0,wins:0,losses:0,totalPoints:0});const Y=Z.stats[x];Y.gamesPlayed+=1,T==="win"?Y.wins+=1:Y.losses+=1,f&&(Y.totalPoints+=parseInt(f)),await te(K,Z),d({type:"success",text:"Game score imported successfully!"}),m(""),u(""),H("win"),setTimeout(()=>{N(),d(null)},2e3)}catch(K){console.error("Error importing score:",K),d({type:"error",text:"Failed to import score. Please try again."})}finally{o(!1)}}},J=[{value:"matchPlay",label:"Match Play",icon:X},{value:"kingOfTheHill",label:"King of the Hill",icon:le},{value:"bracketPlay",label:"Bracket Play",icon:re}],q=Be(P);return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 border-2 border-blue-500 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 flex justify-between items-center border-b-2 border-blue-500 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{size:28,className:"text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Import Game Scores"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Add completed game results to your stats"})]})]}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-blue-800 rounded-lg transition",children:e.jsx(ne,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:"flex border-b border-slate-700 bg-slate-800/50",children:[e.jsxs("button",{onClick:()=>p("lanetalk"),className:`flex-1 px-6 py-4 font-semibold transition flex items-center justify-center gap-2 ${R==="lanetalk"?"bg-slate-900 text-blue-400 border-b-2 border-blue-500":"text-slate-400 hover:text-slate-300"}`,children:[e.jsx(Je,{size:18}),"From Lanetalk"]}),e.jsxs("button",{onClick:()=>p("manual"),className:`flex-1 px-6 py-4 font-semibold transition flex items-center justify-center gap-2 ${R==="manual"?"bg-slate-900 text-blue-400 border-b-2 border-blue-500":"text-slate-400 hover:text-slate-300"}`,children:[e.jsx(Ke,{size:18}),"Manual Entry"]})]}),R==="lanetalk"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Bowling Center"}),e.jsx("select",{value:P,onChange:E=>y(E.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:de.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx(he,{size:16}),"How to Import from Lanetalk"]}),e.jsxs("ol",{className:"text-sm text-blue-300 space-y-2 ml-4 list-decimal",children:[e.jsx("li",{children:'Click "Open Lanetalk Scores" below to view your completed games'}),e.jsx("li",{children:'Find your games in the "COMPLETED" tab'}),e.jsx("li",{children:"Note your scores and results"}),e.jsx("li",{children:'Return here and use "Manual Entry" to add each game'})]})]}),e.jsxs("a",{href:q.finished,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold rounded-lg transition shadow-lg flex items-center justify-center gap-2",children:[e.jsx(he,{size:20}),"Open Lanetalk Scores"]}),e.jsx("div",{className:"bg-amber-900/20 border border-amber-700 rounded-lg p-4",children:e.jsxs("p",{className:"text-xs text-amber-300",children:[e.jsx("strong",{children:"Coming Soon:"})," We're working on automatic score detection! For now, please use the Manual Entry tab to add your games after viewing them on Lanetalk."]})})]}),R==="manual"&&e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Game Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:J.map(E=>{const K=E.icon;return e.jsxs("button",{type:"button",onClick:()=>G(E.value),className:`p-3 rounded-lg border-2 transition flex flex-col items-center gap-1 ${x===E.value?"bg-blue-600 border-blue-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:[e.jsx(K,{size:20}),e.jsx("span",{className:"text-xs font-semibold text-center",children:E.label})]},E.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Opponent Name (Optional)"}),e.jsx("input",{type:"text",value:I,onChange:E=>u(E.target.value),placeholder:"Enter opponent's name",className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Your Score/Points"}),e.jsx("input",{type:"number",value:f,onChange:E=>m(E.target.value),placeholder:"Enter your total score (e.g., 775)",required:!0,min:"0",className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Result"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>H("win"),className:`py-3 rounded-lg border-2 font-semibold transition ${T==="win"?"bg-green-600 border-green-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Win"}),e.jsx("button",{type:"button",onClick:()=>H("loss"),className:`py-3 rounded-lg border-2 font-semibold transition ${T==="loss"?"bg-red-600 border-red-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-500"}`,children:"Loss"})]})]}),M&&e.jsx("div",{className:`p-3 rounded-lg border ${M.type==="success"?"bg-green-900/30 border-green-600 text-green-300":"bg-red-900/30 border-red-600 text-red-300"}`,children:M.text}),e.jsxs("button",{type:"submit",disabled:$||!f,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-slate-700 disabled:to-slate-700 text-white font-bold rounded-lg transition shadow-lg flex items-center justify-center gap-2",children:[e.jsx(ye,{size:20}),$?"Importing...":"Import Score"]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-300",children:[e.jsx("strong",{children:"Tip:"})," Enter your total series score from Lanetalk. For example, if you bowled 140, 232, 139, 134, 124 (totaling 769), enter 769."]})})]})]})})}function Gs(){const[h,N]=n.useState(null),[j,R]=n.useState(null),[p,P]=n.useState(!1),[y,x]=n.useState(!1),[G,f]=n.useState(!1),[m,I]=n.useState(!1),[u,T]=n.useState(!1),[H,$]=n.useState(!1),[o,M]=n.useState(!1),{currentUser:d,isGuest:A,isAdmin:C,signOut:l}=ie(),k=[{id:"makes-or-misses",name:"Makes or Misses",description:"Predict if you make or miss the next shot",icon:re,gradient:"from-cyan-500 via-blue-500 to-indigo-600",glowColor:"shadow-cyan-500/50",badge:"ðŸŽ¯ Quick Play",available:!0},{id:"match-play",name:"Match Play",description:"Head-to-head 3-game match",icon:X,gradient:"from-emerald-500 via-teal-500 to-cyan-600",glowColor:"shadow-emerald-500/50",badge:"âš¡ 1v1 Battle",available:!0},{id:"king-of-the-hill",name:"King of the Hill",description:"High game takes it all",icon:le,gradient:"from-amber-500 via-orange-500 to-red-600",glowColor:"shadow-amber-500/50",badge:"ðŸ‘‘ Multiplayer",available:!0},{id:"bracket-play",name:"Bracket Play",description:"8-player single elimination bracket",icon:ce,gradient:"from-violet-500 via-purple-500 to-fuchsia-600",glowColor:"shadow-violet-500/50",badge:"ðŸ† Tournament",available:!0}],v=g=>{if(k.find(q=>q.id===g).available){if(A&&g!=="makes-or-misses"){M(!0);return}N(g)}},S=()=>{N(null)};return h==="makes-or-misses"?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[e.jsx(be,{size:20}),"Back to Games"]}),e.jsx(js,{})]}):h==="match-play"?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[e.jsx(be,{size:20}),"Back to Games"]}),e.jsx(ys,{})]}):h==="king-of-the-hill"?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[e.jsx(be,{size:20}),"Back to Games"]}),e.jsx(Ns,{})]}):h==="bracket-play"?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:S,className:"absolute top-4 left-4 z-50 bg-white text-gray-700 px-4 py-2 rounded-lg shadow-lg hover:bg-gray-100 transition flex items-center gap-2 font-semibold",children:[e.jsx(be,{size:20}),"Back to Games"]}),e.jsx(vs,{})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-6 right-6 z-20",children:d?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!y),className:"flex items-center gap-3 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-full px-4 py-2 hover:bg-slate-800 transition",children:[d.photoURL?e.jsx("img",{src:d.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:g=>{g.target.style.display="none",g.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center ${d.photoURL?"hidden":"flex"}`,children:e.jsx(je,{size:20,className:"text-white"})}),e.jsxs("span",{className:"text-white font-semibold",children:[d.displayName||"Guest",A&&e.jsx("span",{className:"text-slate-400 text-sm ml-1",children:"(Guest)"})]})]}),y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-slate-900 border border-slate-700 rounded-lg shadow-2xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>{f(!0),x(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-slate-800 transition flex items-center gap-3",children:[e.jsx(Ae,{size:18}),"View Stats"]}),C&&e.jsxs("button",{onClick:()=>{I(!0),x(!1)},className:"w-full px-4 py-3 text-left text-purple-400 hover:bg-slate-800 transition flex items-center gap-3 border-t border-slate-800",children:[e.jsx(Ge,{size:18}),"Admin Dashboard"]}),e.jsxs("button",{onClick:async()=>{await l(),x(!1)},className:"w-full px-4 py-3 text-left text-red-400 hover:bg-slate-800 transition flex items-center gap-3 border-t border-slate-800",children:[e.jsx(Ve,{size:18}),"Sign Out"]})]})]}):e.jsxs("button",{onClick:()=>P(!0),className:"bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold px-6 py-2 rounded-full hover:shadow-lg hover:shadow-cyan-500/50 transition flex items-center gap-2",children:[e.jsx(je,{size:20}),"Sign In"]})}),e.jsx(ws,{isOpen:p,onClose:()=>P(!1)}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>M(!1)}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-purple-500 rounded-2xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Register to Play"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["Guest accounts can only access ",e.jsx("span",{className:"text-cyan-400 font-semibold",children:"Makes or Misses"}),". Sign up for a free account to unlock all game modes and track your stats!"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{M(!1),P(!0)},className:"flex-1 bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg hover:shadow-purple-500/50 transition",children:"Sign Up"}),e.jsx("button",{onClick:()=>M(!1),className:"flex-1 bg-slate-800 text-slate-300 font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition border border-slate-700",children:"Cancel"})]})]})]}),e.jsx(ks,{isOpen:G,onClose:()=>f(!1)}),e.jsx(Ss,{isOpen:m,onClose:()=>I(!1)}),e.jsx(Ps,{isOpen:u,onClose:()=>T(!1)}),e.jsx(Cs,{isOpen:H,onClose:()=>$(!1)}),e.jsx("div",{className:"relative z-10 min-h-screen p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full",children:[e.jsxs("div",{className:"text-center mb-16 space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20 rounded-full px-6 py-2 mb-4",children:[e.jsx(Ee,{className:"text-purple-400",size:18}),e.jsx("span",{className:"text-purple-300 text-sm font-semibold tracking-wide",children:"MULTIPLAYER BOWLING GAMES"})]}),e.jsx("h1",{className:"text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 mb-4 tracking-tight",children:"BOWLING FUN"}),e.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-light",children:"Choose your battleground and dominate the lanes with friends"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[k.map(g=>{const J=g.icon,q=j===g.id,E=A&&g.id!=="makes-or-misses";return e.jsxs("button",{onClick:()=>v(g.id),onMouseEnter:()=>R(g.id),onMouseLeave:()=>R(null),disabled:!g.available,className:`group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 ${g.available?"hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl":"opacity-40 cursor-not-allowed"} ${E?"opacity-60":""}`,children:[q&&g.available&&e.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${g.gradient} rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:g.badge})}),e.jsxs("div",{className:`relative w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br ${g.gradient} flex items-center justify-center transform ${g.available?"group-hover:scale-110 group-hover:rotate-6":""} transition-all duration-500 shadow-lg ${q?g.glowColor+" shadow-2xl":""}`,children:[e.jsx(J,{size:32,className:"text-white"}),E&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:e.jsx(Ce,{size:24,className:"text-white"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:g.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:g.description}),g.available?e.jsxs("div",{className:`flex items-center justify-center gap-2 bg-gradient-to-r ${g.gradient} px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300`,children:[e.jsx(Ze,{size:16}),e.jsx("span",{children:"PLAY NOW"})]}):e.jsx("div",{className:"inline-flex items-center gap-2 bg-slate-800 text-slate-500 px-4 py-2.5 rounded-lg text-sm font-semibold",children:"ðŸ”’ Coming Soon"})]})]},g.id)}),e.jsxs("button",{onClick:()=>T(!0),onMouseEnter:()=>R("top-bowlers"),onMouseLeave:()=>R(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[j==="top-bowlers"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ† Leaderboard"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-amber-500 via-yellow-500 to-orange-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-amber-500/50 hover:shadow-2xl",children:e.jsx(X,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Top Bowlers"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Weekly leaderboard from your bowling center"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(Ee,{size:16}),e.jsx("span",{children:"VIEW LEADERS"})]})]})]}),d&&!A&&e.jsxs("button",{onClick:()=>$(!0),onMouseEnter:()=>R("import-scores"),onMouseLeave:()=>R(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[j==="import-scores"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ“Š Track Stats"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-blue-500/50 hover:shadow-2xl",children:e.jsx(ye,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Import Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Add your completed game scores"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(ye,{size:16}),e.jsx("span",{children:"ADD SCORES"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:"4"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Game Modes"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"âˆž"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Multiplayer Fun"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold",children:"ðŸŽ³"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Real-Time Sync"})]})]})]})})]})}xs.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(bs,{children:e.jsx(Gs,{})})}));
