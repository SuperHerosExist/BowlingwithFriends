import{r as os,a as is}from"./react-vendor-D3F3s8fL.js";import{r as l,T as ve,U as qe,H as es,Q as Ge,X as he,a as Ie,C as Je,b as oe,D as ke,c as ue,N as Ce,S as cs,Z as ge,M as He,L as Fe,d as Be,e as ss,f as Qe,B as ts,g as fe,h as ds,i as Te,j as $e,A as Ne,k as Le,l as ms,G as _e,P as xs,m as gs,n as Ke}from"./icons-D_1WBMpV.js";import{Q as Me}from"./qrcode-D3Dv1f8E.js";import{i as us,g as hs,a as bs,G as ps,o as fs,s as Ve,b as ys,c as js,d as Ns,u as vs,e as ws,r as H,f as ae,h as ne,j as Re,k as ye}from"./firebase-DUuZ1j83.js";(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const C of g)if(C.type==="childList")for(const y of C.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function b(g){const C={};return g.integrity&&(C.integrity=g.integrity),g.referrerPolicy&&(C.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?C.credentials="include":g.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function h(g){if(g.ep)return;g.ep=!0;const C=b(g);fetch(g.href,C)}})();var De={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ze;function ks(){if(Ze)return Pe;Ze=1;var u=os(),k=Symbol.for("react.element"),b=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,g=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function y(p,P,S){var L,z={},$=null,w=null;S!==void 0&&($=""+S),P.key!==void 0&&($=""+P.key),P.ref!==void 0&&(w=P.ref);for(L in P)h.call(P,L)&&!C.hasOwnProperty(L)&&(z[L]=P[L]);if(p&&p.defaultProps)for(L in P=p.defaultProps,P)z[L]===void 0&&(z[L]=P[L]);return{$$typeof:k,type:p,key:$,ref:w,props:z,_owner:g.current}}return Pe.Fragment=b,Pe.jsx=y,Pe.jsxs=y,Pe}var Ye;function Cs(){return Ye||(Ye=1,De.exports=ks()),De.exports}var e=Cs(),Ae={},Xe;function Ss(){if(Xe)return Ae;Xe=1;var u=is();return Ae.createRoot=u.createRoot,Ae.hydrateRoot=u.hydrateRoot,Ae}var Ps=Ss();const Gs={apiKey:"AIzaSyBplm3Xt3Mru_Sxi2g3uptgbzXbQ8KZ0Aw",authDomain:"bowling-fun.firebaseapp.com",databaseURL:"https://bowling-fun-default-rtdb.firebaseio.com",projectId:"bowling-fun",storageBucket:"bowling-fun.firebasestorage.app",messagingSenderId:"1041099466681",appId:"1:1041099466681:web:55553970cd19f150dc3868"},as=us(Gs),D=hs(as),je=bs(as),Ms=new ps,Rs=["davesfx@gmail.com","daves.seeker@gmail.com"],Ee=u=>!u||!u.email?!1:Rs.includes(u.email.toLowerCase()),rs=l.createContext();function me(){return l.useContext(rs)}function Es({children:u}){const[k,b]=l.useState(null),[h,g]=l.useState(!0),[C,y]=l.useState(!1),[p,P]=l.useState(!1),S=async N=>{if(!N)return;const U=H(D,`users/${N.uid}`),f=await ae(U);if(!f.exists())await ne(U,{uid:N.uid,displayName:N.displayName||"Guest User",email:N.email||null,photoURL:N.photoURL||null,isAnonymous:N.isAnonymous,createdAt:Date.now(),stats:{makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}});else{const _=f.val()||{},X={displayName:N.displayName||_.displayName||"Guest User",photoURL:N.photoURL||_.photoURL||null,email:N.email||_.email||null,lastLogin:Date.now()};await ne(U,{..._,...X})}},L=async()=>{try{const N=await ws(je,Ms);return await S(N.user),y(!1),N.user}catch(N){throw console.error("Error signing in with Google:",N),N}},z=async(N,U,f)=>{try{const _=await Ns(je,N,U);return f&&await vs(_.user,{displayName:f}),await S(_.user),y(!1),_.user}catch(_){throw console.error("Error signing up with email:",_),_}},$=async(N,U)=>{try{const f=await js(je,N,U);return await S(f.user),y(!1),f.user}catch(f){throw console.error("Error signing in with email:",f),f}},w=async()=>{try{const N=await Ve(je);return await S(N.user),y(!0),N.user}catch(N){throw console.error("Error signing in anonymously:",N),N}},M=async()=>{try{await ys(je),y(!1)}catch(N){throw console.error("Error signing out:",N),N}};l.useEffect(()=>fs(je,async U=>{if(U)b(U),y(U?.isAnonymous||!1),P(Ee(U)),await S(U),g(!1);else try{const f=await Ve(je);b(f.user),y(!0),P(!1),await S(f.user)}catch(f){console.error("Error auto-signing in as guest:",f)}finally{g(!1)}}),[]);const x={currentUser:k,isGuest:C,isAdmin:p,signInWithGoogle:L,signUpWithEmail:z,signInWithEmail:$,continueAsGuest:w,signOut:M,loading:h};return e.jsx(rs.Provider,{value:x,children:!h&&u})}function zs(){const{currentUser:u}=me(),k=async(y,p)=>{if(u)try{const P=H(D,`users/${u.uid}/stats/${y}`),S=await ae(P),z={...S.exists()?S.val():{}};Object.keys(p).forEach($=>{typeof p[$]=="number"?z[$]=(z[$]||0)+p[$]:z[$]=p[$]}),await ne(P,z)}catch(P){console.error("Error updating stats:",P)}};return{recordMakesOrMissesGame:async y=>{const{isWinner:p,points:P}=y;await k("makesOrMisses",{gamesPlayed:1,totalPoints:P,wins:p?1:0,losses:p?0:1})},recordMatchPlayGame:async y=>{const{outcome:p}=y;await k("matchPlay",{gamesPlayed:1,wins:p==="win"?1:0,losses:p==="loss"?1:0,ties:p==="tie"?1:0})},recordKingOfTheHillGame:async y=>{const{wonHighGame:p,wonHighTotal:P}=y;await k("kingOfTheHill",{gamesPlayed:1,highGameWins:p?1:0,highTotalWins:P?1:0})},recordBracketPlayTournament:async y=>{const{isChampion:p,isRunnerUp:P}=y;await k("bracketPlay",{tournamentsPlayed:1,championships:p?1:0,runnerUps:P?1:0})}}}function Ts(){const{currentUser:u}=me(),{recordMakesOrMissesGame:k}=zs(),[b,h]=l.useState(""),[g,C]=l.useState(""),[y,p]=l.useState(!1),[P,S]=l.useState(!1),[L,z]=l.useState(!1),[$,w]=l.useState(!1),[M,x]=l.useState([]),[N,U]=l.useState(""),[f,_]=l.useState(0),[X,j]=l.useState(0),[W,F]=l.useState(null),[A,Y]=l.useState(!1),[V,J]=l.useState({}),ie=.25,se=t=>(t*ie).toFixed(2),re=(t,o)=>`${t}->${o}`,r=()=>`${window.location.origin+window.location.pathname}?join=${b}&game=makes-or-misses`,G=t=>{let o=0,i=0;return Object.entries(V).forEach(([m,I])=>{if(!I)return;const[O,a]=m.split("->").map(Number);a===t&&(o+=I),O===t&&(i+=I)}),o-i},R=()=>Math.random().toString(36).substring(2,8).toUpperCase(),Q=t=>t.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" ");l.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("join");o&&C(o.toUpperCase())},[]),l.useEffect(()=>{if(!b)return;const t=H(D,`games/${b}`),o=Re(t,i=>{const m=i.val();m&&(x(m.players||[]),_(m.currentRound||0),j(m.activePlayerIndex||0),F(m.activePlayerChoice||null),Y(m.gameStarted||!1),J(m.ledger||{}))});return()=>o()},[b]);const d=()=>{const t=R();h(t),p(!0),S(!0);const o=u?.displayName||u?.email?.split("@")[0]||"Player",i=[{id:Date.now(),name:Q(o),score:0}],m=H(D,`games/${t}`);ne(m,{players:i,currentRound:0,activePlayerIndex:0,activePlayerChoice:null,gameStarted:!1,ledger:{},createdAt:Date.now()})},K=async()=>{if(!g.trim())return;const t=g.toUpperCase(),o=H(D,`games/${t}`),i=await ae(o);if(i.exists()){h(t),p(!1),S(!0);const m=i.val(),I=u?.displayName||u?.email?.split("@")[0]||"Player";if(!m.players?.find(a=>a.name.toLowerCase()===I.toLowerCase())&&!m.gameStarted){const a=[...m.players||[],{id:Date.now(),name:Q(I),score:0}];await ne(o,{...m,players:a})}}else alert("Game not found! Check the code and try again.")},B=t=>{if(!b)return;const o=H(D,`games/${b}`);ne(o,{players:M,currentRound:f,activePlayerIndex:X,activePlayerChoice:W,gameStarted:A,ledger:V,...t})},ee=()=>{if(N.trim()&&!A){const t=[...M,{id:Date.now(),name:Q(N.trim()),score:0}];B({players:t}),U("")}},le=()=>{M.length>=2&&B({gameStarted:!0,currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},ce=t=>{B({activePlayerChoice:t})},v=t=>{const o=M[X],i=M.filter((O,a)=>a!==X),m=M.map((O,a)=>a===X?W===t?{...O,score:O.score+(M.length-1)}:O:(W==="make"?"miss":"make")===t?{...O,score:O.score+1}:O),I={...V};W===t?i.forEach(O=>{const a=re(O.id,o.id);I[a]=(I[a]||0)+1}):i.forEach(O=>{const a=re(o.id,O.id);I[a]=(I[a]||0)+1}),B({players:m,ledger:I,currentRound:f<50?f+1:f,activePlayerIndex:f<50?(X+1)%M.length:X,activePlayerChoice:null})},T=async()=>{if(!u||!n)return;const t=M.find(o=>o.name.toLowerCase()===u.displayName?.toLowerCase()||o.id===u.uid);if(t){const o=Math.max(...M.map(m=>m.score)),i=t.score===o;await k({isWinner:i,points:t.score})}},q=()=>{T(),B({players:M.map(t=>({...t,score:0})),ledger:{},currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},c=()=>{S(!1),h(""),C(""),p(!1)},s=M[X],n=f>50;return P?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",right:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>w(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(6, 182, 212, 0.2)",border:"1px solid rgb(6, 182, 212)",color:"rgb(34, 211, 238)"},title:"How to play",children:e.jsx(es,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(ve,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:b})]}),e.jsx("button",{onClick:()=>z(!L),className:"btn-primary-cyan p-2",title:"Show QR code to join",children:e.jsx(Ge,{size:20})})]})]}),$&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>w(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(34, 211, 238)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>w(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(he,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600",children:e.jsx(ve,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸŽ¯ The Game"}),e.jsx("p",{className:"text-sm",children:'One player predicts "Make" or "Miss". Everyone else gets the opposite prediction automatically!'})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸ’° Scoring"}),e.jsx("p",{className:"text-sm",children:"Guess correctly? +1 point! Wrong? -1 point. Play 50 rounds and watch the leaderboard!"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"ðŸ“± Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Each round = $0.25 per point"}),e.jsx("li",{children:"Players rotate who chooses"}),e.jsx("li",{children:"Check the debt breakdown at the end!"})]})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(6, 182, 212), rgb(59, 130, 246))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),L&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(Me,{value:r(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-slate-400 mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:b})]}),e.jsx("button",{onClick:()=>z(!1),className:"mt-3 text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Hide QR Code"})]})}),A?e.jsxs("div",{className:"space-y-6",children:[n?e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"ðŸŽ‰ Game Over! ðŸŽ‰"}),e.jsx("p",{className:"text-xl mb-6 text-slate-300",children:"50 rounds completed!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Round ",f]}),e.jsxs("p",{className:"text-lg mt-2 text-slate-300",children:[e.jsx("span",{className:"font-bold text-purple-600",children:s?.name}),"'s turn to choose"]})]}),e.jsxs("div",{className:"bg-amber-900/30 border-2 border-amber-500 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-center mb-4 text-white",children:[s?.name,", make your choice:"]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>ce("make"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:W==="make"?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(34, 197, 94)",color:W==="make"?"rgb(255, 255, 255)":"rgb(34, 197, 94)"},onMouseEnter:t=>{W!=="make"&&(t.currentTarget.style.backgroundColor="rgba(34, 197, 94, 0.1)")},onMouseLeave:t=>{W!=="make"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(Je,{className:"inline mr-2",size:24}),"Make"]}),e.jsxs("button",{onClick:()=>ce("miss"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:W==="miss"?"rgb(239, 68, 68)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(239, 68, 68)",color:W==="miss"?"rgb(255, 255, 255)":"rgb(239, 68, 68)"},onMouseEnter:t=>{W!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)")},onMouseLeave:t=>{W!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(he,{className:"inline mr-2",size:24}),"Miss"]})]}),W&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mt-4",children:[e.jsxs("p",{className:"text-center text-slate-300 mb-3",children:[e.jsx("span",{className:"font-bold",children:s?.name})," chose:"," ",e.jsx("span",{className:`font-bold ml-2 ${W==="make"?"text-green-600":"text-red-600"}`,children:W==="make"?"MAKES":"MISSES"})]}),e.jsxs("p",{className:"text-center text-sm text-slate-400 mb-4",children:["All other players automatically get:"," ",e.jsx("span",{className:`font-bold ml-2 ${W==="miss"?"text-green-600":"text-red-600"}`,children:W==="miss"?"MAKES":"MISSES"})]}),e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsx("h4",{className:"font-bold text-center mb-3 text-white",children:"What was the result?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>v("make"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(34, 197, 94)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(22, 163, 74)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(34, 197, 94)",children:[e.jsx(Je,{className:"inline mr-2",size:20}),"Made It!"]}),e.jsxs("button",{onClick:()=>v("miss"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(239, 68, 68)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(220, 38, 38)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(239, 68, 68)",children:[e.jsx(he,{className:"inline mr-2",size:20}),"Missed!"]})]})]})]})]}),e.jsx("div",{className:"player-grid",children:M.map((t,o)=>{const i=o===X,m=i?W:W==="make"?"miss":W==="miss"?"make":null;return e.jsxs("div",{className:`player-card ${i?"active bg-amber-900/30 border-2 border-amber-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm sm:text-base text-white",children:[t.name," ",i&&"ðŸ‘ˆ"]}),e.jsx("span",{className:"score-badge",children:t.score})]}),m&&e.jsx("div",{className:`text-center py-2 rounded font-semibold text-sm ${m==="make"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:m==="make"?"MAKES":"MISSES"})]},t.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-amber-400",size:24}),"Leaderboard"]}),e.jsx("div",{className:"space-y-2",children:[...M].sort((t,o)=>o.score-t.score).map((t,o)=>{const i=(t.score*ie).toFixed(2),m=se(G(t.id));return e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[o===0&&"ðŸ¥‡"," ",o===1&&"ðŸ¥ˆ"," ",o===2&&"ðŸ¥‰"," ",t.name]}),e.jsxs("span",{className:"font-bold text-sm",style:{color:"rgb(192, 132, 252)"},children:[t.score," pts ($",i,") Â· Net $",m]})]},t.id)})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4 mt-4",children:[e.jsx("h4",{className:"font-bold text-md mb-2 text-white",children:"ðŸ’µ Owes Breakdown"}),M.length<=1?e.jsx("p",{className:"text-slate-400 text-sm",children:"Add more players to calculate owes."}):(()=>{const t={};M.forEach(i=>t[i.id]=[]),Object.entries(V).forEach(([i,m])=>{if(!m)return;const[I,O]=i.split("->").map(Number),a=M.find(te=>te.id===I),E=M.find(te=>te.id===O);!a||!E||t[O].push({debtorId:I,debtorName:a.name,pts:m,money:se(m)})});const o=M.map(i=>{const m=t[i.id]||[],I=m.reduce((O,a)=>O+Number(a.money),0).toFixed(2);return{cr:i,items:m,total:I}}).filter(i=>i.items.length>0);return o.length===0?e.jsx("p",{className:"text-slate-300 text-sm",children:"No debts yet."}):e.jsx("div",{className:"space-y-4",children:o.map(({cr:i,items:m,total:I})=>e.jsxs("div",{className:"bg-slate-800/50 rounded-md p-3",children:[e.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Payouts to ",e.jsx("span",{className:"font-semibold",children:i.name}),":"]}),e.jsx("ul",{className:"list-disc ml-5 space-y-1",children:m.map(O=>e.jsxs("li",{className:"text-white text-sm",children:[O.debtorName," owes ",i.name," $",O.money," (",O.pts," pts)"]},O.debtorId))}),e.jsxs("p",{className:"text-slate-300 text-sm mt-2",children:[i.name," total to collect: ",e.jsxs("span",{className:"font-semibold",children:["$",I]})]})]},i.id))})})()]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:q,className:"flex-1 btn-primary-cyan",children:"Reset Scores"}),e.jsx("button",{onClick:c,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(103, 232, 249)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:b})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:t=>U(t.target.value),onKeyDown:t=>t.key==="Enter"&&ee(),placeholder:"Enter Bowler's Name",className:"game-input"}),e.jsxs("button",{onClick:ee,className:"btn-primary-orange flex items-center justify-center gap-2",children:[e.jsx(Ie,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),M.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Bowlers (",M.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:M.map(t=>e.jsx("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow text-white",children:t.name},t.id))})]}),e.jsx("button",{onClick:le,disabled:M.length<2,className:"w-full py-4 rounded-lg transition font-bold text-xl disabled:cursor-not-allowed",style:{backgroundColor:M.length<2?"rgb(209, 213, 219)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:M.length<2?.5:1},onMouseEnter:t=>{M.length>=2&&(t.currentTarget.style.backgroundColor="rgb(22, 163, 74)")},onMouseLeave:t=>{M.length>=2&&(t.currentTarget.style.backgroundColor="rgb(34, 197, 94)")},children:M.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(ve,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Multiplayer Bowling Predictor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:d,className:"w-full btn-primary-cyan flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(qe,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:g,onChange:t=>C(t.target.value.toUpperCase()),onKeyDown:t=>t.key==="Enter"&&K(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:K,className:"w-full btn-primary-cyan text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function $s(){const{currentUser:u}=me(),k=u&&Ee(u.email),b=u?.isAnonymous,[h,g]=l.useState(""),[C,y]=l.useState(""),[p,P]=l.useState(!1),[S,L]=l.useState(!1),[z,$]=l.useState(!1),[w,M]=l.useState({name:"",id:null}),[x,N]=l.useState({name:"",id:null}),[U,f]=l.useState(!1),[_,X]=l.useState(1),[j,W]=l.useState({game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),[F,A]=l.useState({perGame:5,totals:5}),Y=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=match-play`,V=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const T=new URLSearchParams(window.location.search).get("join");T&&y(T.toUpperCase())},[]),l.useEffect(()=>{if(!h)return;const v=H(D,`matchplay/${h}`),T=Re(v,q=>{const c=q.val();c&&(M(c.player1||{name:"",id:null}),N(c.player2||{name:"",id:null}),f(c.gameStarted||!1),X(c.currentGame||1),W(c.scores||{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),A(c.stakes||{perGame:5,totals:5}))});return()=>T()},[h]);const J=()=>{if(b){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const v=V();g(v),P(!0),L(!0);const T=H(D,`matchplay/${v}`);ne(T,{player1:{name:"",id:null,uid:null},player2:{name:"",id:null,uid:null},gameStarted:!1,currentGame:1,scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},stakes:{perGame:5,totals:5},createdAt:Date.now()})},ie=async()=>{if(!C.trim())return;if(b){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const v=C.toUpperCase(),T=H(D,`matchplay/${v}`);(await ae(T)).exists()?(g(v),P(!1),L(!0)):alert("Game not found! Check the code and try again.")},se=async v=>{if(h)try{const T=H(D,`matchplay/${h}`),c=(await ae(T)).val()||{};await ne(T,{...c,...v})}catch(T){console.error("Error updating game:",T)}},re=(v,T)=>{se(v===1?{player1:{name:T,id:Date.now(),uid:u?.uid}}:{player2:{name:T,id:Date.now(),uid:u?.uid}})},r=()=>{w.name&&x.name&&se({gameStarted:!0})},G=async(v,T,q)=>{if(!h){console.log("No game code");return}if(!(k||(T===1?w:x).uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:v,playerNum:T,score:q});try{const n=H(D,`matchplay/${h}`),o=(await ae(n)).val();if(console.log("Current data:",o),!o){console.error("No current data found");return}const i=JSON.parse(JSON.stringify(o.scores||{})),m=`game${v}`,I=`player${T}`;i[m]||(i[m]={player1:null,player2:null}),i[m][I]=q===""?null:parseInt(q),console.log("New scores:",i),await ne(n,{...o,scores:i}),console.log("Score updated successfully")}catch(n){console.error("Error updating score:",n),alert("Error updating score: "+n.message)}},R=async(v,T)=>{if(h)try{const q=H(D,`matchplay/${h}`),s=(await ae(q)).val();if(!s)return;const n={...s.stakes};n[v]=parseFloat(T)||0,await ne(q,{...s,stakes:n})}catch(q){console.error("Error updating stakes:",q)}},Q=()=>{const v=(j?.game1?.player1||0)+(j?.game2?.player1||0)+(j?.game3?.player1||0),T=(j?.game1?.player2||0)+(j?.game2?.player2||0)+(j?.game3?.player2||0);return{player1:v,player2:T}},d=()=>{let v=0,T=0;["game1","game2","game3"].forEach(n=>{const t=j?.[n]?.player1,o=j?.[n]?.player2;t!=null&&o!==null&&o!==void 0&&(t>o?v+=F.perGame:o>t&&(T+=F.perGame))});const q=Q();q.player1>q.player2?v+=F.totals:q.player2>q.player1&&(T+=F.totals);const c=v-T,s=T-v;return{player1:c,player2:s}},K=()=>{se({scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},currentGame:1})},B=()=>{L(!1),g(""),y(""),P(!1)},ee=Q(),le=d(),ce=j?.game1?.player1!==null&&j?.game1?.player1!==void 0&&j?.game1?.player2!==null&&j?.game1?.player2!==void 0&&j?.game2?.player1!==null&&j?.game2?.player1!==void 0&&j?.game2?.player2!==null&&j?.game2?.player2!==void 0&&j?.game3?.player1!==null&&j?.game3?.player1!==void 0&&j?.game3?.player2!==null&&j?.game3?.player2!==void 0;return S?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(oe,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>$(!z),className:"btn-primary-green p-2",title:"Show QR code to join",children:e.jsx(Ge,{size:20})})]})]}),z&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Match"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(Me,{value:Y(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>$(!1),className:"mt-3 text-green-400 hover:text-green-300 font-semibold text-sm",children:"Hide QR Code"})]})}),U?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-4",children:"Best of 3 Games"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:w.name})}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:x.name})})]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsxs("div",{className:"game-card",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 text-white",children:["Game ",v]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:w.name}),e.jsx("input",{type:"number",value:j[`game${v}`]?.player1??"",onChange:T=>G(v,1,T.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:x.name}),e.jsx("input",{type:"number",value:j[`game${v}`]?.player2??"",onChange:T=>G(v,2,T.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]})]}),j[`game${v}`]?.player1!==null&&j[`game${v}`]?.player1!==void 0&&j[`game${v}`]?.player2!==null&&j[`game${v}`]?.player2!==void 0&&e.jsx("div",{className:"mt-3 text-center",children:j[`game${v}`].player1>j[`game${v}`].player2?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",w.name," wins (+$",F.perGame,")"]}):j[`game${v}`].player2>j[`game${v}`].player1?e.jsxs("p",{className:"text-green-400 font-semibold",children:["ðŸ† ",x.name," wins (+$",F.perGame,")"]}):e.jsx("p",{className:"text-primary font-semibold",children:"Tie"})})]},v))}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-green-900/30 rounded-lg p-4 border-2 border-green-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-green-400",size:24}),"Totals"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:w.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:ee.player1})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:x.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:ee.player2})]})]}),ce&&e.jsx("div",{className:"mt-3 text-center",children:ee.player1>ee.player2?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",w.name," wins totals (+$",F.totals,")"]}):ee.player2>ee.player1?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["ðŸ† ",x.name," wins totals (+$",F.totals,")"]}):e.jsx("p",{className:"text-primary font-semibold text-lg",children:"Totals tied"})})]}),ce&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ke,{className:"text-green-400",size:24}),"Final Payout"]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:le.player1>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[w.name," wins $",Math.abs(le.player1).toFixed(2)]}):le.player2>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[x.name," wins $",Math.abs(le.player2).toFixed(2)]}):e.jsx("p",{className:"text-center text-xl font-bold text-primary",children:"Match tied - No payout"})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:K,className:"flex-1 btn-primary-green",children:"Reset Scores"}),e.jsx("button",{onClick:B,className:"flex-1 btn-secondary",children:"Leave Match"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(134, 239, 172)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with your opponent!"]})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ke,{className:"text-green-400",size:20}),"Stakes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Per Game"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:F.perGame,onChange:v=>R("perGame",v.target.value),className:"game-input",min:"0",step:"0.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Totals"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:F.totals,onChange:v=>R("totals",v.target.value),className:"game-input",min:"0",step:"0.5"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 1"}),e.jsx("input",{type:"text",value:w.name,onChange:v=>re(1,v.target.value),placeholder:"Enter Player 1's Name",className:"w-full game-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 2"}),e.jsx("input",{type:"text",value:x.name,onChange:v=>re(2,v.target.value),placeholder:"Enter Player 2's Name",className:"w-full game-input"})]})]}),e.jsx("button",{onClick:r,disabled:!w.name||!x.name,className:"w-full btn-primary-green text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:!w.name||!x.name?"Enter both player names":"Start Match"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(oe,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Head-to-Head Bowling Match"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:J,className:"w-full btn-primary-green flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(qe,{size:24}),"Create New Match"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:C,onChange:v=>y(v.target.value.toUpperCase()),onKeyDown:v=>v.key==="Enter"&&ie(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:ie,className:"w-full btn-primary-green text-lg sm:text-xl",children:"Join Match"})]})]})]})})]})}function As(){const{currentUser:u}=me(),k=u&&Ee(u.email),b=u?.isAnonymous,[h,g]=l.useState(""),[C,y]=l.useState(""),[p,P]=l.useState(!1),[S,L]=l.useState(!1),[z,$]=l.useState(!1),[w,M]=l.useState([]),[x,N]=l.useState(""),[U,f]=l.useState(!1),[_,X]=l.useState(1),[j,W]=l.useState({game1:{},game2:{},game3:{}}),[F]=l.useState(5),[A]=l.useState(1),[Y]=l.useState(2),V=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=king-of-the-hill`,J=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("join");s&&y(s.toUpperCase())},[]),l.useEffect(()=>{if(!h)return;const c=H(D,`kingofthehill/${h}`),s=Re(c,n=>{const t=n.val();t&&(M(t.players||[]),f(t.gameStarted||!1),X(t.currentGame||1),W(t.scores||{game1:{},game2:{},game3:{}}))});return()=>s()},[h]);const ie=()=>{if(b){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const c=J();g(c),P(!0),L(!0);const s=H(D,`kingofthehill/${c}`);ne(s,{players:[],gameStarted:!1,currentGame:1,scores:{game1:{},game2:{},game3:{}},createdAt:Date.now()})},se=async()=>{if(!C.trim())return;if(b){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const c=C.toUpperCase(),s=H(D,`kingofthehill/${c}`);(await ae(s)).exists()?(g(c),P(!1),L(!0)):alert("Game not found! Check the code and try again.")},re=async c=>{if(h)try{const s=H(D,`kingofthehill/${h}`),t=(await ae(s)).val()||{};await ne(s,{...t,...c})}catch(s){console.error("Error updating game:",s)}},r=()=>{if(x.trim()&&!U){const c=[...w,{id:Date.now(),name:x.trim(),uid:u?.uid}];re({players:c}),N("")}},G=()=>{w.length>=2&&re({gameStarted:!0,currentGame:1})},R=async(c,s,n)=>{if(!h){console.log("No game code");return}const t=w.find(i=>i.id===s);if(!(k||t?.uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:c,playerId:s,score:n});try{const i=H(D,`kingofthehill/${h}`),I=(await ae(i)).val();if(console.log("Current data:",I),!I){console.error("No current data found");return}const O=JSON.parse(JSON.stringify(I.scores||{})),a=`game${c}`;O[a]||(O[a]={}),O[a][s]=n===""?null:parseInt(n),console.log("New scores:",O),await ne(i,{...I,scores:O}),console.log("Score updated successfully")}catch(i){console.error("Error updating score:",i),alert("Error updating score: "+i.message)}},Q=(c,s)=>j?.[`game${c}`]?.[s]??"",d=c=>{const s=j?.[`game${c}`]||{},n=Object.entries(s).filter(([i,m])=>m!=null).map(([i,m])=>({playerId:parseInt(i),score:m}));if(n.length===0)return null;const t=Math.max(...n.map(i=>i.score)),o=n.filter(i=>i.score===t);return{score:t,playerIds:o.map(i=>i.playerId)}},K=()=>{const c={};return w.forEach(s=>{const n=j?.game1?.[s.id]||0,t=j?.game2?.[s.id]||0,o=j?.game3?.[s.id]||0;c[s.id]=n+t+o}),c},B=()=>{const c=K(),s=Object.entries(c).filter(([o,i])=>i>0).map(([o,i])=>({playerId:parseInt(o),total:i}));if(s.length===0)return null;const n=Math.max(...s.map(o=>o.total)),t=s.filter(o=>o.total===n);return{total:n,playerIds:t.map(o=>o.playerId)}},ee=()=>{const c={};w.forEach(i=>{c[i.id]=-F});const s=d(1);if(s&&s.playerIds.length>0){const i=w.length*A/s.playerIds.length;s.playerIds.forEach(m=>{c[m]+=i})}const n=d(2);if(n&&n.playerIds.length>0){const i=w.length*A/n.playerIds.length;n.playerIds.forEach(m=>{c[m]+=i})}const t=d(3);if(t&&t.playerIds.length>0){const i=w.length*A/t.playerIds.length;t.playerIds.forEach(m=>{c[m]+=i})}const o=B();if(o&&o.playerIds.length>0){const i=w.length*Y/o.playerIds.length;o.playerIds.forEach(m=>{c[m]+=i})}return c},le=()=>{re({scores:{game1:{},game2:{},game3:{}},currentGame:1})},ce=()=>{L(!1),g(""),y(""),P(!1)},v=K(),T=ee(),q=w.length>0&&w.every(c=>j?.game1?.[c.id]!==null&&j?.game1?.[c.id]!==void 0&&j?.game2?.[c.id]!==null&&j?.game2?.[c.id]!==void 0&&j?.game3?.[c.id]!==null&&j?.game3?.[c.id]!==void 0);return S?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(ue,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>$(!z),className:"btn-primary-purple p-2",title:"Show QR code to join",children:e.jsx(Ge,{size:20})})]})]}),z&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(Me,{value:V(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>$(!1),className:"mt-3 text-purple-400 hover:text-purple-300 font-semibold text-sm",children:"Hide QR Code"})]})}),U?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-3",children:"3-Game Series"}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High score each game wins $",A," per player"]}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High total wins $",Y," per player"]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>{const s=d(c);return e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-white",children:["Game ",c]}),s&&e.jsxs("span",{className:"text-sm text-purple-400 font-semibold flex items-center gap-1",children:[e.jsx(ue,{size:16}),"High: ",s.score]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(n=>{const t=s&&s.playerIds.includes(n.id);return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-primary mb-1",children:n.name}),e.jsx("input",{type:"number",value:Q(c,n.id),onChange:o=>R(c,n.id,o.target.value),placeholder:"Score",className:`w-full game-input text-center text-lg font-bold ${t?"border-purple-400 bg-purple-900/30 text-purple-300":""}`,min:"0",max:"300"}),t&&e.jsx("p",{className:"text-xs text-purple-400 font-semibold mt-1 text-center",children:"ðŸ‘‘ Winner"})]},n.id)})})]},c)})}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4 border-2 border-purple-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(oe,{className:"text-purple-400",size:24}),"Total Pins"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(c=>{const s=B(),n=s&&s.playerIds.includes(c.id);return e.jsxs("div",{className:`bg-slate-800/50 rounded-lg p-3 border ${n?"ring-2 ring-purple-400 border-purple-500":"border-slate-700"}`,children:[e.jsx("p",{className:"text-xs text-primary mb-1",children:c.name}),e.jsxs("p",{className:`text-2xl font-bold ${n?"text-purple-400":"text-white"}`,children:[v[c.id]||0,n&&" ðŸ‘‘"]})]},c.id)})})]}),q&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ke,{className:"text-green-400",size:24}),"Final Payouts"]}),e.jsx("div",{className:"space-y-2",children:w.sort((c,s)=>T[s.id]-T[c.id]).map((c,s)=>{const n=T[c.id],t=n>0,o=n<0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 flex justify-between items-center border border-slate-700",children:[e.jsxs("span",{className:"font-semibold text-white",children:[s===0&&n>0&&"ðŸ‘‘ ",c.name]}),e.jsxs("span",{className:`font-bold text-lg ${t?"text-green-400":o?"text-red-400":"text-primary"}`,children:[t?"+":"",n>=0?"$"+n.toFixed(2):"-$"+Math.abs(n).toFixed(2)]})]},c.id)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:le,className:"flex-1 btn-primary-purple",children:"Reset Scores"}),e.jsx("button",{onClick:ce,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ke,{className:"text-green-400",size:20}),"Prize Structure"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",F]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 1:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",A," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 2:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",A," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 3:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",A," per player"]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"High Totals:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(192, 132, 252)"},children:["$",Y," per player"]})]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(216, 180, 254)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:c=>N(c.target.value),onKeyDown:c=>c.key==="Enter"&&r(),placeholder:"Enter Player's Name",className:"game-input"}),e.jsxs("button",{onClick:r,className:"btn-primary-purple flex items-center justify-center gap-2",children:[e.jsx(Ie,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),w.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",w.length,")"]}),e.jsx("div",{className:"space-y-2",children:w.map(c=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow flex justify-between items-center border border-slate-700",children:[e.jsx("span",{className:"text-white",children:c.name}),e.jsxs("span",{className:"text-sm text-red-400 font-semibold",children:["$",F," in"]})]},c.id))}),e.jsx("div",{className:"mt-3 bg-purple-900/30 border border-purple-700 rounded p-2 text-center",children:e.jsxs("p",{className:"text-sm text-primary",children:["Prize Pool: ",e.jsxs("span",{className:"font-bold text-green-400",children:["$",w.length*F]})]})})]}),e.jsx("button",{onClick:G,disabled:w.length<2,className:"w-full btn-primary-purple text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:w.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(ue,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Battle for the highest scores!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ie,className:"w-full btn-primary-purple flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(ue,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:C,onChange:c=>y(c.target.value.toUpperCase()),onKeyDown:c=>c.key==="Enter"&&se(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:se,className:"w-full btn-primary-purple text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function Ls(){const{currentUser:u}=me();u&&Ee(u.email);const k=u?.isAnonymous,[b,h]=l.useState(""),[g,C]=l.useState(""),[y,p]=l.useState(!1),[P,S]=l.useState(!1),[L,z]=l.useState(!1),[$,w]=l.useState([]),[M,x]=l.useState(""),[N,U]=l.useState(!1),[f,_]=l.useState({quarterfinals:[],semifinals:[],finals:null,champion:null}),[X,j]=l.useState({}),[W,F]=l.useState(5),[A,Y]=l.useState(0),[V,J]=l.useState(0),ie=()=>`${window.location.origin+window.location.pathname}?join=${b}&game=bracket-play`,se=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const n=new URLSearchParams(window.location.search).get("join");n&&C(n.toUpperCase())},[]),l.useEffect(()=>{const s=$.length*W;Y(Math.floor(s*.6)),J(Math.floor(s*.4))},[$.length,W]),l.useEffect(()=>{if(!b)return;const s=H(D,`bracketplay/${b}`),n=Re(s,t=>{const o=t.val();o&&(w(o.players||[]),U(o.gameStarted||!1),_(o.matches||{quarterfinals:[],semifinals:[],finals:null,champion:null}),j(o.scores||{}))});return()=>n()},[b]);const re=()=>{if(k){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const s=se();h(s),p(!0),S(!0);const n=H(D,`bracketplay/${s}`);ne(n,{players:[],gameStarted:!1,matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},createdAt:Date.now()})},r=async()=>{if(!g.trim())return;if(k){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const s=g.toUpperCase(),n=H(D,`bracketplay/${s}`);(await ae(n)).exists()?(h(s),p(!1),S(!0)):alert("Game not found! Check the code and try again.")},G=async s=>{if(b)try{const n=H(D,`bracketplay/${b}`),o=(await ae(n)).val()||{};await ne(n,{...o,...s})}catch(n){console.error("Error updating game:",n)}},R=async()=>{if(M.trim()&&!N&&$.length<8){const s=[...$,{id:Date.now(),name:M.trim(),uid:u?.uid}];await G({players:s}),x("")}},Q=s=>{const n=[...s];for(let t=n.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[n[t],n[o]]=[n[o],n[t]]}return n},d=async()=>{if($.length!==8){console.error("Need exactly 8 players to start tournament");return}try{const s=Q($);if(console.log("Shuffled players:",s),!s.every(t=>t&&t.id&&t.name)){console.error("Invalid player data:",s),alert("Error: Invalid player data. Please refresh and try again.");return}const n=[{id:"qf1",player1:s[0],player2:s[1],winner:null},{id:"qf2",player1:s[2],player2:s[3],winner:null},{id:"qf3",player1:s[4],player2:s[5],winner:null},{id:"qf4",player1:s[6],player2:s[7],winner:null}];console.log("Created quarterfinals:",n),await G({gameStarted:!0,matches:{quarterfinals:n,semifinals:[],finals:null,champion:null},scores:{}}),console.log("Tournament started successfully")}catch(s){console.error("Error starting tournament:",s),alert("Failed to start tournament. Check console for details.")}},K=async(s,n,t)=>{const o={...X},i=`${s}_${n}`;if(t==="")o[i]="";else{const m=parseInt(t,10);if(!isNaN(m)&&m>=0&&m<=300)o[i]=m;else return}j(o);try{await G({scores:o})}catch(m){console.error("Failed to save score:",m)}},B=(s,n)=>{const t=`${s}_${n}`;return X[t]??""},ee=(s,n,t)=>{const o=B(s,n),i=B(s,t),m=typeof o=="number"?o:parseInt(o,10),I=typeof i=="number"?i:parseInt(i,10),O=!isNaN(m)&&m>=0,a=!isNaN(I)&&I>=0;return console.log(`isMatchComplete(${s}): p1Score=${o}, p2Score=${i}, p1Valid=${O}, p2Valid=${a}, result=${O&&a}`),O&&a},le=async s=>{const n={...f};if(s==="quarterfinals")n.quarterfinals=n.quarterfinals.map(t=>{const o=B(t.id,t.player1.id),i=B(t.id,t.player2.id),m=o>i?t.player1:t.player2;return{...t,winner:m}}),n.semifinals=[{id:"sf1",player1:n.quarterfinals[0].winner,player2:n.quarterfinals[1].winner,winner:null},{id:"sf2",player1:n.quarterfinals[2].winner,player2:n.quarterfinals[3].winner,winner:null}];else if(s==="semifinals")n.semifinals=n.semifinals.map(t=>{const o=B(t.id,t.player1.id),i=B(t.id,t.player2.id),m=o>i?t.player1:t.player2;return{...t,winner:m}}),n.finals={id:"final",player1:n.semifinals[0].winner,player2:n.semifinals[1].winner,winner:null};else if(s==="finals"){const t=n.finals,o=B(t.id,t.player1.id),i=B(t.id,t.player2.id),m=o>i?t.player1:t.player2;n.finals.winner=m,n.champion=m}await G({matches:n})},ce=s=>!s||s.length===0?!1:s.every(n=>n&&n.player1&&n.player2&&ee(n.id,n.player1.id,n.player2.id)),v=async()=>{await G({matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},gameStarted:!1})},T=()=>{S(!1),h(""),C(""),p(!1)},q=(s,n)=>{if(!s||!s.player1||!s.player2)return null;const t=B(s.id,s.player1.id),o=B(s.id,s.player2.id),i=ee(s.id,s.player1.id,s.player2.id),m=s.winner!==null;console.log(`${s.id}: p1Score=${t} (${typeof t}), p2Score=${o} (${typeof o}), isComplete=${i}, hasWinner=${m}`);const I=i&&t>o,O=i&&o>t;return e.jsxs("div",{className:"game-card",children:[e.jsx("h4",{className:"font-bold text-sm text-center mb-3 text-orange-400",children:s.id.toUpperCase()}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${m&&s.winner?.id===s.player1.id?"bg-green-900/30 border-2 border-green-500":I&&!m?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player1.name||"Player 1"}),m&&s.winner?.id===s.player1.id&&e.jsx(oe,{className:"text-orange-400",size:16}),!m&&I&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player1_score`,inputMode:"numeric",pattern:"[0-9]*",value:t===""?"":t,onChange:a=>{const E=a.target.value;(E===""||/^\d+$/.test(E))&&K(s.id,s.player1.id,E)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),e.jsx("div",{className:"text-center text-xs font-bold text-secondary mb-3",children:"VS"}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${m&&s.winner?.id===s.player2.id?"bg-green-900/30 border-2 border-green-500":O&&!m?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:s.player2.name||"Player 2"}),m&&s.winner?.id===s.player2.id&&e.jsx(oe,{className:"text-orange-400",size:16}),!m&&O&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${s.id}_player2_score`,inputMode:"numeric",pattern:"[0-9]*",value:o===""?"":o,onChange:a=>{const E=a.target.value;(E===""||/^\d+$/.test(E))&&K(s.id,s.player2.id,E)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),!m&&!i&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Enter both scores"})}),!m&&i&&e.jsx("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["âœ“ Winner: ",t>o?s.player1.name:s.player2.name]})}),m&&s.winner&&e.jsx("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["ðŸ† ",s.winner.name," advances to next round!"]})})]})},c=f.finals&&f.finals.winner?f.finals.winner.id===f.finals.player1.id?f.finals.player2:f.finals.player1:null;return P?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Ce,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:b})]}),e.jsx("button",{onClick:()=>z(!L),className:"btn-primary-orange p-2",title:"Show QR code to join",children:e.jsx(Ge,{size:20})})]})]}),L&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Tournament"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx(Me,{value:ie(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:b})]}),e.jsx("button",{onClick:()=>z(!1),className:"mt-3 text-orange-400 hover:text-orange-300 font-semibold text-sm",children:"Hide QR Code"})]})}),N?e.jsxs("div",{className:"space-y-6",children:[f.champion&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 rounded-lg p-6 border-2 border-orange-500",children:[e.jsxs("h2",{className:"text-3xl font-bold text-center mb-4 flex items-center justify-center gap-2 text-white",children:[e.jsx(oe,{className:"text-orange-400",size:40}),"Tournament Champion!"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 mb-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-2xl font-bold text-green-400 mb-2",children:["ðŸ¥‡ ",f.champion.name]}),e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:["Prize: $",A]})]}),c&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-lg font-bold text-primary",children:["ðŸ¥ˆ Runner-up: ",c.name]}),e.jsxs("p",{className:"text-center text-md font-bold text-primary",children:["Prize: $",V]})]})]}),f?.quarterfinals&&f.quarterfinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Quarterfinals"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.quarterfinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:q(s)},s.id))}),(!f.semifinals||f.semifinals.length===0)&&ce(f.quarterfinals)&&e.jsx("button",{onClick:()=>le("quarterfinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 4 Winners to Semifinals"})]}),f?.semifinals&&f.semifinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Semifinals"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:f.semifinals.filter(s=>s&&s.id&&s.player1&&s.player2).map(s=>e.jsx("div",{children:q(s)},s.id))}),!f.finals&&ce(f.semifinals)&&e.jsx("button",{onClick:()=>le("semifinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"âœ“ Advance 2 Winners to Finals"})]}),f.finals&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white text-center",children:"ðŸ† Championship Finals ðŸ†"}),e.jsx("div",{className:"max-w-md mx-auto",children:q(f.finals)}),!f.finals.winner&&ee(f.finals.id,f.finals.player1.id,f.finals.player2.id)&&e.jsx("button",{onClick:()=>le("finals"),className:"w-full mt-6 bg-orange-500 text-white py-4 rounded-lg hover:bg-orange-600 transition font-bold text-xl shadow-lg",children:"ðŸ‘‘ Crown the Champion!"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:v,className:"flex-1 btn-primary-orange",children:"Reset Tournament"}),e.jsx("button",{onClick:T,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(ke,{className:"text-green-400",size:20}),"Prize Structure"]}),$.length===0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Entry Fee:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,5,10].map(s=>e.jsxs("button",{onClick:()=>F(s),className:"px-4 py-2 rounded-lg transition",style:{backgroundColor:W===s?"rgb(139, 92, 246)":"rgb(30, 41, 59)",color:"rgb(255, 255, 255)",border:W===s?"2px solid rgb(167, 139, 250)":"2px solid transparent"},children:["$",s]},s))})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",W]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"2nd Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(203, 213, 225)"},children:["$",V]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"1st Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",A]})]}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"rgb(100, 116, 139)"},children:["Total Prize Pool: $",$.length*W]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-white",children:"Tournament Format"}),e.jsxs("ul",{className:"text-sm space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Quarterfinals (Game 1):"})," 8 players compete â†’ 4 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Semifinals (Game 2):"})," 4 players compete â†’ 2 winners advance"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{className:"text-white",children:"Finals (Game 3):"})," 2 players compete â†’ Champion crowned"]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(253, 186, 116)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:b})," with 7 friends!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:M,onChange:s=>x(s.target.value),onKeyDown:s=>s.key==="Enter"&&R(),placeholder:"Enter Player's Name",className:"game-input",disabled:$.length>=8}),e.jsxs("button",{onClick:R,disabled:$.length>=8,className:"btn-primary-orange flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(Ie,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),$.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",$.length,"/8)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$.map((s,n)=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow border border-slate-700 text-white",children:[n+1,". ",s.name]},s.id))})]}),e.jsxs("button",{onClick:d,disabled:$.length!==8,className:"w-full btn-primary-orange text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(cs,{size:20,className:"sm:w-6 sm:h-6"}),$.length!==8?`Need ${8-$.length} more player${8-$.length!==1?"s":""}`:"Start Tournament (Randomize Bracket)"]})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Ce,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"8-Player Single Elimination Tournament"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:re,className:"w-full btn-primary-orange flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(oe,{size:20,className:"sm:w-6 sm:h-6"}),"Create Tournament"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:g,onChange:s=>C(s.target.value.toUpperCase()),onKeyDown:s=>s.key==="Enter"&&r(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:r,className:"w-full btn-primary-orange text-lg sm:text-xl",children:"Join Tournament"})]})]})]})})]})}function Us(){const{currentUser:u}=me(),k=u&&Ee(u.email),b=u?.isAnonymous,[h,g]=l.useState(""),[C,y]=l.useState(""),[p,P]=l.useState(!1),[S,L]=l.useState(!1),[z,$]=l.useState(!1),[w,M]=l.useState(!1),[x,N]=l.useState([]),[U,f]=l.useState(""),[_,X]=l.useState(!1),[j,W]=l.useState(1),[F,A]=l.useState({}),[Y,V]=l.useState({}),[J,ie]=l.useState({}),[se,re]=l.useState([]),[r,G]=l.useState(!1),[R,Q]=l.useState(1),d=.25,K=a=>a.toFixed(2),B=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=mystery-frames`,ee=()=>Math.random().toString(36).substring(2,8).toUpperCase();l.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("join");E&&y(E.toUpperCase())},[]),l.useEffect(()=>{if(!h)return;const a=H(D,`mysteryframes/${h}`),E=Re(a,te=>{const Z=te.val();Z&&(N(Z.players||[]),X(Z.gameStarted||!1),W(Z.currentFrame||1),A(Z.framePots||{}),V(Z.frameWinners||{}),ie(Z.frameScores||{}),re(Z.mysteryPots||[]))});return()=>E()},[h]);const le=a=>a.split(" ").map(E=>E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()).join(" "),ce=()=>{if(b){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const a=ee();g(a),P(!0),L(!0);const E=u?.displayName||"Player",te=[{id:Date.now(),name:le(E),uid:u?.uid,totalWinnings:0}],Z=H(D,`mysteryframes/${a}`);ne(Z,{players:te,gameStarted:!1,currentFrame:1,framePots:{},frameWinners:{},frameScores:{},mysteryPots:[],createdAt:Date.now()})},v=async()=>{if(!C.trim())return;if(b){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const a=C.toUpperCase(),E=H(D,`mysteryframes/${a}`),te=await ae(E);if(te.exists()){g(a),P(!1),L(!0);const Z=te.val();if(!Z.players?.find(de=>de.uid===u?.uid)&&!Z.gameStarted){const de=u?.displayName||"Player",Oe=[...Z.players||[],{id:Date.now(),name:le(de),uid:u?.uid,totalWinnings:0}];await ne(E,{...Z,players:Oe})}}else alert("Game not found! Check the code and try again.")},T=async a=>{if(h)try{const E=H(D,`mysteryframes/${h}`),Z=(await ae(E)).val();await ne(E,{...Z,...a})}catch(E){console.error("Error updating game:",E)}},q=()=>{if(U.trim()&&!_){const a=[...x,{id:Date.now(),name:le(U.trim()),uid:null,totalWinnings:0}];T({players:a}),f("")}},c=()=>{if(x.length<2)return;const a=x.length*d;T({gameStarted:!0,currentFrame:1,framePots:{1:a},frameScores:{1:{}},frameWinners:{1:[]}})},s=(a,E)=>{const te=x.find(de=>de.id===a);if(!(k||te?.uid===u?.uid)){alert("You can only enter your own scores.");return}const be={...J,[j]:{...J[j],[a]:parseInt(E)||0}};T({frameScores:be})},n=()=>{const a=J[j]||{},E=Object.entries(a);if(E.length!==x.length){alert("Please enter scores for all players first!");return}const te=Math.max(...Object.values(a));return E.filter(([be,de])=>de===te).map(([be])=>parseInt(be))},t=()=>{const a=n();if(!a)return;const E=F[j]||0,te=a.length>1;let Z=[...x],be={...Y,[j]:a},de={...F};if(!te&&a.length===1){const xe=a[0];Z=x.map(we=>we.id===xe?{...we,totalWinnings:(we.totalWinnings||0)+E}:we)}const Oe=se.map(xe=>{if(xe.winner)return xe;const we=J[j]||{},Se=xe.activePlayers.filter(ze=>{const pe=we[ze];return pe===10||parseInt(pe)===10});if(Se.length===1){const ze=Se[0];return Z=Z.map(pe=>pe.id===ze?{...pe,totalWinnings:(pe.totalWinnings||0)+xe.amount}:pe),{...xe,activePlayers:Se,winner:ze}}return Se.length===0?xe:{...xe,activePlayers:Se}}),We=j+1,ns=te?E+x.length*d:x.length*d;de[We]=ns,T({players:Z,currentFrame:We,frameWinners:be,framePots:de,frameScores:{...J,[We]:{}},mysteryPots:Oe})},o=a=>{const E={id:Date.now(),startFrame:j,amount:a,activePlayers:x.map(te=>te.id),winner:null};T({mysteryPots:[...se,E]})},i=()=>{L(!1),g(""),y(""),P(!1)};if(!S)return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(ge,{size:28,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsx("p",{className:"text-center mb-8 text-sm sm:text-base",style:{color:"rgb(148, 163, 184)"},children:"Quarters Game with Mystery Frame Bonuses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ce,className:"w-full flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:[e.jsx(ge,{size:20}),"Create New Game"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(148, 163, 184)"},children:"or"}),e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:C,onChange:a=>y(a.target.value.toUpperCase()),placeholder:"Enter Game Code",className:"w-full text-center text-lg font-mono py-3 px-4 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},maxLength:6}),e.jsx("button",{onClick:v,className:"w-full py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Join Game"})]})]})]})})]});const m=F[j]||0,I=J[j]||{},O=x.every(a=>I[a.id]!==void 0);return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"20%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>M(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(251, 191, 36)"},title:"How to play",children:e.jsx(es,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(ge,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("span",{className:"text-xs sm:text-sm",style:{color:"rgb(148, 163, 184)"},children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2",style:{color:"rgb(255, 255, 255)"},children:h})]}),e.jsx("button",{onClick:()=>$(!z),className:"p-2 rounded-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},title:"Show QR code",children:e.jsx(Ge,{size:20})})]})]}),w&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>M(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)"},onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(he,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(ge,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"ðŸŽ¯ Quarters Game"}),e.jsx("p",{className:"text-sm",children:"Everyone puts in $0.25 per frame. Highest score wins the pot! Ties roll over to next frame."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"âš¡ Mystery Frames"}),e.jsx("p",{className:"text-sm",children:"Start bonus pots ($1-$5 or custom). Strike (X) to stay in! Last striker standing wins the mystery pot."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"ðŸ“± Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Tap 7, 8, 9, or X to enter scores"}),e.jsx("li",{children:"Mystery pots carry over until won"}),e.jsx("li",{children:"Multiple mystery frames can run simultaneously"})]})]})]}),e.jsx("button",{onClick:()=>M(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),z&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("div",{className:"inline-block p-4 rounded-lg",style:{backgroundColor:"rgb(255, 255, 255)"},children:e.jsx(Me,{value:B(),size:200})}),e.jsxs("p",{className:"mt-3 text-sm",style:{color:"rgb(148, 163, 184)"},children:["Scan to join game ",e.jsx("span",{className:"font-mono font-bold",style:{color:"rgb(255, 255, 255)"},children:h})]})]}),_?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg p-6 text-center",style:{background:"linear-gradient(to right, rgba(217, 119, 6, 0.2), rgba(180, 83, 9, 0.2))",border:"2px solid rgb(251, 191, 36)"},children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Frame ",j]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[e.jsx(ke,{size:32,style:{color:"rgb(34, 197, 94)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(34, 197, 94)"},children:["$",K(m)]})]}),e.jsxs("p",{className:"text-sm mt-2",style:{color:"rgb(148, 163, 184)"},children:["Current Pot (.25 per player",m>x.length*d?" + rollover":"",")"]})]}),e.jsxs("div",{className:"rounded-lg p-4 sm:p-6",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("h3",{className:"font-bold text-lg mb-4",style:{color:"rgb(255, 255, 255)"},children:"Enter Scores (0-10)"}),e.jsx("div",{className:"space-y-4",children:x.map(a=>e.jsxs("div",{className:"rounded-lg p-3 sm:p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:"rgb(148, 163, 184)"},children:a.name}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>s(a.id,7),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:I[a.id]===7?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(I[a.id]===7?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"7"}),e.jsx("button",{onClick:()=>s(a.id,8),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:I[a.id]===8?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(I[a.id]===8?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"8"}),e.jsx("button",{onClick:()=>s(a.id,9),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:I[a.id]===9?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(I[a.id]===9?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"9"}),e.jsx("button",{onClick:()=>s(a.id,10),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:I[a.id]===10?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(I[a.id]===10?"rgb(34, 197, 94)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"X"})]}),I[a.id]===10&&e.jsx("p",{className:"text-xs mt-2 text-center font-bold",style:{color:"rgb(34, 197, 94)"},children:"âš¡ STRIKE!"})]},a.id))}),e.jsx("button",{onClick:t,disabled:!O,className:"w-full mt-6 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:O?"rgb(34, 197, 94)":"rgb(71, 85, 105)",color:"rgb(255, 255, 255)",opacity:O?1:.5,cursor:O?"pointer":"not-allowed"},children:O?"Next Frame":"Enter All Scores First"})]}),e.jsxs("div",{className:"rounded-lg border-2 p-4",style:{borderColor:"rgb(251, 191, 36)",background:"linear-gradient(to bottom right, rgba(217, 119, 6, 0.1), rgba(180, 83, 9, 0.1))"},children:[e.jsxs("button",{onClick:()=>G(!r),className:"w-full flex items-center justify-between p-3 rounded-lg transition",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",color:"rgb(255, 255, 255)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{size:24,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold text-lg",children:["Mystery Frame Bonuses (",se.filter(a=>!a.winner&&a.activePlayers.length>0).length," active)"]})]}),e.jsx("span",{children:r?"â–¼":"â–¶"})]}),r&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("h4",{className:"font-bold mb-3",style:{color:"rgb(255, 255, 255)"},children:"Start New Mystery Frame"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[1,2,3,4,5].map(a=>e.jsxs("button",{onClick:()=>o(a),className:"py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:E=>E.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:E=>E.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:["$",a]},a))}),e.jsxs("div",{className:"pt-3",style:{borderTop:"1px solid rgb(71, 85, 105)"},children:[e.jsx("p",{className:"text-xs mb-2",style:{color:"rgb(148, 163, 184)"},children:"Custom Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Q(Math.max(.5,R-.5)),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"âˆ’"}),e.jsxs("div",{className:"flex-1 text-center py-2 rounded-lg font-bold text-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:["$",R.toFixed(2)]}),e.jsx("button",{onClick:()=>Q(R+.5),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"+"}),e.jsx("button",{onClick:()=>o(R),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Start"})]})]})]}),e.jsx("div",{className:"space-y-3",children:se.length===0?e.jsx("p",{className:"text-center py-4",style:{color:"rgb(148, 163, 184)"},children:"No mystery frames started yet"}):se.map(a=>{const E=a.activePlayers.length>0&&!a.winner,te=a.winner?x.find(Z=>Z.id===a.winner):null;return e.jsx("div",{className:"rounded-lg p-4 border-2",style:{backgroundColor:"rgba(30, 41, 59, 0.3)",borderColor:a.winner?"rgb(34, 197, 94)":E?"rgb(251, 191, 36)":"rgb(100, 116, 139)"},children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:18,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(255, 255, 255)"},children:["Started Frame ",a.startFrame," Â· $",a.amount]})]}),a.winner?e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(34, 197, 94)"},children:["ðŸ† Winner: ",te?.name]}):a.activePlayers.length===0?e.jsx("p",{className:"text-sm mt-1",style:{color:"rgb(148, 163, 184)"},children:"No winner - all missed"}):e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(251, 191, 36)"},children:[a.activePlayers.length," player(s) still in (must strike to continue)"]})]})})},a.id)})})]})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{background:"linear-gradient(to right, rgba(30, 41, 59, 0.5), rgba(217, 119, 6, 0.2))",border:"1px solid rgb(71, 85, 105)"},children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",style:{color:"rgb(255, 255, 255)"},children:[e.jsx(oe,{style:{color:"rgb(251, 191, 36)"},size:24}),"Total Winnings"]}),e.jsx("div",{className:"space-y-2",children:[...x].sort((a,E)=>(E.totalWinnings||0)-(a.totalWinnings||0)).map((a,E)=>e.jsxs("div",{className:"flex justify-between items-center px-4 py-3 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[E===0&&"ðŸ¥‡"," ",E===1&&"ðŸ¥ˆ"," ",E===2&&"ðŸ¥‰"," ",a.name]}),e.jsxs("span",{className:"font-bold text-lg",style:{color:"rgb(34, 197, 94)"},children:["$",K(a.totalWinnings||0)]})]},a.id))})]}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-lg font-semibold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"Leave Game"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-center text-lg",style:{color:"rgb(251, 191, 36)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with friends or show them the QR code!"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg",style:{color:"rgb(255, 255, 255)"},children:["Players (",x.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:U,onChange:a=>f(a.target.value),onKeyPress:a=>a.key==="Enter"&&q(),placeholder:"Enter Player's Name",className:"flex-1 px-4 py-2 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"}}),e.jsxs("button",{onClick:q,className:"px-4 py-2 rounded-lg font-semibold transition flex items-center gap-2",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:[e.jsx(Ie,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),x.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(a=>e.jsx("div",{className:"px-4 py-2 rounded-lg font-semibold text-center",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:a.name},a.id))})]}),e.jsx("button",{onClick:c,disabled:x.length<2,className:"w-full py-4 rounded-lg font-bold text-xl transition",style:{backgroundColor:x.length<2?"rgb(71, 85, 105)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:x.length<2?.5:1,cursor:x.length<2?"not-allowed":"pointer"},children:x.length<2?"Need at least 2 players":"Start Game"})]})]})})})]})}function Is({isOpen:u,onClose:k,pendingInvite:b=null}){const{signInWithGoogle:h,signUpWithEmail:g,signInWithEmail:C,continueAsGuest:y}=me(),[p,P]=l.useState(!1),[S,L]=l.useState(null),[z,$]=l.useState("signin"),[w,M]=l.useState(""),[x,N]=l.useState(""),[U,f]=l.useState("");if(!u)return null;const _=()=>{M(""),N(""),f(""),L(null)},X=async()=>{P(!0),L(null);try{await h(),k(),_()}catch(A){L(A.message)}finally{P(!1)}},j=async A=>{A.preventDefault(),P(!0),L(null);try{await C(w,x),k(),_()}catch(Y){L(Y.code==="auth/user-not-found"?"No account found with this email":Y.code==="auth/wrong-password"?"Incorrect password":Y.code==="auth/invalid-email"?"Invalid email address":Y.message)}finally{P(!1)}},W=async A=>{A.preventDefault(),P(!0),L(null);try{await g(w,x,U),k(),_()}catch(Y){L(Y.code==="auth/email-already-in-use"?"Email already in use":Y.code==="auth/weak-password"?"Password should be at least 6 characters":Y.code==="auth/invalid-email"?"Invalid email address":Y.message)}finally{P(!1)}},F=A=>{$(A),L(null)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:k}),e.jsxs("div",{className:"relative rounded-2xl shadow-2xl max-w-md w-full p-8",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)"},children:[e.jsx("button",{onClick:k,className:"absolute top-4 right-4 w-8 h-8 rounded-lg transition flex items-center justify-center",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:A=>A.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:e.jsx(he,{size:20})}),e.jsxs("div",{className:"text-center mb-8",children:[b&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"rgba(34, 211, 238, 0.1)",border:"1px solid rgb(34, 211, 238)"},children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(34, 211, 238)"},children:"ðŸŽ³ You've been invited to play!"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"rgb(148, 163, 184)"},children:"Sign in to join the game"})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:z==="signup"?"Create Account":"Welcome Back!"}),e.jsx("p",{className:"text-slate-400",children:z==="email"||z==="signup"?"Sign in to track your stats":"Sign in to track your stats and compete"})]}),S&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 text-sm",children:S}),z==="signin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:X,disabled:p,className:"w-full bg-white text-gray-800 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{onClick:()=>F("email"),disabled:p,className:"w-full bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[e.jsx(He,{size:20}),"Continue with Email"]}),e.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"Sign in to unlock all games and save your stats permanently"})]}),z==="email"&&e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:w,onChange:A=>M(A.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:x,onChange:A=>N(A.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Signing In...":"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>F("signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Don't have an account? Sign up"})}),e.jsx("button",{type:"button",onClick:()=>F("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]}),z==="signup"&&e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Display Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",value:U,onChange:A=>f(A.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"Your Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:w,onChange:A=>M(A.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:x,onChange:A=>N(A.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>F("email"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Already have an account? Sign in"})}),e.jsx("button",{type:"button",onClick:()=>F("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"â† Back to other options"})]})]})]})}function Os({isOpen:u,onClose:k}){const{currentUser:b,isGuest:h}=me(),[g,C]=l.useState(null),[y,p]=l.useState(!0);l.useEffect(()=>{u&&b&&P()},[u,b]);const P=async()=>{if(b){p(!0);try{const S=H(D,`users/${b.uid}/stats`),L=await ae(S);L.exists()?C(L.val()):C({makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}})}catch(S){console.error("Error fetching stats:",S)}finally{p(!1)}}};return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:k}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-4xl w-full p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:k,className:"absolute top-4 right-4 w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:S=>S.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:S=>S.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(he,{size:20})}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[b?.photoURL?e.jsx("img",{src:b.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer",onError:S=>{S.target.style.display="none",S.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-2xl font-bold ${b?.photoURL?"hidden":"flex"}`,children:b?.displayName?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:b?.displayName||"Guest User"}),h&&e.jsx("p",{className:"text-amber-400 text-sm mt-1",children:"Guest Account - Sign in to save stats permanently"})]})]}),y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading your stats..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx(ve,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Makes or Misses"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:g?.makesOrMisses?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:g?.makesOrMisses?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:g?.makesOrMisses?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(192, 132, 252)"},children:g?.makesOrMisses?.totalPoints||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Points"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:e.jsx(oe,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Match Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(52, 211, 153)"},children:g?.matchPlay?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Matches Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:g?.matchPlay?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:g?.matchPlay?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:g?.matchPlay?.ties||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ties"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:e.jsx(ue,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"King of the Hill"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:g?.kingOfTheHill?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:g?.kingOfTheHill?.highGameWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Game Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 146, 60)"},children:g?.kingOfTheHill?.highTotalWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Total Wins"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:e.jsx(Ce,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Bracket Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(167, 139, 250)"},children:g?.bracketPlay?.tournamentsPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:g?.bracketPlay?.championships||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Championships"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(203, 213, 225)"},children:g?.bracketPlay?.runnerUps||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Runner-Ups"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ss,{size:24,className:"text-cyan-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Overall Performance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:(g?.makesOrMisses?.gamesPlayed||0)+(g?.matchPlay?.gamesPlayed||0)+(g?.kingOfTheHill?.gamesPlayed||0)+(g?.bracketPlay?.tournamentsPlayed||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400",children:(g?.makesOrMisses?.wins||0)+(g?.matchPlay?.wins||0)+(g?.kingOfTheHill?.highGameWins||0)+(g?.bracketPlay?.championships||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Wins"})]})]})]})]})]})]}):null}function Ws({isOpen:u,onClose:k}){const{isAdmin:b}=me(),[h,g]=l.useState(!0),[C,y]=l.useState([]),[p,P]=l.useState({makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]}),[S,L]=l.useState({totalUsers:0,totalGames:0,guestUsers:0,authenticatedUsers:0}),[z,$]=l.useState("overview"),[w,M]=l.useState(null),[x,N]=l.useState(null),[U,f]=l.useState([]),[_,X]=l.useState([]),[j,W]=l.useState(!1);l.useEffect(()=>{u&&b&&F()},[u,b]);const F=async()=>{g(!0);try{const r=H(D,"users"),G=await ae(r),R=G.exists()?G.val():{},Q=Object.entries(R).map(([n,t])=>({uid:n,...t}));y(Q);const d={makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]},K=H(D,"games"),B=await ae(K);B.exists()&&(d.makesOrMisses=Object.entries(B.val()).map(([n,t])=>({code:n,...t})));const ee=H(D,"matchplay"),le=await ae(ee);le.exists()&&(d.matchPlay=Object.entries(le.val()).map(([n,t])=>({code:n,...t})));const ce=H(D,"kingofthehill"),v=await ae(ce);v.exists()&&(d.kingOfTheHill=Object.entries(v.val()).map(([n,t])=>({code:n,...t})));const T=H(D,"bracketplay"),q=await ae(T);q.exists()&&(d.bracketPlay=Object.entries(q.val()).map(([n,t])=>({code:n,...t}))),P(d);const c=Q.filter(n=>n.isAnonymous).length,s=d.makesOrMisses.length+d.matchPlay.length+d.kingOfTheHill.length+d.bracketPlay.length;L({totalUsers:Q.length,totalGames:s,guestUsers:c,authenticatedUsers:Q.length-c})}catch(r){console.error("Error fetching admin data:",r)}finally{g(!1)}},A=async r=>{try{await ye(H(D,`users/${r}`)),await F(),N(null)}catch(G){console.error("Error deleting user:",G),alert("Failed to delete user")}},Y=async(r,G=null)=>{try{const R=H(D,`users/${r}`),Q=await ae(R);if(Q.exists()){const d=Q.val();G?d.stats[G]={gamesPlayed:0,totalPoints:0,wins:0,losses:0,...G==="matchPlay"&&{ties:0},...G==="kingOfTheHill"&&{highGameWins:0,highTotalWins:0},...G==="bracketPlay"&&{tournamentsPlayed:0,championships:0,runnerUps:0}}:d.stats={makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}},await ne(R,d),await F(),N(null)}}catch(R){console.error("Error resetting stats:",R),alert("Failed to reset stats")}},V=async(r,G)=>{try{const R={makesOrMisses:`games/${G}`,matchPlay:`matchplay/${G}`,kingOfTheHill:`kingofthehill/${G}`,bracketPlay:`bracketplay/${G}`};await ye(H(D,R[r])),await F(),N(null)}catch(R){console.error("Error deleting game:",R),alert("Failed to delete game")}},J=async()=>{try{await Promise.all([ye(H(D,"games")),ye(H(D,"matchplay")),ye(H(D,"kingofthehill")),ye(H(D,"bracketplay"))]),await F(),N(null)}catch(r){console.error("Error deleting all games:",r),alert("Failed to delete all games")}},ie=async()=>{try{await Promise.all(U.map(r=>ye(H(D,`users/${r}`)))),await F(),f([]),W(!1),N(null)}catch(r){console.error("Error deleting users:",r),alert("Failed to delete selected users")}},se=()=>{f(j?[]:C.map(r=>r.uid)),W(!j)},re=r=>{if(U.includes(r))f(U.filter(G=>G!==r)),W(!1);else{const G=[...U,r];f(G),G.length===C.length&&W(!0)}};return u?b?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:k}),x&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:()=>N(null)}),e.jsxs("div",{className:"relative rounded-xl p-6 max-w-md w-full",style:{background:"linear-gradient(to bottom right, rgb(30, 41, 59), rgb(51, 65, 85))",border:"2px solid rgb(220, 38, 38)"},children:[e.jsxs("h3",{className:"text-xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Confirm ",x.type==="user"?"User Deletion":x.type==="bulk-users"?"Bulk User Deletion":x.type==="bulk-games"?"Bulk Game Deletion":x.type==="game"?"Game Deletion":"Stats Reset"]}),e.jsx("p",{className:"mb-6",style:{color:"rgb(203, 213, 225)"},children:x.type==="user"?`Are you sure you want to delete "${x.name}"? This action cannot be undone.`:x.type==="bulk-users"?`Delete ${U.length} selected user(s)? All user data will be permanently removed. This action cannot be undone.`:x.type==="bulk-games"?`Delete ALL active games (${S.totalGames} total)? All game data will be permanently removed. This action cannot be undone.`:x.type==="game"?`Delete game "${x.name}"? All game data will be permanently removed.`:`Reset ${x.gameType==="all"?"all stats":`${x.gameType} stats`} for "${x.name}"?`}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(null),className:"flex-1 py-2 rounded-lg transition",style:{backgroundColor:"rgb(51, 65, 85)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(71, 85, 105)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(51, 65, 85)",children:"Cancel"}),e.jsx("button",{onClick:()=>{x.type==="user"?A(x.id):x.type==="bulk-users"?ie():x.type==="bulk-games"?J():x.type==="game"?V(x.gameType,x.id):Y(x.id,x.gameType==="all"?null:x.gameType)},className:"flex-1 py-2 rounded-lg transition font-semibold",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:x.type==="game"||x.type==="user"||x.type==="bulk-games"||x.type==="bulk-users"?"Delete":"Reset"})]})]})]}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border-b border-slate-700 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:e.jsx(Qe,{size:20,className:"text-white md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-400 text-xs md:text-sm",children:"System Overview & Management"})]})]}),e.jsx("button",{onClick:k,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:r=>r.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:r=>r.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(he,{size:20})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>$("overview"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:z==="overview"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:z==="overview"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:z==="overview"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(ts,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"}),e.jsx("span",{className:"sm:hidden",children:"Stats"})]}),e.jsxs("button",{onClick:()=>$("users"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:z==="users"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:z==="users"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:z==="users"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(qe,{size:16,className:"inline mr-1 md:mr-2"}),"Users (",S.totalUsers,")"]}),e.jsxs("button",{onClick:()=>$("games"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:z==="games"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:z==="games"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:z==="games"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(ss,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Active "}),"Games (",S.totalGames,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading admin data..."})]}):e.jsxs(e.Fragment,{children:[z==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:S.totalUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:S.authenticatedUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Authenticated"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:S.guestUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Guest Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-purple-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:S.totalGames}),e.jsx("div",{className:"text-sm text-slate-400",children:"Active Games"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Games by Mode"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{size:32,style:{color:"rgb(34, 211, 238)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:p.makesOrMisses.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Makes or Misses"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{size:32,style:{color:"rgb(52, 211, 153)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:p.matchPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Match Play"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{size:32,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:p.kingOfTheHill.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"King of the Hill"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{size:32,style:{color:"rgb(167, 139, 250)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:p.bracketPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Bracket Play"})]})]})]})]})]}),z==="users"&&e.jsxs("div",{className:"space-y-4",children:[U.length>0&&e.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-700 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("span",{style:{color:"rgb(34, 211, 238)",fontWeight:600},children:[U.length," user(s) selected"]}),e.jsxs("button",{onClick:()=>N({type:"bulk-users"}),className:"px-4 py-2 rounded-lg transition flex items-center gap-2",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:[e.jsx(fe,{size:16}),"Delete Selected"]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900/50 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-12",children:e.jsx("input",{type:"checkbox",checked:j,onChange:se,className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Total Games"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:C.map(r=>{const G=(r.stats?.makesOrMisses?.gamesPlayed||0)+(r.stats?.matchPlay?.gamesPlayed||0)+(r.stats?.kingOfTheHill?.gamesPlayed||0)+(r.stats?.bracketPlay?.tournamentsPlayed||0);return e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:U.includes(r.uid),onChange:()=>re(r.uid),className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.photoURL?e.jsx("img",{src:r.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-sm font-bold ${r.photoURL?"hidden":"flex"}`,children:r.displayName?.[0]||"G"}),e.jsx("span",{className:"text-white font-medium",children:r.displayName||"Guest User"})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:r.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:r.isAnonymous?e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(120, 53, 15, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(180, 83, 9)",color:"rgb(251, 191, 36)"},children:"Guest"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(20, 83, 45, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(21, 128, 61)",color:"rgb(74, 222, 128)"},children:"Authenticated"})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-white font-semibold",children:G}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>N({type:"stats",id:r.uid,name:r.displayName||"User",gameType:"all"}),className:"p-2 bg-amber-900/30 border border-amber-700 rounded hover:bg-amber-900/50 transition",title:"Reset All Stats",children:e.jsx(ds,{size:14,className:"text-amber-400"})}),e.jsx("button",{onClick:()=>N({type:"user",id:r.uid,name:r.displayName||"User"}),className:"p-2 bg-red-900/30 border border-red-700 rounded hover:bg-red-900/50 transition",title:"Delete User",children:e.jsx(fe,{size:14,className:"text-red-400"})})]})})]},r.uid)})})]})})})]}),z==="games"&&e.jsxs("div",{className:"space-y-6",children:[S.totalGames>0&&e.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"All Active Games"}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Total: ",S.totalGames," games"]})]}),e.jsxs("button",{onClick:()=>N({type:"bulk-games",id:"all",name:"all games"}),className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(fe,{size:18}),"Delete All Games"]})]}),p.makesOrMisses.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(ve,{size:20,className:"text-cyan-400"}),"Makes or Misses (",p.makesOrMisses.length,")"]}),e.jsx("div",{className:"grid gap-2",children:p.makesOrMisses.map(r=>{const G=w===`mom-${r.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-800/50",onClick:()=>M(G?null:`mom-${r.code}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G?e.jsx(Te,{size:16,className:"text-cyan-400"}):e.jsx($e,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-white font-mono font-semibold",children:r.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[r.players?.length||0," players â€¢ Round ",r.currentRound||0]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():"-"})]}),G&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.players?.map((R,Q)=>e.jsxs("div",{className:"flex justify-between bg-slate-900/50 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:R.name}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[R.score||0," pts"]})]},R.id||Q))}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Status:"}),e.jsx("span",{className:"ml-2 text-white",children:r.gameStarted?"In Progress":"Waiting"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Active Player:"}),e.jsx("span",{className:"ml-2 text-white",children:r.players?.[r.activePlayerIndex]?.name||"-"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:R=>{R.stopPropagation(),N({type:"game",id:r.code,name:r.code,gameType:"makesOrMisses"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(fe,{size:16}),"Delete Game"]})})]})]},r.code)})})]}),p.matchPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(oe,{size:20,className:"text-emerald-400"}),"Match Play (",p.matchPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:p.matchPlay.map(r=>{const G=w===`matchPlay-${r.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>M(G?null:`matchPlay-${r.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:r.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[r.player1?.name||"Player 1"," vs ",r.player2?.name||"Player 2"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():"-"}),G?e.jsx(Te,{size:20}):e.jsx($e,{size:20})]})]}),G&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Match Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 1"}),e.jsx("div",{className:"text-white font-semibold",children:r.player1?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[r.player1?.score||0," points"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 2"}),e.jsx("div",{className:"text-white font-semibold",children:r.player2?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[r.player2?.score||0," points"]})]})]}),r.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",r.currentRound," / 10"]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:R=>{R.stopPropagation(),N({type:"game",id:r.code,name:r.code,gameType:"matchPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(fe,{size:16}),"Delete Game"]})})]})]},r.code)})})]}),p.kingOfTheHill.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(ue,{size:20,className:"text-amber-400"}),"King of the Hill (",p.kingOfTheHill.length,")"]}),e.jsx("div",{className:"grid gap-2",children:p.kingOfTheHill.map(r=>{const G=w===`kingOfTheHill-${r.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>M(G?null:`kingOfTheHill-${r.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:r.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[r.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():"-"}),G?e.jsx(Te,{size:20}):e.jsx($e,{size:20})]})]}),G&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:r.players?.map((R,Q)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:R.name}),e.jsxs("span",{className:"text-amber-400 font-semibold text-sm",children:[R.score||0," pts"]})]},R.id||Q))}),r.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",r.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:R=>{R.stopPropagation(),N({type:"game",id:r.code,name:r.code,gameType:"kingOfTheHill"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(fe,{size:16}),"Delete Game"]})})]})]},r.code)})})]}),p.bracketPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ce,{size:20,className:"text-violet-400"}),"Bracket Play (",p.bracketPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:p.bracketPlay.map(r=>{const G=w===`bracketPlay-${r.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>M(G?null:`bracketPlay-${r.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:r.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[r.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():"-"}),G?e.jsx(Te,{size:20}):e.jsx($e,{size:20})]})]}),G&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Standings"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:r.players?.map((R,Q)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:R.name}),e.jsxs("span",{className:"text-violet-400 font-semibold text-sm",children:[R.wins||0," wins"]})]},R.id||Q))}),r.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",r.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:R=>{R.stopPropagation(),N({type:"game",id:r.code,name:r.code,gameType:"bracketPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(fe,{size:16}),"Delete Game"]})})]})]},r.code)})})]}),S.totalGames===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"No active games"})})]})]})})]})]}):e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:k}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-red-700 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx(Qe,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:k,className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition",children:"Close"})]})]}):null}const Ue=[{id:"668e3aca-5106-4c24-a9c1-2bd89926ebad",name:"Sunshine Lanes",url:"https://livescore.lanetalk.com/livescoring/668e3aca-5106-4c24-a9c1-2bd89926ebad"},{id:"15903a3d-a2f1-48d8-ab8b-97c9476b688a",name:"Enterprise Lanes",url:"https://livescore.lanetalk.com/livescoring/15903a3d-a2f1-48d8-ab8b-97c9476b688a"},{id:"4fc22569-ae38-44cf-9d2d-78d7034be9b7",name:"G3 Entertainment LLC",url:"https://livescore.lanetalk.com/livescoring/4fc22569-ae38-44cf-9d2d-78d7034be9b7"}],ls=Ue[0],Hs=u=>{const k=Ue.find(b=>b.id===u)||ls;return{finished:`${k.url}?tab=finished&q=&order=date&sort=asc`,scores:`${k.url}?tab=scores`,live:k.url}};function Ds({isOpen:u,onClose:k}){const[b,h]=l.useState(ls.id);if(!u)return null;const g=Hs(b),C=Ue.find(y=>y.id===b);return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{className:"rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)",boxShadow:"0 25px 50px -12px rgba(251, 191, 36, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex justify-between items-center flex-shrink-0",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{size:28,style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Top Bowlers"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(254, 243, 199)"},children:"Weekly Leaderboard"})]})]}),e.jsxs("button",{onClick:k,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:y=>y.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(Ne,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-4 md:p-6 flex-shrink-0",style:{borderBottom:"1px solid rgb(51, 65, 85)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Bowling Center"}),e.jsx("select",{value:b,onChange:y=>h(y.target.value),className:"w-full px-4 py-3 rounded-lg focus:outline-none",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:Ue.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsx("div",{className:"p-6 flex-1",children:e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(51, 65, 85)"},children:[e.jsx(oe,{size:80,className:"mx-auto mb-6",style:{color:"rgb(251, 191, 36)"}}),e.jsxs("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:["View ",C?.name," Leaderboard"]}),e.jsx("p",{className:"mb-8 text-lg",style:{color:"rgb(148, 163, 184)"},children:"Click below to view the weekly top bowlers on Lanetalk Live Scoring"}),e.jsxs("a",{href:g.scores,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-8 py-4 font-bold rounded-lg transition text-lg",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",color:"rgb(255, 255, 255)",boxShadow:"0 10px 15px -3px rgba(217, 119, 6, 0.5)"},onMouseEnter:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(180, 83, 9), rgb(146, 64, 14))",onMouseLeave:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",children:[e.jsx(oe,{size:24}),"View Top Bowlers",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})})]})})}function Fs({isOpen:u,onClose:k}){return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},onClick:k}),e.jsxs("div",{className:"relative rounded-2xl max-w-lg w-full",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)",boxShadow:"0 25px 50px -12px rgba(59, 130, 246, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex items-center justify-between",style:{background:"linear-gradient(to right, rgb(37, 99, 235), rgb(139, 92, 246))"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{size:24,className:"md:hidden",style:{color:"rgb(255, 255, 255)"}}),e.jsx(Le,{size:28,className:"hidden md:block",style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Import Game Scores"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(219, 234, 254)"},children:"Add completed game results to your stats"})]})]}),e.jsxs("button",{onClick:k,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:b=>b.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(Ne,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-8 md:p-12 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(ms,{size:80,className:"mx-auto",style:{color:"rgb(251, 191, 36)"}})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:"Coming Soon!"}),e.jsx("p",{className:"text-lg mb-6",style:{color:"rgb(148, 163, 184)"},children:"We're working on an exciting feature that will allow you to automatically import your bowling scores and track your progress over time."}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgb(59, 130, 246)"},children:[e.jsx("p",{className:"text-sm",style:{color:"rgb(147, 197, 253)"},children:e.jsx("strong",{children:"What's Coming:"})}),e.jsxs("ul",{className:"text-sm mt-2 space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsx("li",{children:"âœ“ Automatic score detection from Lanetalk"}),e.jsx("li",{children:"âœ“ Historical game tracking"}),e.jsx("li",{children:"âœ“ Performance analytics and trends"}),e.jsx("li",{children:"âœ“ Personalized statistics dashboard"})]})]})]})]})]}):null}function Bs({slot:u="1234567890",format:k="auto",responsive:b=!0}){const h=l.useRef(null);return l.useEffect(()=>{try{window.adsbygoogle&&h.current&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(g){console.error("AdSense error:",g)}},[]),e.jsx("div",{className:"ad-banner-container",style:{textAlign:"center",margin:"20px 0"},children:e.jsx("ins",{ref:h,className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9558998933851822","data-ad-slot":u,"data-ad-format":k,"data-full-width-responsive":b.toString()})})}function Qs({isOpen:u,onClose:k,onRewardGranted:b,gameName:h}){const[g,C]=l.useState(!1),[y,p]=l.useState(!1);if(!u)return null;const P=()=>{C(!0),setTimeout(()=>{C(!1),p(!0),setTimeout(()=>{b(),k()},2e3)},3e3)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},onClick:k}),e.jsxs("div",{className:"relative rounded-2xl max-w-md w-full p-8",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(124, 58, 237)"},onClick:S=>S.stopPropagation(),children:[e.jsx("button",{onClick:k,className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(he,{size:20})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:"linear-gradient(to bottom right, rgb(168, 85, 247), rgb(124, 58, 237))"},children:e.jsx(_e,{size:32,style:{color:"rgb(255, 255, 255)"}})})}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",style:{color:"rgb(255, 255, 255)"},children:y?"Unlocked!":"Watch Ad to Play"}),y?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center mb-6",style:{color:"rgb(34, 197, 94)"},children:["âœ… You can now play ",h," for the next 24 hours!"]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-bounce",children:e.jsx(_e,{size:48,style:{color:"rgb(168, 85, 247)"}})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center mb-6",style:{color:"rgb(148, 163, 184)"},children:["Watch a short ad to unlock ",e.jsx("span",{className:"font-bold",style:{color:"rgb(168, 85, 247)"},children:h})," for 24 hours"]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"Play unlimited games for 24 hours"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"Track your stats"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:"rgba(168, 85, 247, 0.1)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(203, 213, 225)"},children:"100% free"})]})]}),e.jsx("button",{onClick:P,disabled:g,className:"w-full py-4 rounded-lg font-bold text-lg transition flex items-center justify-center gap-2",style:{background:g?"rgb(71, 85, 105)":"linear-gradient(to right, rgb(168, 85, 247), rgb(124, 58, 237))",color:"rgb(255, 255, 255)",cursor:g?"not-allowed":"pointer"},children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Loading Ad..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{size:20}),e.jsx("span",{children:"Watch Ad (30s)"})]})}),e.jsxs("p",{className:"text-xs text-center mt-4",style:{color:"rgb(100, 116, 139)"},children:["Or ",e.jsx("button",{onClick:k,className:"underline hover:text-purple-400",children:"sign up"})," for unlimited access"]})]})]})]})}function qs(){const[u,k]=l.useState(null),[b,h]=l.useState(null),[g,C]=l.useState(!1),[y,p]=l.useState(!1),[P,S]=l.useState(!1),[L,z]=l.useState(!1),[$,w]=l.useState(!1),[M,x]=l.useState(!1),[N,U]=l.useState(!1),[f,_]=l.useState(!1),[X,j]=l.useState(""),[W,F]=l.useState(()=>{const d=localStorage.getItem("adUnlockedGames");return d?JSON.parse(d):{}}),[A,Y]=l.useState(null),{currentUser:V,isGuest:J,isAdmin:ie,signOut:se}=me(),re=l.useRef(null);l.useEffect(()=>{const d=new URLSearchParams(window.location.search),K=d.get("join"),B=d.get("game");K&&B&&(Y({gameId:B,joinCode:K.toUpperCase()}),!V||J?C(!0):k(B))},[V,J]),l.useEffect(()=>{A&&V&&!J&&(k(A.gameId),window.history.replaceState({},document.title,window.location.pathname))},[V,J,A]),l.useEffect(()=>{const d=K=>{re.current&&!re.current.contains(K.target)&&p(!1)};return y&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[y]);const r=[{id:"makes-or-misses",name:"Makes or Misses",description:"Predict if you make or miss the next shot",icon:ve,gradient:"from-cyan-500 via-blue-500 to-indigo-600",glowColor:"shadow-cyan-500/50",badge:"ðŸŽ¯ Quick Play",available:!0},{id:"match-play",name:"Match Play",description:"Head-to-head 3-game match",icon:oe,gradient:"from-emerald-500 via-teal-500 to-cyan-600",glowColor:"shadow-emerald-500/50",badge:"âš¡ 1v1 Battle",available:!0},{id:"king-of-the-hill",name:"King of the Hill",description:"High game takes it all",icon:ue,gradient:"from-amber-500 via-orange-500 to-red-600",glowColor:"shadow-amber-500/50",badge:"ðŸ‘‘ Multiplayer",available:!0},{id:"bracket-play",name:"Bracket Play",description:"8-player single elimination bracket",icon:Ce,gradient:"from-violet-500 via-purple-500 to-fuchsia-600",glowColor:"shadow-violet-500/50",badge:"ðŸ† Tournament",available:!0},{id:"mystery-frames",name:"Mystery Frames",description:"Quarters game with strike-based mystery bonuses",icon:ge,gradient:"from-amber-500 via-yellow-500 to-orange-600",glowColor:"shadow-amber-500/50",badge:"âš¡ Quarters + Bonus",available:!0}],G=d=>{const K=r.find(B=>B.id===d);if(K.available){if(J&&d!=="makes-or-misses"){const B=W[d];if(!(B&&Date.now()<B)){j(K.name),_(!0);return}}if(d==="mystery-frames"&&(!V||J)){C(!0);return}k(d)}},R=()=>{const d=Date.now()+864e5,K={"match-play":d,"king-of-the-hill":d,"bracket-play":d,"mystery-frames":d};F(K),localStorage.setItem("adUnlockedGames",JSON.stringify(K)),U(!0)},Q=()=>{k(null)};return u==="makes-or-misses"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-cyan-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Ne,{size:20}),"Back to Games"]}),e.jsx(Ts,{})]}):u==="match-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-emerald-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Ne,{size:20}),"Back to Games"]}),e.jsx($s,{})]}):u==="king-of-the-hill"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Ne,{size:20}),"Back to Games"]}),e.jsx(As,{})]}):u==="bracket-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-violet-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-violet-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Ne,{size:20}),"Back to Games"]}),e.jsx(Ls,{})]}):u==="mystery-frames"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-yellow-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Ne,{size:20}),"Back to Games"]}),e.jsx(Us,{})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-4 right-4 md:top-6 md:right-6 z-50",children:e.jsxs("div",{className:"relative",ref:re,children:[e.jsxs("button",{onClick:()=>p(!y),className:"flex items-center gap-2 md:gap-3 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-full px-3 py-2 md:px-4 hover:bg-slate-800 transition",children:[V?.photoURL?e.jsx("img",{src:V.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center ${V?.photoURL?"hidden":"flex"}`,children:e.jsx(Be,{size:20,className:"text-white"})}),e.jsxs("span",{className:"text-white font-semibold text-sm md:text-base hidden sm:inline",children:[V?.displayName||"Guest",J&&e.jsx("span",{className:"text-slate-400 text-sm ml-1",children:"(Guest)"})]})]}),y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 sm:w-64 rounded-xl overflow-hidden z-50",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59), rgb(15, 23, 42))",borderColor:"rgba(51, 65, 85, 0.5)",border:"1px solid rgba(51, 65, 85, 0.5)",boxShadow:"0 25px 50px -12px rgba(168, 85, 247, 0.2)",backdropFilter:"blur(8px)"},children:[J&&e.jsxs("button",{onClick:()=>{C(!0),p(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(34, 211, 238)",backgroundColor:"transparent",borderBottom:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Be,{size:18}),"Sign In / Register"]}),e.jsxs("button",{onClick:()=>{S(!0),p(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(241, 245, 249)",backgroundColor:"transparent"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="transparent",children:[e.jsx(ts,{size:18}),"View Stats"]}),ie&&e.jsxs("button",{onClick:()=>{z(!0),p(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(192, 132, 252)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Qe,{size:18}),"Admin Dashboard"]}),!J&&e.jsxs("button",{onClick:async()=>{await se(),p(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(248, 113, 113)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:d=>d.currentTarget.style.backgroundColor="transparent",children:[e.jsx(gs,{size:18}),"Sign Out"]})]})]})}),e.jsx(Is,{isOpen:g,onClose:()=>C(!1),pendingInvite:A}),N&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>U(!1)}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-purple-500 rounded-2xl shadow-2xl max-w-md w-full p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Register to Play"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["Guest accounts can only access ",e.jsx("span",{className:"text-cyan-400 font-semibold",children:"Makes or Misses"}),". Sign up for a free account to unlock all game modes and track your stats!"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{U(!1),C(!0)},className:"flex-1 bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg hover:shadow-purple-500/50 transition",children:"Sign Up"}),e.jsx("button",{onClick:()=>U(!1),className:"flex-1 bg-slate-800 text-slate-300 font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition border border-slate-700",children:"Cancel"})]})]})]}),e.jsx(Os,{isOpen:P,onClose:()=>S(!1)}),e.jsx(Ws,{isOpen:L,onClose:()=>z(!1)}),e.jsx(Ds,{isOpen:$,onClose:()=>w(!1)}),e.jsx(Fs,{isOpen:M,onClose:()=>x(!1)}),e.jsx(Qs,{isOpen:f,onClose:()=>_(!1),onRewardGranted:R,gameName:X}),e.jsx("div",{className:"relative z-10 min-h-screen p-4 md:p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full",children:[e.jsxs("div",{className:"text-center mb-12 md:mb-16 space-y-4 pt-16 sm:pt-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 md:gap-3 bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20 rounded-full px-4 md:px-6 py-2 mb-4",children:[e.jsx(Ke,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-purple-300 text-xs md:text-sm font-semibold tracking-wide",children:"MULTIPLAYER BOWLING GAMES"})]}),e.jsx("h1",{className:"text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 mb-4 tracking-tight",children:"BOWLING FUN"}),e.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-light",children:"Choose your battleground and dominate the lanes with friends"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[r.map(d=>{const K=d.icon,B=b===d.id,ee=J&&d.id!=="makes-or-misses";return e.jsxs("button",{onClick:()=>G(d.id),onMouseEnter:()=>h(d.id),onMouseLeave:()=>h(null),disabled:!d.available,className:`group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 ${d.available?"hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl":"opacity-40 cursor-not-allowed"} ${ee?"opacity-60":""}`,children:[B&&d.available&&e.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${d.gradient} rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:d.badge})}),e.jsxs("div",{className:`relative w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br ${d.gradient} flex items-center justify-center transform ${d.available?"group-hover:scale-110 group-hover:rotate-6":""} transition-all duration-500 shadow-lg ${B?d.glowColor+" shadow-2xl":""}`,children:[e.jsx(K,{size:32,className:"text-white"}),ee&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:e.jsx(Fe,{size:24,className:"text-white"})})]}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:d.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:d.description}),d.available?e.jsxs("div",{className:`flex items-center justify-center gap-2 bg-gradient-to-r ${d.gradient} px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300`,children:[e.jsx(ge,{size:16}),e.jsx("span",{children:"PLAY NOW"})]}):e.jsx("div",{className:"inline-flex items-center gap-2 bg-slate-800 text-slate-500 px-4 py-2.5 rounded-lg text-sm font-semibold",children:"ðŸ”’ Coming Soon"})]})]},d.id)}),e.jsxs("button",{onClick:()=>w(!0),onMouseEnter:()=>h("top-bowlers"),onMouseLeave:()=>h(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[b==="top-bowlers"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ† Leaderboard"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-amber-500 via-yellow-500 to-orange-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-amber-500/50 hover:shadow-2xl",children:e.jsx(oe,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Check Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Weekly leaderboard from your bowling center"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(Ke,{size:16}),e.jsx("span",{children:"VIEW LEADERS"})]})]})]}),V&&!J&&e.jsxs("button",{onClick:()=>x(!0),onMouseEnter:()=>h("import-scores"),onMouseLeave:()=>h(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[b==="import-scores"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"ðŸ“Š Track Stats"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-blue-500/50 hover:shadow-2xl",children:e.jsx(Le,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Import Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Add your completed game scores"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(Le,{size:16}),e.jsx("span",{children:"ADD SCORES"})]})]})]})]}),J&&e.jsx("div",{className:"mt-12 mb-6",children:e.jsx(Bs,{slot:"1234567890",format:"horizontal",responsive:!0})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:"5"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Game Modes"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"âˆž"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Multiplayer Fun"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold",children:"ðŸŽ³"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Real-Time Sync"})]})]})]})})]})}Ps.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Es,{children:e.jsx(qs,{})})}));
