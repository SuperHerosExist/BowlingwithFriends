import{r as ms,a as xs}from"./react-vendor-D3F3s8fL.js";import{r as n,T as fe,U as Je,H as ls,Q as Te,X as Ne,a as Qe,C as Ve,b as re,D as Pe,c as pe,N as Me,S as gs,Z as je,M as qe,L as Ze,d as We,e as He,f as Ye,g as us,h as ze,B as ns,i as we,j as Xe,E as Ee,k as hs,l as Ie,m as De,A as Se,n as Fe,o as bs,p as ps,q as es}from"./icons-DGPnH1Tk.js";import{Q as $e}from"./qrcode-B1CTJvkG.js";import{i as fs,g as ys,a as js,G as Ns,o as vs,s as ss,b as ws,c as ks,d as Cs,u as Ss,e as Ps,r as D,f as V,h as ae,j as Ae,k as ke}from"./firebase-DUuZ1j83.js";(function(){const G=document.createElement("link").relList;if(G&&G.supports&&G.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const S of g)if(S.type==="childList")for(const y of S.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function b(g){const S={};return g.integrity&&(S.integrity=g.integrity),g.referrerPolicy&&(S.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?S.credentials="include":g.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function h(g){if(g.ep)return;g.ep=!0;const S=b(g);fetch(g.href,S)}})();var _e={exports:{}},Re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ts;function Ms(){if(ts)return Re;ts=1;var u=ms(),G=Symbol.for("react.element"),b=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,g=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function y(P,M,E){var R,z={},U=null,j=null;E!==void 0&&(U=""+E),M.key!==void 0&&(U=""+M.key),M.ref!==void 0&&(j=M.ref);for(R in M)h.call(M,R)&&!S.hasOwnProperty(R)&&(z[R]=M[R]);if(P&&P.defaultProps)for(R in M=P.defaultProps,M)z[R]===void 0&&(z[R]=M[R]);return{$$typeof:G,type:P,key:U,ref:j,props:z,_owner:g.current}}return Re.Fragment=b,Re.jsx=y,Re.jsxs=y,Re}var as;function Gs(){return as||(as=1,_e.exports=Ms()),_e.exports}var e=Gs(),Oe={},rs;function Es(){if(rs)return Oe;rs=1;var u=xs();return Oe.createRoot=u.createRoot,Oe.hydrateRoot=u.hydrateRoot,Oe}var Rs=Es();const zs={apiKey:"AIzaSyBplm3Xt3Mru_Sxi2g3uptgbzXbQ8KZ0Aw",authDomain:"bowling-fun.firebaseapp.com",databaseURL:"https://bowling-fun-default-rtdb.firebaseio.com",projectId:"bowling-fun",storageBucket:"bowling-fun.firebasestorage.app",messagingSenderId:"1041099466681",appId:"1:1041099466681:web:55553970cd19f150dc3868"},os=fs(zs),O=ys(os),Ce=js(os),Ts=new Ns,Ke="davesfx@gmail.com",is=[Ke,"daves.seeker@gmail.com"],$s=u=>!u||!u.email?!1:u.email.toLowerCase()===Ke.toLowerCase(),Le=u=>!u||!u.email?!1:is.includes(u.email.toLowerCase()),cs=n.createContext();function he(){return n.useContext(cs)}function As({children:u}){const[G,b]=n.useState(null),[h,g]=n.useState(!0),[S,y]=n.useState(!1),[P,M]=n.useState(!1),E=async w=>{if(!w)return;const N=D(O,`users/${w.uid}`),m=await V(N);if(!m.exists())await ae(N,{uid:w.uid,displayName:w.displayName||"Guest User",email:w.email||null,photoURL:w.photoURL||null,isAnonymous:w.isAnonymous,createdAt:Date.now(),subscription:{isActive:!1,plan:null,startDate:null,endDate:null,stripeSubscriptionId:null},credits:0,stats:{makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}});else{const W=m.val()||{},k={displayName:w.displayName||W.displayName||"Guest User",photoURL:w.photoURL||W.photoURL||null,email:w.email||W.email||null,lastLogin:Date.now()};await ae(N,{...W,...k})}},R=async()=>{try{const w=await Ps(Ce,Ts);return await E(w.user),y(!1),w.user}catch(w){throw console.error("Error signing in with Google:",w),w}},z=async(w,N,m)=>{try{const W=await Cs(Ce,w,N);return m&&await Ss(W.user,{displayName:m}),await E(W.user),y(!1),W.user}catch(W){throw console.error("Error signing up with email:",W),W}},U=async(w,N)=>{try{const m=await ks(Ce,w,N);return await E(m.user),y(!1),m.user}catch(m){throw console.error("Error signing in with email:",m),m}},j=async()=>{try{const w=await ss(Ce);return await E(w.user),y(!0),w.user}catch(w){throw console.error("Error signing in anonymously:",w),w}},i=async()=>{try{await ws(Ce),y(!1)}catch(w){throw console.error("Error signing out:",w),w}};n.useEffect(()=>vs(Ce,async N=>{if(N)b(N),y(N?.isAnonymous||!1),M(Le(N)),await E(N),g(!1);else try{const m=await ss(Ce);b(m.user),y(!0),M(!1),await E(m.user)}catch(m){console.error("Error auto-signing in as guest:",m)}finally{g(!1)}}),[]);const f={currentUser:G,isGuest:S,isAdmin:P,signInWithGoogle:R,signUpWithEmail:z,signInWithEmail:U,continueAsGuest:j,signOut:i,loading:h};return e.jsx(cs.Provider,{value:f,children:!h&&u})}function Ls(){const{currentUser:u}=he(),G=async(y,P)=>{if(u)try{const M=D(O,`users/${u.uid}/stats/${y}`),E=await V(M),z={...E.exists()?E.val():{}};Object.keys(P).forEach(U=>{typeof P[U]=="number"?z[U]=(z[U]||0)+P[U]:z[U]=P[U]}),await ae(M,z)}catch(M){console.error("Error updating stats:",M)}};return{recordMakesOrMissesGame:async y=>{const{isWinner:P,points:M}=y;await G("makesOrMisses",{gamesPlayed:1,totalPoints:M,wins:P?1:0,losses:P?0:1})},recordMatchPlayGame:async y=>{const{outcome:P}=y;await G("matchPlay",{gamesPlayed:1,wins:P==="win"?1:0,losses:P==="loss"?1:0,ties:P==="tie"?1:0})},recordKingOfTheHillGame:async y=>{const{wonHighGame:P,wonHighTotal:M}=y;await G("kingOfTheHill",{gamesPlayed:1,highGameWins:P?1:0,highTotalWins:M?1:0})},recordBracketPlayTournament:async y=>{const{isChampion:P,isRunnerUp:M}=y;await G("bracketPlay",{tournamentsPlayed:1,championships:P?1:0,runnerUps:M?1:0})}}}function Us(){const{currentUser:u}=he(),{recordMakesOrMissesGame:G}=Ls(),[b,h]=n.useState(""),[g,S]=n.useState(""),[y,P]=n.useState(!1),[M,E]=n.useState(!1),[R,z]=n.useState(!1),[U,j]=n.useState(!1),[i,f]=n.useState([]),[w,N]=n.useState(""),[m,W]=n.useState(0),[k,x]=n.useState(0),[H,B]=n.useState(null),[T,F]=n.useState(!1),[$,Q]=n.useState({}),p=.25,q=t=>(t*p).toFixed(2),Z=(t,r)=>`${t}->${r}`,te=()=>`${window.location.origin+window.location.pathname}?join=${b}&game=makes-or-misses`,ie=t=>{let r=0,o=0;return Object.entries($).forEach(([c,A])=>{if(!A)return;const[I,l]=c.split("->").map(Number);l===t&&(r+=A),I===t&&(o+=A)}),r-o},ce=()=>Math.random().toString(36).substring(2,8).toUpperCase(),de=t=>t.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ");n.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("join");r&&S(r.toUpperCase())},[]),n.useEffect(()=>{if(!b)return;const t=D(O,`games/${b}`),r=Ae(t,o=>{const c=o.val();c&&(f(c.players||[]),W(c.currentRound||0),x(c.activePlayerIndex||0),B(c.activePlayerChoice||null),F(c.gameStarted||!1),Q(c.ledger||{}))});return()=>r()},[b]);const oe=()=>{const t=ce();h(t),P(!0),E(!0);const r=u?.displayName||u?.email?.split("@")[0]||"Player",o=[{id:Date.now(),name:de(r),score:0}],c=D(O,`games/${t}`);ae(c,{players:o,currentRound:0,activePlayerIndex:0,activePlayerChoice:null,gameStarted:!1,ledger:{},createdAt:Date.now()})},me=async()=>{if(!g.trim())return;const t=g.toUpperCase(),r=D(O,`games/${t}`),o=await V(r);if(o.exists()){h(t),P(!1),E(!0);const c=o.val(),A=u?.displayName||u?.email?.split("@")[0]||"Player";if(!c.players?.find(l=>l.name.toLowerCase()===A.toLowerCase())&&!c.gameStarted){const l=[...c.players||[],{id:Date.now(),name:de(A),score:0}];await ae(r,{...c,players:l})}}else alert("Game not found! Check the code and try again.")},X=t=>{if(!b)return;const r=D(O,`games/${b}`);ae(r,{players:i,currentRound:m,activePlayerIndex:k,activePlayerChoice:H,gameStarted:T,ledger:$,...t})},le=()=>{if(w.trim()&&!T){const t=[...i,{id:Date.now(),name:de(w.trim()),score:0}];X({players:t}),N("")}},ne=()=>{i.length>=2&&X({gameStarted:!0,currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},xe=t=>{X({activePlayerChoice:t})},v=t=>{const r=i[k],o=i.filter((I,l)=>l!==k),c=i.map((I,l)=>l===k?H===t?{...I,score:I.score+(i.length-1)}:I:(H==="make"?"miss":"make")===t?{...I,score:I.score+1}:I),A={...$};H===t?o.forEach(I=>{const l=Z(I.id,r.id);A[l]=(A[l]||0)+1}):o.forEach(I=>{const l=Z(r.id,I.id);A[l]=(A[l]||0)+1}),X({players:c,ledger:A,currentRound:m<50?m+1:m,activePlayerIndex:m<50?(k+1)%i.length:k,activePlayerChoice:null})},L=async()=>{if(!u||!s)return;const t=i.find(r=>r.name.toLowerCase()===u.displayName?.toLowerCase()||r.id===u.uid);if(t){const r=Math.max(...i.map(c=>c.score)),o=t.score===r;await G({isWinner:o,points:t.score})}},K=()=>{L(),X({players:i.map(t=>({...t,score:0})),ledger:{},currentRound:1,activePlayerIndex:0,activePlayerChoice:null})},d=()=>{E(!1),h(""),S(""),P(!1)},a=i[k],s=m>50;return M?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",right:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>j(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(6, 182, 212, 0.2)",border:"1px solid rgb(6, 182, 212)",color:"rgb(34, 211, 238)"},title:"How to play",children:e.jsx(ls,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(fe,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:b})]}),e.jsx("button",{onClick:()=>z(!R),className:"btn-primary-cyan p-2",title:"Show QR code to join",children:e.jsx(Te,{size:20})})]})]}),U&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>j(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(34, 211, 238)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600",children:e.jsx(fe,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"🎯 The Game"}),e.jsx("p",{className:"text-sm",children:'One player predicts "Make" or "Miss". Everyone else gets the opposite prediction automatically!'})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"💰 Scoring"}),e.jsx("p",{className:"text-sm",children:"Guess correctly? +1 point! Wrong? -1 point. Play 50 rounds and watch the leaderboard!"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(34, 211, 238)"},children:"📱 Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Each round = $0.25 per point"}),e.jsx("li",{children:"Players rotate who chooses"}),e.jsx("li",{children:"Check the debt breakdown at the end!"})]})]})]}),e.jsx("button",{onClick:()=>j(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(6, 182, 212), rgb(59, 130, 246))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),R&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:te(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-slate-400 mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:b})]}),e.jsx("button",{onClick:()=>z(!1),className:"mt-3 text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Hide QR Code"})]})}),T?e.jsxs("div",{className:"space-y-6",children:[s?e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"🎉 Game Over! 🎉"}),e.jsx("p",{className:"text-xl mb-6 text-slate-300",children:"50 rounds completed!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4 text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Round ",m]}),e.jsxs("p",{className:"text-lg mt-2 text-slate-300",children:[e.jsx("span",{className:"font-bold text-purple-600",children:a?.name}),"'s turn to choose"]})]}),e.jsxs("div",{className:"bg-amber-900/30 border-2 border-amber-500 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-center mb-4 text-white",children:[a?.name,", make your choice:"]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>xe("make"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:H==="make"?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(34, 197, 94)",color:H==="make"?"rgb(255, 255, 255)":"rgb(34, 197, 94)"},onMouseEnter:t=>{H!=="make"&&(t.currentTarget.style.backgroundColor="rgba(34, 197, 94, 0.1)")},onMouseLeave:t=>{H!=="make"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(Ve,{className:"inline mr-2",size:24}),"Make"]}),e.jsxs("button",{onClick:()=>xe("miss"),className:"flex-1 py-4 rounded-lg font-bold text-lg transition",style:{backgroundColor:H==="miss"?"rgb(239, 68, 68)":"rgba(30, 41, 59, 0.5)",border:"2px solid rgb(239, 68, 68)",color:H==="miss"?"rgb(255, 255, 255)":"rgb(239, 68, 68)"},onMouseEnter:t=>{H!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)")},onMouseLeave:t=>{H!=="miss"&&(t.currentTarget.style.backgroundColor="rgba(30, 41, 59, 0.5)")},children:[e.jsx(Ne,{className:"inline mr-2",size:24}),"Miss"]})]}),H&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 mt-4",children:[e.jsxs("p",{className:"text-center text-slate-300 mb-3",children:[e.jsx("span",{className:"font-bold",children:a?.name})," chose:"," ",e.jsx("span",{className:`font-bold ml-2 ${H==="make"?"text-green-600":"text-red-600"}`,children:H==="make"?"MAKES":"MISSES"})]}),e.jsxs("p",{className:"text-center text-sm text-slate-400 mb-4",children:["All other players automatically get:"," ",e.jsx("span",{className:`font-bold ml-2 ${H==="miss"?"text-green-600":"text-red-600"}`,children:H==="miss"?"MAKES":"MISSES"})]}),e.jsxs("div",{className:"border-t border-slate-700 pt-4",children:[e.jsx("h4",{className:"font-bold text-center mb-3 text-white",children:"What was the result?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>v("make"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(34, 197, 94)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(22, 163, 74)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(34, 197, 94)",children:[e.jsx(Ve,{className:"inline mr-2",size:20}),"Made It!"]}),e.jsxs("button",{onClick:()=>v("miss"),className:"flex-1 py-3 rounded-lg transition font-bold",style:{backgroundColor:"rgb(239, 68, 68)",color:"rgb(255, 255, 255)"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="rgb(220, 38, 38)",onMouseLeave:t=>t.currentTarget.style.backgroundColor="rgb(239, 68, 68)",children:[e.jsx(Ne,{className:"inline mr-2",size:20}),"Missed!"]})]})]})]})]}),e.jsx("div",{className:"player-grid",children:i.map((t,r)=>{const o=r===k,c=o?H:H==="make"?"miss":H==="miss"?"make":null;return e.jsxs("div",{className:`player-card ${o?"active bg-amber-900/30 border-2 border-amber-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm sm:text-base text-white",children:[t.name," ",o&&"👈"]}),e.jsx("span",{className:"score-badge",children:t.score})]}),c&&e.jsx("div",{className:`text-center py-2 rounded font-semibold text-sm ${c==="make"?"bg-green-900/40 text-green-300":"bg-red-900/40 text-red-300"}`,children:c==="make"?"MAKES":"MISSES"})]},t.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(re,{className:"text-amber-400",size:24}),"Leaderboard"]}),e.jsx("div",{className:"space-y-2",children:[...i].sort((t,r)=>r.score-t.score).map((t,r)=>{const o=(t.score*p).toFixed(2),c=q(ie(t.id));return e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[r===0&&"🥇"," ",r===1&&"🥈"," ",r===2&&"🥉"," ",t.name]}),e.jsxs("span",{className:"font-bold text-sm",style:{color:"rgb(192, 132, 252)"},children:[t.score," pts ($",o,") · Net $",c]})]},t.id)})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4 mt-4",children:[e.jsx("h4",{className:"font-bold text-md mb-2 text-white",children:"💵 Owes Breakdown"}),i.length<=1?e.jsx("p",{className:"text-slate-400 text-sm",children:"Add more players to calculate owes."}):(()=>{const t={};i.forEach(o=>t[o.id]=[]),Object.entries($).forEach(([o,c])=>{if(!c)return;const[A,I]=o.split("->").map(Number),l=i.find(Y=>Y.id===A),C=i.find(Y=>Y.id===I);!l||!C||t[I].push({debtorId:A,debtorName:l.name,pts:c,money:q(c)})});const r=i.map(o=>{const c=t[o.id]||[],A=c.reduce((I,l)=>I+Number(l.money),0).toFixed(2);return{cr:o,items:c,total:A}}).filter(o=>o.items.length>0);return r.length===0?e.jsx("p",{className:"text-slate-300 text-sm",children:"No debts yet."}):e.jsx("div",{className:"space-y-4",children:r.map(({cr:o,items:c,total:A})=>e.jsxs("div",{className:"bg-slate-800/50 rounded-md p-3",children:[e.jsxs("p",{className:"text-slate-300 text-sm mb-2",children:["Payouts to ",e.jsx("span",{className:"font-semibold",children:o.name}),":"]}),e.jsx("ul",{className:"list-disc ml-5 space-y-1",children:c.map(I=>e.jsxs("li",{className:"text-white text-sm",children:[I.debtorName," owes ",o.name," $",I.money," (",I.pts," pts)"]},I.debtorId))}),e.jsxs("p",{className:"text-slate-300 text-sm mt-2",children:[o.name," total to collect: ",e.jsxs("span",{className:"font-semibold",children:["$",A]})]})]},o.id))})})()]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:K,className:"flex-1 btn-primary-cyan",children:"Reset Scores"}),e.jsx("button",{onClick:d,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(103, 232, 249)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:b})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:w,onChange:t=>N(t.target.value),onKeyDown:t=>t.key==="Enter"&&le(),placeholder:"Enter Bowler's Name",className:"game-input"}),e.jsxs("button",{onClick:le,className:"btn-primary-orange flex items-center justify-center gap-2",children:[e.jsx(Qe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),i.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Bowlers (",i.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:i.map(t=>e.jsx("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow text-white",children:t.name},t.id))})]}),e.jsx("button",{onClick:ne,disabled:i.length<2,className:"w-full py-4 rounded-lg transition font-bold text-xl disabled:cursor-not-allowed",style:{backgroundColor:i.length<2?"rgb(209, 213, 219)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:i.length<2?.5:1},onMouseEnter:t=>{i.length>=2&&(t.currentTarget.style.backgroundColor="rgb(22, 163, 74)")},onMouseLeave:t=>{i.length>=2&&(t.currentTarget.style.backgroundColor="rgb(34, 197, 94)")},children:i.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(8, 145, 178)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-cyan-500/50",children:e.jsx(fe,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-cyan",children:"Makes or Misses"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Multiplayer Bowling Predictor"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:oe,className:"w-full btn-primary-cyan flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(Je,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:g,onChange:t=>S(t.target.value.toUpperCase()),onKeyDown:t=>t.key==="Enter"&&me(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:me,className:"w-full btn-primary-cyan text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function Is(){const{currentUser:u}=he(),G=u&&Le(u.email),b=u?.isAnonymous,[h,g]=n.useState(""),[S,y]=n.useState(""),[P,M]=n.useState(!1),[E,R]=n.useState(!1),[z,U]=n.useState(!1),[j,i]=n.useState({name:"",id:null}),[f,w]=n.useState({name:"",id:null}),[N,m]=n.useState(!1),[W,k]=n.useState(1),[x,H]=n.useState({game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),[B,T]=n.useState({perGame:5,totals:5}),F=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=match-play`,$=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("join");L&&y(L.toUpperCase())},[]),n.useEffect(()=>{if(!h)return;const v=D(O,`matchplay/${h}`),L=Ae(v,K=>{const d=K.val();d&&(i(d.player1||{name:"",id:null}),w(d.player2||{name:"",id:null}),m(d.gameStarted||!1),k(d.currentGame||1),H(d.scores||{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}}),T(d.stakes||{perGame:5,totals:5}))});return()=>L()},[h]);const Q=()=>{if(b){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const v=$();g(v),M(!0),R(!0);const L=D(O,`matchplay/${v}`);ae(L,{player1:{name:"",id:null,uid:null},player2:{name:"",id:null,uid:null},gameStarted:!1,currentGame:1,scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},stakes:{perGame:5,totals:5},createdAt:Date.now()})},p=async()=>{if(!S.trim())return;if(b){alert("Please sign in to play Match Play. Guests can only play Makes or Misses.");return}const v=S.toUpperCase(),L=D(O,`matchplay/${v}`);(await V(L)).exists()?(g(v),M(!1),R(!0)):alert("Game not found! Check the code and try again.")},q=async v=>{if(h)try{const L=D(O,`matchplay/${h}`),d=(await V(L)).val()||{};await ae(L,{...d,...v})}catch(L){console.error("Error updating game:",L)}},Z=(v,L)=>{q(v===1?{player1:{name:L,id:Date.now(),uid:u?.uid}}:{player2:{name:L,id:Date.now(),uid:u?.uid}})},te=()=>{j.name&&f.name&&q({gameStarted:!0})},ie=async(v,L,K)=>{if(!h){console.log("No game code");return}if(!(G||(L===1?j:f).uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:v,playerNum:L,score:K});try{const s=D(O,`matchplay/${h}`),r=(await V(s)).val();if(console.log("Current data:",r),!r){console.error("No current data found");return}const o=JSON.parse(JSON.stringify(r.scores||{})),c=`game${v}`,A=`player${L}`;o[c]||(o[c]={player1:null,player2:null}),o[c][A]=K===""?null:parseInt(K),console.log("New scores:",o),await ae(s,{...r,scores:o}),console.log("Score updated successfully")}catch(s){console.error("Error updating score:",s),alert("Error updating score: "+s.message)}},ce=async(v,L)=>{if(h)try{const K=D(O,`matchplay/${h}`),a=(await V(K)).val();if(!a)return;const s={...a.stakes};s[v]=parseFloat(L)||0,await ae(K,{...a,stakes:s})}catch(K){console.error("Error updating stakes:",K)}},de=()=>{const v=(x?.game1?.player1||0)+(x?.game2?.player1||0)+(x?.game3?.player1||0),L=(x?.game1?.player2||0)+(x?.game2?.player2||0)+(x?.game3?.player2||0);return{player1:v,player2:L}},oe=()=>{let v=0,L=0;["game1","game2","game3"].forEach(s=>{const t=x?.[s]?.player1,r=x?.[s]?.player2;t!=null&&r!==null&&r!==void 0&&(t>r?v+=B.perGame:r>t&&(L+=B.perGame))});const K=de();K.player1>K.player2?v+=B.totals:K.player2>K.player1&&(L+=B.totals);const d=v-L,a=L-v;return{player1:d,player2:a}},me=()=>{q({scores:{game1:{player1:null,player2:null},game2:{player1:null,player2:null},game3:{player1:null,player2:null}},currentGame:1})},X=()=>{R(!1),g(""),y(""),M(!1)},le=de(),ne=oe(),xe=x?.game1?.player1!==null&&x?.game1?.player1!==void 0&&x?.game1?.player2!==null&&x?.game1?.player2!==void 0&&x?.game2?.player1!==null&&x?.game2?.player1!==void 0&&x?.game2?.player2!==null&&x?.game2?.player2!==void 0&&x?.game3?.player1!==null&&x?.game3?.player1!==void 0&&x?.game3?.player2!==null&&x?.game3?.player2!==void 0;return E?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(re,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>U(!z),className:"btn-primary-green p-2",title:"Show QR code to join",children:e.jsx(Te,{size:20})})]})]}),z&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Match"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:F(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>U(!1),className:"mt-3 text-green-400 hover:text-green-300 font-semibold text-sm",children:"Hide QR Code"})]})}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-700/50 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-4",children:"Best of 3 Games"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:j.name})}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:e.jsx("p",{className:"font-semibold text-lg text-green-400",children:f.name})})]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsxs("div",{className:"game-card",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 text-white",children:["Game ",v]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:j.name}),e.jsx("input",{type:"number",value:x[`game${v}`]?.player1??"",onChange:L=>ie(v,1,L.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:f.name}),e.jsx("input",{type:"number",value:x[`game${v}`]?.player2??"",onChange:L=>ie(v,2,L.target.value),placeholder:"Score",className:"w-full game-input text-center text-lg font-bold",min:"0",max:"300"})]})]}),x[`game${v}`]?.player1!==null&&x[`game${v}`]?.player1!==void 0&&x[`game${v}`]?.player2!==null&&x[`game${v}`]?.player2!==void 0&&e.jsx("div",{className:"mt-3 text-center",children:x[`game${v}`].player1>x[`game${v}`].player2?e.jsxs("p",{className:"text-green-400 font-semibold",children:["🏆 ",j.name," wins (+$",B.perGame,")"]}):x[`game${v}`].player2>x[`game${v}`].player1?e.jsxs("p",{className:"text-green-400 font-semibold",children:["🏆 ",f.name," wins (+$",B.perGame,")"]}):e.jsx("p",{className:"text-primary font-semibold",children:"Tie"})})]},v))}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-green-900/30 rounded-lg p-4 border-2 border-green-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(re,{className:"text-green-400",size:24}),"Totals"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:j.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:le.player1})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700",children:[e.jsx("p",{className:"text-sm text-primary mb-1",children:f.name}),e.jsx("p",{className:"text-3xl font-bold text-green-400",children:le.player2})]})]}),xe&&e.jsx("div",{className:"mt-3 text-center",children:le.player1>le.player2?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["🏆 ",j.name," wins totals (+$",B.totals,")"]}):le.player2>le.player1?e.jsxs("p",{className:"text-green-400 font-semibold text-lg",children:["🏆 ",f.name," wins totals (+$",B.totals,")"]}):e.jsx("p",{className:"text-primary font-semibold text-lg",children:"Totals tied"})})]}),xe&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"text-green-400",size:24}),"Final Payout"]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:ne.player1>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[j.name," wins $",Math.abs(ne.player1).toFixed(2)]}):ne.player2>0?e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:[f.name," wins $",Math.abs(ne.player2).toFixed(2)]}):e.jsx("p",{className:"text-center text-xl font-bold text-primary",children:"Match tied - No payout"})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:me,className:"flex-1 btn-primary-green",children:"Reset Scores"}),e.jsx("button",{onClick:X,className:"flex-1 btn-secondary",children:"Leave Match"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(134, 239, 172)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with your opponent!"]})}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"text-green-400",size:20}),"Stakes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Per Game"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:B.perGame,onChange:v=>ce("perGame",v.target.value),className:"game-input",min:"0",step:"0.5"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-1",children:"Totals"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-primary",children:"$"}),e.jsx("input",{type:"number",value:B.totals,onChange:v=>ce("totals",v.target.value),className:"game-input",min:"0",step:"0.5"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 1"}),e.jsx("input",{type:"text",value:j.name,onChange:v=>Z(1,v.target.value),placeholder:"Enter Player 1's Name",className:"w-full game-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary mb-2",children:"Player 2"}),e.jsx("input",{type:"text",value:f.name,onChange:v=>Z(2,v.target.value),placeholder:"Enter Player 2's Name",className:"w-full game-input"})]})]}),e.jsx("button",{onClick:te,disabled:!j.name||!f.name,className:"w-full btn-primary-green text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:!j.name||!f.name?"Enter both player names":"Start Match"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(34, 197, 94)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-600 flex items-center justify-center shadow-lg shadow-emerald-500/50",children:e.jsx(re,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-green",children:"Match Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Head-to-Head Bowling Match"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:Q,className:"w-full btn-primary-green flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(Je,{size:24}),"Create New Match"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:S,onChange:v=>y(v.target.value.toUpperCase()),onKeyDown:v=>v.key==="Enter"&&p(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:p,className:"w-full btn-primary-green text-lg sm:text-xl",children:"Join Match"})]})]})]})})]})}function Ds(){const{currentUser:u}=he(),G=u&&Le(u.email),b=u?.isAnonymous,[h,g]=n.useState(""),[S,y]=n.useState(""),[P,M]=n.useState(!1),[E,R]=n.useState(!1),[z,U]=n.useState(!1),[j,i]=n.useState([]),[f,w]=n.useState(""),[N,m]=n.useState(!1),[W,k]=n.useState(1),[x,H]=n.useState({game1:{},game2:{},game3:{}}),[B]=n.useState(5),[T]=n.useState(1),[F]=n.useState(2),$=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=king-of-the-hill`,Q=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("join");a&&y(a.toUpperCase())},[]),n.useEffect(()=>{if(!h)return;const d=D(O,`kingofthehill/${h}`),a=Ae(d,s=>{const t=s.val();t&&(i(t.players||[]),m(t.gameStarted||!1),k(t.currentGame||1),H(t.scores||{game1:{},game2:{},game3:{}}))});return()=>a()},[h]);const p=()=>{if(b){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const d=Q();g(d),M(!0),R(!0);const a=D(O,`kingofthehill/${d}`);ae(a,{players:[],gameStarted:!1,currentGame:1,scores:{game1:{},game2:{},game3:{}},createdAt:Date.now()})},q=async()=>{if(!S.trim())return;if(b){alert("Please sign in to play King of the Hill. Guests can only play Makes or Misses.");return}const d=S.toUpperCase(),a=D(O,`kingofthehill/${d}`);(await V(a)).exists()?(g(d),M(!1),R(!0)):alert("Game not found! Check the code and try again.")},Z=async d=>{if(h)try{const a=D(O,`kingofthehill/${h}`),t=(await V(a)).val()||{};await ae(a,{...t,...d})}catch(a){console.error("Error updating game:",a)}},te=()=>{if(f.trim()&&!N){const d=[...j,{id:Date.now(),name:f.trim(),uid:u?.uid}];Z({players:d}),w("")}},ie=()=>{j.length>=2&&Z({gameStarted:!0,currentGame:1})},ce=async(d,a,s)=>{if(!h){console.log("No game code");return}const t=j.find(o=>o.id===a);if(!(G||t?.uid===u?.uid)){alert("You can only enter your own scores. Admins can enter any score.");return}console.log("Updating score:",{gameNum:d,playerId:a,score:s});try{const o=D(O,`kingofthehill/${h}`),A=(await V(o)).val();if(console.log("Current data:",A),!A){console.error("No current data found");return}const I=JSON.parse(JSON.stringify(A.scores||{})),l=`game${d}`;I[l]||(I[l]={}),I[l][a]=s===""?null:parseInt(s),console.log("New scores:",I),await ae(o,{...A,scores:I}),console.log("Score updated successfully")}catch(o){console.error("Error updating score:",o),alert("Error updating score: "+o.message)}},de=(d,a)=>x?.[`game${d}`]?.[a]??"",oe=d=>{const a=x?.[`game${d}`]||{},s=Object.entries(a).filter(([o,c])=>c!=null).map(([o,c])=>({playerId:parseInt(o),score:c}));if(s.length===0)return null;const t=Math.max(...s.map(o=>o.score)),r=s.filter(o=>o.score===t);return{score:t,playerIds:r.map(o=>o.playerId)}},me=()=>{const d={};return j.forEach(a=>{const s=x?.game1?.[a.id]||0,t=x?.game2?.[a.id]||0,r=x?.game3?.[a.id]||0;d[a.id]=s+t+r}),d},X=()=>{const d=me(),a=Object.entries(d).filter(([r,o])=>o>0).map(([r,o])=>({playerId:parseInt(r),total:o}));if(a.length===0)return null;const s=Math.max(...a.map(r=>r.total)),t=a.filter(r=>r.total===s);return{total:s,playerIds:t.map(r=>r.playerId)}},le=()=>{const d={};j.forEach(o=>{d[o.id]=-B});const a=oe(1);if(a&&a.playerIds.length>0){const o=j.length*T/a.playerIds.length;a.playerIds.forEach(c=>{d[c]+=o})}const s=oe(2);if(s&&s.playerIds.length>0){const o=j.length*T/s.playerIds.length;s.playerIds.forEach(c=>{d[c]+=o})}const t=oe(3);if(t&&t.playerIds.length>0){const o=j.length*T/t.playerIds.length;t.playerIds.forEach(c=>{d[c]+=o})}const r=X();if(r&&r.playerIds.length>0){const o=j.length*F/r.playerIds.length;r.playerIds.forEach(c=>{d[c]+=o})}return d},ne=()=>{Z({scores:{game1:{},game2:{},game3:{}},currentGame:1})},xe=()=>{R(!1),g(""),y(""),M(!1)},v=me(),L=le(),K=j.length>0&&j.every(d=>x?.game1?.[d.id]!==null&&x?.game1?.[d.id]!==void 0&&x?.game2?.[d.id]!==null&&x?.game2?.[d.id]!==void 0&&x?.game3?.[d.id]!==null&&x?.game3?.[d.id]!==void 0);return E?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(pe,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:h})]}),e.jsx("button",{onClick:()=>U(!z),className:"btn-primary-purple p-2",title:"Show QR code to join",children:e.jsx(Te,{size:20})})]})]}),z&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Game"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:$(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:h})]}),e.jsx("button",{onClick:()=>U(!1),className:"mt-3 text-purple-400 hover:text-purple-300 font-semibold text-sm",children:"Hide QR Code"})]})}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white text-center mb-3",children:"3-Game Series"}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High score each game wins $",T," per player"]}),e.jsxs("p",{className:"text-center text-sm text-primary",children:["High total wins $",F," per player"]})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>{const a=oe(d);return e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-white",children:["Game ",d]}),a&&e.jsxs("span",{className:"text-sm text-purple-400 font-semibold flex items-center gap-1",children:[e.jsx(pe,{size:16}),"High: ",a.score]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.map(s=>{const t=a&&a.playerIds.includes(s.id);return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-primary mb-1",children:s.name}),e.jsx("input",{type:"number",value:de(d,s.id),onChange:r=>ce(d,s.id,r.target.value),placeholder:"Score",className:`w-full game-input text-center text-lg font-bold ${t?"border-purple-400 bg-purple-900/30 text-purple-300":""}`,min:"0",max:"300"}),t&&e.jsx("p",{className:"text-xs text-purple-400 font-semibold mt-1 text-center",children:"👑 Winner"})]},s.id)})})]},d)})}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-purple-900/30 rounded-lg p-4 border-2 border-purple-600",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(re,{className:"text-purple-400",size:24}),"Total Pins"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.map(d=>{const a=X(),s=a&&a.playerIds.includes(d.id);return e.jsxs("div",{className:`bg-slate-800/50 rounded-lg p-3 border ${s?"ring-2 ring-purple-400 border-purple-500":"border-slate-700"}`,children:[e.jsx("p",{className:"text-xs text-primary mb-1",children:d.name}),e.jsxs("p",{className:`text-2xl font-bold ${s?"text-purple-400":"text-white"}`,children:[v[d.id]||0,s&&" 👑"]})]},d.id)})})]}),K&&e.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded-lg p-4 border-2 border-green-500",children:[e.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"text-green-400",size:24}),"Final Payouts"]}),e.jsx("div",{className:"space-y-2",children:j.sort((d,a)=>L[a.id]-L[d.id]).map((d,a)=>{const s=L[d.id],t=s>0,r=s<0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 flex justify-between items-center border border-slate-700",children:[e.jsxs("span",{className:"font-semibold text-white",children:[a===0&&s>0&&"👑 ",d.name]}),e.jsxs("span",{className:`font-bold text-lg ${t?"text-green-400":r?"text-red-400":"text-primary"}`,children:[t?"+":"",s>=0?"$"+s.toFixed(2):"-$"+Math.abs(s).toFixed(2)]})]},d.id)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ne,className:"flex-1 btn-primary-purple",children:"Reset Scores"}),e.jsx("button",{onClick:xe,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"text-green-400",size:20}),"Prize Structure"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",B]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 1:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",T," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 2:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",T," per player"]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"High Game 3:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",T," per player"]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"High Totals:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(192, 132, 252)"},children:["$",F," per player"]})]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(216, 180, 254)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with friends or show them the QR code!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:d=>w(d.target.value),onKeyDown:d=>d.key==="Enter"&&te(),placeholder:"Enter Player's Name",className:"game-input"}),e.jsxs("button",{onClick:te,className:"btn-primary-purple flex items-center justify-center gap-2",children:[e.jsx(Qe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),j.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",j.length,")"]}),e.jsx("div",{className:"space-y-2",children:j.map(d=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow flex justify-between items-center border border-slate-700",children:[e.jsx("span",{className:"text-white",children:d.name}),e.jsxs("span",{className:"text-sm text-red-400 font-semibold",children:["$",B," in"]})]},d.id))}),e.jsx("div",{className:"mt-3 bg-purple-900/30 border border-purple-700 rounded p-2 text-center",children:e.jsxs("p",{className:"text-sm text-primary",children:["Prize Pool: ",e.jsxs("span",{className:"font-bold text-green-400",children:["$",j.length*B]})]})})]}),e.jsx("button",{onClick:ie,disabled:j.length<2,className:"w-full btn-primary-purple text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:j.length<2?"Need at least 2 players":"Start Game"})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(168, 85, 247)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(pe,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-purple",children:"King of the Hill"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"Battle for the highest scores!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:p,className:"w-full btn-primary-purple flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(pe,{size:20,className:"sm:w-6 sm:h-6"}),"Create New Game"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:S,onChange:d=>y(d.target.value.toUpperCase()),onKeyDown:d=>d.key==="Enter"&&q(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:q,className:"w-full btn-primary-purple text-lg sm:text-xl",children:"Join Game"})]})]})]})})]})}function Os(){const{currentUser:u}=he();u&&Le(u.email);const G=u?.isAnonymous,[b,h]=n.useState(""),[g,S]=n.useState(""),[y,P]=n.useState(!1),[M,E]=n.useState(!1),[R,z]=n.useState(!1),[U,j]=n.useState([]),[i,f]=n.useState(""),[w,N]=n.useState(!1),[m,W]=n.useState({quarterfinals:[],semifinals:[],finals:null,champion:null}),[k,x]=n.useState({}),[H,B]=n.useState(5),[T,F]=n.useState(0),[$,Q]=n.useState(0),p=()=>`${window.location.origin+window.location.pathname}?join=${b}&game=bracket-play`,q=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("join");s&&S(s.toUpperCase())},[]),n.useEffect(()=>{const a=U.length*H;F(Math.floor(a*.6)),Q(Math.floor(a*.4))},[U.length,H]),n.useEffect(()=>{if(!b)return;const a=D(O,`bracketplay/${b}`),s=Ae(a,t=>{const r=t.val();r&&(j(r.players||[]),N(r.gameStarted||!1),W(r.matches||{quarterfinals:[],semifinals:[],finals:null,champion:null}),x(r.scores||{}))});return()=>s()},[b]);const Z=()=>{if(G){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const a=q();h(a),P(!0),E(!0);const s=D(O,`bracketplay/${a}`);ae(s,{players:[],gameStarted:!1,matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},createdAt:Date.now()})},te=async()=>{if(!g.trim())return;if(G){alert("Please sign in to play Bracket Play. Guests can only play Makes or Misses.");return}const a=g.toUpperCase(),s=D(O,`bracketplay/${a}`);(await V(s)).exists()?(h(a),P(!1),E(!0)):alert("Game not found! Check the code and try again.")},ie=async a=>{if(b)try{const s=D(O,`bracketplay/${b}`),r=(await V(s)).val()||{};await ae(s,{...r,...a})}catch(s){console.error("Error updating game:",s)}},ce=async()=>{if(i.trim()&&!w&&U.length<8){const a=[...U,{id:Date.now(),name:i.trim(),uid:u?.uid}];await ie({players:a}),f("")}},de=a=>{const s=[...a];for(let t=s.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[s[t],s[r]]=[s[r],s[t]]}return s},oe=async()=>{if(U.length!==8){console.error("Need exactly 8 players to start tournament");return}try{const a=de(U);if(console.log("Shuffled players:",a),!a.every(t=>t&&t.id&&t.name)){console.error("Invalid player data:",a),alert("Error: Invalid player data. Please refresh and try again.");return}const s=[{id:"qf1",player1:a[0],player2:a[1],winner:null},{id:"qf2",player1:a[2],player2:a[3],winner:null},{id:"qf3",player1:a[4],player2:a[5],winner:null},{id:"qf4",player1:a[6],player2:a[7],winner:null}];console.log("Created quarterfinals:",s),await ie({gameStarted:!0,matches:{quarterfinals:s,semifinals:[],finals:null,champion:null},scores:{}}),console.log("Tournament started successfully")}catch(a){console.error("Error starting tournament:",a),alert("Failed to start tournament. Check console for details.")}},me=async(a,s,t)=>{const r={...k},o=`${a}_${s}`;if(t==="")r[o]="";else{const c=parseInt(t,10);if(!isNaN(c)&&c>=0&&c<=300)r[o]=c;else return}x(r);try{await ie({scores:r})}catch(c){console.error("Failed to save score:",c)}},X=(a,s)=>{const t=`${a}_${s}`;return k[t]??""},le=(a,s,t)=>{const r=X(a,s),o=X(a,t),c=typeof r=="number"?r:parseInt(r,10),A=typeof o=="number"?o:parseInt(o,10),I=!isNaN(c)&&c>=0,l=!isNaN(A)&&A>=0;return console.log(`isMatchComplete(${a}): p1Score=${r}, p2Score=${o}, p1Valid=${I}, p2Valid=${l}, result=${I&&l}`),I&&l},ne=async a=>{const s={...m};if(a==="quarterfinals")s.quarterfinals=s.quarterfinals.map(t=>{const r=X(t.id,t.player1.id),o=X(t.id,t.player2.id),c=r>o?t.player1:t.player2;return{...t,winner:c}}),s.semifinals=[{id:"sf1",player1:s.quarterfinals[0].winner,player2:s.quarterfinals[1].winner,winner:null},{id:"sf2",player1:s.quarterfinals[2].winner,player2:s.quarterfinals[3].winner,winner:null}];else if(a==="semifinals")s.semifinals=s.semifinals.map(t=>{const r=X(t.id,t.player1.id),o=X(t.id,t.player2.id),c=r>o?t.player1:t.player2;return{...t,winner:c}}),s.finals={id:"final",player1:s.semifinals[0].winner,player2:s.semifinals[1].winner,winner:null};else if(a==="finals"){const t=s.finals,r=X(t.id,t.player1.id),o=X(t.id,t.player2.id),c=r>o?t.player1:t.player2;s.finals.winner=c,s.champion=c}await ie({matches:s})},xe=a=>!a||a.length===0?!1:a.every(s=>s&&s.player1&&s.player2&&le(s.id,s.player1.id,s.player2.id)),v=async()=>{await ie({matches:{quarterfinals:[],semifinals:[],finals:null,champion:null},scores:{},gameStarted:!1})},L=()=>{E(!1),h(""),S(""),P(!1)},K=(a,s)=>{if(!a||!a.player1||!a.player2)return null;const t=X(a.id,a.player1.id),r=X(a.id,a.player2.id),o=le(a.id,a.player1.id,a.player2.id),c=a.winner!==null;console.log(`${a.id}: p1Score=${t} (${typeof t}), p2Score=${r} (${typeof r}), isComplete=${o}, hasWinner=${c}`);const A=o&&t>r,I=o&&r>t;return e.jsxs("div",{className:"game-card",children:[e.jsx("h4",{className:"font-bold text-sm text-center mb-3 text-orange-400",children:a.id.toUpperCase()}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${c&&a.winner?.id===a.player1.id?"bg-green-900/30 border-2 border-green-500":A&&!c?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:a.player1.name||"Player 1"}),c&&a.winner?.id===a.player1.id&&e.jsx(re,{className:"text-orange-400",size:16}),!c&&A&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${a.id}_player1_score`,inputMode:"numeric",pattern:"[0-9]*",value:t===""?"":t,onChange:l=>{const C=l.target.value;(C===""||/^\d+$/.test(C))&&me(a.id,a.player1.id,C)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),e.jsx("div",{className:"text-center text-xs font-bold text-secondary mb-3",children:"VS"}),e.jsxs("div",{className:`mb-3 p-3 rounded-lg ${c&&a.winner?.id===a.player2.id?"bg-green-900/30 border-2 border-green-500":I&&!c?"bg-orange-900/30 border-2 border-orange-400":"bg-slate-800/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-bold text-sm text-white",children:a.player2.name||"Player 2"}),c&&a.winner?.id===a.player2.id&&e.jsx(re,{className:"text-orange-400",size:16}),!c&&I&&e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"LEADING"})]}),e.jsx("input",{type:"text",name:`${a.id}_player2_score`,inputMode:"numeric",pattern:"[0-9]*",value:r===""?"":r,onChange:l=>{const C=l.target.value;(C===""||/^\d+$/.test(C))&&me(a.id,a.player2.id,C)},placeholder:"Score",className:"w-full game-input text-center text-xl font-bold"})]}),!c&&!o&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Enter both scores"})}),!c&&o&&e.jsx("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["✓ Winner: ",t>r?a.player1.name:a.player2.name]})}),c&&a.winner&&e.jsx("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-2 text-center",children:e.jsxs("p",{className:"text-xs font-bold text-green-400",children:["🏆 ",a.winner.name," advances to next round!"]})})]})},d=m.finals&&m.finals.winner?m.finals.winner.id===m.finals.player1.id?m.finals.player2:m.finals.player1:null;return M?e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"game-card",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Me,{size:20,className:"text-white sm:w-6 sm:h-6"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"info-box",children:[e.jsx("span",{className:"text-xs sm:text-sm text-primary",children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2 text-white",children:b})]}),e.jsx("button",{onClick:()=>z(!R),className:"btn-primary-orange p-2",title:"Show QR code to join",children:e.jsx(Te,{size:20})})]})]}),R&&e.jsx("div",{className:"mb-6 bg-slate-800/50 border-2 border-slate-700 rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Scan to Join Tournament"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg shadow-lg",children:e.jsx($e,{value:p(),size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-primary mt-3 text-center max-w-sm",children:"Scan this QR code with your phone camera to join instantly"}),e.jsxs("p",{className:"text-xs text-secondary mt-2",children:["Or manually enter code: ",e.jsx("span",{className:"font-mono font-bold",children:b})]}),e.jsx("button",{onClick:()=>z(!1),className:"mt-3 text-orange-400 hover:text-orange-300 font-semibold text-sm",children:"Hide QR Code"})]})}),w?e.jsxs("div",{className:"space-y-6",children:[m.champion&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 rounded-lg p-6 border-2 border-orange-500",children:[e.jsxs("h2",{className:"text-3xl font-bold text-center mb-4 flex items-center justify-center gap-2 text-white",children:[e.jsx(re,{className:"text-orange-400",size:40}),"Tournament Champion!"]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 mb-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-2xl font-bold text-green-400 mb-2",children:["🥇 ",m.champion.name]}),e.jsxs("p",{className:"text-center text-xl font-bold text-green-400",children:["Prize: $",T]})]}),d&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsxs("p",{className:"text-center text-lg font-bold text-primary",children:["🥈 Runner-up: ",d.name]}),e.jsxs("p",{className:"text-center text-md font-bold text-primary",children:["Prize: $",$]})]})]}),m?.quarterfinals&&m.quarterfinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Quarterfinals"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.quarterfinals.filter(a=>a&&a.id&&a.player1&&a.player2).map(a=>e.jsx("div",{children:K(a)},a.id))}),(!m.semifinals||m.semifinals.length===0)&&xe(m.quarterfinals)&&e.jsx("button",{onClick:()=>ne("quarterfinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"✓ Advance 4 Winners to Semifinals"})]}),m?.semifinals&&m.semifinals.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Semifinals"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:m.semifinals.filter(a=>a&&a.id&&a.player1&&a.player2).map(a=>e.jsx("div",{children:K(a)},a.id))}),!m.finals&&xe(m.semifinals)&&e.jsx("button",{onClick:()=>ne("semifinals"),className:"w-full mt-6 bg-green-500 text-white py-4 rounded-lg hover:bg-green-600 transition font-bold text-xl shadow-lg",children:"✓ Advance 2 Winners to Finals"})]}),m.finals&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white text-center",children:"🏆 Championship Finals 🏆"}),e.jsx("div",{className:"max-w-md mx-auto",children:K(m.finals)}),!m.finals.winner&&le(m.finals.id,m.finals.player1.id,m.finals.player2.id)&&e.jsx("button",{onClick:()=>ne("finals"),className:"w-full mt-6 bg-orange-500 text-white py-4 rounded-lg hover:bg-orange-600 transition font-bold text-xl shadow-lg",children:"👑 Crown the Champion!"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:v,className:"flex-1 btn-primary-orange",children:"Reset Tournament"}),e.jsx("button",{onClick:L,className:"flex-1 btn-secondary",children:"Leave Game"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-white",children:[e.jsx(Pe,{className:"text-green-400",size:20}),"Prize Structure"]}),U.length===0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Entry Fee:"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,5,10].map(a=>e.jsxs("button",{onClick:()=>B(a),className:"px-4 py-2 rounded-lg transition",style:{backgroundColor:H===a?"rgb(139, 92, 246)":"rgb(30, 41, 59)",color:"rgb(255, 255, 255)",border:H===a?"2px solid rgb(167, 139, 250)":"2px solid transparent"},children:["$",a]},a))})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"Entry Fee:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(248, 113, 113)"},children:["$",H]})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"2nd Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(203, 213, 225)"},children:["$",$]})]}),e.jsxs("p",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{style:{color:"rgb(148, 163, 184)",fontWeight:600},children:"1st Place:"}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(74, 222, 128)"},children:["$",T]})]}),e.jsxs("p",{className:"text-xs mt-2",style:{color:"rgb(100, 116, 139)"},children:["Total Prize Pool: $",U.length*H]})]})]}),e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-white",children:"Tournament Format"}),e.jsxs("ul",{className:"text-sm space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsxs("li",{children:["• ",e.jsx("strong",{className:"text-white",children:"Quarterfinals (Game 1):"})," 8 players compete → 4 winners advance"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{className:"text-white",children:"Semifinals (Game 2):"})," 4 players compete → 2 winners advance"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{className:"text-white",children:"Finals (Game 3):"})," 2 players compete → Champion crowned"]})]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 text-center",children:e.jsxs("p",{style:{color:"rgb(253, 186, 116)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:b})," with 7 friends!"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:a=>f(a.target.value),onKeyDown:a=>a.key==="Enter"&&ce(),placeholder:"Enter Player's Name",className:"game-input",disabled:U.length>=8}),e.jsxs("button",{onClick:ce,disabled:U.length>=8,className:"btn-primary-orange flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx(Qe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Player"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),U.length>0&&e.jsxs("div",{className:"bg-slate-800/30 border border-slate-700 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 text-white",children:["Players (",U.length,"/8)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map((a,s)=>e.jsxs("div",{className:"bg-slate-800/50 px-4 py-2 rounded-lg shadow border border-slate-700 text-white",children:[s+1,". ",a.name]},a.id))})]}),e.jsxs("button",{onClick:oe,disabled:U.length!==8,className:"w-full btn-primary-orange text-xl disabled:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(gs,{size:20,className:"sm:w-6 sm:h-6"}),U.length!==8?`Need ${8-U.length} more player${8-U.length!==1?"s":""}`:"Start Tournament (Randomize Bracket)"]})]})]})})})]}):e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",left:"30%",backgroundColor:"rgb(249, 115, 22)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-600 flex items-center justify-center shadow-lg shadow-violet-500/50",children:e.jsx(Me,{size:24,className:"text-white sm:w-7 sm:h-7"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold gradient-text-orange",children:"Bracket Play"})]}),e.jsx("p",{className:"text-center text-primary mb-8 text-sm sm:text-base",children:"8-Player Single Elimination Tournament"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:Z,className:"w-full btn-primary-orange flex items-center justify-center gap-2 text-lg sm:text-xl",children:[e.jsx(re,{size:20,className:"sm:w-6 sm:h-6"}),"Create Tournament"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-900/50 text-secondary",children:"OR"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:g,onChange:a=>S(a.target.value.toUpperCase()),onKeyDown:a=>a.key==="Enter"&&te(),placeholder:"Enter Game Code",className:"w-full game-input text-center text-lg font-mono",maxLength:6}),e.jsx("button",{onClick:te,className:"w-full btn-primary-orange text-lg sm:text-xl",children:"Join Tournament"})]})]})]})})]})}function Ws(){const{currentUser:u}=he(),G=u&&Le(u.email),b=u?.isAnonymous,[h,g]=n.useState(""),[S,y]=n.useState(""),[P,M]=n.useState(!1),[E,R]=n.useState(!1),[z,U]=n.useState(!1),[j,i]=n.useState(!1),[f,w]=n.useState([]),[N,m]=n.useState(""),[W,k]=n.useState(!1),[x,H]=n.useState(1),[B,T]=n.useState({}),[F,$]=n.useState({}),[Q,p]=n.useState({}),[q,Z]=n.useState([]),[te,ie]=n.useState(!1),[ce,de]=n.useState(1),oe=.25,me=l=>l.toFixed(2),X=()=>`${window.location.origin+window.location.pathname}?join=${h}&game=mystery-frames`,le=()=>Math.random().toString(36).substring(2,8).toUpperCase();n.useEffect(()=>{const C=new URLSearchParams(window.location.search).get("join");C&&y(C.toUpperCase())},[]),n.useEffect(()=>{if(!h)return;const l=D(O,`mysteryframes/${h}`),C=Ae(l,Y=>{const _=Y.val();_&&(w(_.players||[]),k(_.gameStarted||!1),H(_.currentFrame||1),T(_.framePots||{}),$(_.frameWinners||{}),p(_.frameScores||{}),Z(_.mysteryPots||[]))});return()=>C()},[h]);const ne=l=>l.split(" ").map(C=>C.charAt(0).toUpperCase()+C.slice(1).toLowerCase()).join(" "),xe=()=>{if(b){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const l=le();g(l),M(!0),R(!0);const C=u?.displayName||"Player",Y=[{id:Date.now(),name:ne(C),uid:u?.uid,totalWinnings:0}],_=D(O,`mysteryframes/${l}`);ae(_,{players:Y,gameStarted:!1,currentFrame:1,framePots:{},frameWinners:{},frameScores:{},mysteryPots:[],createdAt:Date.now()})},v=async()=>{if(!S.trim())return;if(b){alert("Please sign in to play Mystery Frames. This game requires authentication.");return}const l=S.toUpperCase(),C=D(O,`mysteryframes/${l}`),Y=await V(C);if(Y.exists()){g(l),M(!1),R(!0);const _=Y.val();if(!_.players?.find(ge=>ge.uid===u?.uid)&&!_.gameStarted){const ge=u?.displayName||"Player",ye=[..._.players||[],{id:Date.now(),name:ne(ge),uid:u?.uid,totalWinnings:0}];await ae(C,{..._,players:ye})}}else alert("Game not found! Check the code and try again.")},L=async l=>{if(h)try{const C=D(O,`mysteryframes/${h}`),_=(await V(C)).val();await ae(C,{..._,...l})}catch(C){console.error("Error updating game:",C)}},K=()=>{if(N.trim()&&!W){const l=[...f,{id:Date.now(),name:ne(N.trim()),uid:null,totalWinnings:0}];L({players:l}),m("")}},d=()=>{if(f.length<2)return;const l=f.length*oe;L({gameStarted:!0,currentFrame:1,framePots:{1:l},frameScores:{1:{}},frameWinners:{1:[]}})},a=(l,C)=>{const Y=f.find(ge=>ge.id===l);if(!(G||Y?.uid===u?.uid)){alert("You can only enter your own scores.");return}const ue={...Q,[x]:{...Q[x],[l]:parseInt(C)||0}};L({frameScores:ue})},s=()=>{const l=Q[x]||{},C=Object.entries(l);if(C.length!==f.length){alert("Please enter scores for all players first!");return}const Y=Math.max(...Object.values(l));return C.filter(([ue,ge])=>ge===Y).map(([ue])=>parseInt(ue))},t=()=>{const l=s();if(!l)return;const C=B[x]||0,Y=l.length>1;let _=[...f],ue={...F,[x]:l},ge={...B};if(!Y&&l.length===1){const se=l[0];_=f.map(be=>be.id===se?{...be,totalWinnings:(be.totalWinnings||0)+C}:be)}const ye=q.map(se=>{if(se.winner)return se;const be=Q[x]||{},Ge=se.activePlayers.filter(Ue=>{const ve=be[Ue];return ve===10||parseInt(ve)===10});if(Ge.length===1){const Ue=Ge[0];return _=_.map(ve=>ve.id===Ue?{...ve,totalWinnings:(ve.totalWinnings||0)+se.amount}:ve),{...se,activePlayers:Ge,winner:Ue}}return Ge.length===0?se:{...se,activePlayers:Ge}}),J=x+1,ee=Y?C+f.length*oe:f.length*oe;ge[J]=ee,L({players:_,currentFrame:J,frameWinners:ue,framePots:ge,frameScores:{...Q,[J]:{}},mysteryPots:ye})},r=l=>{const C={id:Date.now(),startFrame:x,amount:l,activePlayers:f.map(Y=>Y.id),winner:null};L({mysteryPots:[...q,C]})},o=()=>{R(!1),g(""),y(""),M(!1)};if(!E)return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"25%",left:"25%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full game-card",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(je,{size:28,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsx("p",{className:"text-center mb-8 text-sm sm:text-base",style:{color:"rgb(148, 163, 184)"},children:"Quarters Game with Mystery Frame Bonuses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:xe,className:"w-full flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:[e.jsx(je,{size:20}),"Create New Game"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}}),e.jsx("span",{className:"text-sm",style:{color:"rgb(148, 163, 184)"},children:"or"}),e.jsx("div",{className:"h-px flex-1",style:{backgroundColor:"rgb(71, 85, 105)"}})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:S,onChange:l=>y(l.target.value.toUpperCase()),placeholder:"Enter Game Code",className:"w-full text-center text-lg font-mono py-3 px-4 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},maxLength:6}),e.jsx("button",{onClick:v,className:"w-full py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Join Game"})]})]})]})})]});const c=B[x]||0,A=Q[x]||{},I=f.every(l=>A[l.id]!==void 0);return e.jsxs("div",{className:"game-container",children:[e.jsx("div",{className:"game-background"}),e.jsx("div",{className:"game-grid-overlay"}),e.jsx("div",{className:"game-orb",style:{top:"20%",right:"20%",backgroundColor:"rgb(217, 119, 6)"}}),e.jsx("div",{className:"game-content",children:e.jsx("div",{className:"game-max-width",children:e.jsxs("div",{className:"game-card relative",children:[e.jsx("button",{onClick:()=>i(!0),className:"absolute top-4 right-4 p-2 rounded-lg transition z-10",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(251, 191, 36)"},title:"How to play",children:e.jsx(ls,{size:20})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(je,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Mystery Frames"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"px-4 py-2 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("span",{className:"text-xs sm:text-sm",style:{color:"rgb(148, 163, 184)"},children:"Code:"}),e.jsx("span",{className:"font-mono font-bold text-sm sm:text-lg ml-2",style:{color:"rgb(255, 255, 255)"},children:h})]}),e.jsx("button",{onClick:()=>U(!z),className:"p-2 rounded-lg transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},title:"Show QR code",children:e.jsx(Te,{size:20})})]})]}),j&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>i(!1),children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}}),e.jsxs("div",{className:"relative rounded-xl max-w-md w-full p-6",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)"},onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 p-1 rounded-lg transition",style:{backgroundColor:"rgba(71, 85, 105, 0.5)",color:"rgb(148, 163, 184)"},children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(to bottom right, rgb(251, 191, 36), rgb(217, 119, 6))"},children:e.jsx(je,{size:24,style:{color:"rgb(255, 255, 255)"}})}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:"How to Play"})]}),e.jsxs("div",{className:"space-y-4",style:{color:"rgb(203, 213, 225)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"🎯 Quarters Game"}),e.jsx("p",{className:"text-sm",children:"Everyone puts in $0.25 per frame. Highest score wins the pot! Ties roll over to next frame."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"⚡ Mystery Frames"}),e.jsx("p",{className:"text-sm",children:"Start bonus pots ($1-$5 or custom). Strike (X) to stay in! Last striker standing wins the mystery pot."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-1",style:{color:"rgb(251, 191, 36)"},children:"📱 Quick Tips"}),e.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Tap 7, 8, 9, or X to enter scores"}),e.jsx("li",{children:"Mystery pots carry over until won"}),e.jsx("li",{children:"Multiple mystery frames can run simultaneously"})]})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"w-full mt-6 py-3 rounded-lg font-bold transition",style:{background:"linear-gradient(to right, rgb(251, 191, 36), rgb(217, 119, 6))",color:"rgb(255, 255, 255)"},children:"Got it!"})]})]}),z&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("div",{className:"inline-block p-4 rounded-lg",style:{backgroundColor:"rgb(255, 255, 255)"},children:e.jsx($e,{value:X(),size:200})}),e.jsxs("p",{className:"mt-3 text-sm",style:{color:"rgb(148, 163, 184)"},children:["Scan to join game ",e.jsx("span",{className:"font-mono font-bold",style:{color:"rgb(255, 255, 255)"},children:h})]})]}),W?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg p-6 text-center",style:{background:"linear-gradient(to right, rgba(217, 119, 6, 0.2), rgba(180, 83, 9, 0.2))",border:"2px solid rgb(251, 191, 36)"},children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Frame ",x]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-2xl",children:[e.jsx(Pe,{size:32,style:{color:"rgb(34, 197, 94)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(34, 197, 94)"},children:["$",me(c)]})]}),e.jsxs("p",{className:"text-sm mt-2",style:{color:"rgb(148, 163, 184)"},children:["Current Pot (.25 per player",c>f.length*oe?" + rollover":"",")"]})]}),e.jsxs("div",{className:"rounded-lg p-4 sm:p-6",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("h3",{className:"font-bold text-lg mb-4",style:{color:"rgb(255, 255, 255)"},children:"Enter Scores (0-10)"}),e.jsx("div",{className:"space-y-4",children:f.map(l=>e.jsxs("div",{className:"rounded-lg p-3 sm:p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgb(71, 85, 105)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-3",style:{color:"rgb(148, 163, 184)"},children:l.name}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>a(l.id,7),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:A[l.id]===7?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(A[l.id]===7?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"7"}),e.jsx("button",{onClick:()=>a(l.id,8),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:A[l.id]===8?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(A[l.id]===8?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"8"}),e.jsx("button",{onClick:()=>a(l.id,9),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:A[l.id]===9?"rgb(217, 119, 6)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(A[l.id]===9?"rgb(251, 191, 36)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"9"}),e.jsx("button",{onClick:()=>a(l.id,10),className:"py-3 rounded-lg font-bold text-xl transition",style:{backgroundColor:A[l.id]===10?"rgb(34, 197, 94)":"rgba(30, 41, 59, 0.5)",border:"2px solid "+(A[l.id]===10?"rgb(34, 197, 94)":"rgb(71, 85, 105)"),color:"rgb(255, 255, 255)"},children:"X"})]}),A[l.id]===10&&e.jsx("p",{className:"text-xs mt-2 text-center font-bold",style:{color:"rgb(34, 197, 94)"},children:"⚡ STRIKE!"})]},l.id))}),e.jsx("button",{onClick:t,disabled:!I,className:"w-full mt-6 py-3 rounded-lg font-bold text-lg transition",style:{backgroundColor:I?"rgb(34, 197, 94)":"rgb(71, 85, 105)",color:"rgb(255, 255, 255)",opacity:I?1:.5,cursor:I?"pointer":"not-allowed"},children:I?"Next Frame":"Enter All Scores First"})]}),e.jsxs("div",{className:"rounded-lg border-2 p-4",style:{borderColor:"rgb(251, 191, 36)",background:"linear-gradient(to bottom right, rgba(217, 119, 6, 0.1), rgba(180, 83, 9, 0.1))"},children:[e.jsxs("button",{onClick:()=>ie(!te),className:"w-full flex items-center justify-between p-3 rounded-lg transition",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",color:"rgb(255, 255, 255)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{size:24,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold text-lg",children:["Mystery Frame Bonuses (",q.filter(l=>!l.winner&&l.activePlayers.length>0).length," active)"]})]}),e.jsx("span",{children:te?"▼":"▶"})]}),te&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsx("h4",{className:"font-bold mb-3",style:{color:"rgb(255, 255, 255)"},children:"Start New Mystery Frame"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[1,2,3,4,5].map(l=>e.jsxs("button",{onClick:()=>r(l),className:"py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:C=>C.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:C=>C.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:["$",l]},l))}),e.jsxs("div",{className:"pt-3",style:{borderTop:"1px solid rgb(71, 85, 105)"},children:[e.jsx("p",{className:"text-xs mb-2",style:{color:"rgb(148, 163, 184)"},children:"Custom Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>de(Math.max(.5,ce-.5)),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"−"}),e.jsxs("div",{className:"flex-1 text-center py-2 rounded-lg font-bold text-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:["$",ce.toFixed(2)]}),e.jsx("button",{onClick:()=>de(ce+.5),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"+"}),e.jsx("button",{onClick:()=>r(ce),className:"px-4 py-2 rounded-lg font-bold transition",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(180, 83, 9)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(217, 119, 6)",children:"Start"})]})]})]}),e.jsx("div",{className:"space-y-3",children:q.length===0?e.jsx("p",{className:"text-center py-4",style:{color:"rgb(148, 163, 184)"},children:"No mystery frames started yet"}):q.map(l=>{const C=l.activePlayers.length>0&&!l.winner,Y=l.winner?f.find(_=>_.id===l.winner):null;return e.jsx("div",{className:"rounded-lg p-4 border-2",style:{backgroundColor:"rgba(30, 41, 59, 0.3)",borderColor:l.winner?"rgb(34, 197, 94)":C?"rgb(251, 191, 36)":"rgb(100, 116, 139)"},children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:18,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("span",{className:"font-bold",style:{color:"rgb(255, 255, 255)"},children:["Started Frame ",l.startFrame," · $",l.amount]})]}),l.winner?e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(34, 197, 94)"},children:["🏆 Winner: ",Y?.name]}):l.activePlayers.length===0?e.jsx("p",{className:"text-sm mt-1",style:{color:"rgb(148, 163, 184)"},children:"No winner - all missed"}):e.jsxs("p",{className:"text-sm mt-1",style:{color:"rgb(251, 191, 36)"},children:[l.activePlayers.length," player(s) still in (must strike to continue)"]})]})})},l.id)})})]})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{background:"linear-gradient(to right, rgba(30, 41, 59, 0.5), rgba(217, 119, 6, 0.2))",border:"1px solid rgb(71, 85, 105)"},children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",style:{color:"rgb(255, 255, 255)"},children:[e.jsx(re,{style:{color:"rgb(251, 191, 36)"},size:24}),"Total Winnings"]}),e.jsx("div",{className:"space-y-2",children:[...f].sort((l,C)=>(C.totalWinnings||0)-(l.totalWinnings||0)).map((l,C)=>e.jsxs("div",{className:"flex justify-between items-center px-4 py-3 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("span",{className:"font-semibold",style:{color:"rgb(255, 255, 255)"},children:[C===0&&"🥇"," ",C===1&&"🥈"," ",C===2&&"🥉"," ",l.name]}),e.jsxs("span",{className:"font-bold text-lg",style:{color:"rgb(34, 197, 94)"},children:["$",me(l.totalWinnings||0)]})]},l.id))})]}),e.jsxs("div",{className:"rounded-lg p-6",style:{background:"linear-gradient(to right, rgba(30, 41, 59, 0.5), rgba(217, 119, 6, 0.2))",border:"1px solid rgb(71, 85, 105)"},children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",style:{color:"rgb(255, 255, 255)"},children:[e.jsx(Pe,{style:{color:"rgb(251, 191, 36)"},size:24}),"Who Owes Whom"]}),e.jsx("div",{className:"space-y-2",children:(()=>{const C=f.reduce((J,ee)=>J+(ee.totalWinnings||0),0)/f.length,Y=f.filter(J=>(J.totalWinnings||0)>C).map(J=>({...J,amount:(J.totalWinnings||0)-C})).sort((J,ee)=>ee.amount-J.amount),_=f.filter(J=>(J.totalWinnings||0)<C).map(J=>({...J,amount:C-(J.totalWinnings||0)})).sort((J,ee)=>ee.amount-J.amount);if(Y.length===0&&_.length===0)return e.jsx("p",{className:"text-center py-4",style:{color:"rgb(148, 163, 184)"},children:"Everyone's even! No debts to settle."});const ue=[],ge=Y.map(J=>({...J})),ye=_.map(J=>({...J}));for(let J of ye){let ee=J.amount;for(let se of ge){if(ee<=0)break;if(se.amount<=0)continue;const be=Math.min(ee,se.amount);ue.push({from:J.name,to:se.name,amount:be}),ee-=be,se.amount-=be}}return ue.length===0?e.jsx("p",{className:"text-center py-4",style:{color:"rgb(148, 163, 184)"},children:"Everyone's even! No debts to settle."}):ue.map((J,ee)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-lg",style:{backgroundColor:"rgba(30, 41, 59, 0.5)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",style:{color:"rgb(239, 68, 68)"},children:J.from}),e.jsx("span",{style:{color:"rgb(148, 163, 184)"},children:"owes"}),e.jsx("span",{className:"font-semibold",style:{color:"rgb(34, 197, 94)"},children:J.to})]}),e.jsxs("span",{className:"font-bold text-lg",style:{color:"rgb(251, 191, 36)"},children:["$",J.amount.toFixed(2)]})]},ee))})()})]}),e.jsx("button",{onClick:o,className:"w-full py-3 rounded-lg font-semibold transition",style:{backgroundColor:"rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},onMouseEnter:l=>l.currentTarget.style.backgroundColor="rgb(100, 116, 139)",onMouseLeave:l=>l.currentTarget.style.backgroundColor="rgb(71, 85, 105)",children:"Leave Game"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-center text-lg",style:{color:"rgb(251, 191, 36)"},children:["Share code ",e.jsx("span",{className:"font-mono font-bold text-xl",style:{color:"rgb(255, 255, 255)"},children:h})," with friends or show them the QR code!"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg",style:{color:"rgb(255, 255, 255)"},children:["Players (",f.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:l=>m(l.target.value),onKeyPress:l=>l.key==="Enter"&&K(),placeholder:"Enter Player's Name",className:"flex-1 px-4 py-2 rounded-lg",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"}}),e.jsxs("button",{onClick:K,className:"px-4 py-2 rounded-lg font-semibold transition flex items-center gap-2",style:{backgroundColor:"rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:[e.jsx(Qe,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),f.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(l=>e.jsx("div",{className:"px-4 py-2 rounded-lg font-semibold text-center",style:{backgroundColor:"rgba(217, 119, 6, 0.2)",border:"1px solid rgb(217, 119, 6)",color:"rgb(255, 255, 255)"},children:l.name},l.id))})]}),e.jsx("button",{onClick:d,disabled:f.length<2,className:"w-full py-4 rounded-lg font-bold text-xl transition",style:{backgroundColor:f.length<2?"rgb(71, 85, 105)":"rgb(34, 197, 94)",color:"rgb(255, 255, 255)",opacity:f.length<2?.5:1,cursor:f.length<2?"not-allowed":"pointer"},children:f.length<2?"Need at least 2 players":"Start Game"})]})]})})})]})}function Hs({isOpen:u,onClose:G,pendingInvite:b=null}){const{signInWithGoogle:h,signUpWithEmail:g,signInWithEmail:S,continueAsGuest:y}=he(),[P,M]=n.useState(!1),[E,R]=n.useState(null),[z,U]=n.useState("signin"),[j,i]=n.useState(""),[f,w]=n.useState(""),[N,m]=n.useState("");if(!u)return null;const W=()=>{i(""),w(""),m(""),R(null)},k=async()=>{M(!0),R(null);try{await h(),G(),W()}catch(T){R(T.message)}finally{M(!1)}},x=async T=>{T.preventDefault(),M(!0),R(null);try{await S(j,f),G(),W()}catch(F){R(F.code==="auth/user-not-found"?"No account found with this email":F.code==="auth/wrong-password"?"Incorrect password":F.code==="auth/invalid-email"?"Invalid email address":F.message)}finally{M(!1)}},H=async T=>{T.preventDefault(),M(!0),R(null);try{await g(j,f,N),G(),W()}catch(F){R(F.code==="auth/email-already-in-use"?"Email already in use":F.code==="auth/weak-password"?"Password should be at least 6 characters":F.code==="auth/invalid-email"?"Invalid email address":F.message)}finally{M(!1)}},B=T=>{U(T),R(null)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:G}),e.jsxs("div",{className:"relative rounded-2xl shadow-2xl max-w-md w-full p-8",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)"},children:[e.jsx("button",{onClick:G,className:"absolute top-4 right-4 w-8 h-8 rounded-lg transition flex items-center justify-center",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:T=>T.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:T=>T.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"text-center mb-8",children:[b&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"rgba(34, 211, 238, 0.1)",border:"1px solid rgb(34, 211, 238)"},children:[e.jsx("p",{className:"text-sm font-semibold",style:{color:"rgb(34, 211, 238)"},children:"🎳 You've been invited to play!"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"rgb(148, 163, 184)"},children:"Sign in to join the game"})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:z==="signup"?"Create Account":"Welcome Back!"}),e.jsx("p",{className:"text-slate-400",children:z==="email"||z==="signup"?"Sign in to track your stats":"Sign in to track your stats and compete"})]}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 text-sm",children:E}),z==="signin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:k,disabled:P,className:"w-full bg-white text-gray-800 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{onClick:()=>B("email"),disabled:P,className:"w-full bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-slate-700 transition flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-slate-700",children:[e.jsx(qe,{size:20}),"Continue with Email"]}),e.jsx("p",{className:"text-xs text-slate-500 text-center mt-6",children:"Sign in to unlock all games and save your stats permanently"})]}),z==="email"&&e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:j,onChange:T=>i(T.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:f,onChange:T=>w(T.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"••••••••"})]})]}),e.jsx("button",{type:"submit",disabled:P,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Signing In...":"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>B("signup"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Don't have an account? Sign up"})}),e.jsx("button",{type:"button",onClick:()=>B("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"← Back to other options"})]}),z==="signup"&&e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Display Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",value:N,onChange:T=>m(T.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"Your Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"email",value:j,onChange:T=>i(T.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"your@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"password",value:f,onChange:T=>w(T.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500",placeholder:"••••••••"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"At least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:P,className:"w-full bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:shadow-lg hover:shadow-cyan-500/50 transition disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>B("email"),className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"Already have an account? Sign in"})}),e.jsx("button",{type:"button",onClick:()=>B("signin"),className:"w-full text-slate-400 hover:text-white text-sm py-2",children:"← Back to other options"})]})]})]})}function Fs({isOpen:u,onClose:G}){const{currentUser:b,isGuest:h}=he(),[g,S]=n.useState(null),[y,P]=n.useState([]),[M,E]=n.useState(!0),[R,z]=n.useState("stats");n.useEffect(()=>{u&&b&&U()},[u,b]);const U=async()=>{if(b){E(!0);try{const i=D(O,`users/${b.uid}/stats`),f=await V(i);f.exists()?S(f.val()):S({makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}}),await j()}catch(i){console.error("Error fetching stats:",i)}finally{E(!1)}}},j=async()=>{const i=[];try{const f=D(O,"games"),w=await V(f);w.exists()&&Object.entries(w.val()).forEach(([F,$])=>{const Q=$.players?.find(p=>p.uid===b.uid);Q&&i.push({type:"Makes or Misses",code:F,date:$.createdAt||0,players:$.players||[],myScore:Q.score||0,gameStarted:$.gameStarted,currentRound:$.currentRound||0})});const N=D(O,"matchplay"),m=await V(N);m.exists()&&Object.entries(m.val()).forEach(([F,$])=>{($.player1?.uid===b.uid||$.player2?.uid===b.uid)&&i.push({type:"Match Play",code:F,date:$.createdAt||0,player1:$.player1,player2:$.player2,gameStarted:$.gameStarted})});const W=D(O,"kingofthehill"),k=await V(W);k.exists()&&Object.entries(k.val()).forEach(([F,$])=>{$.players?.find(p=>p.uid===b.uid)&&i.push({type:"King of the Hill",code:F,date:$.createdAt||0,players:$.players||[],gameStarted:$.gameStarted})});const x=D(O,"bracketplay"),H=await V(x);H.exists()&&Object.entries(H.val()).forEach(([F,$])=>{$.players?.find(p=>p.uid===b.uid)&&i.push({type:"Bracket Play",code:F,date:$.createdAt||0,players:$.players||[],gameStarted:$.gameStarted})});const B=D(O,"mysteryframes"),T=await V(B);T.exists()&&Object.entries(T.val()).forEach(([F,$])=>{const Q=$.players?.find(p=>p.uid===b.uid);Q&&i.push({type:"Mystery Frames",code:F,date:$.createdAt||0,players:$.players||[],myWinnings:Q.totalWinnings||0,gameStarted:$.gameStarted,currentFrame:$.currentFrame||0})}),i.sort((F,$)=>($.date||0)-(F.date||0)),P(i)}catch(f){console.error("Error fetching game history:",f)}};return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:G}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-4xl w-full p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:G,className:"absolute top-4 right-4 w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:i=>i.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:i=>i.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[b?.photoURL?e.jsx("img",{src:b.photoURL,alt:"Profile",className:"w-16 h-16 rounded-full object-cover",referrerPolicy:"no-referrer",onError:i=>{i.target.style.display="none",i.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-2xl font-bold ${b?.photoURL?"hidden":"flex"}`,children:b?.displayName?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:b?.displayName||"Guest User"}),h&&e.jsx("p",{className:"text-amber-400 text-sm mt-1",children:"Guest Account - Sign in to save stats permanently"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>z("stats"),className:"px-4 py-2 rounded-lg font-semibold transition",style:{backgroundColor:R==="stats"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:R==="stats"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:R==="stats"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(He,{size:16,className:"inline mr-2"}),"Statistics"]}),e.jsxs("button",{onClick:()=>z("history"),className:"px-4 py-2 rounded-lg font-semibold transition",style:{backgroundColor:R==="history"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:R==="history"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:R==="history"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(Ye,{size:16,className:"inline mr-2"}),"Game History (",y.length,")"]})]}),M?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading your stats..."})]}):R==="stats"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx(fe,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Makes or Misses"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(34, 211, 238)"},children:g?.makesOrMisses?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:g?.makesOrMisses?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:g?.makesOrMisses?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(192, 132, 252)"},children:g?.makesOrMisses?.totalPoints||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Points"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:e.jsx(re,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Match Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(52, 211, 153)"},children:g?.matchPlay?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Matches Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(74, 222, 128)"},children:g?.matchPlay?.wins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(248, 113, 113)"},children:g?.matchPlay?.losses||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Losses"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:g?.matchPlay?.ties||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Ties"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:e.jsx(pe,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"King of the Hill"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 191, 36)"},children:g?.kingOfTheHill?.gamesPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:g?.kingOfTheHill?.highGameWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Game Wins"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(251, 146, 60)"},children:g?.kingOfTheHill?.highTotalWins||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"High Total Wins"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:e.jsx(Me,{size:24,className:"text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Bracket Play"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(167, 139, 250)"},children:g?.bracketPlay?.tournamentsPlayed||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(250, 204, 21)"},children:g?.bracketPlay?.championships||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Championships"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"rgb(203, 213, 225)"},children:g?.bracketPlay?.runnerUps||0}),e.jsx("div",{className:"text-sm text-slate-400",children:"Runner-Ups"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(He,{size:24,className:"text-cyan-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Overall Performance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400",children:(g?.makesOrMisses?.gamesPlayed||0)+(g?.matchPlay?.gamesPlayed||0)+(g?.kingOfTheHill?.gamesPlayed||0)+(g?.bracketPlay?.tournamentsPlayed||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Games Played"})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400",children:(g?.makesOrMisses?.wins||0)+(g?.matchPlay?.wins||0)+(g?.kingOfTheHill?.highGameWins||0)+(g?.bracketPlay?.championships||0)}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Wins"})]})]})]})]}):e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{size:48,className:"text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 text-lg",children:"No games found"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Join or create a game to see it here!"})]}):y.map((i,f)=>{const w=k=>{switch(k){case"Makes or Misses":return e.jsx(fe,{size:20,className:"text-cyan-400"});case"Match Play":return e.jsx(re,{size:20,className:"text-emerald-400"});case"King of the Hill":return e.jsx(pe,{size:20,className:"text-amber-400"});case"Bracket Play":return e.jsx(Me,{size:20,className:"text-violet-400"});case"Mystery Frames":return e.jsx(re,{size:20,className:"text-orange-400"});default:return e.jsx(fe,{size:20})}},N=k=>{switch(k){case"Makes or Misses":return"rgb(34, 211, 238)";case"Match Play":return"rgb(52, 211, 153)";case"King of the Hill":return"rgb(251, 191, 36)";case"Bracket Play":return"rgb(167, 139, 250)";case"Mystery Frames":return"rgb(217, 119, 6)";default:return"rgb(71, 85, 105)"}},m=()=>{const k=i.type==="Makes or Misses"?"makes-or-misses":i.type==="Match Play"?"match-play":i.type==="King of the Hill"?"king-of-the-hill":i.type==="Bracket Play"?"bracket-play":i.type==="Mystery Frames"?"mystery-frames":"";return`${window.location.origin}${window.location.pathname}?join=${i.code}&game=${k}`},W=i.type==="Makes or Misses"&&i.players?[...i.players].sort((k,x)=>(x.score||0)-(k.score||0)):null;return e.jsx("div",{className:"bg-slate-800/50 rounded-xl p-4 hover:bg-slate-800/70 transition",style:{border:`1px solid ${N(i.type)}`},children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w(i.type),e.jsx("h3",{className:"font-bold text-white",children:i.type})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(us,{size:14}),e.jsx("span",{children:i.date?new Date(i.date).toLocaleDateString():"Unknown date"})]}),e.jsxs("div",{className:"text-slate-400",children:["Code: ",e.jsx("span",{className:"font-mono text-white",children:i.code})]}),i.players&&e.jsxs("div",{className:"text-slate-400",children:["Players: ",e.jsx("span",{className:"text-white",children:i.players.map(k=>k.name).join(", ")})]}),i.type==="Match Play"&&i.player1&&i.player2&&e.jsxs("div",{className:"text-slate-400",children:[i.player1.name," vs ",i.player2.name]}),i.type==="Makes or Misses"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-cyan-400 font-semibold",children:["My Score: ",i.myScore," points ",i.currentRound&&`(Round ${i.currentRound}/50)`]}),W&&W.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-slate-900/50 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Leaderboard:"}),e.jsx("div",{className:"space-y-1",children:W.slice(0,3).map((k,x)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-white",children:[x===0&&"🥇"," ",x===1&&"🥈"," ",x===2&&"🥉"," ",k.name]}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[k.score," pts"]})]},x))})]})]}),i.type==="Mystery Frames"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-orange-400 font-semibold",children:["My Winnings: $",i.myWinnings?.toFixed(2)||"0.00"," ",i.currentFrame&&`(Frame ${i.currentFrame})`]}),i.players&&i.players.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-slate-900/50 rounded",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Winnings:"}),e.jsx("div",{className:"space-y-1",children:[...i.players].sort((k,x)=>(x.totalWinnings||0)-(k.totalWinnings||0)).slice(0,3).map((k,x)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-white",children:[x===0&&"🥇"," ",x===1&&"🥈"," ",x===2&&"🥉"," ",k.name]}),e.jsxs("span",{className:"text-orange-400 font-semibold",children:["$",(k.totalWinnings||0).toFixed(2)]})]},x))})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:i.gameStarted?"rgba(34, 197, 94, 0.2)":"rgba(251, 191, 36, 0.2)",border:`1px solid ${i.gameStarted?"rgb(34, 197, 94)":"rgb(251, 191, 36)"}`,color:i.gameStarted?"rgb(74, 222, 128)":"rgb(251, 191, 36)"},children:i.gameStarted?"In Progress":"Lobby"}),e.jsx("button",{onClick:()=>{window.location.href=m()},className:"px-3 py-1 rounded text-xs font-semibold transition",style:{backgroundColor:"rgb(8, 145, 178)",color:"rgb(255, 255, 255)"},children:"Rejoin Game"})]})]})},f)})})]})]}):null}function Bs({isOpen:u,onClose:G,onOpenStats:b}){const{currentUser:h,isGuest:g}=he(),[S,y]=n.useState(null),[P,M]=n.useState(!0);n.useEffect(()=>{u&&h&&E()},[u,h]);const E=async()=>{if(h){M(!0);try{const R=D(O,`users/${h.uid}`),z=await V(R);z.exists()&&y(z.val())}catch(R){console.error("Error fetching user profile:",R)}finally{M(!1)}}};return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:G}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-2xl w-full p-6 md:p-8 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:G,className:"absolute top-4 right-4 w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},children:e.jsx(Ne,{size:20})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h?.photoURL?e.jsx("img",{src:h.photoURL,alt:"Profile",className:"w-20 h-20 rounded-full object-cover",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center text-white text-3xl font-bold",children:h?.displayName?.[0]||"G"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:h?.displayName||"Guest User"}),e.jsx("p",{className:"text-slate-400 text-sm",children:h?.email||"Guest Account"}),g&&e.jsx("p",{className:"text-amber-400 text-xs mt-1",children:"Sign in to unlock all features"})]})]}),P?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{onClick:()=>{G(),b()},className:"w-full bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-xl p-4 transition flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-purple-500 flex items-center justify-center",children:e.jsx(He,{size:20,className:"text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-white font-semibold",children:"View Stats & History"}),e.jsx("div",{className:"text-slate-400 text-sm",children:"See your performance across all games"})]})]}),e.jsx("div",{className:"text-slate-400 group-hover:text-white transition",children:"→"})]})}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase mb-3",children:"Account Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Account Type:"}),e.jsx("span",{className:"text-white font-semibold",children:g?"Guest":"Authenticated"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Member Since:"}),e.jsx("span",{className:"text-white",children:S?.createdAt?new Date(S.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Total Games:"}),e.jsx("span",{className:"text-white font-semibold",children:(S?.stats?.makesOrMisses?.gamesPlayed||0)+(S?.stats?.matchPlay?.gamesPlayed||0)+(S?.stats?.kingOfTheHill?.gamesPlayed||0)+(S?.stats?.bracketPlay?.tournamentsPlayed||0)})]})]})]})]})]})]}):null}function Qs({isOpen:u,onClose:G}){const{isAdmin:b,user:h}=he(),g=$s(h),[S,y]=n.useState(!0),[P,M]=n.useState([]),[E,R]=n.useState({makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]}),[z,U]=n.useState({totalUsers:0,totalGames:0,guestUsers:0,authenticatedUsers:0}),[j,i]=n.useState("overview"),[f,w]=n.useState(null),[N,m]=n.useState(null),[W,k]=n.useState([]),[x,H]=n.useState([]),[B,T]=n.useState(!1),[F,$]=n.useState(null),[Q,p]=n.useState(null),[q,Z]=n.useState(null);n.useEffect(()=>{u&&b&&te()},[u,b]);const te=async()=>{y(!0);try{const s=D(O,"users"),t=await V(s),r=t.exists()?t.val():{},o=Object.entries(r).map(([ee,se])=>({uid:ee,...se}));M(o);const c={makesOrMisses:[],matchPlay:[],kingOfTheHill:[],bracketPlay:[]},A=D(O,"games"),I=await V(A);I.exists()&&(c.makesOrMisses=Object.entries(I.val()).map(([ee,se])=>({code:ee,...se})));const l=D(O,"matchplay"),C=await V(l);C.exists()&&(c.matchPlay=Object.entries(C.val()).map(([ee,se])=>({code:ee,...se})));const Y=D(O,"kingofthehill"),_=await V(Y);_.exists()&&(c.kingOfTheHill=Object.entries(_.val()).map(([ee,se])=>({code:ee,...se})));const ue=D(O,"bracketplay"),ge=await V(ue);ge.exists()&&(c.bracketPlay=Object.entries(ge.val()).map(([ee,se])=>({code:ee,...se}))),R(c);const ye=o.filter(ee=>ee.isAnonymous).length,J=c.makesOrMisses.length+c.matchPlay.length+c.kingOfTheHill.length+c.bracketPlay.length;U({totalUsers:o.length,totalGames:J,guestUsers:ye,authenticatedUsers:o.length-ye})}catch(s){console.error("Error fetching admin data:",s)}finally{y(!1)}},ie=async s=>{try{await ke(D(O,`users/${s}`)),await te(),m(null)}catch(t){console.error("Error deleting user:",t),alert("Failed to delete user")}},ce=async(s,t=null)=>{try{const r=D(O,`users/${s}`),o=await V(r);if(o.exists()){const c=o.val();t?c.stats[t]={gamesPlayed:0,totalPoints:0,wins:0,losses:0,...t==="matchPlay"&&{ties:0},...t==="kingOfTheHill"&&{highGameWins:0,highTotalWins:0},...t==="bracketPlay"&&{tournamentsPlayed:0,championships:0,runnerUps:0}}:c.stats={makesOrMisses:{gamesPlayed:0,totalPoints:0,wins:0,losses:0},matchPlay:{gamesPlayed:0,wins:0,losses:0,ties:0},kingOfTheHill:{gamesPlayed:0,highGameWins:0,highTotalWins:0},bracketPlay:{tournamentsPlayed:0,championships:0,runnerUps:0}},await ae(r,c),await te(),m(null)}}catch(r){console.error("Error resetting stats:",r),alert("Failed to reset stats")}},de=async(s,t)=>{try{const r={makesOrMisses:`games/${t}`,matchPlay:`matchplay/${t}`,kingOfTheHill:`kingofthehill/${t}`,bracketPlay:`bracketplay/${t}`};await ke(D(O,r[s])),await te(),m(null)}catch(r){console.error("Error deleting game:",r),alert("Failed to delete game")}},oe=async()=>{try{await Promise.all([ke(D(O,"games")),ke(D(O,"matchplay")),ke(D(O,"kingofthehill")),ke(D(O,"bracketplay"))]),await te(),m(null)}catch(s){console.error("Error deleting all games:",s),alert("Failed to delete all games")}},me=async()=>{try{await Promise.all(W.map(s=>ke(D(O,`users/${s}`)))),await te(),k([]),T(!1),m(null)}catch(s){console.error("Error deleting users:",s),alert("Failed to delete selected users")}},X=()=>{k(B?[]:P.map(s=>s.uid)),T(!B)},le=s=>{if(W.includes(s))k(W.filter(t=>t!==s)),T(!1);else{const t=[...W,s];k(t),t.length===P.length&&T(!0)}},ne=(s,t)=>{$({uid:s,currentCredits:t})},xe=(s,t)=>{p({uid:s,currentSubscription:t||{}})},v=async(s,t)=>{try{const r=D(O,`users/${s}`),o=await V(r);if(o.exists()){const c=o.val();await ae(r,{...c,credits:parseInt(t)||0}),$(null),te()}}catch(r){console.error("Error updating credits:",r),alert("Failed to update credits")}},L=async(s,t,r,o)=>{try{const c=D(O,`users/${s}`),A=await V(c);if(A.exists()){const I=A.val();await ae(c,{...I,subscription:{isActive:t,plan:r||null,startDate:t?Date.now():null,endDate:t&&o?new Date(o).getTime():null,stripeSubscriptionId:null}}),p(null),te()}}catch(c){console.error("Error updating subscription:",c),alert("Failed to update subscription")}},K=(s,t)=>{const r=a(t);Z({uid:s,email:t,currentRole:r})},d=async(s,t,r)=>{try{const o=D(O,`users/${s}`),c=await V(o);if(c.exists()){const A=c.val();await ae(o,{...A,adminRole:r==="user"?null:r}),Z(null),te()}}catch(o){console.error("Error updating role:",o),alert("Failed to update role")}},a=s=>{if(!s)return"user";const t=s.toLowerCase();return t===Ke.toLowerCase()?"superadmin":is.includes(t)?"admin":"user"};return u?b?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:G}),N&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},onClick:()=>m(null)}),e.jsxs("div",{className:"relative rounded-xl p-6 max-w-md w-full",style:{background:"linear-gradient(to bottom right, rgb(30, 41, 59), rgb(51, 65, 85))",border:"2px solid rgb(220, 38, 38)"},children:[e.jsxs("h3",{className:"text-xl font-bold mb-2",style:{color:"rgb(255, 255, 255)"},children:["Confirm ",N.type==="user"?"User Deletion":N.type==="bulk-users"?"Bulk User Deletion":N.type==="bulk-games"?"Bulk Game Deletion":N.type==="game"?"Game Deletion":"Stats Reset"]}),e.jsx("p",{className:"mb-6",style:{color:"rgb(203, 213, 225)"},children:N.type==="user"?`Are you sure you want to delete "${N.name}"? This action cannot be undone.`:N.type==="bulk-users"?`Delete ${W.length} selected user(s)? All user data will be permanently removed. This action cannot be undone.`:N.type==="bulk-games"?`Delete ALL active games (${z.totalGames} total)? All game data will be permanently removed. This action cannot be undone.`:N.type==="game"?`Delete game "${N.name}"? All game data will be permanently removed.`:`Reset ${N.gameType==="all"?"all stats":`${N.gameType} stats`} for "${N.name}"?`}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 py-2 rounded-lg transition",style:{backgroundColor:"rgb(51, 65, 85)",color:"rgb(255, 255, 255)"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="rgb(71, 85, 105)",onMouseLeave:s=>s.currentTarget.style.backgroundColor="rgb(51, 65, 85)",children:"Cancel"}),e.jsx("button",{onClick:()=>{N.type==="user"?ie(N.id):N.type==="bulk-users"?me():N.type==="bulk-games"?oe():N.type==="game"?de(N.gameType,N.id):ce(N.id,N.gameType==="all"?null:N.gameType)},className:"flex-1 py-2 rounded-lg transition font-semibold",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:s=>s.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:N.type==="game"||N.type==="user"||N.type==="bulk-games"||N.type==="bulk-users"?"Delete":"Reset"})]})]})]}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-slate-700 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-cyan-900/50 border-b border-slate-700 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:e.jsx(ze,{size:20,className:"text-white md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-400 text-xs md:text-sm",children:"System Overview & Management"})]})]}),e.jsx("button",{onClick:G,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 flex items-center justify-center transition",style:{color:"rgb(148, 163, 184)"},onMouseEnter:s=>s.currentTarget.style.color="rgb(255, 255, 255)",onMouseLeave:s=>s.currentTarget.style.color="rgb(148, 163, 184)",children:e.jsx(Ne,{size:20})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>i("overview"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:j==="overview"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:j==="overview"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:j==="overview"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(ns,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"}),e.jsx("span",{className:"sm:hidden",children:"Stats"})]}),e.jsxs("button",{onClick:()=>i("users"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:j==="users"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:j==="users"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:j==="users"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(Je,{size:16,className:"inline mr-1 md:mr-2"}),"Users (",z.totalUsers,")"]}),e.jsxs("button",{onClick:()=>i("games"),className:"px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition",style:{backgroundColor:j==="games"?"rgb(8, 145, 178)":"rgb(30, 41, 59)",color:j==="games"?"rgb(255, 255, 255)":"rgb(148, 163, 184)",boxShadow:j==="games"?"0 10px 15px -3px rgba(6, 182, 212, 0.5)":"none"},children:[e.jsx(He,{size:16,className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Active "}),"Games (",z.totalGames,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:S?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"Loading admin data..."})]}):e.jsxs(e.Fragment,{children:[j==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:z.totalUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-green-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:z.authenticatedUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Authenticated"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:z.guestUsers}),e.jsx("div",{className:"text-sm text-slate-400",children:"Guest Users"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-purple-700 rounded-xl p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:z.totalGames}),e.jsx("div",{className:"text-sm text-slate-400",children:"Active Games"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Games by Mode"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{size:32,style:{color:"rgb(34, 211, 238)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:E.makesOrMisses.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Makes or Misses"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{size:32,style:{color:"rgb(52, 211, 153)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:E.matchPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Match Play"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{size:32,style:{color:"rgb(251, 191, 36)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:E.kingOfTheHill.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"King of the Hill"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{size:32,style:{color:"rgb(167, 139, 250)"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:E.bracketPlay.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Bracket Play"})]})]})]})]})]}),j==="users"&&e.jsxs("div",{className:"space-y-4",children:[W.length>0&&e.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-700 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("span",{style:{color:"rgb(34, 211, 238)",fontWeight:600},children:[W.length," user(s) selected"]}),e.jsxs("button",{onClick:()=>m({type:"bulk-users"}),className:"px-4 py-2 rounded-lg transition flex items-center gap-2",style:{backgroundColor:"rgb(220, 38, 38)",color:"rgb(255, 255, 255)"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="rgb(185, 28, 28)",onMouseLeave:s=>s.currentTarget.style.backgroundColor="rgb(220, 38, 38)",children:[e.jsx(we,{size:16}),"Delete Selected"]})]}),e.jsx("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900/50 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-12",children:e.jsx("input",{type:"checkbox",checked:B,onChange:X,className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Credits"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Subscription"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Joined"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase",children:"Total Games"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:P.map(s=>{const t=(s.stats?.makesOrMisses?.gamesPlayed||0)+(s.stats?.matchPlay?.gamesPlayed||0)+(s.stats?.kingOfTheHill?.gamesPlayed||0)+(s.stats?.bracketPlay?.tournamentsPlayed||0);return e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:W.includes(s.uid),onChange:()=>le(s.uid),className:"w-4 h-4 rounded border-slate-600 text-cyan-600 focus:ring-cyan-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.photoURL?e.jsx("img",{src:s.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center text-white text-sm font-bold ${s.photoURL?"hidden":"flex"}`,children:s.displayName?.[0]||"G"}),e.jsx("span",{className:"text-white font-medium",children:s.displayName||"Guest User"})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:s.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:s.isAnonymous?e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(120, 53, 15, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(180, 83, 9)",color:"rgb(251, 191, 36)"},children:"Guest"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold",style:{backgroundColor:"rgba(20, 83, 45, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(21, 128, 61)",color:"rgb(74, 222, 128)"},children:"Authenticated"})}),e.jsx("td",{className:"px-4 py-3",children:(()=>{const r=a(s.email);return r==="superadmin"?e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-semibold flex items-center gap-1 w-fit",style:{backgroundColor:"rgba(147, 51, 234, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(147, 51, 234)",color:"rgb(196, 181, 253)"},children:[e.jsx(ze,{size:12}),"Super Admin"]}):r==="admin"?e.jsxs("button",{onClick:()=>g&&K(s.uid,s.email),className:"px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",style:{backgroundColor:"rgba(6, 182, 212, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(6, 182, 212)",color:"rgb(103, 232, 249)"},disabled:!g,title:g?"Edit Role":"Admin",children:[e.jsx(Xe,{size:12}),"Admin",g&&e.jsx(Ee,{size:10})]}):e.jsxs("button",{onClick:()=>g&&K(s.uid,s.email),className:"text-slate-500 hover:text-slate-400 text-xs font-semibold flex items-center gap-1",disabled:!g,title:g?"Edit Role":"User",children:["User",g&&e.jsx(Ee,{size:10})]})})()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>ne(s.uid,s.credits||0),className:"text-yellow-400 hover:text-yellow-300 font-semibold text-sm flex items-center gap-1",title:"Edit Credits",children:[e.jsx("span",{children:s.credits||0}),e.jsx(Ee,{size:12})]})}),e.jsx("td",{className:"px-4 py-3",children:s.subscription?.isActive&&s.subscription?.endDate&&Date.now()<s.subscription.endDate?e.jsxs("button",{onClick:()=>xe(s.uid,s.subscription),className:"px-2 py-1 rounded text-xs font-semibold flex items-center gap-1",style:{backgroundColor:"rgba(88, 28, 135, 0.3)",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(147, 51, 234)",color:"rgb(196, 181, 253)"},title:"Edit Subscription",children:["✓ Active",e.jsx(Ee,{size:12})]}):e.jsxs("button",{onClick:()=>xe(s.uid,s.subscription),className:"text-slate-500 hover:text-slate-400 text-xs font-semibold flex items-center gap-1",title:"Edit Subscription",children:["None",e.jsx(Ee,{size:12})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-400 text-sm",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),e.jsx("td",{className:"px-4 py-3 text-white font-semibold",children:t}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>m({type:"stats",id:s.uid,name:s.displayName||"User",gameType:"all"}),className:"p-2 bg-amber-900/30 border border-amber-700 rounded hover:bg-amber-900/50 transition",title:"Reset All Stats",children:e.jsx(hs,{size:14,className:"text-amber-400"})}),e.jsx("button",{onClick:()=>m({type:"user",id:s.uid,name:s.displayName||"User"}),className:"p-2 bg-red-900/30 border border-red-700 rounded hover:bg-red-900/50 transition",title:"Delete User",children:e.jsx(we,{size:14,className:"text-red-400"})})]})})]},s.uid)})})]})})})]}),j==="games"&&e.jsxs("div",{className:"space-y-6",children:[z.totalGames>0&&e.jsxs("div",{className:"flex justify-between items-center bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"All Active Games"}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Total: ",z.totalGames," games"]})]}),e.jsxs("button",{onClick:()=>m({type:"bulk-games",id:"all",name:"all games"}),className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(we,{size:18}),"Delete All Games"]})]}),E.makesOrMisses.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-cyan-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(fe,{size:20,className:"text-cyan-400"}),"Makes or Misses (",E.makesOrMisses.length,")"]}),e.jsx("div",{className:"grid gap-2",children:E.makesOrMisses.map(s=>{const t=f===`mom-${s.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-800/50",onClick:()=>w(t?null:`mom-${s.code}`),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t?e.jsx(Ie,{size:16,className:"text-cyan-400"}):e.jsx(De,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-white font-mono font-semibold",children:s.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[s.players?.length||0," players • Round ",s.currentRound||0]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleString():"-"})]}),t&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.players?.map((r,o)=>e.jsxs("div",{className:"flex justify-between bg-slate-900/50 px-3 py-2 rounded",children:[e.jsx("span",{className:"text-slate-300",children:r.name}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[r.score||0," pts"]})]},r.id||o))}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Status:"}),e.jsx("span",{className:"ml-2 text-white",children:s.gameStarted?"In Progress":"Waiting"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Active Player:"}),e.jsx("span",{className:"ml-2 text-white",children:s.players?.[s.activePlayerIndex]?.name||"-"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:r=>{r.stopPropagation(),m({type:"game",id:s.code,name:s.code,gameType:"makesOrMisses"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(we,{size:16}),"Delete Game"]})})]})]},s.code)})})]}),E.matchPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-emerald-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-emerald-400"}),"Match Play (",E.matchPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:E.matchPlay.map(s=>{const t=f===`matchPlay-${s.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>w(t?null:`matchPlay-${s.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:s.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[s.player1?.name||"Player 1"," vs ",s.player2?.name||"Player 2"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleString():"-"}),t?e.jsx(Ie,{size:20}):e.jsx(De,{size:20})]})]}),t&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Match Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 1"}),e.jsx("div",{className:"text-white font-semibold",children:s.player1?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[s.player1?.score||0," points"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Player 2"}),e.jsx("div",{className:"text-white font-semibold",children:s.player2?.name||"Not joined"}),e.jsxs("div",{className:"text-emerald-400 text-sm mt-1",children:[s.player2?.score||0," points"]})]})]}),s.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",s.currentRound," / 10"]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:r=>{r.stopPropagation(),m({type:"game",id:s.code,name:s.code,gameType:"matchPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(we,{size:16}),"Delete Game"]})})]})]},s.code)})})]}),E.kingOfTheHill.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-amber-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(pe,{size:20,className:"text-amber-400"}),"King of the Hill (",E.kingOfTheHill.length,")"]}),e.jsx("div",{className:"grid gap-2",children:E.kingOfTheHill.map(s=>{const t=f===`kingOfTheHill-${s.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>w(t?null:`kingOfTheHill-${s.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:s.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[s.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleString():"-"}),t?e.jsx(Ie,{size:20}):e.jsx(De,{size:20})]})]}),t&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Scores"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:s.players?.map((r,o)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:r.name}),e.jsxs("span",{className:"text-amber-400 font-semibold text-sm",children:[r.score||0," pts"]})]},r.id||o))}),s.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",s.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:r=>{r.stopPropagation(),m({type:"game",id:s.code,name:s.code,gameType:"kingOfTheHill"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(we,{size:16}),"Delete Game"]})})]})]},s.code)})})]}),E.bracketPlay.length>0&&e.jsxs("div",{className:"bg-slate-800/50 border border-violet-700 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Me,{size:20,className:"text-violet-400"}),"Bracket Play (",E.bracketPlay.length,")"]}),e.jsx("div",{className:"grid gap-2",children:E.bracketPlay.map(s=>{const t=f===`bracketPlay-${s.code}`;return e.jsxs("div",{className:"bg-slate-900/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-3 flex justify-between items-center cursor-pointer hover:bg-slate-900/70 transition",onClick:()=>w(t?null:`bracketPlay-${s.code}`),children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-mono font-semibold",children:s.code}),e.jsxs("span",{className:"text-slate-400 text-sm ml-3",children:[s.players?.length||0," players"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-slate-500",children:s.createdAt?new Date(s.createdAt).toLocaleString():"-"}),t?e.jsx(Ie,{size:20}):e.jsx(De,{size:20})]})]}),t&&e.jsxs("div",{className:"px-6 py-4 bg-slate-800/30 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Players & Standings"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:s.players?.map((r,o)=>e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:r.name}),e.jsxs("span",{className:"text-violet-400 font-semibold text-sm",children:[r.wins||0," wins"]})]},r.id||o))}),s.currentRound&&e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Round: ",s.currentRound]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:r=>{r.stopPropagation(),m({type:"game",id:s.code,name:s.code,gameType:"bracketPlay"})},className:"px-4 py-2 bg-red-900/30 border border-red-700 rounded-lg hover:bg-red-900/50 transition flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(we,{size:16}),"Delete Game"]})})]})]},s.code)})})]}),z.totalGames===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"No active games"})})]})]})})]}),F&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>$(null)}),e.jsxs("div",{className:"relative bg-slate-800 border border-yellow-600 rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"💰"})," Edit User Credits"]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.target.credits.value;v(F.uid,t)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Credits Amount"}),e.jsx("input",{type:"number",name:"credits",defaultValue:F.currentCredits,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-yellow-500 focus:outline-none",min:"0",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>$(null),className:"flex-1 bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition font-semibold",children:"Save Changes"})]})]})]})]}),Q&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>p(null)}),e.jsxs("div",{className:"relative bg-slate-800 border border-purple-600 rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-400",children:"👑"})," Edit User Subscription"]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.target.isActive.checked,r=s.target.plan.value,o=s.target.endDate.value;L(Q.uid,t,r,o)},children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",defaultChecked:Q.currentSubscription?.isActive||!1,className:"w-4 h-4 rounded border-slate-600 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-300",children:"Active Subscription"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Plan Type"}),e.jsxs("select",{name:"plan",defaultValue:Q.currentSubscription?.plan||"monthly",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",defaultValue:Q.currentSubscription?.endDate?new Date(Q.currentSubscription.endDate).toISOString().split("T")[0]:"",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>p(null),className:"flex-1 bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition font-semibold",children:"Save Changes"})]})]})]})]}),q&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>Z(null)}),e.jsxs("div",{className:"relative bg-slate-800 border border-cyan-600 rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Xe,{className:"text-cyan-400",size:24}),"Edit User Role"]}),e.jsxs("div",{className:"mb-4 p-3 bg-slate-900/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400",children:"User Email"}),e.jsx("div",{className:"text-white font-mono",children:q.email||"No email"})]}),q.currentRole==="superadmin"?e.jsx("div",{className:"mb-4 p-4 bg-purple-900/20 border border-purple-700 rounded-lg",children:e.jsxs("p",{className:"text-purple-300 text-sm",children:[e.jsx(ze,{size:16,className:"inline mr-2"}),"Super Admin role cannot be changed. This is the ultimate administrator."]})}):e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.target.role.value;d(q.uid,q.email,t)},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Role"}),e.jsxs("select",{name:"role",defaultValue:q.currentRole,className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white focus:border-cyan-500 focus:outline-none",children:[e.jsx("option",{value:"user",children:"User (Regular access)"}),e.jsx("option",{value:"admin",children:"Admin (Dashboard access)"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Admins can view and manage users, games, and statistics."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>Z(null),className:"flex-1 bg-slate-700 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-700 transition font-semibold",children:"Save Changes"})]})]})]})]})]}):e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:G}),e.jsxs("div",{className:"relative bg-slate-900 border-2 border-red-700 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx(ze,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx("button",{onClick:G,className:"bg-slate-700 text-white px-6 py-2 rounded-lg hover:bg-slate-600 transition",children:"Close"})]})]}):null}const Be=[{id:"668e3aca-5106-4c24-a9c1-2bd89926ebad",name:"Sunshine Lanes",url:"https://livescore.lanetalk.com/livescoring/668e3aca-5106-4c24-a9c1-2bd89926ebad"},{id:"15903a3d-a2f1-48d8-ab8b-97c9476b688a",name:"Enterprise Lanes",url:"https://livescore.lanetalk.com/livescoring/15903a3d-a2f1-48d8-ab8b-97c9476b688a"},{id:"4fc22569-ae38-44cf-9d2d-78d7034be9b7",name:"G3 Entertainment LLC",url:"https://livescore.lanetalk.com/livescoring/4fc22569-ae38-44cf-9d2d-78d7034be9b7"}],ds=Be[0],qs=u=>{const G=Be.find(b=>b.id===u)||ds;return{finished:`${G.url}?tab=finished&q=&order=date&sort=asc`,scores:`${G.url}?tab=scores`,live:G.url}};function _s({isOpen:u,onClose:G}){const[b,h]=n.useState(ds.id);if(!u)return null;const g=qs(b),S=Be.find(y=>y.id===b);return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},children:e.jsxs("div",{className:"rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(251, 191, 36)",boxShadow:"0 25px 50px -12px rgba(251, 191, 36, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex justify-between items-center flex-shrink-0",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{size:28,style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Top Bowlers"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(254, 243, 199)"},children:"Weekly Leaderboard"})]})]}),e.jsxs("button",{onClick:G,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:y=>y.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:y=>y.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(Se,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-4 md:p-6 flex-shrink-0",style:{borderBottom:"1px solid rgb(51, 65, 85)"},children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",style:{color:"rgb(148, 163, 184)"},children:"Select Bowling Center"}),e.jsx("select",{value:b,onChange:y=>h(y.target.value),className:"w-full px-4 py-3 rounded-lg focus:outline-none",style:{backgroundColor:"rgb(30, 41, 59)",border:"1px solid rgb(71, 85, 105)",color:"rgb(255, 255, 255)"},children:Be.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))})]}),e.jsx("div",{className:"p-6 flex-1",children:e.jsxs("div",{className:"rounded-xl p-8 text-center",style:{backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgb(51, 65, 85)"},children:[e.jsx(re,{size:80,className:"mx-auto mb-6",style:{color:"rgb(251, 191, 36)"}}),e.jsxs("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:["View ",S?.name," Leaderboard"]}),e.jsx("p",{className:"mb-8 text-lg",style:{color:"rgb(148, 163, 184)"},children:"Click below to view the weekly top bowlers on Lanetalk Live Scoring"}),e.jsxs("a",{href:g.scores,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-8 py-4 font-bold rounded-lg transition text-lg",style:{background:"linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",color:"rgb(255, 255, 255)",boxShadow:"0 10px 15px -3px rgba(217, 119, 6, 0.5)"},onMouseEnter:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(180, 83, 9), rgb(146, 64, 14))",onMouseLeave:y=>y.currentTarget.style.background="linear-gradient(to right, rgb(217, 119, 6), rgb(180, 83, 9))",children:[e.jsx(re,{size:24}),"View Top Bowlers",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})})]})})}function Js({isOpen:u,onClose:G}){return u?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},onClick:G}),e.jsxs("div",{className:"relative rounded-2xl max-w-lg w-full",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59))",border:"2px solid rgb(51, 65, 85)",boxShadow:"0 25px 50px -12px rgba(59, 130, 246, 0.3)"},children:[e.jsxs("div",{className:"p-4 md:p-6 flex items-center justify-between",style:{background:"linear-gradient(to right, rgb(37, 99, 235), rgb(139, 92, 246))"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{size:24,className:"md:hidden",style:{color:"rgb(255, 255, 255)"}}),e.jsx(Fe,{size:28,className:"hidden md:block",style:{color:"rgb(255, 255, 255)"}}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:"rgb(255, 255, 255)"},children:"Import Game Scores"}),e.jsx("p",{className:"text-xs md:text-sm",style:{color:"rgb(219, 234, 254)"},children:"Add completed game results to your stats"})]})]}),e.jsxs("button",{onClick:G,className:"px-4 py-2 rounded-lg transition flex items-center gap-2 text-sm md:text-base font-semibold",style:{backgroundColor:"rgb(30, 41, 59)",color:"rgb(255, 255, 255)"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="rgb(51, 65, 85)",onMouseLeave:b=>b.currentTarget.style.backgroundColor="rgb(30, 41, 59)",children:[e.jsx(Se,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Games"})]})]}),e.jsxs("div",{className:"p-8 md:p-12 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx(bs,{size:80,className:"mx-auto",style:{color:"rgb(251, 191, 36)"}})}),e.jsx("h3",{className:"text-2xl font-bold mb-4",style:{color:"rgb(255, 255, 255)"},children:"Coming Soon!"}),e.jsx("p",{className:"text-lg mb-6",style:{color:"rgb(148, 163, 184)"},children:"We're working on an exciting feature that will allow you to automatically import your bowling scores and track your progress over time."}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgb(59, 130, 246)"},children:[e.jsx("p",{className:"text-sm",style:{color:"rgb(147, 197, 253)"},children:e.jsx("strong",{children:"What's Coming:"})}),e.jsxs("ul",{className:"text-sm mt-2 space-y-1",style:{color:"rgb(148, 163, 184)"},children:[e.jsx("li",{children:"✓ Automatic score detection from Lanetalk"}),e.jsx("li",{children:"✓ Historical game tracking"}),e.jsx("li",{children:"✓ Performance analytics and trends"}),e.jsx("li",{children:"✓ Personalized statistics dashboard"})]})]})]})]})]}):null}function Ks(){const[u,G]=n.useState(null),[b,h]=n.useState(null),[g,S]=n.useState(!1),[y,P]=n.useState(!1),[M,E]=n.useState(!1),[R,z]=n.useState(!1),[U,j]=n.useState(!1),[i,f]=n.useState(!1),[w,N]=n.useState(!1),[m,W]=n.useState(null),{currentUser:k,isGuest:x,isAdmin:H,signOut:B}=he(),T=n.useRef(null);n.useEffect(()=>{const p=new URLSearchParams(window.location.search),q=p.get("join"),Z=p.get("game");q&&Z&&(W({gameId:Z,joinCode:q.toUpperCase()}),!k||x?S(!0):G(Z))},[k,x]),n.useEffect(()=>{m&&k&&!x&&(G(m.gameId),window.history.replaceState({},document.title,window.location.pathname))},[k,x,m]),n.useEffect(()=>{const p=q=>{T.current&&!T.current.contains(q.target)&&P(!1)};return y&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[y]);const F=[{id:"makes-or-misses",name:"Makes or Misses",description:"Predict if you make or miss the next shot",icon:fe,gradient:"from-cyan-500 via-blue-500 to-indigo-600",glowColor:"shadow-cyan-500/50",badge:"🎯 Quick Play",available:!0},{id:"match-play",name:"Match Play",description:"Head-to-head 3-game match",icon:re,gradient:"from-emerald-500 via-teal-500 to-cyan-600",glowColor:"shadow-emerald-500/50",badge:"⚡ 1v1 Battle",available:!0},{id:"king-of-the-hill",name:"King of the Hill",description:"High game takes it all",icon:pe,gradient:"from-amber-500 via-orange-500 to-red-600",glowColor:"shadow-amber-500/50",badge:"👑 Multiplayer",available:!0},{id:"bracket-play",name:"Bracket Play",description:"8-player single elimination bracket",icon:Me,gradient:"from-violet-500 via-purple-500 to-fuchsia-600",glowColor:"shadow-violet-500/50",badge:"🏆 Tournament",available:!0},{id:"mystery-frames",name:"Mystery Frames",description:"Quarters game with strike-based mystery bonuses",icon:je,gradient:"from-amber-500 via-yellow-500 to-orange-600",glowColor:"shadow-amber-500/50",badge:"⚡ Quarters + Bonus",available:!0}],$=p=>{F.find(Z=>Z.id===p).available&&G(p)},Q=()=>{G(null)};return u==="makes-or-misses"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-cyan-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Se,{size:20}),"Back to Games"]}),e.jsx(Us,{})]}):u==="match-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-emerald-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Se,{size:20}),"Back to Games"]}),e.jsx(Is,{})]}):u==="king-of-the-hill"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Se,{size:20}),"Back to Games"]}),e.jsx(Ds,{})]}):u==="bracket-play"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-violet-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-violet-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Se,{size:20}),"Back to Games"]}),e.jsx(Os,{})]}):u==="mystery-frames"?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("button",{onClick:Q,className:"fixed top-6 left-6 z-50 bg-gradient-to-r from-amber-500 to-yellow-500 text-white px-6 py-3 rounded-xl shadow-2xl hover:shadow-amber-500/50 hover:scale-105 transition-all flex items-center gap-2 font-bold",children:[e.jsx(Se,{size:20}),"Back to Games"]}),e.jsx(Ws,{})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-4 right-4 md:top-6 md:right-6 z-50",children:e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{onClick:()=>P(!y),className:"flex items-center gap-2 md:gap-3 bg-slate-900/80 backdrop-blur-sm border border-slate-700 rounded-full px-3 py-2 md:px-4 hover:bg-slate-800 transition",children:[k?.photoURL?e.jsx("img",{src:k.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover",referrerPolicy:"no-referrer",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-8 h-8 rounded-full bg-gradient-to-br from-cyan-500 to-purple-500 items-center justify-center ${k?.photoURL?"hidden":"flex"}`,children:e.jsx(We,{size:20,className:"text-white"})}),e.jsxs("span",{className:"text-white font-semibold text-sm md:text-base hidden sm:inline",children:[k?.displayName||"Guest",x&&e.jsx("span",{className:"text-slate-400 text-sm ml-1",children:"(Guest)"})]})]}),y&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 sm:w-64 rounded-xl overflow-hidden z-50",style:{background:"linear-gradient(to bottom right, rgb(15, 23, 42), rgb(30, 41, 59), rgb(15, 23, 42))",borderColor:"rgba(51, 65, 85, 0.5)",border:"1px solid rgba(51, 65, 85, 0.5)",boxShadow:"0 25px 50px -12px rgba(168, 85, 247, 0.2)",backdropFilter:"blur(8px)"},children:[x&&e.jsxs("button",{onClick:()=>{S(!0),P(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(34, 211, 238)",backgroundColor:"transparent",borderBottom:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[e.jsx(We,{size:18}),"Sign In / Register"]}),e.jsxs("button",{onClick:()=>{z(!0),P(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(241, 245, 249)",backgroundColor:"transparent"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[e.jsx(We,{size:18}),"My Profile"]}),e.jsxs("button",{onClick:()=>{E(!0),P(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(241, 245, 249)",backgroundColor:"transparent"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[e.jsx(ns,{size:18}),"View Stats"]}),H&&e.jsxs("button",{onClick:()=>{j(!0),P(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(192, 132, 252)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[e.jsx(ze,{size:18}),"Admin Dashboard"]}),!x&&e.jsxs("button",{onClick:async()=>{await B(),P(!1)},className:"w-full px-4 py-3 text-left transition flex items-center gap-3",style:{color:"rgb(248, 113, 113)",backgroundColor:"transparent",borderTop:"1px solid rgba(51, 65, 85, 0.5)"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="rgba(51, 65, 85, 0.5)",onMouseLeave:p=>p.currentTarget.style.backgroundColor="transparent",children:[e.jsx(ps,{size:18}),"Sign Out"]})]})]})}),e.jsx(Hs,{isOpen:g,onClose:()=>S(!1),pendingInvite:m}),e.jsx(Bs,{isOpen:R,onClose:()=>z(!1),onOpenStats:()=>E(!0)}),e.jsx(Fs,{isOpen:M,onClose:()=>E(!1)}),e.jsx(Qs,{isOpen:U,onClose:()=>j(!1)}),e.jsx(_s,{isOpen:i,onClose:()=>f(!1)}),e.jsx(Js,{isOpen:w,onClose:()=>N(!1)}),e.jsx("div",{className:"relative z-10 min-h-screen p-4 md:p-6 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl w-full",children:[e.jsxs("div",{className:"text-center mb-12 md:mb-16 space-y-4 pt-16 sm:pt-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 md:gap-3 bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20 rounded-full px-4 md:px-6 py-2 mb-4",children:[e.jsx(es,{className:"text-purple-400",size:16}),e.jsx("span",{className:"text-purple-300 text-xs md:text-sm font-semibold tracking-wide",children:"MULTIPLAYER BOWLING GAMES"})]}),e.jsx("h1",{className:"text-7xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 mb-4 tracking-tight",children:"BOWLING FUN"}),e.jsx("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-light",children:"Choose your battleground and dominate the lanes with friends"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-12",children:[F.map(p=>{const q=p.icon,Z=b===p.id;return e.jsxs("button",{onClick:()=>$(p.id),onMouseEnter:()=>h(p.id),onMouseLeave:()=>h(null),disabled:!p.available,className:`group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 ${p.available?"hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl":"opacity-40 cursor-not-allowed"}`,children:[Z&&p.available&&e.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${p.gradient} rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:p.badge})}),e.jsx("div",{className:`relative w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br ${p.gradient} flex items-center justify-center transform ${p.available?"group-hover:scale-110 group-hover:rotate-6":""} transition-all duration-500 shadow-lg ${Z?p.glowColor+" shadow-2xl":""}`,children:e.jsx(q,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:p.name}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:p.description}),p.available?e.jsxs("div",{className:`flex items-center justify-center gap-2 bg-gradient-to-r ${p.gradient} px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300`,children:[e.jsx(je,{size:16}),e.jsx("span",{children:"PLAY NOW"})]}):e.jsx("div",{className:"inline-flex items-center gap-2 bg-slate-800 text-slate-500 px-4 py-2.5 rounded-lg text-sm font-semibold",children:"🔒 Coming Soon"})]})]},p.id)}),e.jsxs("button",{onClick:()=>f(!0),onMouseEnter:()=>h("top-bowlers"),onMouseLeave:()=>h(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[b==="top-bowlers"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"🏆 Leaderboard"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-amber-500 via-yellow-500 to-orange-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-amber-500/50 hover:shadow-2xl",children:e.jsx(re,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Check Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Weekly leaderboard from your bowling center"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(es,{size:16}),e.jsx("span",{children:"VIEW LEADERS"})]})]})]}),k&&!x&&e.jsxs("button",{onClick:()=>N(!0),onMouseEnter:()=>h("import-scores"),onMouseLeave:()=>h(null),className:"group relative bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 transition-all duration-500 hover:scale-105 hover:border-slate-700 cursor-pointer hover:shadow-2xl",children:[b==="import-scores"&&e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:"bg-slate-900 border border-slate-700 px-3 py-1 rounded-full text-xs font-bold text-slate-300",children:"📊 Track Stats"})}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg hover:shadow-blue-500/50 hover:shadow-2xl",children:e.jsx(Fe,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2 tracking-tight",children:"Import Scores"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6 leading-relaxed",children:"Add your completed game scores"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600 px-4 py-2.5 rounded-lg text-white text-sm font-bold shadow-lg transform group-hover:shadow-xl transition-all duration-300",children:[e.jsx(Fe,{size:16}),e.jsx("span",{children:"ADD SCORES"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:"5"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Game Modes"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"∞"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Multiplayer Fun"})]}),e.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-sm border border-slate-800 rounded-xl px-8 py-4",children:[e.jsx("div",{className:"text-3xl font-bold",children:"🎳"}),e.jsx("div",{className:"text-slate-500 text-sm font-semibold",children:"Real-Time Sync"})]})]})]})})]})}Rs.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(As,{children:e.jsx(Ks,{})})}));
